/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/locales/en.json
var require_en = __commonJS({
  "src/locales/en.json"(exports, module2) {
    module2.exports = {
      OPEN_CARD_NAVIGATOR: "Open Card Navigator",
      CARD_NAVIGATOR: "Card Navigator",
      COPY_AS_LINK: "Copy as Link",
      COPY_CARD_CONTENT: "Copy Card Content",
      LINK_COPIED_TO_CLIPBOARD: "Link copied to clipboard",
      FAILED_TO_COPY_LINK: "Failed to copy link",
      CARD_CONTENT_COPIED_TO_CLIPBOARD: "Card content copied to clipboard",
      FAILED_TO_COPY_CARD_CONTENT: "Failed to copy card content",
      SEARCH_PLACEHOLDER: "Search...",
      SORT_CARDS: "Sort cards",
      SETTINGS: "Settings",
      PRESET_SETTINGS: "Preset Settings",
      GLOBAL_PRESET: "Global Preset",
      SORT_FILE_NAME_ASC: "File name(A to Z)",
      SORT_FILE_NAME_DESC: "File name(Z to A)",
      SORT_LAST_MODIFIED_DESC: "Last modified(newest first)",
      SORT_LAST_MODIFIED_ASC: "Last modified(oldest first)",
      SORT_CREATED_DESC: "Created(newest first)",
      SORT_CREATED_ASC: "Created(oldest first)",
      SHOW_FILE_NAME: "Show file name",
      SHOW_FIRST_HEADER: "Show first header",
      SHOW_BODY: "Show body",
      TOGGLE_FILE_NAME_DISPLAY: "Toggle file name display",
      TOGGLE_FIRST_HEADER_DISPLAY: "Toggle first header display",
      TOGGLE_BODY_DISPLAY: "Toggle body display",
      FILE_NAME_FONT_SIZE: "File name font size",
      FIRST_HEADER_FONT_SIZE: "First header font size",
      BODY_FONT_SIZE: "Body font size",
      SET_FILE_NAME_FONT_SIZE: "Set font size for file name",
      SET_FIRST_HEADER_FONT_SIZE: "Set font size for first header",
      SET_BODY_FONT_SIZE: "Set font size for body",
      SCROLL_UP_ONE_CARD: "Scroll up one card",
      SCROLL_DOWN_ONE_CARD: "Scroll down one card",
      SCROLL_LEFT_ONE_CARD: "Scroll left one card",
      SCROLL_RIGHT_ONE_CARD: "Scroll right one card",
      SCROLL_UP_LEFT_ONE_PAGE: "Scroll up/left one page",
      SCROLL_DOWN_RIGHT_ONE_PAGE: "Scroll down/right one page",
      CENTER_ACTIVE_CARD: "Center active card",
      MOVE_FOCUS_TO_CARD_NAVIGATOR: "Move focus to Card Navigator",
      OPEN_CARD_CONTEXT_MENU: "Open card context menu",
      MOVE_UP_ONE_CARD: "Move up by one card.",
      MOVE_DOWN_ONE_CARD: "Move down by one card.",
      MOVE_LEFT_ONE_CARD: "Move left by one card.",
      MOVE_RIGHT_ONE_CARD: "Move right by one card.",
      MOVE_UP_LEFT_ONE_PAGE: "Move up/left by one page of cards.",
      MOVE_DOWN_RIGHT_ONE_PAGE: "Move down/right by one page of cards.",
      CENTER_CURRENTLY_ACTIVE_CARD: "Center the currently active card.",
      SET_FOCUS_TO_CARD_NAVIGATOR: "Set focus to the Card Navigator.",
      OPEN_CONTEXT_MENU_FOR_FOCUSED_CARD: "Open the context menu for the focused card.",
      CONFIRM_DELETE: "Confirm Delete",
      CONFIRM_DELETE_ITEM: "Are you sure you want to delete?",
      CANCEL: "Cancel",
      ERROR_SAVING_SETTINGS: "Error saving settings:",
      ERROR_SAVING_DEFAULT_PRESET: "Error saving default preset:",
      ERROR_LOADING_PRESET_FROM_FILE: "Error loading preset from file {{fileName}}:",
      ERROR_SAVING_NEW_PRESET: "Error saving new preset {{presetName}}:",
      PRESET_FOLDER: "Preset Folder",
      SELECT_PRESET_FOLDER: "First, create a folder within your Vault to save preset files in JSON format and select that folder. For existing folders, manually move the preset files to the newly designated folder and then safely delete the old folder.",
      PRESET_FOLDER_PLACEHOLDER: "e.g. CardNavigatorPresets",
      PRESET_MANAGEMENT_AND_GLOBAL_SETTINGS: "Preset Management and Global Settings",
      PRESET_MANAGEMENT_DESC: "You can create a new preset with the current settings or create a new preset by entering data in JSON format. You can edit, copy, delete, export presets and set them as global presets.",
      CREATE_NEW_PRESET: "Create new preset",
      IMPORT_PRESET: "Import preset",
      NO_DESCRIPTION: "No description",
      EDIT: "Edit",
      CLONE: "Clone",
      DELETE: "Delete",
      EXPORT: "Export",
      SET_AS_GLOBAL_PRESET: "Set as global preset",
      PRESET_NAME: "Name",
      PRESET_DELETED_NOTICE: "Preset deleted and default preset applied",
      AUTO_APPLY_PRESETS: "Auto Apply Presets",
      AUTO_APPLY_PRESETS_DESC: "Automatically apply presets when opening files.",
      AUTO_APPLY_FOLDER_PRESET: "Auto Apply Folder Presets",
      AUTO_APPLY_FOLDER_PRESET_DESC: "Automatically apply folder-specific presets when opening files in different folders. If no preset is found for a folder, the global preset will be applied.",
      ADD_NEW_FOLDER_PRESET: "Add New Folder Preset",
      ADD_NEW_FOLDER_PRESET_DESC: "Add a new folder-specific preset.",
      PRESET_ALREADY_EXISTS: "Preset already exists",
      FOLDER: "Folder",
      PRESET_ALREADY_EXISTS_FOR_FOLDER: "Preset already exists for this folder",
      PRESET: "Preset",
      MOVE_DOWN: "Move down",
      PRESET_NOT_FOUND: "Preset '{{name}}' not found",
      SOURCE_PRESET_NOT_FOUND: "Source preset '{{name}}' not found",
      PRESET_ALREADY_EXISTS_WITH_NAME: "Preset '{{name}}' already exists",
      INVALID_PRESET_FORMAT: "Invalid preset format",
      PRESET_IMPORT_FAILED: "Failed to import preset: {{error}}",
      GLOBAL_PRESET_NOT_SET: "Global preset is not set",
      CONTAINER_SETTINGS: "Container settings",
      SOURCE_FOLDER: "Source folder",
      SOURCE_FOLDER_DESC: "Choose whether to display notes from the active folder or from a selected folder as cards in the Card Navigator.",
      SELECT_FOLDER: "Select source folder",
      SELECT_FOLDER_DESC: "Select a folder for Card Navigator",
      SELECT_FOLDER_PLACEHOLDER: "Select folder",
      DEFAULT_SORT_METHOD: "Default sort method",
      DEFAULT_SORT_METHOD_DESC: "Choose the default sorting method for cards.",
      CENTER_ACTIVE_CARD_ON_OPEN: "Center active card on open",
      CENTER_ACTIVE_CARD_ON_OPEN_DESC: "Automatically center the active card when opening the Card Navigator",
      LAYOUT_SETTINGS: "Layout settings",
      DEFAULT_LAYOUT: "Default layout",
      DEFAULT_LAYOUT_DESC: "Choose the default layout for Card Navigator.",
      AUTO: "Auto",
      LIST: "List",
      GRID: "Grid",
      MASONRY: "Masonry",
      CARD_WIDTH_THRESHOLD: "Card width threshold",
      CARD_WIDTH_THRESHOLD_DESC: "Card width threshold for adding/removing columns in auto layout",
      ALIGN_CARD_HEIGHT: "Align card height",
      ALIGN_CARD_HEIGHT_DESC: "If enabled, all cards will have the same height(Grid). If disabled, card height will adjust to content(Masonry).",
      CARDS_PER_VIEW: "Cards per view",
      CARDS_PER_VIEW_DESC: "Number of cards to display at once in list layout when card heights are equal",
      GRID_COLUMNS: "Grid columns",
      GRID_COLUMNS_DESC: "Number of columns in grid layout",
      GRID_CARD_HEIGHT: "Grid card height",
      GRID_CARD_HEIGHT_DESC: "Card height in grid layout",
      MASONRY_COLUMNS: "Masonry columns",
      MASONRY_COLUMNS_DESC: "Number of columns in masonry layout",
      CARD_CONTENT_SETTINGS: "Card content settings",
      RENDER_CONTENT_AS_HTML: "Render content as HTML",
      RENDER_CONTENT_AS_HTML_DESC: "When activated, the card content is rendered in HTML. If the content is not displayed properly or errors occur, adjust the body length limit.",
      DRAG_AND_DROP_CONTENT: "Drag and drop content",
      DRAG_AND_DROP_CONTENT_DESC: "When enabled, dragging a card will insert the content of the card selected below instead of a link.",
      BODY_LENGTH_LIMIT: "Body length limit",
      BODY_LENGTH_LIMIT_DESC: "Toggle between limited and unlimited body length.",
      BODY_LENGTH: "Body length",
      BODY_LENGTH_DESC: "Set the maximum body length displayed on each card when body length is limited.",
      CARD_STYLING_SETTINGS: "Card styling settings",
      FILE_NAME_FONT_SIZE_DESC: "Set the font size for file names in cards",
      FIRST_HEADER_FONT_SIZE_DESC: "Set the font size for the first header in cards",
      BODY_FONT_SIZE_DESC: "Set the font size for the body text in cards",
      KEYBOARD_SHORTCUTS: "Keyboard shortcuts",
      KEYBOARD_SHORTCUTS_DESC: "Card Navigator provides the following features that can be assigned keyboard shortcuts. You can set these up in Obsidian's Hotkeys settings:",
      COMMAND: "Command",
      DESCRIPTION: "Description",
      KEYBOARD_SHORTCUTS_CUSTOMIZE_NOTE: 'To set up shortcuts for these actions, go to Settings \u2192 Hotkeys and search for "Card Navigator". You can then assign your preferred key combinations for each action.',
      KEYBOARD_SHORTCUTS_ADDITIONAL_NOTE: "Note: Some shortcuts like arrow keys for navigation and Enter for opening cards are built-in and cannot be customized.",
      ENTER_PRESET_NAME: "Enter preset name",
      ENTER_PRESET_NAME_PLACEHOLDER: "Enter preset name",
      ENTER_PRESET_DESCRIPTION: "Enter preset description",
      ENTER_PRESET_DESCRIPTION_PLACEHOLDER: "Enter preset description",
      PRESET_DATA: "Preset Data",
      EDIT_PRESET_DATA_DESC: "Edit preset data (JSON format)",
      PRESET_DATA_PLACEHOLDER: "Enter preset data in JSON format",
      UPDATE_WITH_CURRENT_SETTINGS: "Update with current settings",
      SAVE: "Save",
      EDIT_PRESET: "Edit Preset",
      CLONE_PRESET: "Clone Preset",
      PRESET_COPY: "Copy of {{name}}",
      ENTER_PRESET_NAME_NOTICE: "Please enter a preset name",
      PRESET_DATA_EMPTY: "Preset data cannot be empty",
      PRESET_SAVED: "Preset '{{name}}' saved",
      FAILED_TO_SAVE_PRESET: "Failed to save preset",
      PRESET_SAVE_FAILED: "Failed to save preset: {{error}}",
      PASTE_PRESET_JSON_HERE: "Paste preset JSON here",
      IMPORT: "Import",
      INVALID_PRESET_DATA: "Invalid preset data",
      PRESET_IMPORTED_SUCCESSFULLY: "Preset '{{name}}' imported successfully",
      UNKNOWN_ERROR_DURING_IMPORT: "Unknown error occurred during import",
      EXPORT_PRESET: "Export Preset",
      COPY: "Copy",
      PRESET_JSON_COPIED: "Preset JSON copied to clipboard",
      ERROR_LOADING_PRESET: "Error loading preset",
      NO_PRESET_SELECTED: "No preset selected"
    };
  }
});

// src/locales/ko.json
var require_ko = __commonJS({
  "src/locales/ko.json"(exports, module2) {
    module2.exports = {
      OPEN_CARD_NAVIGATOR: "\uCE74\uB4DC \uB124\uBE44\uAC8C\uC774\uD130 \uC5F4\uAE30",
      CARD_NAVIGATOR: "\uCE74\uB4DC \uB124\uBE44\uAC8C\uC774\uD130",
      COPY_AS_LINK: "\uB9C1\uD06C\uB85C \uBCF5\uC0AC",
      COPY_CARD_CONTENT: "\uCE74\uB4DC \uB0B4\uC6A9 \uBCF5\uC0AC",
      LINK_COPIED_TO_CLIPBOARD: "\uB9C1\uD06C\uAC00 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4",
      FAILED_TO_COPY_LINK: "\uB9C1\uD06C \uBCF5\uC0AC \uC2E4\uD328",
      CARD_CONTENT_COPIED_TO_CLIPBOARD: "\uCE74\uB4DC \uB0B4\uC6A9\uC774 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4",
      FAILED_TO_COPY_CARD_CONTENT: "\uCE74\uB4DC \uB0B4\uC6A9 \uBCF5\uC0AC \uC2E4\uD328",
      SEARCH_PLACEHOLDER: "\uAC80\uC0C9...",
      SORT_CARDS: "\uCE74\uB4DC \uC815\uB82C",
      SETTINGS: "\uC124\uC815",
      PRESET_SETTINGS: "\uD504\uB9AC\uC14B \uC124\uC815",
      GLOBAL_PRESET: "\uC804\uC5ED \uD504\uB9AC\uC14B",
      SORT_FILE_NAME_ASC: "\uD30C\uC77C \uC774\uB984(\uC54C\uD30C\uBCB3\uC21C)",
      SORT_FILE_NAME_DESC: "\uD30C\uC77C \uC774\uB984(\uC54C\uD30C\uBCB3 \uC5ED\uC21C)",
      SORT_LAST_MODIFIED_DESC: "\uC5C5\uB370\uC774\uD2B8 \uB0A0\uC9DC(\uCD5C\uC2E0\uC21C)",
      SORT_LAST_MODIFIED_ASC: "\uC5C5\uB370\uC774\uD2B8 \uB0A0\uC9DC(\uC624\uB798\uB41C \uC21C)",
      SORT_CREATED_DESC: "\uC791\uC131\uC77C(\uCD5C\uC2E0\uC21C)",
      SORT_CREATED_ASC: "\uC791\uC131\uC77C(\uC624\uB798\uB41C \uC21C)",
      SHOW_FILE_NAME: "\uD30C\uC77C \uC774\uB984 \uD45C\uC2DC",
      SHOW_FIRST_HEADER: "\uCCAB \uBC88\uC9F8 \uD5E4\uB354 \uD45C\uC2DC",
      SHOW_BODY: "\uBCF8\uBB38 \uD45C\uC2DC",
      TOGGLE_FILE_NAME_DISPLAY: "\uD30C\uC77C \uC774\uB984 \uD45C\uC2DC \uD1A0\uAE00",
      TOGGLE_FIRST_HEADER_DISPLAY: "\uCCAB \uBC88\uC9F8 \uD5E4\uB354 \uD45C\uC2DC \uD1A0\uAE00",
      TOGGLE_BODY_DISPLAY: "\uBCF8\uBB38 \uD45C\uC2DC \uD1A0\uAE00",
      FILE_NAME_FONT_SIZE: "\uD30C\uC77C \uC774\uB984 \uAE00\uAF34 \uD06C\uAE30",
      FIRST_HEADER_FONT_SIZE: "\uCCAB \uBC88\uC9F8 \uD5E4\uB354 \uAE00\uAF34 \uD06C\uAE30",
      BODY_FONT_SIZE: "\uBCF8\uBB38 \uAE00\uAF34 \uD06C\uAE30",
      SET_FILE_NAME_FONT_SIZE: "\uD30C\uC77C \uC774\uB984 \uAE00\uAF34 \uD06C\uAE30 \uC124\uC815",
      SET_FIRST_HEADER_FONT_SIZE: "\uCCAB \uBC88\uC9F8 \uD5E4\uB354 \uAE00\uAF34 \uD06C\uAE30 \uC124\uC815",
      SET_BODY_FONT_SIZE: "\uBCF8\uBB38 \uAE00\uAF34 \uD06C\uAE30 \uC124\uC815",
      SCROLL_UP_ONE_CARD: "\uCE74\uB4DC \uD558\uB098\uB9CC\uD07C \uC704\uB85C \uC2A4\uD06C\uB864",
      SCROLL_DOWN_ONE_CARD: "\uCE74\uB4DC \uD558\uB098\uB9CC\uD07C \uC544\uB798\uB85C \uC2A4\uD06C\uB864",
      SCROLL_LEFT_ONE_CARD: "\uCE74\uB4DC \uD558\uB098\uB9CC\uD07C \uC67C\uCABD\uC73C\uB85C \uC2A4\uD06C\uB864",
      SCROLL_RIGHT_ONE_CARD: "\uCE74\uB4DC \uD558\uB098\uB9CC\uD07C \uC624\uB978\uCABD\uC73C\uB85C \uC2A4\uD06C\uB864",
      SCROLL_UP_LEFT_ONE_PAGE: "\uD55C \uD398\uC774\uC9C0 \uC704\uB85C/\uC67C\uCABD\uC73C\uB85C \uC2A4\uD06C\uB864",
      SCROLL_DOWN_RIGHT_ONE_PAGE: "\uD55C \uD398\uC774\uC9C0 \uC544\uB798\uB85C/\uC624\uB978\uCABD\uC73C\uB85C \uC2A4\uD06C\uB864",
      CENTER_ACTIVE_CARD: "\uD65C\uC131 \uCE74\uB4DC \uC911\uC559 \uC815\uB82C",
      MOVE_FOCUS_TO_CARD_NAVIGATOR: "\uCE74\uB4DC \uB124\uBE44\uAC8C\uC774\uD130\uB85C \uD3EC\uCEE4\uC2A4 \uC774\uB3D9",
      OPEN_CARD_CONTEXT_MENU: "\uCE74\uB4DC \uCEE8\uD14D\uC2A4\uD2B8 \uBA54\uB274 \uC5F4\uAE30",
      MOVE_UP_ONE_CARD: "\uCE74\uB4DC \uD558\uB098\uB9CC\uD07C \uC704\uB85C \uC774\uB3D9",
      MOVE_DOWN_ONE_CARD: "\uCE74\uB4DC \uD558\uB098\uB9CC\uD07C \uC544\uB798\uB85C \uC774\uB3D9",
      MOVE_LEFT_ONE_CARD: "\uCE74\uB4DC \uD558\uB098\uB9CC\uD07C \uC67C\uCABD\uC73C\uB85C \uC774\uB3D9",
      MOVE_RIGHT_ONE_CARD: "\uCE74\uB4DC \uD558\uB098\uB9CC\uD07C \uC624\uB978\uCABD\uC73C\uB85C \uC774\uB3D9",
      MOVE_UP_LEFT_ONE_PAGE: "\uD55C \uD398\uC774\uC9C0 \uC704\uB85C/\uC67C\uCABD\uC73C\uB85C \uC774\uB3D9",
      MOVE_DOWN_RIGHT_ONE_PAGE: "\uD55C \uD398\uC774\uC9C0 \uC544\uB798\uB85C/\uC624\uB978\uCABD\uC73C\uB85C \uC774\uB3D9",
      CENTER_CURRENTLY_ACTIVE_CARD: "\uD604\uC7AC \uD65C\uC131 \uCE74\uB4DC\uB97C \uC911\uC559\uC5D0 \uBC30\uCE58",
      SET_FOCUS_TO_CARD_NAVIGATOR: "\uCE74\uB4DC \uB124\uBE44\uAC8C\uC774\uD130\uC5D0 \uD3EC\uCEE4\uC2A4 \uC124\uC815",
      OPEN_CONTEXT_MENU_FOR_FOCUSED_CARD: "\uD3EC\uCEE4\uC2A4\uB41C \uCE74\uB4DC\uC758 \uCEE8\uD14D\uC2A4\uD2B8 \uBA54\uB274 \uC5F4\uAE30",
      CONFIRM_DELETE: "\uC0AD\uC81C \uD655\uC778",
      CONFIRM_DELETE_ITEM: "\uC815\uB9D0\uB85C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",
      CANCEL: "\uCDE8\uC18C",
      ERROR_SAVING_SETTINGS: "\uC124\uC815 \uC800\uC7A5 \uC911 \uC624\uB958 \uBC1C\uC0DD:",
      ERROR_SAVING_DEFAULT_PRESET: "\uAE30\uBCF8 \uD504\uB9AC\uC14B \uC800\uC7A5 \uC911 \uC624\uB958 \uBC1C\uC0DD:",
      ERROR_LOADING_PRESET_FROM_FILE: "{{fileName}} \uD30C\uC77C\uC5D0\uC11C \uD504\uB9AC\uC14B \uB85C\uB529 \uC911 \uC624\uB958 \uBC1C\uC0DD:",
      ERROR_SAVING_NEW_PRESET: "\uC0C8 \uD504\uB9AC\uC14B {{presetName}} \uC800\uC7A5 \uC911 \uC624\uB958 \uBC1C\uC0DD:",
      PRESET_FOLDER: "\uD504\uB9AC\uC14B \uD3F4\uB354",
      SELECT_PRESET_FOLDER: "\uBA3C\uC800 Vault \uB0B4\uC5D0 JSON \uD615\uC2DD\uC758 \uD504\uB9AC\uC14B \uD30C\uC77C\uC744 \uC800\uC7A5\uD560 \uD3F4\uB354\uB97C \uB9CC\uB4E4\uACE0 \uADF8 \uD3F4\uB354\uB97C \uC120\uD0DD\uD558\uC138\uC694. \uAE30\uC874\uC758 \uD3F4\uB354\uB294 \uD504\uB9AC\uC14B \uD30C\uC77C\uC744 \uC0C8\uB85C \uC9C0\uC815\uD55C \uD3F4\uB354\uC5D0 \uC218\uB3D9\uC73C\uB85C \uC62E\uAE34 \uD6C4 \uC548\uC804\uD558\uAC8C \uC0AD\uC81C\uD558\uC138\uC694.",
      PRESET_FOLDER_PLACEHOLDER: "\uC608: CardNavigatorPresets",
      PRESET_MANAGEMENT_AND_GLOBAL_SETTINGS: "\uD504\uB9AC\uC14B \uAD00\uB9AC \uBC0F \uC804\uC5ED \uC124\uC815",
      PRESET_MANAGEMENT_DESC: "\uD604\uC7AC \uC124\uC815\uC73C\uB85C \uD504\uB9AC\uC14B\uC744 \uC0C8\uB85C \uB9CC\uB4E4\uAC70\uB098 JSON \uD615\uC2DD\uC758 \uB370\uC774\uD130\uB97C \uC785\uB825\uD558\uC5EC \uC0C8 \uD504\uB9AC\uC14B\uC744 \uB9CC\uB4E4 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uD504\uB9AC\uC14B\uC744 \uD3B8\uC9D1, \uBCF5\uC0AC, \uC0AD\uC81C, \uB0B4\uBCF4\uB0B4\uAE30 \uBC0F \uC804\uC5ED \uD504\uB9AC\uC14B\uC73C\uB85C \uC124\uC815 \uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.",
      CREATE_NEW_PRESET: "\uC0C8 \uD504\uB9AC\uC14B \uC0DD\uC131",
      IMPORT_PRESET: "\uD504\uB9AC\uC14B \uAC00\uC838\uC624\uAE30",
      NO_DESCRIPTION: "\uC124\uBA85 \uC5C6\uC74C",
      EDIT: "\uD3B8\uC9D1",
      CLONE: "\uBCF5\uC81C",
      DELETE: "\uC0AD\uC81C",
      EXPORT: "\uB0B4\uBCF4\uB0B4\uAE30",
      SET_AS_GLOBAL_PRESET: "\uC804\uC5ED \uD504\uB9AC\uC14B\uC73C\uB85C \uC124\uC815",
      PRESET_NAME: "\uC774\uB984",
      PRESET_DELETED_NOTICE: "\uD504\uB9AC\uC14B\uC774 \uC0AD\uC81C\uB418\uACE0 \uAE30\uBCF8 \uD504\uB9AC\uC14B\uC774 \uC801\uC6A9\uB418\uC5C8\uC2B5\uB2C8\uB2E4",
      AUTO_APPLY_PRESETS: "\uD504\uB9AC\uC14B \uC790\uB3D9 \uC801\uC6A9",
      AUTO_APPLY_PRESETS_DESC: "\uD30C\uC77C\uC744 \uC5F4 \uB54C \uD504\uB9AC\uC14B\uC744 \uC790\uB3D9\uC73C\uB85C \uC801\uC6A9\uD569\uB2C8\uB2E4.",
      AUTO_APPLY_FOLDER_PRESET: "\uD3F4\uB354\uBCC4 \uD504\uB9AC\uC14B \uC790\uB3D9 \uC801\uC6A9",
      AUTO_APPLY_FOLDER_PRESET_DESC: "\uB2E4\uB978 \uD3F4\uB354\uC758 \uD30C\uC77C\uC744 \uC5F4 \uB54C \uD3F4\uB354\uBCC4 \uD504\uB9AC\uC14B\uC744 \uC790\uB3D9\uC73C\uB85C \uC801\uC6A9\uD569\uB2C8\uB2E4. \uD3F4\uB354\uC5D0 \uD504\uB9AC\uC14B\uC774 \uC5C6\uC73C\uBA74 \uC804\uC5ED \uD504\uB9AC\uC14B\uC774 \uC801\uC6A9\uB429\uB2C8\uB2E4.",
      ADD_NEW_FOLDER_PRESET: "\uC0C8 \uD3F4\uB354 \uD504\uB9AC\uC14B \uCD94\uAC00",
      ADD_NEW_FOLDER_PRESET_DESC: "\uC0C8\uB85C\uC6B4 \uD3F4\uB354\uBCC4 \uD504\uB9AC\uC14B\uC744 \uCD94\uAC00\uD569\uB2C8\uB2E4.",
      PRESET_ALREADY_EXISTS: "\uD504\uB9AC\uC14B\uC774 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4",
      FOLDER: "\uD3F4\uB354",
      PRESET_ALREADY_EXISTS_FOR_FOLDER: "\uC774 \uD3F4\uB354\uC5D0 \uB300\uD55C \uD504\uB9AC\uC14B\uC774 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4",
      PRESET: "\uD504\uB9AC\uC14B",
      MOVE_DOWN: "\uC544\uB798\uB85C \uC774\uB3D9",
      PRESET_NOT_FOUND: "\uD504\uB9AC\uC14B '{{name}}'\uC744(\uB97C) \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4",
      SOURCE_PRESET_NOT_FOUND: "\uC18C\uC2A4 \uD504\uB9AC\uC14B '{{name}}'\uC744(\uB97C) \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4",
      PRESET_ALREADY_EXISTS_WITH_NAME: "\uD504\uB9AC\uC14B '{{name}}'\uC774(\uAC00) \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4",
      INVALID_PRESET_FORMAT: "\uC798\uBABB\uB41C \uD504\uB9AC\uC14B \uD615\uC2DD\uC785\uB2C8\uB2E4",
      PRESET_IMPORT_FAILED: "\uD504\uB9AC\uC14B \uAC00\uC838\uC624\uAE30 \uC2E4\uD328: {{error}}",
      GLOBAL_PRESET_NOT_SET: "\uC804\uC5ED \uD504\uB9AC\uC14B\uC774 \uC124\uC815\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4",
      CONTAINER_SETTINGS: "\uCEE8\uD14C\uC774\uB108 \uC124\uC815",
      SOURCE_FOLDER: "\uC18C\uC2A4 \uD3F4\uB354",
      SOURCE_FOLDER_DESC: "\uCE74\uB4DC \uB124\uBE44\uAC8C\uC774\uD130\uC5D0\uC11C \uD65C\uC131 \uD3F4\uB354\uC758 \uB178\uD2B8\uB97C \uCE74\uB4DC\uB85C \uD45C\uC2DC\uD560\uC9C0 \uC120\uD0DD\uD55C \uD3F4\uB354\uC758 \uB178\uD2B8\uB97C \uCE74\uB4DC\uB85C \uD45C\uC2DC\uD560\uC9C0 \uC120\uD0DD\uD558\uC138\uC694.",
      SELECT_FOLDER: "\uD3F4\uB354 \uC120\uD0DD",
      SELECT_FOLDER_DESC: "\uC18C\uC2A4 \uD3F4\uB354 \uC120\uD0DD",
      SELECT_FOLDER_PLACEHOLDER: "\uD3F4\uB354 \uC120\uD0DD",
      DEFAULT_SORT_METHOD: "\uAE30\uBCF8 \uC815\uB82C \uBC29\uBC95",
      DEFAULT_SORT_METHOD_DESC: "\uCE74\uB4DC\uC758 \uAE30\uBCF8 \uC815\uB82C \uBC29\uBC95\uC744 \uC120\uD0DD\uD558\uC138\uC694.",
      CENTER_ACTIVE_CARD_ON_OPEN: "\uC5F4 \uB54C \uD65C\uC131 \uCE74\uB4DC \uC911\uC559 \uC815\uB82C",
      CENTER_ACTIVE_CARD_ON_OPEN_DESC: "\uCE74\uB4DC \uB124\uBE44\uAC8C\uC774\uD130\uB97C \uC5F4 \uB54C \uC790\uB3D9\uC73C\uB85C \uD65C\uC131 \uCE74\uB4DC\uB97C \uC911\uC559\uC5D0 \uC815\uB82C\uD569\uB2C8\uB2E4",
      LAYOUT_SETTINGS: "\uB808\uC774\uC544\uC6C3 \uC124\uC815",
      DEFAULT_LAYOUT: "\uAE30\uBCF8 \uB808\uC774\uC544\uC6C3",
      DEFAULT_LAYOUT_DESC: "\uCE74\uB4DC \uB124\uBE44\uAC8C\uC774\uD130\uC758 \uAE30\uBCF8 \uB808\uC774\uC544\uC6C3\uC744 \uC120\uD0DD\uD558\uC138\uC694.",
      AUTO: "\uC790\uB3D9",
      LIST: "\uBAA9\uB85D",
      GRID: "\uADF8\uB9AC\uB4DC",
      MASONRY: "\uB9E4\uC18C\uB2C8",
      CARD_WIDTH_THRESHOLD: "\uCE74\uB4DC \uB108\uBE44 \uC784\uACC4\uAC12",
      CARD_WIDTH_THRESHOLD_DESC: "\uC790\uB3D9 \uB808\uC774\uC544\uC6C3\uC5D0\uC11C \uC5F4 \uCD94\uAC00/\uC81C\uAC70\uB97C \uC704\uD55C \uCE74\uB4DC \uB108\uBE44 \uC784\uACC4\uAC12",
      ALIGN_CARD_HEIGHT: "\uCE74\uB4DC \uB192\uC774 \uC815\uB82C",
      ALIGN_CARD_HEIGHT_DESC: "\uD65C\uC131\uD654\uD558\uBA74 \uBAA8\uB4E0 \uCE74\uB4DC\uC758 \uB192\uC774\uAC00 \uB3D9\uC77C\uD569\uB2C8\uB2E4(\uADF8\uB9AC\uB4DC). \uBE44\uD65C\uC131\uD654\uD558\uBA74 \uCE74\uB4DC \uB192\uC774\uAC00 \uB0B4\uC6A9\uC5D0 \uB9DE\uAC8C \uC870\uC815\uB429\uB2C8\uB2E4(\uB9E4\uC18C\uB2C8).",
      CARDS_PER_VIEW: "\uBDF0\uB2F9 \uCE74\uB4DC \uC218",
      CARDS_PER_VIEW_DESC: "\uB9AC\uC2A4\uD2B8 \uB808\uC774\uC544\uC6C3\uC5D0\uC11C \uCE74\uB4DC\uC758 \uB192\uC774\uAC00 \uAC19\uC744 \uB54C \uD55C \uBC88\uC5D0 \uD45C\uC2DC\uD560 \uCE74\uB4DC \uC218",
      GRID_COLUMNS: "\uADF8\uB9AC\uB4DC \uC5F4",
      GRID_COLUMNS_DESC: "\uADF8\uB9AC\uB4DC \uB808\uC774\uC544\uC6C3\uC758 \uC5F4 \uC218",
      GRID_CARD_HEIGHT: "\uADF8\uB9AC\uB4DC \uCE74\uB4DC \uB192\uC774",
      GRID_CARD_HEIGHT_DESC: "\uADF8\uB9AC\uB4DC \uB808\uC774\uC544\uC6C3\uC758 \uCE74\uB4DC \uB192\uC774",
      MASONRY_COLUMNS: "\uB9E4\uC18C\uB2C8 \uC5F4",
      MASONRY_COLUMNS_DESC: "\uB9E4\uC18C\uB2C8 \uB808\uC774\uC544\uC6C3\uC758 \uC5F4 \uC218",
      CARD_CONTENT_SETTINGS: "\uCE74\uB4DC \uB0B4\uC6A9 \uC124\uC815",
      RENDER_CONTENT_AS_HTML: "HTML\uB85C \uB0B4\uC6A9 \uB80C\uB354\uB9C1",
      RENDER_CONTENT_AS_HTML_DESC: "\uD65C\uC131\uD654\uD558\uBA74 \uCE74\uB4DC \uB0B4\uC6A9\uC774 HTML\uB85C \uB80C\uB354\uB9C1\uB429\uB2C8\uB2E4. \uB0B4\uC6A9\uC774 \uC798 \uD45C\uC2DC\uB418\uC9C0 \uC54A\uAC70\uB098 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD560 \uB54C\uC5D0\uB294 \uBCF8\uBB38 \uAE38\uC774 \uC81C\uD55C\uC744 \uC870\uC815\uD558\uC138\uC694.",
      DRAG_AND_DROP_CONTENT: "\uB0B4\uC6A9 \uB4DC\uB798\uADF8 \uC564 \uB4DC\uB86D",
      DRAG_AND_DROP_CONTENT_DESC: "\uD65C\uC131\uD654\uD558\uBA74 \uCE74\uB4DC\uB97C \uB4DC\uB798\uADF8\uD560 \uB54C \uB9C1\uD06C \uB300\uC2E0 \uC544\uB798\uC5D0\uC11C \uC120\uD0DD\uD55C \uCE74\uB4DC\uC758 \uB0B4\uC6A9\uC774 \uC0BD\uC785\uB429\uB2C8\uB2E4.",
      BODY_LENGTH_LIMIT: "\uBCF8\uBB38 \uAE38\uC774 \uC81C\uD55C",
      BODY_LENGTH_LIMIT_DESC: "\uC81C\uD55C\uB41C \uBCF8\uBB38 \uAE38\uC774\uC640 \uBB34\uC81C\uD55C \uBCF8\uBB38 \uAE38\uC774 \uC0AC\uC774\uB97C \uC804\uD658\uD569\uB2C8\uB2E4.",
      BODY_LENGTH: "\uBCF8\uBB38 \uAE38\uC774",
      BODY_LENGTH_DESC: "\uBCF8\uBB38 \uAE38\uC774\uAC00 \uC81C\uD55C\uB41C \uACBD\uC6B0 \uAC01 \uCE74\uB4DC\uC5D0 \uD45C\uC2DC\uB418\uB294 \uCD5C\uB300 \uBCF8\uBB38 \uAE38\uC774\uB97C \uC124\uC815\uD569\uB2C8\uB2E4.",
      CARD_STYLING_SETTINGS: "\uCE74\uB4DC \uC2A4\uD0C0\uC77C \uC124\uC815",
      FILE_NAME_FONT_SIZE_DESC: "\uCE74\uB4DC\uC758 \uD30C\uC77C \uC774\uB984 \uAE00\uAF34 \uD06C\uAE30 \uC124\uC815",
      FIRST_HEADER_FONT_SIZE_DESC: "\uCE74\uB4DC\uC758 \uCCAB \uBC88\uC9F8 \uD5E4\uB354 \uAE00\uAF34 \uD06C\uAE30 \uC124\uC815",
      BODY_FONT_SIZE_DESC: "\uCE74\uB4DC\uC758 \uBCF8\uBB38 \uD14D\uC2A4\uD2B8 \uAE00\uAF34 \uD06C\uAE30 \uC124\uC815",
      KEYBOARD_SHORTCUTS: "\uD0A4\uBCF4\uB4DC \uB2E8\uCD95\uD0A4",
      KEYBOARD_SHORTCUTS_DESC: "\uCE74\uB4DC \uB124\uBE44\uAC8C\uC774\uD130\uB294 \uB2E4\uC74C \uAE30\uB2A5\uB4E4\uC5D0 \uD0A4\uBCF4\uB4DC \uB2E8\uCD95\uD0A4\uB97C \uD560\uB2F9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. Obsidian\uC758 \uB2E8\uCD95\uD0A4 \uC124\uC815\uC5D0\uC11C \uC774\uB97C \uC124\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4:",
      COMMAND: "\uBA85\uB839",
      DESCRIPTION: "\uC124\uBA85",
      KEYBOARD_SHORTCUTS_CUSTOMIZE_NOTE: '\uC774 \uC791\uC5C5\uB4E4\uC758 \uB2E8\uCD95\uD0A4\uB97C \uC124\uC815\uD558\uB824\uBA74 \uC124\uC815 \u2192 \uB2E8\uCD95\uD0A4\uB85C \uC774\uB3D9\uD558\uC5EC "Card Navigator"\uB97C \uAC80\uC0C9\uD558\uC138\uC694. \uADF8\uB7F0 \uB2E4\uC74C \uAC01 \uC791\uC5C5\uC5D0 \uB300\uD574 \uC6D0\uD558\uB294 \uD0A4 \uC870\uD569\uC744 \uD560\uB2F9\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.',
      KEYBOARD_SHORTCUTS_ADDITIONAL_NOTE: "\uCC38\uACE0: \uD0D0\uC0C9\uC744 \uC704\uD55C \uD654\uC0B4\uD45C \uD0A4\uC640 \uCE74\uB4DC\uB97C \uC5F4\uAE30 \uC704\uD55C Enter \uD0A4\uC640 \uAC19\uC740 \uC77C\uBD80 \uB2E8\uCD95\uD0A4\uB294 \uB0B4\uC7A5\uB418\uC5B4 \uC788\uC73C\uBA70 \uC0AC\uC6A9\uC790 \uC815\uC758\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",
      ENTER_PRESET_NAME: "\uD504\uB9AC\uC14B \uC774\uB984 \uC785\uB825",
      ENTER_PRESET_NAME_PLACEHOLDER: "\uD504\uB9AC\uC14B \uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694",
      ENTER_PRESET_DESCRIPTION: "\uD504\uB9AC\uC14B \uC124\uBA85 \uC785\uB825",
      ENTER_PRESET_DESCRIPTION_PLACEHOLDER: "\uD504\uB9AC\uC14B \uC124\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694",
      PRESET_DATA: "\uD504\uB9AC\uC14B \uB370\uC774\uD130",
      EDIT_PRESET_DATA_DESC: "\uD504\uB9AC\uC14B \uB370\uC774\uD130 \uD3B8\uC9D1 (JSON \uD615\uC2DD)",
      PRESET_DATA_PLACEHOLDER: "JSON \uD615\uC2DD\uC73C\uB85C \uD504\uB9AC\uC14B \uB370\uC774\uD130\uB97C \uC785\uB825\uD558\uC138\uC694",
      UPDATE_WITH_CURRENT_SETTINGS: "\uD604\uC7AC \uC124\uC815\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8",
      SAVE: "\uC800\uC7A5",
      EDIT_PRESET: "\uD504\uB9AC\uC14B \uD3B8\uC9D1",
      CLONE_PRESET: "\uD504\uB9AC\uC14B \uBCF5\uC81C",
      PRESET_COPY: "{{name}}\uC758 \uBCF5\uC0AC\uBCF8",
      ENTER_PRESET_NAME_NOTICE: "\uD504\uB9AC\uC14B \uC774\uB984\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694",
      PRESET_DATA_EMPTY: "\uD504\uB9AC\uC14B \uB370\uC774\uD130\uB294 \uBE44\uC6CC\uB458 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4",
      PRESET_SAVED: "'{{name}}' \uD504\uB9AC\uC14B\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4",
      FAILED_TO_SAVE_PRESET: "\uD504\uB9AC\uC14B \uC800\uC7A5 \uC2E4\uD328",
      PRESET_SAVE_FAILED: "\uD504\uB9AC\uC14B \uC800\uC7A5 \uC2E4\uD328: {{error}}",
      PASTE_PRESET_JSON_HERE: "\uC5EC\uAE30\uC5D0 \uD504\uB9AC\uC14B JSON\uC744 \uBD99\uC5EC\uB123\uC73C\uC138\uC694",
      IMPORT: "\uAC00\uC838\uC624\uAE30",
      INVALID_PRESET_DATA: "\uC798\uBABB\uB41C \uD504\uB9AC\uC14B \uB370\uC774\uD130",
      PRESET_IMPORTED_SUCCESSFULLY: "\uD504\uB9AC\uC14B '{{name}}'\uC744(\uB97C) \uC131\uACF5\uC801\uC73C\uB85C \uAC00\uC838\uC654\uC2B5\uB2C8\uB2E4",
      UNKNOWN_ERROR_DURING_IMPORT: "\uAC00\uC838\uC624\uAE30 \uC911 \uC54C \uC218 \uC5C6\uB294 \uC624\uB958 \uBC1C\uC0DD",
      EXPORT_PRESET: "\uD504\uB9AC\uC14B \uB0B4\uBCF4\uB0B4\uAE30",
      COPY: "\uBCF5\uC0AC",
      PRESET_JSON_COPIED: "\uD504\uB9AC\uC14B JSON\uC774 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4",
      ERROR_LOADING_PRESET: "\uD504\uB9AC\uC14B \uB85C\uB529 \uC911 \uC624\uB958 \uBC1C\uC0DD",
      NO_PRESET_SELECTED: "\uC120\uD0DD\uB41C \uD504\uB9AC\uC14B \uC5C6\uC74C"
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => CardNavigatorPlugin,
  languageResources: () => languageResources,
  translationLanguage: () => translationLanguage
});
module.exports = __toCommonJS(main_exports);
var import_obsidian22 = require("obsidian");

// src/ui/cardNavigator.ts
var import_obsidian8 = require("obsidian");

// src/ui/toolbar/toolbar.ts
var import_obsidian4 = require("obsidian");

// src/ui/toolbar/toolbarActions.ts
var import_obsidian3 = require("obsidian");

// src/ui/settings/components/FolderSuggest.ts
var import_obsidian2 = require("obsidian");

// src/ui/settings/components/suggest.ts
var import_obsidian = require("obsidian");

// node_modules/@popperjs/core/lib/enums.js
var top = "top";
var bottom = "bottom";
var right = "right";
var left = "left";
var auto = "auto";
var basePlacements = [top, bottom, right, left];
var start = "start";
var end = "end";
var clippingParents = "clippingParents";
var viewport = "viewport";
var popper = "popper";
var reference = "reference";
var variationPlacements = /* @__PURE__ */ basePlacements.reduce(function(acc, placement) {
  return acc.concat([placement + "-" + start, placement + "-" + end]);
}, []);
var placements = /* @__PURE__ */ [].concat(basePlacements, [auto]).reduce(function(acc, placement) {
  return acc.concat([placement, placement + "-" + start, placement + "-" + end]);
}, []);
var beforeRead = "beforeRead";
var read = "read";
var afterRead = "afterRead";
var beforeMain = "beforeMain";
var main = "main";
var afterMain = "afterMain";
var beforeWrite = "beforeWrite";
var write = "write";
var afterWrite = "afterWrite";
var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];

// node_modules/@popperjs/core/lib/dom-utils/getNodeName.js
function getNodeName(element) {
  return element ? (element.nodeName || "").toLowerCase() : null;
}

// node_modules/@popperjs/core/lib/dom-utils/getWindow.js
function getWindow(node) {
  if (node == null) {
    return window;
  }
  if (node.toString() !== "[object Window]") {
    var ownerDocument = node.ownerDocument;
    return ownerDocument ? ownerDocument.defaultView || window : window;
  }
  return node;
}

// node_modules/@popperjs/core/lib/dom-utils/instanceOf.js
function isElement(node) {
  var OwnElement = getWindow(node).Element;
  return node instanceof OwnElement || node instanceof Element;
}
function isHTMLElement(node) {
  var OwnElement = getWindow(node).HTMLElement;
  return node instanceof OwnElement || node instanceof HTMLElement;
}
function isShadowRoot(node) {
  if (typeof ShadowRoot === "undefined") {
    return false;
  }
  var OwnElement = getWindow(node).ShadowRoot;
  return node instanceof OwnElement || node instanceof ShadowRoot;
}

// node_modules/@popperjs/core/lib/modifiers/applyStyles.js
function applyStyles(_ref) {
  var state = _ref.state;
  Object.keys(state.elements).forEach(function(name) {
    var style = state.styles[name] || {};
    var attributes = state.attributes[name] || {};
    var element = state.elements[name];
    if (!isHTMLElement(element) || !getNodeName(element)) {
      return;
    }
    Object.assign(element.style, style);
    Object.keys(attributes).forEach(function(name2) {
      var value = attributes[name2];
      if (value === false) {
        element.removeAttribute(name2);
      } else {
        element.setAttribute(name2, value === true ? "" : value);
      }
    });
  });
}
function effect(_ref2) {
  var state = _ref2.state;
  var initialStyles = {
    popper: {
      position: state.options.strategy,
      left: "0",
      top: "0",
      margin: "0"
    },
    arrow: {
      position: "absolute"
    },
    reference: {}
  };
  Object.assign(state.elements.popper.style, initialStyles.popper);
  state.styles = initialStyles;
  if (state.elements.arrow) {
    Object.assign(state.elements.arrow.style, initialStyles.arrow);
  }
  return function() {
    Object.keys(state.elements).forEach(function(name) {
      var element = state.elements[name];
      var attributes = state.attributes[name] || {};
      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]);
      var style = styleProperties.reduce(function(style2, property) {
        style2[property] = "";
        return style2;
      }, {});
      if (!isHTMLElement(element) || !getNodeName(element)) {
        return;
      }
      Object.assign(element.style, style);
      Object.keys(attributes).forEach(function(attribute) {
        element.removeAttribute(attribute);
      });
    });
  };
}
var applyStyles_default = {
  name: "applyStyles",
  enabled: true,
  phase: "write",
  fn: applyStyles,
  effect,
  requires: ["computeStyles"]
};

// node_modules/@popperjs/core/lib/utils/getBasePlacement.js
function getBasePlacement(placement) {
  return placement.split("-")[0];
}

// node_modules/@popperjs/core/lib/utils/math.js
var max = Math.max;
var min = Math.min;
var round = Math.round;

// node_modules/@popperjs/core/lib/utils/userAgent.js
function getUAString() {
  var uaData = navigator.userAgentData;
  if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {
    return uaData.brands.map(function(item) {
      return item.brand + "/" + item.version;
    }).join(" ");
  }
  return navigator.userAgent;
}

// node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js
function isLayoutViewport() {
  return !/^((?!chrome|android).)*safari/i.test(getUAString());
}

// node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js
function getBoundingClientRect(element, includeScale, isFixedStrategy) {
  if (includeScale === void 0) {
    includeScale = false;
  }
  if (isFixedStrategy === void 0) {
    isFixedStrategy = false;
  }
  var clientRect = element.getBoundingClientRect();
  var scaleX = 1;
  var scaleY = 1;
  if (includeScale && isHTMLElement(element)) {
    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;
    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;
  }
  var _ref = isElement(element) ? getWindow(element) : window, visualViewport = _ref.visualViewport;
  var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;
  var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;
  var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;
  var width = clientRect.width / scaleX;
  var height = clientRect.height / scaleY;
  return {
    width,
    height,
    top: y,
    right: x + width,
    bottom: y + height,
    left: x,
    x,
    y
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js
function getLayoutRect(element) {
  var clientRect = getBoundingClientRect(element);
  var width = element.offsetWidth;
  var height = element.offsetHeight;
  if (Math.abs(clientRect.width - width) <= 1) {
    width = clientRect.width;
  }
  if (Math.abs(clientRect.height - height) <= 1) {
    height = clientRect.height;
  }
  return {
    x: element.offsetLeft,
    y: element.offsetTop,
    width,
    height
  };
}

// node_modules/@popperjs/core/lib/dom-utils/contains.js
function contains(parent, child) {
  var rootNode = child.getRootNode && child.getRootNode();
  if (parent.contains(child)) {
    return true;
  } else if (rootNode && isShadowRoot(rootNode)) {
    var next = child;
    do {
      if (next && parent.isSameNode(next)) {
        return true;
      }
      next = next.parentNode || next.host;
    } while (next);
  }
  return false;
}

// node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js
function getComputedStyle2(element) {
  return getWindow(element).getComputedStyle(element);
}

// node_modules/@popperjs/core/lib/dom-utils/isTableElement.js
function isTableElement(element) {
  return ["table", "td", "th"].indexOf(getNodeName(element)) >= 0;
}

// node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js
function getDocumentElement(element) {
  return ((isElement(element) ? element.ownerDocument : (
    // $FlowFixMe[prop-missing]
    element.document
  )) || window.document).documentElement;
}

// node_modules/@popperjs/core/lib/dom-utils/getParentNode.js
function getParentNode(element) {
  if (getNodeName(element) === "html") {
    return element;
  }
  return (
    // this is a quicker (but less type safe) way to save quite some bytes from the bundle
    // $FlowFixMe[incompatible-return]
    // $FlowFixMe[prop-missing]
    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node
    element.parentNode || // DOM Element detected
    (isShadowRoot(element) ? element.host : null) || // ShadowRoot detected
    // $FlowFixMe[incompatible-call]: HTMLElement is a Node
    getDocumentElement(element)
  );
}

// node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js
function getTrueOffsetParent(element) {
  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837
  getComputedStyle2(element).position === "fixed") {
    return null;
  }
  return element.offsetParent;
}
function getContainingBlock(element) {
  var isFirefox = /firefox/i.test(getUAString());
  var isIE = /Trident/i.test(getUAString());
  if (isIE && isHTMLElement(element)) {
    var elementCss = getComputedStyle2(element);
    if (elementCss.position === "fixed") {
      return null;
    }
  }
  var currentNode = getParentNode(element);
  if (isShadowRoot(currentNode)) {
    currentNode = currentNode.host;
  }
  while (isHTMLElement(currentNode) && ["html", "body"].indexOf(getNodeName(currentNode)) < 0) {
    var css = getComputedStyle2(currentNode);
    if (css.transform !== "none" || css.perspective !== "none" || css.contain === "paint" || ["transform", "perspective"].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === "filter" || isFirefox && css.filter && css.filter !== "none") {
      return currentNode;
    } else {
      currentNode = currentNode.parentNode;
    }
  }
  return null;
}
function getOffsetParent(element) {
  var window2 = getWindow(element);
  var offsetParent = getTrueOffsetParent(element);
  while (offsetParent && isTableElement(offsetParent) && getComputedStyle2(offsetParent).position === "static") {
    offsetParent = getTrueOffsetParent(offsetParent);
  }
  if (offsetParent && (getNodeName(offsetParent) === "html" || getNodeName(offsetParent) === "body" && getComputedStyle2(offsetParent).position === "static")) {
    return window2;
  }
  return offsetParent || getContainingBlock(element) || window2;
}

// node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js
function getMainAxisFromPlacement(placement) {
  return ["top", "bottom"].indexOf(placement) >= 0 ? "x" : "y";
}

// node_modules/@popperjs/core/lib/utils/within.js
function within(min2, value, max2) {
  return max(min2, min(value, max2));
}
function withinMaxClamp(min2, value, max2) {
  var v = within(min2, value, max2);
  return v > max2 ? max2 : v;
}

// node_modules/@popperjs/core/lib/utils/getFreshSideObject.js
function getFreshSideObject() {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0
  };
}

// node_modules/@popperjs/core/lib/utils/mergePaddingObject.js
function mergePaddingObject(paddingObject) {
  return Object.assign({}, getFreshSideObject(), paddingObject);
}

// node_modules/@popperjs/core/lib/utils/expandToHashMap.js
function expandToHashMap(value, keys) {
  return keys.reduce(function(hashMap, key) {
    hashMap[key] = value;
    return hashMap;
  }, {});
}

// node_modules/@popperjs/core/lib/modifiers/arrow.js
var toPaddingObject = function toPaddingObject2(padding, state) {
  padding = typeof padding === "function" ? padding(Object.assign({}, state.rects, {
    placement: state.placement
  })) : padding;
  return mergePaddingObject(typeof padding !== "number" ? padding : expandToHashMap(padding, basePlacements));
};
function arrow(_ref) {
  var _state$modifiersData$;
  var state = _ref.state, name = _ref.name, options = _ref.options;
  var arrowElement = state.elements.arrow;
  var popperOffsets2 = state.modifiersData.popperOffsets;
  var basePlacement = getBasePlacement(state.placement);
  var axis = getMainAxisFromPlacement(basePlacement);
  var isVertical = [left, right].indexOf(basePlacement) >= 0;
  var len = isVertical ? "height" : "width";
  if (!arrowElement || !popperOffsets2) {
    return;
  }
  var paddingObject = toPaddingObject(options.padding, state);
  var arrowRect = getLayoutRect(arrowElement);
  var minProp = axis === "y" ? top : left;
  var maxProp = axis === "y" ? bottom : right;
  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets2[axis] - state.rects.popper[len];
  var startDiff = popperOffsets2[axis] - state.rects.reference[axis];
  var arrowOffsetParent = getOffsetParent(arrowElement);
  var clientSize = arrowOffsetParent ? axis === "y" ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;
  var centerToReference = endDiff / 2 - startDiff / 2;
  var min2 = paddingObject[minProp];
  var max2 = clientSize - arrowRect[len] - paddingObject[maxProp];
  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;
  var offset2 = within(min2, center, max2);
  var axisProp = axis;
  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset2, _state$modifiersData$.centerOffset = offset2 - center, _state$modifiersData$);
}
function effect2(_ref2) {
  var state = _ref2.state, options = _ref2.options;
  var _options$element = options.element, arrowElement = _options$element === void 0 ? "[data-popper-arrow]" : _options$element;
  if (arrowElement == null) {
    return;
  }
  if (typeof arrowElement === "string") {
    arrowElement = state.elements.popper.querySelector(arrowElement);
    if (!arrowElement) {
      return;
    }
  }
  if (!contains(state.elements.popper, arrowElement)) {
    return;
  }
  state.elements.arrow = arrowElement;
}
var arrow_default = {
  name: "arrow",
  enabled: true,
  phase: "main",
  fn: arrow,
  effect: effect2,
  requires: ["popperOffsets"],
  requiresIfExists: ["preventOverflow"]
};

// node_modules/@popperjs/core/lib/utils/getVariation.js
function getVariation(placement) {
  return placement.split("-")[1];
}

// node_modules/@popperjs/core/lib/modifiers/computeStyles.js
var unsetSides = {
  top: "auto",
  right: "auto",
  bottom: "auto",
  left: "auto"
};
function roundOffsetsByDPR(_ref, win) {
  var x = _ref.x, y = _ref.y;
  var dpr = win.devicePixelRatio || 1;
  return {
    x: round(x * dpr) / dpr || 0,
    y: round(y * dpr) / dpr || 0
  };
}
function mapToStyles(_ref2) {
  var _Object$assign2;
  var popper2 = _ref2.popper, popperRect = _ref2.popperRect, placement = _ref2.placement, variation = _ref2.variation, offsets = _ref2.offsets, position = _ref2.position, gpuAcceleration = _ref2.gpuAcceleration, adaptive = _ref2.adaptive, roundOffsets = _ref2.roundOffsets, isFixed = _ref2.isFixed;
  var _offsets$x = offsets.x, x = _offsets$x === void 0 ? 0 : _offsets$x, _offsets$y = offsets.y, y = _offsets$y === void 0 ? 0 : _offsets$y;
  var _ref3 = typeof roundOffsets === "function" ? roundOffsets({
    x,
    y
  }) : {
    x,
    y
  };
  x = _ref3.x;
  y = _ref3.y;
  var hasX = offsets.hasOwnProperty("x");
  var hasY = offsets.hasOwnProperty("y");
  var sideX = left;
  var sideY = top;
  var win = window;
  if (adaptive) {
    var offsetParent = getOffsetParent(popper2);
    var heightProp = "clientHeight";
    var widthProp = "clientWidth";
    if (offsetParent === getWindow(popper2)) {
      offsetParent = getDocumentElement(popper2);
      if (getComputedStyle2(offsetParent).position !== "static" && position === "absolute") {
        heightProp = "scrollHeight";
        widthProp = "scrollWidth";
      }
    }
    offsetParent = offsetParent;
    if (placement === top || (placement === left || placement === right) && variation === end) {
      sideY = bottom;
      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : (
        // $FlowFixMe[prop-missing]
        offsetParent[heightProp]
      );
      y -= offsetY - popperRect.height;
      y *= gpuAcceleration ? 1 : -1;
    }
    if (placement === left || (placement === top || placement === bottom) && variation === end) {
      sideX = right;
      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : (
        // $FlowFixMe[prop-missing]
        offsetParent[widthProp]
      );
      x -= offsetX - popperRect.width;
      x *= gpuAcceleration ? 1 : -1;
    }
  }
  var commonStyles = Object.assign({
    position
  }, adaptive && unsetSides);
  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({
    x,
    y
  }, getWindow(popper2)) : {
    x,
    y
  };
  x = _ref4.x;
  y = _ref4.y;
  if (gpuAcceleration) {
    var _Object$assign;
    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? "0" : "", _Object$assign[sideX] = hasX ? "0" : "", _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? "translate(" + x + "px, " + y + "px)" : "translate3d(" + x + "px, " + y + "px, 0)", _Object$assign));
  }
  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + "px" : "", _Object$assign2[sideX] = hasX ? x + "px" : "", _Object$assign2.transform = "", _Object$assign2));
}
function computeStyles(_ref5) {
  var state = _ref5.state, options = _ref5.options;
  var _options$gpuAccelerat = options.gpuAcceleration, gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat, _options$adaptive = options.adaptive, adaptive = _options$adaptive === void 0 ? true : _options$adaptive, _options$roundOffsets = options.roundOffsets, roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;
  var commonStyles = {
    placement: getBasePlacement(state.placement),
    variation: getVariation(state.placement),
    popper: state.elements.popper,
    popperRect: state.rects.popper,
    gpuAcceleration,
    isFixed: state.options.strategy === "fixed"
  };
  if (state.modifiersData.popperOffsets != null) {
    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {
      offsets: state.modifiersData.popperOffsets,
      position: state.options.strategy,
      adaptive,
      roundOffsets
    })));
  }
  if (state.modifiersData.arrow != null) {
    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {
      offsets: state.modifiersData.arrow,
      position: "absolute",
      adaptive: false,
      roundOffsets
    })));
  }
  state.attributes.popper = Object.assign({}, state.attributes.popper, {
    "data-popper-placement": state.placement
  });
}
var computeStyles_default = {
  name: "computeStyles",
  enabled: true,
  phase: "beforeWrite",
  fn: computeStyles,
  data: {}
};

// node_modules/@popperjs/core/lib/modifiers/eventListeners.js
var passive = {
  passive: true
};
function effect3(_ref) {
  var state = _ref.state, instance2 = _ref.instance, options = _ref.options;
  var _options$scroll = options.scroll, scroll = _options$scroll === void 0 ? true : _options$scroll, _options$resize = options.resize, resize = _options$resize === void 0 ? true : _options$resize;
  var window2 = getWindow(state.elements.popper);
  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);
  if (scroll) {
    scrollParents.forEach(function(scrollParent) {
      scrollParent.addEventListener("scroll", instance2.update, passive);
    });
  }
  if (resize) {
    window2.addEventListener("resize", instance2.update, passive);
  }
  return function() {
    if (scroll) {
      scrollParents.forEach(function(scrollParent) {
        scrollParent.removeEventListener("scroll", instance2.update, passive);
      });
    }
    if (resize) {
      window2.removeEventListener("resize", instance2.update, passive);
    }
  };
}
var eventListeners_default = {
  name: "eventListeners",
  enabled: true,
  phase: "write",
  fn: function fn() {
  },
  effect: effect3,
  data: {}
};

// node_modules/@popperjs/core/lib/utils/getOppositePlacement.js
var hash = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
};
function getOppositePlacement(placement) {
  return placement.replace(/left|right|bottom|top/g, function(matched) {
    return hash[matched];
  });
}

// node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js
var hash2 = {
  start: "end",
  end: "start"
};
function getOppositeVariationPlacement(placement) {
  return placement.replace(/start|end/g, function(matched) {
    return hash2[matched];
  });
}

// node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js
function getWindowScroll(node) {
  var win = getWindow(node);
  var scrollLeft = win.pageXOffset;
  var scrollTop = win.pageYOffset;
  return {
    scrollLeft,
    scrollTop
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js
function getWindowScrollBarX(element) {
  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;
}

// node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js
function getViewportRect(element, strategy) {
  var win = getWindow(element);
  var html = getDocumentElement(element);
  var visualViewport = win.visualViewport;
  var width = html.clientWidth;
  var height = html.clientHeight;
  var x = 0;
  var y = 0;
  if (visualViewport) {
    width = visualViewport.width;
    height = visualViewport.height;
    var layoutViewport = isLayoutViewport();
    if (layoutViewport || !layoutViewport && strategy === "fixed") {
      x = visualViewport.offsetLeft;
      y = visualViewport.offsetTop;
    }
  }
  return {
    width,
    height,
    x: x + getWindowScrollBarX(element),
    y
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js
function getDocumentRect(element) {
  var _element$ownerDocumen;
  var html = getDocumentElement(element);
  var winScroll = getWindowScroll(element);
  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;
  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);
  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);
  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);
  var y = -winScroll.scrollTop;
  if (getComputedStyle2(body || html).direction === "rtl") {
    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;
  }
  return {
    width,
    height,
    x,
    y
  };
}

// node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js
function isScrollParent(element) {
  var _getComputedStyle = getComputedStyle2(element), overflow = _getComputedStyle.overflow, overflowX = _getComputedStyle.overflowX, overflowY = _getComputedStyle.overflowY;
  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);
}

// node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js
function getScrollParent(node) {
  if (["html", "body", "#document"].indexOf(getNodeName(node)) >= 0) {
    return node.ownerDocument.body;
  }
  if (isHTMLElement(node) && isScrollParent(node)) {
    return node;
  }
  return getScrollParent(getParentNode(node));
}

// node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js
function listScrollParents(element, list) {
  var _element$ownerDocumen;
  if (list === void 0) {
    list = [];
  }
  var scrollParent = getScrollParent(element);
  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);
  var win = getWindow(scrollParent);
  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;
  var updatedList = list.concat(target);
  return isBody ? updatedList : (
    // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here
    updatedList.concat(listScrollParents(getParentNode(target)))
  );
}

// node_modules/@popperjs/core/lib/utils/rectToClientRect.js
function rectToClientRect(rect) {
  return Object.assign({}, rect, {
    left: rect.x,
    top: rect.y,
    right: rect.x + rect.width,
    bottom: rect.y + rect.height
  });
}

// node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js
function getInnerBoundingClientRect(element, strategy) {
  var rect = getBoundingClientRect(element, false, strategy === "fixed");
  rect.top = rect.top + element.clientTop;
  rect.left = rect.left + element.clientLeft;
  rect.bottom = rect.top + element.clientHeight;
  rect.right = rect.left + element.clientWidth;
  rect.width = element.clientWidth;
  rect.height = element.clientHeight;
  rect.x = rect.left;
  rect.y = rect.top;
  return rect;
}
function getClientRectFromMixedType(element, clippingParent, strategy) {
  return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));
}
function getClippingParents(element) {
  var clippingParents2 = listScrollParents(getParentNode(element));
  var canEscapeClipping = ["absolute", "fixed"].indexOf(getComputedStyle2(element).position) >= 0;
  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;
  if (!isElement(clipperElement)) {
    return [];
  }
  return clippingParents2.filter(function(clippingParent) {
    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== "body";
  });
}
function getClippingRect(element, boundary, rootBoundary, strategy) {
  var mainClippingParents = boundary === "clippingParents" ? getClippingParents(element) : [].concat(boundary);
  var clippingParents2 = [].concat(mainClippingParents, [rootBoundary]);
  var firstClippingParent = clippingParents2[0];
  var clippingRect = clippingParents2.reduce(function(accRect, clippingParent) {
    var rect = getClientRectFromMixedType(element, clippingParent, strategy);
    accRect.top = max(rect.top, accRect.top);
    accRect.right = min(rect.right, accRect.right);
    accRect.bottom = min(rect.bottom, accRect.bottom);
    accRect.left = max(rect.left, accRect.left);
    return accRect;
  }, getClientRectFromMixedType(element, firstClippingParent, strategy));
  clippingRect.width = clippingRect.right - clippingRect.left;
  clippingRect.height = clippingRect.bottom - clippingRect.top;
  clippingRect.x = clippingRect.left;
  clippingRect.y = clippingRect.top;
  return clippingRect;
}

// node_modules/@popperjs/core/lib/utils/computeOffsets.js
function computeOffsets(_ref) {
  var reference2 = _ref.reference, element = _ref.element, placement = _ref.placement;
  var basePlacement = placement ? getBasePlacement(placement) : null;
  var variation = placement ? getVariation(placement) : null;
  var commonX = reference2.x + reference2.width / 2 - element.width / 2;
  var commonY = reference2.y + reference2.height / 2 - element.height / 2;
  var offsets;
  switch (basePlacement) {
    case top:
      offsets = {
        x: commonX,
        y: reference2.y - element.height
      };
      break;
    case bottom:
      offsets = {
        x: commonX,
        y: reference2.y + reference2.height
      };
      break;
    case right:
      offsets = {
        x: reference2.x + reference2.width,
        y: commonY
      };
      break;
    case left:
      offsets = {
        x: reference2.x - element.width,
        y: commonY
      };
      break;
    default:
      offsets = {
        x: reference2.x,
        y: reference2.y
      };
  }
  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;
  if (mainAxis != null) {
    var len = mainAxis === "y" ? "height" : "width";
    switch (variation) {
      case start:
        offsets[mainAxis] = offsets[mainAxis] - (reference2[len] / 2 - element[len] / 2);
        break;
      case end:
        offsets[mainAxis] = offsets[mainAxis] + (reference2[len] / 2 - element[len] / 2);
        break;
      default:
    }
  }
  return offsets;
}

// node_modules/@popperjs/core/lib/utils/detectOverflow.js
function detectOverflow(state, options) {
  if (options === void 0) {
    options = {};
  }
  var _options = options, _options$placement = _options.placement, placement = _options$placement === void 0 ? state.placement : _options$placement, _options$strategy = _options.strategy, strategy = _options$strategy === void 0 ? state.strategy : _options$strategy, _options$boundary = _options.boundary, boundary = _options$boundary === void 0 ? clippingParents : _options$boundary, _options$rootBoundary = _options.rootBoundary, rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary, _options$elementConte = _options.elementContext, elementContext = _options$elementConte === void 0 ? popper : _options$elementConte, _options$altBoundary = _options.altBoundary, altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary, _options$padding = _options.padding, padding = _options$padding === void 0 ? 0 : _options$padding;
  var paddingObject = mergePaddingObject(typeof padding !== "number" ? padding : expandToHashMap(padding, basePlacements));
  var altContext = elementContext === popper ? reference : popper;
  var popperRect = state.rects.popper;
  var element = state.elements[altBoundary ? altContext : elementContext];
  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);
  var referenceClientRect = getBoundingClientRect(state.elements.reference);
  var popperOffsets2 = computeOffsets({
    reference: referenceClientRect,
    element: popperRect,
    strategy: "absolute",
    placement
  });
  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets2));
  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect;
  var overflowOffsets = {
    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,
    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,
    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,
    right: elementClientRect.right - clippingClientRect.right + paddingObject.right
  };
  var offsetData = state.modifiersData.offset;
  if (elementContext === popper && offsetData) {
    var offset2 = offsetData[placement];
    Object.keys(overflowOffsets).forEach(function(key) {
      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;
      var axis = [top, bottom].indexOf(key) >= 0 ? "y" : "x";
      overflowOffsets[key] += offset2[axis] * multiply;
    });
  }
  return overflowOffsets;
}

// node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js
function computeAutoPlacement(state, options) {
  if (options === void 0) {
    options = {};
  }
  var _options = options, placement = _options.placement, boundary = _options.boundary, rootBoundary = _options.rootBoundary, padding = _options.padding, flipVariations = _options.flipVariations, _options$allowedAutoP = _options.allowedAutoPlacements, allowedAutoPlacements = _options$allowedAutoP === void 0 ? placements : _options$allowedAutoP;
  var variation = getVariation(placement);
  var placements2 = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function(placement2) {
    return getVariation(placement2) === variation;
  }) : basePlacements;
  var allowedPlacements = placements2.filter(function(placement2) {
    return allowedAutoPlacements.indexOf(placement2) >= 0;
  });
  if (allowedPlacements.length === 0) {
    allowedPlacements = placements2;
  }
  var overflows = allowedPlacements.reduce(function(acc, placement2) {
    acc[placement2] = detectOverflow(state, {
      placement: placement2,
      boundary,
      rootBoundary,
      padding
    })[getBasePlacement(placement2)];
    return acc;
  }, {});
  return Object.keys(overflows).sort(function(a, b) {
    return overflows[a] - overflows[b];
  });
}

// node_modules/@popperjs/core/lib/modifiers/flip.js
function getExpandedFallbackPlacements(placement) {
  if (getBasePlacement(placement) === auto) {
    return [];
  }
  var oppositePlacement = getOppositePlacement(placement);
  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];
}
function flip(_ref) {
  var state = _ref.state, options = _ref.options, name = _ref.name;
  if (state.modifiersData[name]._skip) {
    return;
  }
  var _options$mainAxis = options.mainAxis, checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis, _options$altAxis = options.altAxis, checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis, specifiedFallbackPlacements = options.fallbackPlacements, padding = options.padding, boundary = options.boundary, rootBoundary = options.rootBoundary, altBoundary = options.altBoundary, _options$flipVariatio = options.flipVariations, flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio, allowedAutoPlacements = options.allowedAutoPlacements;
  var preferredPlacement = state.options.placement;
  var basePlacement = getBasePlacement(preferredPlacement);
  var isBasePlacement = basePlacement === preferredPlacement;
  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));
  var placements2 = [preferredPlacement].concat(fallbackPlacements).reduce(function(acc, placement2) {
    return acc.concat(getBasePlacement(placement2) === auto ? computeAutoPlacement(state, {
      placement: placement2,
      boundary,
      rootBoundary,
      padding,
      flipVariations,
      allowedAutoPlacements
    }) : placement2);
  }, []);
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var checksMap = /* @__PURE__ */ new Map();
  var makeFallbackChecks = true;
  var firstFittingPlacement = placements2[0];
  for (var i = 0; i < placements2.length; i++) {
    var placement = placements2[i];
    var _basePlacement = getBasePlacement(placement);
    var isStartVariation = getVariation(placement) === start;
    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;
    var len = isVertical ? "width" : "height";
    var overflow = detectOverflow(state, {
      placement,
      boundary,
      rootBoundary,
      altBoundary,
      padding
    });
    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;
    if (referenceRect[len] > popperRect[len]) {
      mainVariationSide = getOppositePlacement(mainVariationSide);
    }
    var altVariationSide = getOppositePlacement(mainVariationSide);
    var checks = [];
    if (checkMainAxis) {
      checks.push(overflow[_basePlacement] <= 0);
    }
    if (checkAltAxis) {
      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);
    }
    if (checks.every(function(check) {
      return check;
    })) {
      firstFittingPlacement = placement;
      makeFallbackChecks = false;
      break;
    }
    checksMap.set(placement, checks);
  }
  if (makeFallbackChecks) {
    var numberOfChecks = flipVariations ? 3 : 1;
    var _loop = function _loop2(_i2) {
      var fittingPlacement = placements2.find(function(placement2) {
        var checks2 = checksMap.get(placement2);
        if (checks2) {
          return checks2.slice(0, _i2).every(function(check) {
            return check;
          });
        }
      });
      if (fittingPlacement) {
        firstFittingPlacement = fittingPlacement;
        return "break";
      }
    };
    for (var _i = numberOfChecks; _i > 0; _i--) {
      var _ret = _loop(_i);
      if (_ret === "break")
        break;
    }
  }
  if (state.placement !== firstFittingPlacement) {
    state.modifiersData[name]._skip = true;
    state.placement = firstFittingPlacement;
    state.reset = true;
  }
}
var flip_default = {
  name: "flip",
  enabled: true,
  phase: "main",
  fn: flip,
  requiresIfExists: ["offset"],
  data: {
    _skip: false
  }
};

// node_modules/@popperjs/core/lib/modifiers/hide.js
function getSideOffsets(overflow, rect, preventedOffsets) {
  if (preventedOffsets === void 0) {
    preventedOffsets = {
      x: 0,
      y: 0
    };
  }
  return {
    top: overflow.top - rect.height - preventedOffsets.y,
    right: overflow.right - rect.width + preventedOffsets.x,
    bottom: overflow.bottom - rect.height + preventedOffsets.y,
    left: overflow.left - rect.width - preventedOffsets.x
  };
}
function isAnySideFullyClipped(overflow) {
  return [top, right, bottom, left].some(function(side) {
    return overflow[side] >= 0;
  });
}
function hide(_ref) {
  var state = _ref.state, name = _ref.name;
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var preventedOffsets = state.modifiersData.preventOverflow;
  var referenceOverflow = detectOverflow(state, {
    elementContext: "reference"
  });
  var popperAltOverflow = detectOverflow(state, {
    altBoundary: true
  });
  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);
  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);
  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);
  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);
  state.modifiersData[name] = {
    referenceClippingOffsets,
    popperEscapeOffsets,
    isReferenceHidden,
    hasPopperEscaped
  };
  state.attributes.popper = Object.assign({}, state.attributes.popper, {
    "data-popper-reference-hidden": isReferenceHidden,
    "data-popper-escaped": hasPopperEscaped
  });
}
var hide_default = {
  name: "hide",
  enabled: true,
  phase: "main",
  requiresIfExists: ["preventOverflow"],
  fn: hide
};

// node_modules/@popperjs/core/lib/modifiers/offset.js
function distanceAndSkiddingToXY(placement, rects, offset2) {
  var basePlacement = getBasePlacement(placement);
  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;
  var _ref = typeof offset2 === "function" ? offset2(Object.assign({}, rects, {
    placement
  })) : offset2, skidding = _ref[0], distance = _ref[1];
  skidding = skidding || 0;
  distance = (distance || 0) * invertDistance;
  return [left, right].indexOf(basePlacement) >= 0 ? {
    x: distance,
    y: skidding
  } : {
    x: skidding,
    y: distance
  };
}
function offset(_ref2) {
  var state = _ref2.state, options = _ref2.options, name = _ref2.name;
  var _options$offset = options.offset, offset2 = _options$offset === void 0 ? [0, 0] : _options$offset;
  var data = placements.reduce(function(acc, placement) {
    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset2);
    return acc;
  }, {});
  var _data$state$placement = data[state.placement], x = _data$state$placement.x, y = _data$state$placement.y;
  if (state.modifiersData.popperOffsets != null) {
    state.modifiersData.popperOffsets.x += x;
    state.modifiersData.popperOffsets.y += y;
  }
  state.modifiersData[name] = data;
}
var offset_default = {
  name: "offset",
  enabled: true,
  phase: "main",
  requires: ["popperOffsets"],
  fn: offset
};

// node_modules/@popperjs/core/lib/modifiers/popperOffsets.js
function popperOffsets(_ref) {
  var state = _ref.state, name = _ref.name;
  state.modifiersData[name] = computeOffsets({
    reference: state.rects.reference,
    element: state.rects.popper,
    strategy: "absolute",
    placement: state.placement
  });
}
var popperOffsets_default = {
  name: "popperOffsets",
  enabled: true,
  phase: "read",
  fn: popperOffsets,
  data: {}
};

// node_modules/@popperjs/core/lib/utils/getAltAxis.js
function getAltAxis(axis) {
  return axis === "x" ? "y" : "x";
}

// node_modules/@popperjs/core/lib/modifiers/preventOverflow.js
function preventOverflow(_ref) {
  var state = _ref.state, options = _ref.options, name = _ref.name;
  var _options$mainAxis = options.mainAxis, checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis, _options$altAxis = options.altAxis, checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis, boundary = options.boundary, rootBoundary = options.rootBoundary, altBoundary = options.altBoundary, padding = options.padding, _options$tether = options.tether, tether = _options$tether === void 0 ? true : _options$tether, _options$tetherOffset = options.tetherOffset, tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;
  var overflow = detectOverflow(state, {
    boundary,
    rootBoundary,
    padding,
    altBoundary
  });
  var basePlacement = getBasePlacement(state.placement);
  var variation = getVariation(state.placement);
  var isBasePlacement = !variation;
  var mainAxis = getMainAxisFromPlacement(basePlacement);
  var altAxis = getAltAxis(mainAxis);
  var popperOffsets2 = state.modifiersData.popperOffsets;
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var tetherOffsetValue = typeof tetherOffset === "function" ? tetherOffset(Object.assign({}, state.rects, {
    placement: state.placement
  })) : tetherOffset;
  var normalizedTetherOffsetValue = typeof tetherOffsetValue === "number" ? {
    mainAxis: tetherOffsetValue,
    altAxis: tetherOffsetValue
  } : Object.assign({
    mainAxis: 0,
    altAxis: 0
  }, tetherOffsetValue);
  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;
  var data = {
    x: 0,
    y: 0
  };
  if (!popperOffsets2) {
    return;
  }
  if (checkMainAxis) {
    var _offsetModifierState$;
    var mainSide = mainAxis === "y" ? top : left;
    var altSide = mainAxis === "y" ? bottom : right;
    var len = mainAxis === "y" ? "height" : "width";
    var offset2 = popperOffsets2[mainAxis];
    var min2 = offset2 + overflow[mainSide];
    var max2 = offset2 - overflow[altSide];
    var additive = tether ? -popperRect[len] / 2 : 0;
    var minLen = variation === start ? referenceRect[len] : popperRect[len];
    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len];
    var arrowElement = state.elements.arrow;
    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {
      width: 0,
      height: 0
    };
    var arrowPaddingObject = state.modifiersData["arrow#persistent"] ? state.modifiersData["arrow#persistent"].padding : getFreshSideObject();
    var arrowPaddingMin = arrowPaddingObject[mainSide];
    var arrowPaddingMax = arrowPaddingObject[altSide];
    var arrowLen = within(0, referenceRect[len], arrowRect[len]);
    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;
    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;
    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);
    var clientOffset = arrowOffsetParent ? mainAxis === "y" ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;
    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;
    var tetherMin = offset2 + minOffset - offsetModifierValue - clientOffset;
    var tetherMax = offset2 + maxOffset - offsetModifierValue;
    var preventedOffset = within(tether ? min(min2, tetherMin) : min2, offset2, tether ? max(max2, tetherMax) : max2);
    popperOffsets2[mainAxis] = preventedOffset;
    data[mainAxis] = preventedOffset - offset2;
  }
  if (checkAltAxis) {
    var _offsetModifierState$2;
    var _mainSide = mainAxis === "x" ? top : left;
    var _altSide = mainAxis === "x" ? bottom : right;
    var _offset = popperOffsets2[altAxis];
    var _len = altAxis === "y" ? "height" : "width";
    var _min = _offset + overflow[_mainSide];
    var _max = _offset - overflow[_altSide];
    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;
    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;
    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;
    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;
    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);
    popperOffsets2[altAxis] = _preventedOffset;
    data[altAxis] = _preventedOffset - _offset;
  }
  state.modifiersData[name] = data;
}
var preventOverflow_default = {
  name: "preventOverflow",
  enabled: true,
  phase: "main",
  fn: preventOverflow,
  requiresIfExists: ["offset"]
};

// node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js
function getHTMLElementScroll(element) {
  return {
    scrollLeft: element.scrollLeft,
    scrollTop: element.scrollTop
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js
function getNodeScroll(node) {
  if (node === getWindow(node) || !isHTMLElement(node)) {
    return getWindowScroll(node);
  } else {
    return getHTMLElementScroll(node);
  }
}

// node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js
function isElementScaled(element) {
  var rect = element.getBoundingClientRect();
  var scaleX = round(rect.width) / element.offsetWidth || 1;
  var scaleY = round(rect.height) / element.offsetHeight || 1;
  return scaleX !== 1 || scaleY !== 1;
}
function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {
  if (isFixed === void 0) {
    isFixed = false;
  }
  var isOffsetParentAnElement = isHTMLElement(offsetParent);
  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);
  var documentElement = getDocumentElement(offsetParent);
  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);
  var scroll = {
    scrollLeft: 0,
    scrollTop: 0
  };
  var offsets = {
    x: 0,
    y: 0
  };
  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {
    if (getNodeName(offsetParent) !== "body" || // https://github.com/popperjs/popper-core/issues/1078
    isScrollParent(documentElement)) {
      scroll = getNodeScroll(offsetParent);
    }
    if (isHTMLElement(offsetParent)) {
      offsets = getBoundingClientRect(offsetParent, true);
      offsets.x += offsetParent.clientLeft;
      offsets.y += offsetParent.clientTop;
    } else if (documentElement) {
      offsets.x = getWindowScrollBarX(documentElement);
    }
  }
  return {
    x: rect.left + scroll.scrollLeft - offsets.x,
    y: rect.top + scroll.scrollTop - offsets.y,
    width: rect.width,
    height: rect.height
  };
}

// node_modules/@popperjs/core/lib/utils/orderModifiers.js
function order(modifiers) {
  var map = /* @__PURE__ */ new Map();
  var visited = /* @__PURE__ */ new Set();
  var result = [];
  modifiers.forEach(function(modifier) {
    map.set(modifier.name, modifier);
  });
  function sort(modifier) {
    visited.add(modifier.name);
    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);
    requires.forEach(function(dep) {
      if (!visited.has(dep)) {
        var depModifier = map.get(dep);
        if (depModifier) {
          sort(depModifier);
        }
      }
    });
    result.push(modifier);
  }
  modifiers.forEach(function(modifier) {
    if (!visited.has(modifier.name)) {
      sort(modifier);
    }
  });
  return result;
}
function orderModifiers(modifiers) {
  var orderedModifiers = order(modifiers);
  return modifierPhases.reduce(function(acc, phase) {
    return acc.concat(orderedModifiers.filter(function(modifier) {
      return modifier.phase === phase;
    }));
  }, []);
}

// node_modules/@popperjs/core/lib/utils/debounce.js
function debounce(fn2) {
  var pending;
  return function() {
    if (!pending) {
      pending = new Promise(function(resolve) {
        Promise.resolve().then(function() {
          pending = void 0;
          resolve(fn2());
        });
      });
    }
    return pending;
  };
}

// node_modules/@popperjs/core/lib/utils/mergeByName.js
function mergeByName(modifiers) {
  var merged = modifiers.reduce(function(merged2, current) {
    var existing = merged2[current.name];
    merged2[current.name] = existing ? Object.assign({}, existing, current, {
      options: Object.assign({}, existing.options, current.options),
      data: Object.assign({}, existing.data, current.data)
    }) : current;
    return merged2;
  }, {});
  return Object.keys(merged).map(function(key) {
    return merged[key];
  });
}

// node_modules/@popperjs/core/lib/createPopper.js
var DEFAULT_OPTIONS = {
  placement: "bottom",
  modifiers: [],
  strategy: "absolute"
};
function areValidElements() {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }
  return !args.some(function(element) {
    return !(element && typeof element.getBoundingClientRect === "function");
  });
}
function popperGenerator(generatorOptions) {
  if (generatorOptions === void 0) {
    generatorOptions = {};
  }
  var _generatorOptions = generatorOptions, _generatorOptions$def = _generatorOptions.defaultModifiers, defaultModifiers2 = _generatorOptions$def === void 0 ? [] : _generatorOptions$def, _generatorOptions$def2 = _generatorOptions.defaultOptions, defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;
  return function createPopper2(reference2, popper2, options) {
    if (options === void 0) {
      options = defaultOptions;
    }
    var state = {
      placement: "bottom",
      orderedModifiers: [],
      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),
      modifiersData: {},
      elements: {
        reference: reference2,
        popper: popper2
      },
      attributes: {},
      styles: {}
    };
    var effectCleanupFns = [];
    var isDestroyed = false;
    var instance2 = {
      state,
      setOptions: function setOptions(setOptionsAction) {
        var options2 = typeof setOptionsAction === "function" ? setOptionsAction(state.options) : setOptionsAction;
        cleanupModifierEffects();
        state.options = Object.assign({}, defaultOptions, state.options, options2);
        state.scrollParents = {
          reference: isElement(reference2) ? listScrollParents(reference2) : reference2.contextElement ? listScrollParents(reference2.contextElement) : [],
          popper: listScrollParents(popper2)
        };
        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers2, state.options.modifiers)));
        state.orderedModifiers = orderedModifiers.filter(function(m) {
          return m.enabled;
        });
        runModifierEffects();
        return instance2.update();
      },
      // Sync update – it will always be executed, even if not necessary. This
      // is useful for low frequency updates where sync behavior simplifies the
      // logic.
      // For high frequency updates (e.g. `resize` and `scroll` events), always
      // prefer the async Popper#update method
      forceUpdate: function forceUpdate() {
        if (isDestroyed) {
          return;
        }
        var _state$elements = state.elements, reference3 = _state$elements.reference, popper3 = _state$elements.popper;
        if (!areValidElements(reference3, popper3)) {
          return;
        }
        state.rects = {
          reference: getCompositeRect(reference3, getOffsetParent(popper3), state.options.strategy === "fixed"),
          popper: getLayoutRect(popper3)
        };
        state.reset = false;
        state.placement = state.options.placement;
        state.orderedModifiers.forEach(function(modifier) {
          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);
        });
        for (var index = 0; index < state.orderedModifiers.length; index++) {
          if (state.reset === true) {
            state.reset = false;
            index = -1;
            continue;
          }
          var _state$orderedModifie = state.orderedModifiers[index], fn2 = _state$orderedModifie.fn, _state$orderedModifie2 = _state$orderedModifie.options, _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2, name = _state$orderedModifie.name;
          if (typeof fn2 === "function") {
            state = fn2({
              state,
              options: _options,
              name,
              instance: instance2
            }) || state;
          }
        }
      },
      // Async and optimistically optimized update – it will not be executed if
      // not necessary (debounced to run at most once-per-tick)
      update: debounce(function() {
        return new Promise(function(resolve) {
          instance2.forceUpdate();
          resolve(state);
        });
      }),
      destroy: function destroy() {
        cleanupModifierEffects();
        isDestroyed = true;
      }
    };
    if (!areValidElements(reference2, popper2)) {
      return instance2;
    }
    instance2.setOptions(options).then(function(state2) {
      if (!isDestroyed && options.onFirstUpdate) {
        options.onFirstUpdate(state2);
      }
    });
    function runModifierEffects() {
      state.orderedModifiers.forEach(function(_ref) {
        var name = _ref.name, _ref$options = _ref.options, options2 = _ref$options === void 0 ? {} : _ref$options, effect4 = _ref.effect;
        if (typeof effect4 === "function") {
          var cleanupFn = effect4({
            state,
            name,
            instance: instance2,
            options: options2
          });
          var noopFn = function noopFn2() {
          };
          effectCleanupFns.push(cleanupFn || noopFn);
        }
      });
    }
    function cleanupModifierEffects() {
      effectCleanupFns.forEach(function(fn2) {
        return fn2();
      });
      effectCleanupFns = [];
    }
    return instance2;
  };
}

// node_modules/@popperjs/core/lib/popper.js
var defaultModifiers = [eventListeners_default, popperOffsets_default, computeStyles_default, applyStyles_default, offset_default, flip_default, preventOverflow_default, arrow_default, hide_default];
var createPopper = /* @__PURE__ */ popperGenerator({
  defaultModifiers
});

// src/ui/settings/components/suggest.ts
var wrapAround = (value, size) => {
  return (value % size + size) % size;
};
var Suggest = class {
  constructor(owner, containerEl, scope) {
    this.values = [];
    // 빈 배열로 초기화
    this.suggestions = [];
    // 이것도 초기화하는 것이 좋습니다
    this.selectedItem = 0;
    this.owner = owner;
    this.containerEl = containerEl;
    containerEl.on(
      "click",
      ".suggestion-item",
      (event, target) => {
        this.onSuggestionClick(event, target);
      }
    );
    containerEl.on(
      "mousemove",
      ".suggestion-item",
      (event, target) => {
        this.onSuggestionMouseover(event, target);
      }
    );
    scope.register([], "ArrowUp", (event) => {
      if (!event.isComposing) {
        this.setSelectedItem(this.selectedItem - 1, true);
        return false;
      }
    });
    scope.register([], "ArrowDown", (event) => {
      if (!event.isComposing) {
        this.setSelectedItem(this.selectedItem + 1, true);
        return false;
      }
    });
    scope.register([], "Enter", (event) => {
      if (!event.isComposing) {
        this.useSelectedItem(event);
        return false;
      }
    });
  }
  onSuggestionClick(event, el) {
    event.preventDefault();
    const item = this.suggestions.indexOf(el);
    this.setSelectedItem(item, false);
    this.useSelectedItem(event);
  }
  onSuggestionMouseover(_event, el) {
    const item = this.suggestions.indexOf(el);
    this.setSelectedItem(item, false);
  }
  setSuggestions(values) {
    this.containerEl.empty();
    const suggestionEls = [];
    values.forEach((value) => {
      const suggestionEl = this.containerEl.createDiv("suggestion-item");
      this.owner.renderSuggestion(value, suggestionEl);
      suggestionEls.push(suggestionEl);
    });
    this.values = values;
    this.suggestions = suggestionEls;
    this.setSelectedItem(0, false);
  }
  useSelectedItem(event) {
    const currentValue = this.values[this.selectedItem];
    if (currentValue) {
      this.owner.selectSuggestion(currentValue, event);
    }
  }
  setSelectedItem(selectedIndex, scrollIntoView) {
    const normalizedIndex = wrapAround(
      selectedIndex,
      this.suggestions.length
    );
    const prevSelectedSuggestion = this.suggestions[this.selectedItem];
    const selectedSuggestion = this.suggestions[normalizedIndex];
    prevSelectedSuggestion == null ? void 0 : prevSelectedSuggestion.removeClass("is-selected");
    selectedSuggestion == null ? void 0 : selectedSuggestion.addClass("is-selected");
    this.selectedItem = normalizedIndex;
    if (scrollIntoView) {
      selectedSuggestion.scrollIntoView(false);
    }
  }
};
var TextInputSuggest = class {
  constructor(app, inputEl) {
    this.app = app;
    this.inputEl = inputEl;
    this.scope = new import_obsidian.Scope();
    this.suggestEl = createDiv("suggestion-container");
    const suggestion = this.suggestEl.createDiv("suggestion");
    this.suggest = new Suggest(this, suggestion, this.scope);
    this.scope.register([], "Escape", this.close.bind(this));
    this.inputEl.addEventListener("input", this.onInputChanged.bind(this));
    this.inputEl.addEventListener("focus", this.onInputChanged.bind(this));
    this.inputEl.addEventListener("blur", this.close.bind(this));
    this.suggestEl.on(
      "mousedown",
      ".suggestion-container",
      (event) => {
        event.preventDefault();
      }
    );
  }
  onInputChanged() {
    const inputStr = this.inputEl.value;
    const suggestions = this.getSuggestions(inputStr);
    if (!suggestions) {
      this.close();
      return;
    }
    if (suggestions.length > 0) {
      this.suggest.setSuggestions(suggestions);
      this.open(this.app.workspace.containerEl, this.inputEl);
    } else {
      this.close();
    }
  }
  open(container, inputEl) {
    this.app.keymap.pushScope(this.scope);
    container.appendChild(this.suggestEl);
    this.popper = createPopper(inputEl, this.suggestEl, {
      placement: "bottom-start",
      modifiers: [
        {
          name: "sameWidth",
          enabled: true,
          fn: ({ state, instance: instance2 }) => {
            const targetWidth = `${state.rects.reference.width}px`;
            if (state.styles.popper.width === targetWidth) {
              return;
            }
            state.styles.popper.width = targetWidth;
            instance2.update();
          },
          phase: "beforeWrite",
          requires: ["computeStyles"]
        }
      ]
    });
  }
  close() {
    this.app.keymap.popScope(this.scope);
    this.suggest.setSuggestions([]);
    if (this.popper)
      this.popper.destroy();
    this.suggestEl.detach();
  }
};

// src/ui/settings/components/FolderSuggest.ts
var FolderSuggest = class extends TextInputSuggest {
  constructor(app, inputEl, onBlur) {
    super(app, inputEl);
    this.app = app;
    this.inputEl = inputEl;
    this.onBlur = onBlur || (() => {
    });
    this.containerEl = createDiv("suggestion-container");
    this.inputEl.addEventListener("blur", () => {
      setTimeout(() => {
        if (!this.containerEl.contains(document.activeElement)) {
          this.onBlur();
        }
      }, 100);
    });
  }
  getSuggestions(inputStr) {
    const abstractFiles = this.app.vault.getAllLoadedFiles();
    const folders = [];
    const lowerCaseInputStr = inputStr.toLowerCase();
    abstractFiles.forEach((folder) => {
      if (folder instanceof import_obsidian2.TFolder && folder.path.toLowerCase().contains(lowerCaseInputStr)) {
        folders.push(folder);
      }
    });
    return folders.slice(0, 1e3);
  }
  renderSuggestion(file, el) {
    el.setText(file.path);
  }
  selectSuggestion(file) {
    this.inputEl.value = file.path;
    this.inputEl.trigger("input");
    this.close();
  }
};

// node_modules/i18next/dist/esm/i18next.js
var consoleLogger = {
  type: "logger",
  log(args) {
    this.output("log", args);
  },
  warn(args) {
    this.output("warn", args);
  },
  error(args) {
    this.output("error", args);
  },
  output(type, args) {
    if (console && console[type])
      console[type].apply(console, args);
  }
};
var Logger = class {
  constructor(concreteLogger) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    this.init(concreteLogger, options);
  }
  init(concreteLogger) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    this.prefix = options.prefix || "i18next:";
    this.logger = concreteLogger || consoleLogger;
    this.options = options;
    this.debug = options.debug;
  }
  log() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    return this.forward(args, "log", "", true);
  }
  warn() {
    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }
    return this.forward(args, "warn", "", true);
  }
  error() {
    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }
    return this.forward(args, "error", "");
  }
  deprecate() {
    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
      args[_key4] = arguments[_key4];
    }
    return this.forward(args, "warn", "WARNING DEPRECATED: ", true);
  }
  forward(args, lvl, prefix, debugOnly) {
    if (debugOnly && !this.debug)
      return null;
    if (typeof args[0] === "string")
      args[0] = `${prefix}${this.prefix} ${args[0]}`;
    return this.logger[lvl](args);
  }
  create(moduleName) {
    return new Logger(this.logger, {
      ...{
        prefix: `${this.prefix}:${moduleName}:`
      },
      ...this.options
    });
  }
  clone(options) {
    options = options || this.options;
    options.prefix = options.prefix || this.prefix;
    return new Logger(this.logger, options);
  }
};
var baseLogger = new Logger();
var EventEmitter = class {
  constructor() {
    this.observers = {};
  }
  on(events, listener) {
    events.split(" ").forEach((event) => {
      if (!this.observers[event])
        this.observers[event] = /* @__PURE__ */ new Map();
      const numListeners = this.observers[event].get(listener) || 0;
      this.observers[event].set(listener, numListeners + 1);
    });
    return this;
  }
  off(event, listener) {
    if (!this.observers[event])
      return;
    if (!listener) {
      delete this.observers[event];
      return;
    }
    this.observers[event].delete(listener);
  }
  emit(event) {
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }
    if (this.observers[event]) {
      const cloned = Array.from(this.observers[event].entries());
      cloned.forEach((_ref) => {
        let [observer, numTimesAdded] = _ref;
        for (let i = 0; i < numTimesAdded; i++) {
          observer(...args);
        }
      });
    }
    if (this.observers["*"]) {
      const cloned = Array.from(this.observers["*"].entries());
      cloned.forEach((_ref2) => {
        let [observer, numTimesAdded] = _ref2;
        for (let i = 0; i < numTimesAdded; i++) {
          observer.apply(observer, [event, ...args]);
        }
      });
    }
  }
};
var defer = () => {
  let res;
  let rej;
  const promise = new Promise((resolve, reject) => {
    res = resolve;
    rej = reject;
  });
  promise.resolve = res;
  promise.reject = rej;
  return promise;
};
var makeString = (object) => {
  if (object == null)
    return "";
  return "" + object;
};
var copy = (a, s, t2) => {
  a.forEach((m) => {
    if (s[m])
      t2[m] = s[m];
  });
};
var lastOfPathSeparatorRegExp = /###/g;
var cleanKey = (key) => key && key.indexOf("###") > -1 ? key.replace(lastOfPathSeparatorRegExp, ".") : key;
var canNotTraverseDeeper = (object) => !object || typeof object === "string";
var getLastOfPath = (object, path3, Empty) => {
  const stack = typeof path3 !== "string" ? path3 : path3.split(".");
  let stackIndex = 0;
  while (stackIndex < stack.length - 1) {
    if (canNotTraverseDeeper(object))
      return {};
    const key = cleanKey(stack[stackIndex]);
    if (!object[key] && Empty)
      object[key] = new Empty();
    if (Object.prototype.hasOwnProperty.call(object, key)) {
      object = object[key];
    } else {
      object = {};
    }
    ++stackIndex;
  }
  if (canNotTraverseDeeper(object))
    return {};
  return {
    obj: object,
    k: cleanKey(stack[stackIndex])
  };
};
var setPath = (object, path3, newValue) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path3, Object);
  if (obj !== void 0 || path3.length === 1) {
    obj[k] = newValue;
    return;
  }
  let e = path3[path3.length - 1];
  let p = path3.slice(0, path3.length - 1);
  let last = getLastOfPath(object, p, Object);
  while (last.obj === void 0 && p.length) {
    e = `${p[p.length - 1]}.${e}`;
    p = p.slice(0, p.length - 1);
    last = getLastOfPath(object, p, Object);
    if (last && last.obj && typeof last.obj[`${last.k}.${e}`] !== "undefined") {
      last.obj = void 0;
    }
  }
  last.obj[`${last.k}.${e}`] = newValue;
};
var pushPath = (object, path3, newValue, concat) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path3, Object);
  obj[k] = obj[k] || [];
  obj[k].push(newValue);
};
var getPath = (object, path3) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path3);
  if (!obj)
    return void 0;
  return obj[k];
};
var getPathWithDefaults = (data, defaultData, key) => {
  const value = getPath(data, key);
  if (value !== void 0) {
    return value;
  }
  return getPath(defaultData, key);
};
var deepExtend = (target, source, overwrite) => {
  for (const prop in source) {
    if (prop !== "__proto__" && prop !== "constructor") {
      if (prop in target) {
        if (typeof target[prop] === "string" || target[prop] instanceof String || typeof source[prop] === "string" || source[prop] instanceof String) {
          if (overwrite)
            target[prop] = source[prop];
        } else {
          deepExtend(target[prop], source[prop], overwrite);
        }
      } else {
        target[prop] = source[prop];
      }
    }
  }
  return target;
};
var regexEscape = (str) => str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
var _entityMap = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;",
  "/": "&#x2F;"
};
var escape = (data) => {
  if (typeof data === "string") {
    return data.replace(/[&<>"'\/]/g, (s) => _entityMap[s]);
  }
  return data;
};
var RegExpCache = class {
  constructor(capacity) {
    this.capacity = capacity;
    this.regExpMap = /* @__PURE__ */ new Map();
    this.regExpQueue = [];
  }
  getRegExp(pattern) {
    const regExpFromCache = this.regExpMap.get(pattern);
    if (regExpFromCache !== void 0) {
      return regExpFromCache;
    }
    const regExpNew = new RegExp(pattern);
    if (this.regExpQueue.length === this.capacity) {
      this.regExpMap.delete(this.regExpQueue.shift());
    }
    this.regExpMap.set(pattern, regExpNew);
    this.regExpQueue.push(pattern);
    return regExpNew;
  }
};
var chars = [" ", ",", "?", "!", ";"];
var looksLikeObjectPathRegExpCache = new RegExpCache(20);
var looksLikeObjectPath = (key, nsSeparator, keySeparator) => {
  nsSeparator = nsSeparator || "";
  keySeparator = keySeparator || "";
  const possibleChars = chars.filter((c) => nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0);
  if (possibleChars.length === 0)
    return true;
  const r = looksLikeObjectPathRegExpCache.getRegExp(`(${possibleChars.map((c) => c === "?" ? "\\?" : c).join("|")})`);
  let matched = !r.test(key);
  if (!matched) {
    const ki = key.indexOf(keySeparator);
    if (ki > 0 && !r.test(key.substring(0, ki))) {
      matched = true;
    }
  }
  return matched;
};
var deepFind = function(obj, path3) {
  let keySeparator = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : ".";
  if (!obj)
    return void 0;
  if (obj[path3])
    return obj[path3];
  const tokens = path3.split(keySeparator);
  let current = obj;
  for (let i = 0; i < tokens.length; ) {
    if (!current || typeof current !== "object") {
      return void 0;
    }
    let next;
    let nextPath = "";
    for (let j = i; j < tokens.length; ++j) {
      if (j !== i) {
        nextPath += keySeparator;
      }
      nextPath += tokens[j];
      next = current[nextPath];
      if (next !== void 0) {
        if (["string", "number", "boolean"].indexOf(typeof next) > -1 && j < tokens.length - 1) {
          continue;
        }
        i += j - i + 1;
        break;
      }
    }
    current = next;
  }
  return current;
};
var getCleanedCode = (code) => {
  if (code && code.indexOf("_") > 0)
    return code.replace("_", "-");
  return code;
};
var ResourceStore = class extends EventEmitter {
  constructor(data) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
      ns: ["translation"],
      defaultNS: "translation"
    };
    super();
    this.data = data || {};
    this.options = options;
    if (this.options.keySeparator === void 0) {
      this.options.keySeparator = ".";
    }
    if (this.options.ignoreJSONStructure === void 0) {
      this.options.ignoreJSONStructure = true;
    }
  }
  addNamespaces(ns) {
    if (this.options.ns.indexOf(ns) < 0) {
      this.options.ns.push(ns);
    }
  }
  removeNamespaces(ns) {
    const index = this.options.ns.indexOf(ns);
    if (index > -1) {
      this.options.ns.splice(index, 1);
    }
  }
  getResource(lng, ns, key) {
    let options = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
    const keySeparator = options.keySeparator !== void 0 ? options.keySeparator : this.options.keySeparator;
    const ignoreJSONStructure = options.ignoreJSONStructure !== void 0 ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;
    let path3;
    if (lng.indexOf(".") > -1) {
      path3 = lng.split(".");
    } else {
      path3 = [lng, ns];
      if (key) {
        if (Array.isArray(key)) {
          path3.push(...key);
        } else if (typeof key === "string" && keySeparator) {
          path3.push(...key.split(keySeparator));
        } else {
          path3.push(key);
        }
      }
    }
    const result = getPath(this.data, path3);
    if (!result && !ns && !key && lng.indexOf(".") > -1) {
      lng = path3[0];
      ns = path3[1];
      key = path3.slice(2).join(".");
    }
    if (result || !ignoreJSONStructure || typeof key !== "string")
      return result;
    return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);
  }
  addResource(lng, ns, key, value) {
    let options = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : {
      silent: false
    };
    const keySeparator = options.keySeparator !== void 0 ? options.keySeparator : this.options.keySeparator;
    let path3 = [lng, ns];
    if (key)
      path3 = path3.concat(keySeparator ? key.split(keySeparator) : key);
    if (lng.indexOf(".") > -1) {
      path3 = lng.split(".");
      value = ns;
      ns = path3[1];
    }
    this.addNamespaces(ns);
    setPath(this.data, path3, value);
    if (!options.silent)
      this.emit("added", lng, ns, key, value);
  }
  addResources(lng, ns, resources) {
    let options = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {
      silent: false
    };
    for (const m in resources) {
      if (typeof resources[m] === "string" || Array.isArray(resources[m]))
        this.addResource(lng, ns, m, resources[m], {
          silent: true
        });
    }
    if (!options.silent)
      this.emit("added", lng, ns, resources);
  }
  addResourceBundle(lng, ns, resources, deep, overwrite) {
    let options = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : {
      silent: false,
      skipCopy: false
    };
    let path3 = [lng, ns];
    if (lng.indexOf(".") > -1) {
      path3 = lng.split(".");
      deep = resources;
      resources = ns;
      ns = path3[1];
    }
    this.addNamespaces(ns);
    let pack = getPath(this.data, path3) || {};
    if (!options.skipCopy)
      resources = JSON.parse(JSON.stringify(resources));
    if (deep) {
      deepExtend(pack, resources, overwrite);
    } else {
      pack = {
        ...pack,
        ...resources
      };
    }
    setPath(this.data, path3, pack);
    if (!options.silent)
      this.emit("added", lng, ns, resources);
  }
  removeResourceBundle(lng, ns) {
    if (this.hasResourceBundle(lng, ns)) {
      delete this.data[lng][ns];
    }
    this.removeNamespaces(ns);
    this.emit("removed", lng, ns);
  }
  hasResourceBundle(lng, ns) {
    return this.getResource(lng, ns) !== void 0;
  }
  getResourceBundle(lng, ns) {
    if (!ns)
      ns = this.options.defaultNS;
    if (this.options.compatibilityAPI === "v1")
      return {
        ...{},
        ...this.getResource(lng, ns)
      };
    return this.getResource(lng, ns);
  }
  getDataByLanguage(lng) {
    return this.data[lng];
  }
  hasLanguageSomeTranslations(lng) {
    const data = this.getDataByLanguage(lng);
    const n = data && Object.keys(data) || [];
    return !!n.find((v) => data[v] && Object.keys(data[v]).length > 0);
  }
  toJSON() {
    return this.data;
  }
};
var postProcessor = {
  processors: {},
  addPostProcessor(module2) {
    this.processors[module2.name] = module2;
  },
  handle(processors, value, key, options, translator) {
    processors.forEach((processor) => {
      if (this.processors[processor])
        value = this.processors[processor].process(value, key, options, translator);
    });
    return value;
  }
};
var checkedLoadedFor = {};
var Translator = class extends EventEmitter {
  constructor(services) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    super();
    copy(["resourceStore", "languageUtils", "pluralResolver", "interpolator", "backendConnector", "i18nFormat", "utils"], services, this);
    this.options = options;
    if (this.options.keySeparator === void 0) {
      this.options.keySeparator = ".";
    }
    this.logger = baseLogger.create("translator");
  }
  changeLanguage(lng) {
    if (lng)
      this.language = lng;
  }
  exists(key) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
      interpolation: {}
    };
    if (key === void 0 || key === null) {
      return false;
    }
    const resolved = this.resolve(key, options);
    return resolved && resolved.res !== void 0;
  }
  extractFromKey(key, options) {
    let nsSeparator = options.nsSeparator !== void 0 ? options.nsSeparator : this.options.nsSeparator;
    if (nsSeparator === void 0)
      nsSeparator = ":";
    const keySeparator = options.keySeparator !== void 0 ? options.keySeparator : this.options.keySeparator;
    let namespaces = options.ns || this.options.defaultNS || [];
    const wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;
    const seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);
    if (wouldCheckForNsInKey && !seemsNaturalLanguage) {
      const m = key.match(this.interpolator.nestingRegexp);
      if (m && m.length > 0) {
        return {
          key,
          namespaces
        };
      }
      const parts = key.split(nsSeparator);
      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1)
        namespaces = parts.shift();
      key = parts.join(keySeparator);
    }
    if (typeof namespaces === "string")
      namespaces = [namespaces];
    return {
      key,
      namespaces
    };
  }
  translate(keys, options, lastKey) {
    if (typeof options !== "object" && this.options.overloadTranslationOptionHandler) {
      options = this.options.overloadTranslationOptionHandler(arguments);
    }
    if (typeof options === "object")
      options = {
        ...options
      };
    if (!options)
      options = {};
    if (keys === void 0 || keys === null)
      return "";
    if (!Array.isArray(keys))
      keys = [String(keys)];
    const returnDetails = options.returnDetails !== void 0 ? options.returnDetails : this.options.returnDetails;
    const keySeparator = options.keySeparator !== void 0 ? options.keySeparator : this.options.keySeparator;
    const {
      key,
      namespaces
    } = this.extractFromKey(keys[keys.length - 1], options);
    const namespace = namespaces[namespaces.length - 1];
    const lng = options.lng || this.language;
    const appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;
    if (lng && lng.toLowerCase() === "cimode") {
      if (appendNamespaceToCIMode) {
        const nsSeparator = options.nsSeparator || this.options.nsSeparator;
        if (returnDetails) {
          return {
            res: `${namespace}${nsSeparator}${key}`,
            usedKey: key,
            exactUsedKey: key,
            usedLng: lng,
            usedNS: namespace,
            usedParams: this.getUsedParamsDetails(options)
          };
        }
        return `${namespace}${nsSeparator}${key}`;
      }
      if (returnDetails) {
        return {
          res: key,
          usedKey: key,
          exactUsedKey: key,
          usedLng: lng,
          usedNS: namespace,
          usedParams: this.getUsedParamsDetails(options)
        };
      }
      return key;
    }
    const resolved = this.resolve(keys, options);
    let res = resolved && resolved.res;
    const resUsedKey = resolved && resolved.usedKey || key;
    const resExactUsedKey = resolved && resolved.exactUsedKey || key;
    const resType = Object.prototype.toString.apply(res);
    const noObject = ["[object Number]", "[object Function]", "[object RegExp]"];
    const joinArrays = options.joinArrays !== void 0 ? options.joinArrays : this.options.joinArrays;
    const handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;
    const handleAsObject = typeof res !== "string" && typeof res !== "boolean" && typeof res !== "number";
    if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === "string" && Array.isArray(res))) {
      if (!options.returnObjects && !this.options.returnObjects) {
        if (!this.options.returnedObjectHandler) {
          this.logger.warn("accessing an object - but returnObjects options is not enabled!");
        }
        const r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, {
          ...options,
          ns: namespaces
        }) : `key '${key} (${this.language})' returned an object instead of string.`;
        if (returnDetails) {
          resolved.res = r;
          resolved.usedParams = this.getUsedParamsDetails(options);
          return resolved;
        }
        return r;
      }
      if (keySeparator) {
        const resTypeIsArray = Array.isArray(res);
        const copy2 = resTypeIsArray ? [] : {};
        const newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;
        for (const m in res) {
          if (Object.prototype.hasOwnProperty.call(res, m)) {
            const deepKey = `${newKeyToUse}${keySeparator}${m}`;
            copy2[m] = this.translate(deepKey, {
              ...options,
              ...{
                joinArrays: false,
                ns: namespaces
              }
            });
            if (copy2[m] === deepKey)
              copy2[m] = res[m];
          }
        }
        res = copy2;
      }
    } else if (handleAsObjectInI18nFormat && typeof joinArrays === "string" && Array.isArray(res)) {
      res = res.join(joinArrays);
      if (res)
        res = this.extendTranslation(res, keys, options, lastKey);
    } else {
      let usedDefault = false;
      let usedKey = false;
      const needsPluralHandling = options.count !== void 0 && typeof options.count !== "string";
      const hasDefaultValue = Translator.hasDefaultValue(options);
      const defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : "";
      const defaultValueSuffixOrdinalFallback = options.ordinal && needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, {
        ordinal: false
      }) : "";
      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();
      const defaultValue = needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] || options[`defaultValue${defaultValueSuffix}`] || options[`defaultValue${defaultValueSuffixOrdinalFallback}`] || options.defaultValue;
      if (!this.isValidLookup(res) && hasDefaultValue) {
        usedDefault = true;
        res = defaultValue;
      }
      if (!this.isValidLookup(res)) {
        usedKey = true;
        res = key;
      }
      const missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;
      const resForMissing = missingKeyNoValueFallbackToKey && usedKey ? void 0 : res;
      const updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;
      if (usedKey || usedDefault || updateMissing) {
        this.logger.log(updateMissing ? "updateKey" : "missingKey", lng, namespace, key, updateMissing ? defaultValue : res);
        if (keySeparator) {
          const fk = this.resolve(key, {
            ...options,
            keySeparator: false
          });
          if (fk && fk.res)
            this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.");
        }
        let lngs = [];
        const fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);
        if (this.options.saveMissingTo === "fallback" && fallbackLngs && fallbackLngs[0]) {
          for (let i = 0; i < fallbackLngs.length; i++) {
            lngs.push(fallbackLngs[i]);
          }
        } else if (this.options.saveMissingTo === "all") {
          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);
        } else {
          lngs.push(options.lng || this.language);
        }
        const send = (l, k, specificDefaultValue) => {
          const defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;
          if (this.options.missingKeyHandler) {
            this.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);
          } else if (this.backendConnector && this.backendConnector.saveMissing) {
            this.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);
          }
          this.emit("missingKey", l, namespace, k, res);
        };
        if (this.options.saveMissing) {
          if (this.options.saveMissingPlurals && needsPluralHandling) {
            lngs.forEach((language) => {
              const suffixes = this.pluralResolver.getSuffixes(language, options);
              if (needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] && suffixes.indexOf(`${this.options.pluralSeparator}zero`) < 0) {
                suffixes.push(`${this.options.pluralSeparator}zero`);
              }
              suffixes.forEach((suffix) => {
                send([language], key + suffix, options[`defaultValue${suffix}`] || defaultValue);
              });
            });
          } else {
            send(lngs, key, defaultValue);
          }
        }
      }
      res = this.extendTranslation(res, keys, options, resolved, lastKey);
      if (usedKey && res === key && this.options.appendNamespaceToMissingKey)
        res = `${namespace}:${key}`;
      if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {
        if (this.options.compatibilityAPI !== "v1") {
          res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? `${namespace}:${key}` : key, usedDefault ? res : void 0);
        } else {
          res = this.options.parseMissingKeyHandler(res);
        }
      }
    }
    if (returnDetails) {
      resolved.res = res;
      resolved.usedParams = this.getUsedParamsDetails(options);
      return resolved;
    }
    return res;
  }
  extendTranslation(res, key, options, resolved, lastKey) {
    var _this = this;
    if (this.i18nFormat && this.i18nFormat.parse) {
      res = this.i18nFormat.parse(res, {
        ...this.options.interpolation.defaultVariables,
        ...options
      }, options.lng || this.language || resolved.usedLng, resolved.usedNS, resolved.usedKey, {
        resolved
      });
    } else if (!options.skipInterpolation) {
      if (options.interpolation)
        this.interpolator.init({
          ...options,
          ...{
            interpolation: {
              ...this.options.interpolation,
              ...options.interpolation
            }
          }
        });
      const skipOnVariables = typeof res === "string" && (options && options.interpolation && options.interpolation.skipOnVariables !== void 0 ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);
      let nestBef;
      if (skipOnVariables) {
        const nb = res.match(this.interpolator.nestingRegexp);
        nestBef = nb && nb.length;
      }
      let data = options.replace && typeof options.replace !== "string" ? options.replace : options;
      if (this.options.interpolation.defaultVariables)
        data = {
          ...this.options.interpolation.defaultVariables,
          ...data
        };
      res = this.interpolator.interpolate(res, data, options.lng || this.language || resolved.usedLng, options);
      if (skipOnVariables) {
        const na = res.match(this.interpolator.nestingRegexp);
        const nestAft = na && na.length;
        if (nestBef < nestAft)
          options.nest = false;
      }
      if (!options.lng && this.options.compatibilityAPI !== "v1" && resolved && resolved.res)
        options.lng = this.language || resolved.usedLng;
      if (options.nest !== false)
        res = this.interpolator.nest(res, function() {
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          if (lastKey && lastKey[0] === args[0] && !options.context) {
            _this.logger.warn(`It seems you are nesting recursively key: ${args[0]} in key: ${key[0]}`);
            return null;
          }
          return _this.translate(...args, key);
        }, options);
      if (options.interpolation)
        this.interpolator.reset();
    }
    const postProcess = options.postProcess || this.options.postProcess;
    const postProcessorNames = typeof postProcess === "string" ? [postProcess] : postProcess;
    if (res !== void 0 && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {
      res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? {
        i18nResolved: {
          ...resolved,
          usedParams: this.getUsedParamsDetails(options)
        },
        ...options
      } : options, this);
    }
    return res;
  }
  resolve(keys) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    let found;
    let usedKey;
    let exactUsedKey;
    let usedLng;
    let usedNS;
    if (typeof keys === "string")
      keys = [keys];
    keys.forEach((k) => {
      if (this.isValidLookup(found))
        return;
      const extracted = this.extractFromKey(k, options);
      const key = extracted.key;
      usedKey = key;
      let namespaces = extracted.namespaces;
      if (this.options.fallbackNS)
        namespaces = namespaces.concat(this.options.fallbackNS);
      const needsPluralHandling = options.count !== void 0 && typeof options.count !== "string";
      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();
      const needsContextHandling = options.context !== void 0 && (typeof options.context === "string" || typeof options.context === "number") && options.context !== "";
      const codes = options.lngs ? options.lngs : this.languageUtils.toResolveHierarchy(options.lng || this.language, options.fallbackLng);
      namespaces.forEach((ns) => {
        if (this.isValidLookup(found))
          return;
        usedNS = ns;
        if (!checkedLoadedFor[`${codes[0]}-${ns}`] && this.utils && this.utils.hasLoadedNamespace && !this.utils.hasLoadedNamespace(usedNS)) {
          checkedLoadedFor[`${codes[0]}-${ns}`] = true;
          this.logger.warn(`key "${usedKey}" for languages "${codes.join(", ")}" won't get resolved as namespace "${usedNS}" was not yet loaded`, "This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");
        }
        codes.forEach((code) => {
          if (this.isValidLookup(found))
            return;
          usedLng = code;
          const finalKeys = [key];
          if (this.i18nFormat && this.i18nFormat.addLookupKeys) {
            this.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);
          } else {
            let pluralSuffix;
            if (needsPluralHandling)
              pluralSuffix = this.pluralResolver.getSuffix(code, options.count, options);
            const zeroSuffix = `${this.options.pluralSeparator}zero`;
            const ordinalPrefix = `${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;
            if (needsPluralHandling) {
              finalKeys.push(key + pluralSuffix);
              if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {
                finalKeys.push(key + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));
              }
              if (needsZeroSuffixLookup) {
                finalKeys.push(key + zeroSuffix);
              }
            }
            if (needsContextHandling) {
              const contextKey = `${key}${this.options.contextSeparator}${options.context}`;
              finalKeys.push(contextKey);
              if (needsPluralHandling) {
                finalKeys.push(contextKey + pluralSuffix);
                if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {
                  finalKeys.push(contextKey + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));
                }
                if (needsZeroSuffixLookup) {
                  finalKeys.push(contextKey + zeroSuffix);
                }
              }
            }
          }
          let possibleKey;
          while (possibleKey = finalKeys.pop()) {
            if (!this.isValidLookup(found)) {
              exactUsedKey = possibleKey;
              found = this.getResource(code, ns, possibleKey, options);
            }
          }
        });
      });
    });
    return {
      res: found,
      usedKey,
      exactUsedKey,
      usedLng,
      usedNS
    };
  }
  isValidLookup(res) {
    return res !== void 0 && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === "");
  }
  getResource(code, ns, key) {
    let options = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
    if (this.i18nFormat && this.i18nFormat.getResource)
      return this.i18nFormat.getResource(code, ns, key, options);
    return this.resourceStore.getResource(code, ns, key, options);
  }
  getUsedParamsDetails() {
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    const optionsKeys = ["defaultValue", "ordinal", "context", "replace", "lng", "lngs", "fallbackLng", "ns", "keySeparator", "nsSeparator", "returnObjects", "returnDetails", "joinArrays", "postProcess", "interpolation"];
    const useOptionsReplaceForData = options.replace && typeof options.replace !== "string";
    let data = useOptionsReplaceForData ? options.replace : options;
    if (useOptionsReplaceForData && typeof options.count !== "undefined") {
      data.count = options.count;
    }
    if (this.options.interpolation.defaultVariables) {
      data = {
        ...this.options.interpolation.defaultVariables,
        ...data
      };
    }
    if (!useOptionsReplaceForData) {
      data = {
        ...data
      };
      for (const key of optionsKeys) {
        delete data[key];
      }
    }
    return data;
  }
  static hasDefaultValue(options) {
    const prefix = "defaultValue";
    for (const option in options) {
      if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && void 0 !== options[option]) {
        return true;
      }
    }
    return false;
  }
};
var capitalize = (string) => string.charAt(0).toUpperCase() + string.slice(1);
var LanguageUtil = class {
  constructor(options) {
    this.options = options;
    this.supportedLngs = this.options.supportedLngs || false;
    this.logger = baseLogger.create("languageUtils");
  }
  getScriptPartFromCode(code) {
    code = getCleanedCode(code);
    if (!code || code.indexOf("-") < 0)
      return null;
    const p = code.split("-");
    if (p.length === 2)
      return null;
    p.pop();
    if (p[p.length - 1].toLowerCase() === "x")
      return null;
    return this.formatLanguageCode(p.join("-"));
  }
  getLanguagePartFromCode(code) {
    code = getCleanedCode(code);
    if (!code || code.indexOf("-") < 0)
      return code;
    const p = code.split("-");
    return this.formatLanguageCode(p[0]);
  }
  formatLanguageCode(code) {
    if (typeof code === "string" && code.indexOf("-") > -1) {
      const specialCases = ["hans", "hant", "latn", "cyrl", "cans", "mong", "arab"];
      let p = code.split("-");
      if (this.options.lowerCaseLng) {
        p = p.map((part) => part.toLowerCase());
      } else if (p.length === 2) {
        p[0] = p[0].toLowerCase();
        p[1] = p[1].toUpperCase();
        if (specialCases.indexOf(p[1].toLowerCase()) > -1)
          p[1] = capitalize(p[1].toLowerCase());
      } else if (p.length === 3) {
        p[0] = p[0].toLowerCase();
        if (p[1].length === 2)
          p[1] = p[1].toUpperCase();
        if (p[0] !== "sgn" && p[2].length === 2)
          p[2] = p[2].toUpperCase();
        if (specialCases.indexOf(p[1].toLowerCase()) > -1)
          p[1] = capitalize(p[1].toLowerCase());
        if (specialCases.indexOf(p[2].toLowerCase()) > -1)
          p[2] = capitalize(p[2].toLowerCase());
      }
      return p.join("-");
    }
    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;
  }
  isSupportedCode(code) {
    if (this.options.load === "languageOnly" || this.options.nonExplicitSupportedLngs) {
      code = this.getLanguagePartFromCode(code);
    }
    return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;
  }
  getBestMatchFromCodes(codes) {
    if (!codes)
      return null;
    let found;
    codes.forEach((code) => {
      if (found)
        return;
      const cleanedLng = this.formatLanguageCode(code);
      if (!this.options.supportedLngs || this.isSupportedCode(cleanedLng))
        found = cleanedLng;
    });
    if (!found && this.options.supportedLngs) {
      codes.forEach((code) => {
        if (found)
          return;
        const lngOnly = this.getLanguagePartFromCode(code);
        if (this.isSupportedCode(lngOnly))
          return found = lngOnly;
        found = this.options.supportedLngs.find((supportedLng) => {
          if (supportedLng === lngOnly)
            return supportedLng;
          if (supportedLng.indexOf("-") < 0 && lngOnly.indexOf("-") < 0)
            return;
          if (supportedLng.indexOf("-") > 0 && lngOnly.indexOf("-") < 0 && supportedLng.substring(0, supportedLng.indexOf("-")) === lngOnly)
            return supportedLng;
          if (supportedLng.indexOf(lngOnly) === 0 && lngOnly.length > 1)
            return supportedLng;
        });
      });
    }
    if (!found)
      found = this.getFallbackCodes(this.options.fallbackLng)[0];
    return found;
  }
  getFallbackCodes(fallbacks, code) {
    if (!fallbacks)
      return [];
    if (typeof fallbacks === "function")
      fallbacks = fallbacks(code);
    if (typeof fallbacks === "string")
      fallbacks = [fallbacks];
    if (Array.isArray(fallbacks))
      return fallbacks;
    if (!code)
      return fallbacks.default || [];
    let found = fallbacks[code];
    if (!found)
      found = fallbacks[this.getScriptPartFromCode(code)];
    if (!found)
      found = fallbacks[this.formatLanguageCode(code)];
    if (!found)
      found = fallbacks[this.getLanguagePartFromCode(code)];
    if (!found)
      found = fallbacks.default;
    return found || [];
  }
  toResolveHierarchy(code, fallbackCode) {
    const fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);
    const codes = [];
    const addCode = (c) => {
      if (!c)
        return;
      if (this.isSupportedCode(c)) {
        codes.push(c);
      } else {
        this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`);
      }
    };
    if (typeof code === "string" && (code.indexOf("-") > -1 || code.indexOf("_") > -1)) {
      if (this.options.load !== "languageOnly")
        addCode(this.formatLanguageCode(code));
      if (this.options.load !== "languageOnly" && this.options.load !== "currentOnly")
        addCode(this.getScriptPartFromCode(code));
      if (this.options.load !== "currentOnly")
        addCode(this.getLanguagePartFromCode(code));
    } else if (typeof code === "string") {
      addCode(this.formatLanguageCode(code));
    }
    fallbackCodes.forEach((fc) => {
      if (codes.indexOf(fc) < 0)
        addCode(this.formatLanguageCode(fc));
    });
    return codes;
  }
};
var sets = [{
  lngs: ["ach", "ak", "am", "arn", "br", "fil", "gun", "ln", "mfe", "mg", "mi", "oc", "pt", "pt-BR", "tg", "tl", "ti", "tr", "uz", "wa"],
  nr: [1, 2],
  fc: 1
}, {
  lngs: ["af", "an", "ast", "az", "bg", "bn", "ca", "da", "de", "dev", "el", "en", "eo", "es", "et", "eu", "fi", "fo", "fur", "fy", "gl", "gu", "ha", "hi", "hu", "hy", "ia", "it", "kk", "kn", "ku", "lb", "mai", "ml", "mn", "mr", "nah", "nap", "nb", "ne", "nl", "nn", "no", "nso", "pa", "pap", "pms", "ps", "pt-PT", "rm", "sco", "se", "si", "so", "son", "sq", "sv", "sw", "ta", "te", "tk", "ur", "yo"],
  nr: [1, 2],
  fc: 2
}, {
  lngs: ["ay", "bo", "cgg", "fa", "ht", "id", "ja", "jbo", "ka", "km", "ko", "ky", "lo", "ms", "sah", "su", "th", "tt", "ug", "vi", "wo", "zh"],
  nr: [1],
  fc: 3
}, {
  lngs: ["be", "bs", "cnr", "dz", "hr", "ru", "sr", "uk"],
  nr: [1, 2, 5],
  fc: 4
}, {
  lngs: ["ar"],
  nr: [0, 1, 2, 3, 11, 100],
  fc: 5
}, {
  lngs: ["cs", "sk"],
  nr: [1, 2, 5],
  fc: 6
}, {
  lngs: ["csb", "pl"],
  nr: [1, 2, 5],
  fc: 7
}, {
  lngs: ["cy"],
  nr: [1, 2, 3, 8],
  fc: 8
}, {
  lngs: ["fr"],
  nr: [1, 2],
  fc: 9
}, {
  lngs: ["ga"],
  nr: [1, 2, 3, 7, 11],
  fc: 10
}, {
  lngs: ["gd"],
  nr: [1, 2, 3, 20],
  fc: 11
}, {
  lngs: ["is"],
  nr: [1, 2],
  fc: 12
}, {
  lngs: ["jv"],
  nr: [0, 1],
  fc: 13
}, {
  lngs: ["kw"],
  nr: [1, 2, 3, 4],
  fc: 14
}, {
  lngs: ["lt"],
  nr: [1, 2, 10],
  fc: 15
}, {
  lngs: ["lv"],
  nr: [1, 2, 0],
  fc: 16
}, {
  lngs: ["mk"],
  nr: [1, 2],
  fc: 17
}, {
  lngs: ["mnk"],
  nr: [0, 1, 2],
  fc: 18
}, {
  lngs: ["mt"],
  nr: [1, 2, 11, 20],
  fc: 19
}, {
  lngs: ["or"],
  nr: [2, 1],
  fc: 2
}, {
  lngs: ["ro"],
  nr: [1, 2, 20],
  fc: 20
}, {
  lngs: ["sl"],
  nr: [5, 1, 2, 3],
  fc: 21
}, {
  lngs: ["he", "iw"],
  nr: [1, 2, 20, 21],
  fc: 22
}];
var _rulesPluralsTypes = {
  1: (n) => Number(n > 1),
  2: (n) => Number(n != 1),
  3: (n) => 0,
  4: (n) => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  5: (n) => Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5),
  6: (n) => Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2),
  7: (n) => Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  8: (n) => Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3),
  9: (n) => Number(n >= 2),
  10: (n) => Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4),
  11: (n) => Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3),
  12: (n) => Number(n % 10 != 1 || n % 100 == 11),
  13: (n) => Number(n !== 0),
  14: (n) => Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3),
  15: (n) => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  16: (n) => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2),
  17: (n) => Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1),
  18: (n) => Number(n == 0 ? 0 : n == 1 ? 1 : 2),
  19: (n) => Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3),
  20: (n) => Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2),
  21: (n) => Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0),
  22: (n) => Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3)
};
var nonIntlVersions = ["v1", "v2", "v3"];
var intlVersions = ["v4"];
var suffixesOrder = {
  zero: 0,
  one: 1,
  two: 2,
  few: 3,
  many: 4,
  other: 5
};
var createRules = () => {
  const rules = {};
  sets.forEach((set) => {
    set.lngs.forEach((l) => {
      rules[l] = {
        numbers: set.nr,
        plurals: _rulesPluralsTypes[set.fc]
      };
    });
  });
  return rules;
};
var PluralResolver = class {
  constructor(languageUtils) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    this.languageUtils = languageUtils;
    this.options = options;
    this.logger = baseLogger.create("pluralResolver");
    if ((!this.options.compatibilityJSON || intlVersions.includes(this.options.compatibilityJSON)) && (typeof Intl === "undefined" || !Intl.PluralRules)) {
      this.options.compatibilityJSON = "v3";
      this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.");
    }
    this.rules = createRules();
    this.pluralRulesCache = {};
  }
  addRule(lng, obj) {
    this.rules[lng] = obj;
  }
  clearCache() {
    this.pluralRulesCache = {};
  }
  getRule(code) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    if (this.shouldUseIntlApi()) {
      try {
        const cleanedCode = getCleanedCode(code === "dev" ? "en" : code);
        const type = options.ordinal ? "ordinal" : "cardinal";
        const cacheKey = JSON.stringify({
          cleanedCode,
          type
        });
        if (cacheKey in this.pluralRulesCache) {
          return this.pluralRulesCache[cacheKey];
        }
        const rule = new Intl.PluralRules(cleanedCode, {
          type
        });
        this.pluralRulesCache[cacheKey] = rule;
        return rule;
      } catch (err) {
        return;
      }
    }
    return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];
  }
  needsPlural(code) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    const rule = this.getRule(code, options);
    if (this.shouldUseIntlApi()) {
      return rule && rule.resolvedOptions().pluralCategories.length > 1;
    }
    return rule && rule.numbers.length > 1;
  }
  getPluralFormsOfKey(code, key) {
    let options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return this.getSuffixes(code, options).map((suffix) => `${key}${suffix}`);
  }
  getSuffixes(code) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    const rule = this.getRule(code, options);
    if (!rule) {
      return [];
    }
    if (this.shouldUseIntlApi()) {
      return rule.resolvedOptions().pluralCategories.sort((pluralCategory1, pluralCategory2) => suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2]).map((pluralCategory) => `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ""}${pluralCategory}`);
    }
    return rule.numbers.map((number) => this.getSuffix(code, number, options));
  }
  getSuffix(code, count) {
    let options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    const rule = this.getRule(code, options);
    if (rule) {
      if (this.shouldUseIntlApi()) {
        return `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ""}${rule.select(count)}`;
      }
      return this.getSuffixRetroCompatible(rule, count);
    }
    this.logger.warn(`no plural rule found for: ${code}`);
    return "";
  }
  getSuffixRetroCompatible(rule, count) {
    const idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));
    let suffix = rule.numbers[idx];
    if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
      if (suffix === 2) {
        suffix = "plural";
      } else if (suffix === 1) {
        suffix = "";
      }
    }
    const returnSuffix = () => this.options.prepend && suffix.toString() ? this.options.prepend + suffix.toString() : suffix.toString();
    if (this.options.compatibilityJSON === "v1") {
      if (suffix === 1)
        return "";
      if (typeof suffix === "number")
        return `_plural_${suffix.toString()}`;
      return returnSuffix();
    } else if (this.options.compatibilityJSON === "v2") {
      return returnSuffix();
    } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
      return returnSuffix();
    }
    return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();
  }
  shouldUseIntlApi() {
    return !nonIntlVersions.includes(this.options.compatibilityJSON);
  }
};
var deepFindWithDefaults = function(data, defaultData, key) {
  let keySeparator = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : ".";
  let ignoreJSONStructure = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : true;
  let path3 = getPathWithDefaults(data, defaultData, key);
  if (!path3 && ignoreJSONStructure && typeof key === "string") {
    path3 = deepFind(data, key, keySeparator);
    if (path3 === void 0)
      path3 = deepFind(defaultData, key, keySeparator);
  }
  return path3;
};
var regexSafe = (val) => val.replace(/\$/g, "$$$$");
var Interpolator = class {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    this.logger = baseLogger.create("interpolator");
    this.options = options;
    this.format = options.interpolation && options.interpolation.format || ((value) => value);
    this.init(options);
  }
  init() {
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    if (!options.interpolation)
      options.interpolation = {
        escapeValue: true
      };
    const {
      escape: escape$1,
      escapeValue,
      useRawValueToEscape,
      prefix,
      prefixEscaped,
      suffix,
      suffixEscaped,
      formatSeparator,
      unescapeSuffix,
      unescapePrefix,
      nestingPrefix,
      nestingPrefixEscaped,
      nestingSuffix,
      nestingSuffixEscaped,
      nestingOptionsSeparator,
      maxReplaces,
      alwaysFormat
    } = options.interpolation;
    this.escape = escape$1 !== void 0 ? escape$1 : escape;
    this.escapeValue = escapeValue !== void 0 ? escapeValue : true;
    this.useRawValueToEscape = useRawValueToEscape !== void 0 ? useRawValueToEscape : false;
    this.prefix = prefix ? regexEscape(prefix) : prefixEscaped || "{{";
    this.suffix = suffix ? regexEscape(suffix) : suffixEscaped || "}}";
    this.formatSeparator = formatSeparator || ",";
    this.unescapePrefix = unescapeSuffix ? "" : unescapePrefix || "-";
    this.unescapeSuffix = this.unescapePrefix ? "" : unescapeSuffix || "";
    this.nestingPrefix = nestingPrefix ? regexEscape(nestingPrefix) : nestingPrefixEscaped || regexEscape("$t(");
    this.nestingSuffix = nestingSuffix ? regexEscape(nestingSuffix) : nestingSuffixEscaped || regexEscape(")");
    this.nestingOptionsSeparator = nestingOptionsSeparator || ",";
    this.maxReplaces = maxReplaces || 1e3;
    this.alwaysFormat = alwaysFormat !== void 0 ? alwaysFormat : false;
    this.resetRegExp();
  }
  reset() {
    if (this.options)
      this.init(this.options);
  }
  resetRegExp() {
    const getOrResetRegExp = (existingRegExp, pattern) => {
      if (existingRegExp && existingRegExp.source === pattern) {
        existingRegExp.lastIndex = 0;
        return existingRegExp;
      }
      return new RegExp(pattern, "g");
    };
    this.regexp = getOrResetRegExp(this.regexp, `${this.prefix}(.+?)${this.suffix}`);
    this.regexpUnescape = getOrResetRegExp(this.regexpUnescape, `${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`);
    this.nestingRegexp = getOrResetRegExp(this.nestingRegexp, `${this.nestingPrefix}(.+?)${this.nestingSuffix}`);
  }
  interpolate(str, data, lng, options) {
    let match;
    let value;
    let replaces;
    const defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};
    const handleFormat = (key) => {
      if (key.indexOf(this.formatSeparator) < 0) {
        const path3 = deepFindWithDefaults(data, defaultData, key, this.options.keySeparator, this.options.ignoreJSONStructure);
        return this.alwaysFormat ? this.format(path3, void 0, lng, {
          ...options,
          ...data,
          interpolationkey: key
        }) : path3;
      }
      const p = key.split(this.formatSeparator);
      const k = p.shift().trim();
      const f = p.join(this.formatSeparator).trim();
      return this.format(deepFindWithDefaults(data, defaultData, k, this.options.keySeparator, this.options.ignoreJSONStructure), f, lng, {
        ...options,
        ...data,
        interpolationkey: k
      });
    };
    this.resetRegExp();
    const missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;
    const skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== void 0 ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;
    const todos = [{
      regex: this.regexpUnescape,
      safeValue: (val) => regexSafe(val)
    }, {
      regex: this.regexp,
      safeValue: (val) => this.escapeValue ? regexSafe(this.escape(val)) : regexSafe(val)
    }];
    todos.forEach((todo) => {
      replaces = 0;
      while (match = todo.regex.exec(str)) {
        const matchedVar = match[1].trim();
        value = handleFormat(matchedVar);
        if (value === void 0) {
          if (typeof missingInterpolationHandler === "function") {
            const temp = missingInterpolationHandler(str, match, options);
            value = typeof temp === "string" ? temp : "";
          } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {
            value = "";
          } else if (skipOnVariables) {
            value = match[0];
            continue;
          } else {
            this.logger.warn(`missed to pass in variable ${matchedVar} for interpolating ${str}`);
            value = "";
          }
        } else if (typeof value !== "string" && !this.useRawValueToEscape) {
          value = makeString(value);
        }
        const safeValue = todo.safeValue(value);
        str = str.replace(match[0], safeValue);
        if (skipOnVariables) {
          todo.regex.lastIndex += value.length;
          todo.regex.lastIndex -= match[0].length;
        } else {
          todo.regex.lastIndex = 0;
        }
        replaces++;
        if (replaces >= this.maxReplaces) {
          break;
        }
      }
    });
    return str;
  }
  nest(str, fc) {
    let options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    let match;
    let value;
    let clonedOptions;
    const handleHasOptions = (key, inheritedOptions) => {
      const sep = this.nestingOptionsSeparator;
      if (key.indexOf(sep) < 0)
        return key;
      const c = key.split(new RegExp(`${sep}[ ]*{`));
      let optionsString = `{${c[1]}`;
      key = c[0];
      optionsString = this.interpolate(optionsString, clonedOptions);
      const matchedSingleQuotes = optionsString.match(/'/g);
      const matchedDoubleQuotes = optionsString.match(/"/g);
      if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {
        optionsString = optionsString.replace(/'/g, '"');
      }
      try {
        clonedOptions = JSON.parse(optionsString);
        if (inheritedOptions)
          clonedOptions = {
            ...inheritedOptions,
            ...clonedOptions
          };
      } catch (e) {
        this.logger.warn(`failed parsing options string in nesting for key ${key}`, e);
        return `${key}${sep}${optionsString}`;
      }
      if (clonedOptions.defaultValue && clonedOptions.defaultValue.indexOf(this.prefix) > -1)
        delete clonedOptions.defaultValue;
      return key;
    };
    while (match = this.nestingRegexp.exec(str)) {
      let formatters = [];
      clonedOptions = {
        ...options
      };
      clonedOptions = clonedOptions.replace && typeof clonedOptions.replace !== "string" ? clonedOptions.replace : clonedOptions;
      clonedOptions.applyPostProcessor = false;
      delete clonedOptions.defaultValue;
      let doReduce = false;
      if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {
        const r = match[1].split(this.formatSeparator).map((elem) => elem.trim());
        match[1] = r.shift();
        formatters = r;
        doReduce = true;
      }
      value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);
      if (value && match[0] === str && typeof value !== "string")
        return value;
      if (typeof value !== "string")
        value = makeString(value);
      if (!value) {
        this.logger.warn(`missed to resolve ${match[1]} for nesting ${str}`);
        value = "";
      }
      if (doReduce) {
        value = formatters.reduce((v, f) => this.format(v, f, options.lng, {
          ...options,
          interpolationkey: match[1].trim()
        }), value.trim());
      }
      str = str.replace(match[0], value);
      this.regexp.lastIndex = 0;
    }
    return str;
  }
};
var parseFormatStr = (formatStr) => {
  let formatName = formatStr.toLowerCase().trim();
  const formatOptions = {};
  if (formatStr.indexOf("(") > -1) {
    const p = formatStr.split("(");
    formatName = p[0].toLowerCase().trim();
    const optStr = p[1].substring(0, p[1].length - 1);
    if (formatName === "currency" && optStr.indexOf(":") < 0) {
      if (!formatOptions.currency)
        formatOptions.currency = optStr.trim();
    } else if (formatName === "relativetime" && optStr.indexOf(":") < 0) {
      if (!formatOptions.range)
        formatOptions.range = optStr.trim();
    } else {
      const opts = optStr.split(";");
      opts.forEach((opt) => {
        if (opt) {
          const [key, ...rest] = opt.split(":");
          const val = rest.join(":").trim().replace(/^'+|'+$/g, "");
          const trimmedKey = key.trim();
          if (!formatOptions[trimmedKey])
            formatOptions[trimmedKey] = val;
          if (val === "false")
            formatOptions[trimmedKey] = false;
          if (val === "true")
            formatOptions[trimmedKey] = true;
          if (!isNaN(val))
            formatOptions[trimmedKey] = parseInt(val, 10);
        }
      });
    }
  }
  return {
    formatName,
    formatOptions
  };
};
var createCachedFormatter = (fn2) => {
  const cache = {};
  return (val, lng, options) => {
    let optForCache = options;
    if (options && options.interpolationkey && options.formatParams && options.formatParams[options.interpolationkey] && options[options.interpolationkey]) {
      optForCache = {
        ...optForCache,
        [options.interpolationkey]: void 0
      };
    }
    const key = lng + JSON.stringify(optForCache);
    let formatter = cache[key];
    if (!formatter) {
      formatter = fn2(getCleanedCode(lng), options);
      cache[key] = formatter;
    }
    return formatter(val);
  };
};
var Formatter = class {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    this.logger = baseLogger.create("formatter");
    this.options = options;
    this.formats = {
      number: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.NumberFormat(lng, {
          ...opt
        });
        return (val) => formatter.format(val);
      }),
      currency: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.NumberFormat(lng, {
          ...opt,
          style: "currency"
        });
        return (val) => formatter.format(val);
      }),
      datetime: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.DateTimeFormat(lng, {
          ...opt
        });
        return (val) => formatter.format(val);
      }),
      relativetime: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.RelativeTimeFormat(lng, {
          ...opt
        });
        return (val) => formatter.format(val, opt.range || "day");
      }),
      list: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.ListFormat(lng, {
          ...opt
        });
        return (val) => formatter.format(val);
      })
    };
    this.init(options);
  }
  init(services) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
      interpolation: {}
    };
    const iOpts = options.interpolation;
    this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ",";
  }
  add(name, fc) {
    this.formats[name.toLowerCase().trim()] = fc;
  }
  addCached(name, fc) {
    this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);
  }
  format(value, format, lng) {
    let options = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
    const formats = format.split(this.formatSeparator);
    if (formats.length > 1 && formats[0].indexOf("(") > 1 && formats[0].indexOf(")") < 0 && formats.find((f) => f.indexOf(")") > -1)) {
      const lastIndex = formats.findIndex((f) => f.indexOf(")") > -1);
      formats[0] = [formats[0], ...formats.splice(1, lastIndex)].join(this.formatSeparator);
    }
    const result = formats.reduce((mem, f) => {
      const {
        formatName,
        formatOptions
      } = parseFormatStr(f);
      if (this.formats[formatName]) {
        let formatted = mem;
        try {
          const valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};
          const l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;
          formatted = this.formats[formatName](mem, l, {
            ...formatOptions,
            ...options,
            ...valOptions
          });
        } catch (error) {
          this.logger.warn(error);
        }
        return formatted;
      } else {
        this.logger.warn(`there was no format function for ${formatName}`);
      }
      return mem;
    }, value);
    return result;
  }
};
var removePending = (q, name) => {
  if (q.pending[name] !== void 0) {
    delete q.pending[name];
    q.pendingCount--;
  }
};
var Connector = class extends EventEmitter {
  constructor(backend, store, services) {
    let options = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
    super();
    this.backend = backend;
    this.store = store;
    this.services = services;
    this.languageUtils = services.languageUtils;
    this.options = options;
    this.logger = baseLogger.create("backendConnector");
    this.waitingReads = [];
    this.maxParallelReads = options.maxParallelReads || 10;
    this.readingCalls = 0;
    this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;
    this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;
    this.state = {};
    this.queue = [];
    if (this.backend && this.backend.init) {
      this.backend.init(services, options.backend, options);
    }
  }
  queueLoad(languages, namespaces, options, callback) {
    const toLoad = {};
    const pending = {};
    const toLoadLanguages = {};
    const toLoadNamespaces = {};
    languages.forEach((lng) => {
      let hasAllNamespaces = true;
      namespaces.forEach((ns) => {
        const name = `${lng}|${ns}`;
        if (!options.reload && this.store.hasResourceBundle(lng, ns)) {
          this.state[name] = 2;
        } else if (this.state[name] < 0)
          ;
        else if (this.state[name] === 1) {
          if (pending[name] === void 0)
            pending[name] = true;
        } else {
          this.state[name] = 1;
          hasAllNamespaces = false;
          if (pending[name] === void 0)
            pending[name] = true;
          if (toLoad[name] === void 0)
            toLoad[name] = true;
          if (toLoadNamespaces[ns] === void 0)
            toLoadNamespaces[ns] = true;
        }
      });
      if (!hasAllNamespaces)
        toLoadLanguages[lng] = true;
    });
    if (Object.keys(toLoad).length || Object.keys(pending).length) {
      this.queue.push({
        pending,
        pendingCount: Object.keys(pending).length,
        loaded: {},
        errors: [],
        callback
      });
    }
    return {
      toLoad: Object.keys(toLoad),
      pending: Object.keys(pending),
      toLoadLanguages: Object.keys(toLoadLanguages),
      toLoadNamespaces: Object.keys(toLoadNamespaces)
    };
  }
  loaded(name, err, data) {
    const s = name.split("|");
    const lng = s[0];
    const ns = s[1];
    if (err)
      this.emit("failedLoading", lng, ns, err);
    if (!err && data) {
      this.store.addResourceBundle(lng, ns, data, void 0, void 0, {
        skipCopy: true
      });
    }
    this.state[name] = err ? -1 : 2;
    if (err && data)
      this.state[name] = 0;
    const loaded = {};
    this.queue.forEach((q) => {
      pushPath(q.loaded, [lng], ns);
      removePending(q, name);
      if (err)
        q.errors.push(err);
      if (q.pendingCount === 0 && !q.done) {
        Object.keys(q.loaded).forEach((l) => {
          if (!loaded[l])
            loaded[l] = {};
          const loadedKeys = q.loaded[l];
          if (loadedKeys.length) {
            loadedKeys.forEach((n) => {
              if (loaded[l][n] === void 0)
                loaded[l][n] = true;
            });
          }
        });
        q.done = true;
        if (q.errors.length) {
          q.callback(q.errors);
        } else {
          q.callback();
        }
      }
    });
    this.emit("loaded", loaded);
    this.queue = this.queue.filter((q) => !q.done);
  }
  read(lng, ns, fcName) {
    let tried = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 0;
    let wait = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : this.retryTimeout;
    let callback = arguments.length > 5 ? arguments[5] : void 0;
    if (!lng.length)
      return callback(null, {});
    if (this.readingCalls >= this.maxParallelReads) {
      this.waitingReads.push({
        lng,
        ns,
        fcName,
        tried,
        wait,
        callback
      });
      return;
    }
    this.readingCalls++;
    const resolver = (err, data) => {
      this.readingCalls--;
      if (this.waitingReads.length > 0) {
        const next = this.waitingReads.shift();
        this.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);
      }
      if (err && data && tried < this.maxRetries) {
        setTimeout(() => {
          this.read.call(this, lng, ns, fcName, tried + 1, wait * 2, callback);
        }, wait);
        return;
      }
      callback(err, data);
    };
    const fc = this.backend[fcName].bind(this.backend);
    if (fc.length === 2) {
      try {
        const r = fc(lng, ns);
        if (r && typeof r.then === "function") {
          r.then((data) => resolver(null, data)).catch(resolver);
        } else {
          resolver(null, r);
        }
      } catch (err) {
        resolver(err);
      }
      return;
    }
    return fc(lng, ns, resolver);
  }
  prepareLoading(languages, namespaces) {
    let options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    let callback = arguments.length > 3 ? arguments[3] : void 0;
    if (!this.backend) {
      this.logger.warn("No backend was added via i18next.use. Will not load resources.");
      return callback && callback();
    }
    if (typeof languages === "string")
      languages = this.languageUtils.toResolveHierarchy(languages);
    if (typeof namespaces === "string")
      namespaces = [namespaces];
    const toLoad = this.queueLoad(languages, namespaces, options, callback);
    if (!toLoad.toLoad.length) {
      if (!toLoad.pending.length)
        callback();
      return null;
    }
    toLoad.toLoad.forEach((name) => {
      this.loadOne(name);
    });
  }
  load(languages, namespaces, callback) {
    this.prepareLoading(languages, namespaces, {}, callback);
  }
  reload(languages, namespaces, callback) {
    this.prepareLoading(languages, namespaces, {
      reload: true
    }, callback);
  }
  loadOne(name) {
    let prefix = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
    const s = name.split("|");
    const lng = s[0];
    const ns = s[1];
    this.read(lng, ns, "read", void 0, void 0, (err, data) => {
      if (err)
        this.logger.warn(`${prefix}loading namespace ${ns} for language ${lng} failed`, err);
      if (!err && data)
        this.logger.log(`${prefix}loaded namespace ${ns} for language ${lng}`, data);
      this.loaded(name, err, data);
    });
  }
  saveMissing(languages, namespace, key, fallbackValue, isUpdate) {
    let options = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : {};
    let clb = arguments.length > 6 && arguments[6] !== void 0 ? arguments[6] : () => {
    };
    if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {
      this.logger.warn(`did not save key "${key}" as the namespace "${namespace}" was not yet loaded`, "This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");
      return;
    }
    if (key === void 0 || key === null || key === "")
      return;
    if (this.backend && this.backend.create) {
      const opts = {
        ...options,
        isUpdate
      };
      const fc = this.backend.create.bind(this.backend);
      if (fc.length < 6) {
        try {
          let r;
          if (fc.length === 5) {
            r = fc(languages, namespace, key, fallbackValue, opts);
          } else {
            r = fc(languages, namespace, key, fallbackValue);
          }
          if (r && typeof r.then === "function") {
            r.then((data) => clb(null, data)).catch(clb);
          } else {
            clb(null, r);
          }
        } catch (err) {
          clb(err);
        }
      } else {
        fc(languages, namespace, key, fallbackValue, clb, opts);
      }
    }
    if (!languages || !languages[0])
      return;
    this.store.addResource(languages[0], namespace, key, fallbackValue);
  }
};
var get = () => ({
  debug: false,
  initImmediate: true,
  ns: ["translation"],
  defaultNS: ["translation"],
  fallbackLng: ["dev"],
  fallbackNS: false,
  supportedLngs: false,
  nonExplicitSupportedLngs: false,
  load: "all",
  preload: false,
  simplifyPluralSuffix: true,
  keySeparator: ".",
  nsSeparator: ":",
  pluralSeparator: "_",
  contextSeparator: "_",
  partialBundledLanguages: false,
  saveMissing: false,
  updateMissing: false,
  saveMissingTo: "fallback",
  saveMissingPlurals: true,
  missingKeyHandler: false,
  missingInterpolationHandler: false,
  postProcess: false,
  postProcessPassResolved: false,
  returnNull: false,
  returnEmptyString: true,
  returnObjects: false,
  joinArrays: false,
  returnedObjectHandler: false,
  parseMissingKeyHandler: false,
  appendNamespaceToMissingKey: false,
  appendNamespaceToCIMode: false,
  overloadTranslationOptionHandler: (args) => {
    let ret = {};
    if (typeof args[1] === "object")
      ret = args[1];
    if (typeof args[1] === "string")
      ret.defaultValue = args[1];
    if (typeof args[2] === "string")
      ret.tDescription = args[2];
    if (typeof args[2] === "object" || typeof args[3] === "object") {
      const options = args[3] || args[2];
      Object.keys(options).forEach((key) => {
        ret[key] = options[key];
      });
    }
    return ret;
  },
  interpolation: {
    escapeValue: true,
    format: (value) => value,
    prefix: "{{",
    suffix: "}}",
    formatSeparator: ",",
    unescapePrefix: "-",
    nestingPrefix: "$t(",
    nestingSuffix: ")",
    nestingOptionsSeparator: ",",
    maxReplaces: 1e3,
    skipOnVariables: true
  }
});
var transformOptions = (options) => {
  if (typeof options.ns === "string")
    options.ns = [options.ns];
  if (typeof options.fallbackLng === "string")
    options.fallbackLng = [options.fallbackLng];
  if (typeof options.fallbackNS === "string")
    options.fallbackNS = [options.fallbackNS];
  if (options.supportedLngs && options.supportedLngs.indexOf("cimode") < 0) {
    options.supportedLngs = options.supportedLngs.concat(["cimode"]);
  }
  return options;
};
var noop = () => {
};
var bindMemberFunctions = (inst) => {
  const mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));
  mems.forEach((mem) => {
    if (typeof inst[mem] === "function") {
      inst[mem] = inst[mem].bind(inst);
    }
  });
};
var I18n = class extends EventEmitter {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : void 0;
    super();
    this.options = transformOptions(options);
    this.services = {};
    this.logger = baseLogger;
    this.modules = {
      external: []
    };
    bindMemberFunctions(this);
    if (callback && !this.isInitialized && !options.isClone) {
      if (!this.options.initImmediate) {
        this.init(options, callback);
        return this;
      }
      setTimeout(() => {
        this.init(options, callback);
      }, 0);
    }
  }
  init() {
    var _this = this;
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : void 0;
    this.isInitializing = true;
    if (typeof options === "function") {
      callback = options;
      options = {};
    }
    if (!options.defaultNS && options.defaultNS !== false && options.ns) {
      if (typeof options.ns === "string") {
        options.defaultNS = options.ns;
      } else if (options.ns.indexOf("translation") < 0) {
        options.defaultNS = options.ns[0];
      }
    }
    const defOpts = get();
    this.options = {
      ...defOpts,
      ...this.options,
      ...transformOptions(options)
    };
    if (this.options.compatibilityAPI !== "v1") {
      this.options.interpolation = {
        ...defOpts.interpolation,
        ...this.options.interpolation
      };
    }
    if (options.keySeparator !== void 0) {
      this.options.userDefinedKeySeparator = options.keySeparator;
    }
    if (options.nsSeparator !== void 0) {
      this.options.userDefinedNsSeparator = options.nsSeparator;
    }
    const createClassOnDemand = (ClassOrObject) => {
      if (!ClassOrObject)
        return null;
      if (typeof ClassOrObject === "function")
        return new ClassOrObject();
      return ClassOrObject;
    };
    if (!this.options.isClone) {
      if (this.modules.logger) {
        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);
      } else {
        baseLogger.init(null, this.options);
      }
      let formatter;
      if (this.modules.formatter) {
        formatter = this.modules.formatter;
      } else if (typeof Intl !== "undefined") {
        formatter = Formatter;
      }
      const lu = new LanguageUtil(this.options);
      this.store = new ResourceStore(this.options.resources, this.options);
      const s = this.services;
      s.logger = baseLogger;
      s.resourceStore = this.store;
      s.languageUtils = lu;
      s.pluralResolver = new PluralResolver(lu, {
        prepend: this.options.pluralSeparator,
        compatibilityJSON: this.options.compatibilityJSON,
        simplifyPluralSuffix: this.options.simplifyPluralSuffix
      });
      if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {
        s.formatter = createClassOnDemand(formatter);
        s.formatter.init(s, this.options);
        this.options.interpolation.format = s.formatter.format.bind(s.formatter);
      }
      s.interpolator = new Interpolator(this.options);
      s.utils = {
        hasLoadedNamespace: this.hasLoadedNamespace.bind(this)
      };
      s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);
      s.backendConnector.on("*", function(event) {
        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }
        _this.emit(event, ...args);
      });
      if (this.modules.languageDetector) {
        s.languageDetector = createClassOnDemand(this.modules.languageDetector);
        if (s.languageDetector.init)
          s.languageDetector.init(s, this.options.detection, this.options);
      }
      if (this.modules.i18nFormat) {
        s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);
        if (s.i18nFormat.init)
          s.i18nFormat.init(this);
      }
      this.translator = new Translator(this.services, this.options);
      this.translator.on("*", function(event) {
        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
          args[_key2 - 1] = arguments[_key2];
        }
        _this.emit(event, ...args);
      });
      this.modules.external.forEach((m) => {
        if (m.init)
          m.init(this);
      });
    }
    this.format = this.options.interpolation.format;
    if (!callback)
      callback = noop;
    if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {
      const codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
      if (codes.length > 0 && codes[0] !== "dev")
        this.options.lng = codes[0];
    }
    if (!this.services.languageDetector && !this.options.lng) {
      this.logger.warn("init: no languageDetector is used and no lng is defined");
    }
    const storeApi = ["getResource", "hasResourceBundle", "getResourceBundle", "getDataByLanguage"];
    storeApi.forEach((fcName) => {
      this[fcName] = function() {
        return _this.store[fcName](...arguments);
      };
    });
    const storeApiChained = ["addResource", "addResources", "addResourceBundle", "removeResourceBundle"];
    storeApiChained.forEach((fcName) => {
      this[fcName] = function() {
        _this.store[fcName](...arguments);
        return _this;
      };
    });
    const deferred = defer();
    const load = () => {
      const finish = (err, t2) => {
        this.isInitializing = false;
        if (this.isInitialized && !this.initializedStoreOnce)
          this.logger.warn("init: i18next is already initialized. You should call init just once!");
        this.isInitialized = true;
        if (!this.options.isClone)
          this.logger.log("initialized", this.options);
        this.emit("initialized", this.options);
        deferred.resolve(t2);
        callback(err, t2);
      };
      if (this.languages && this.options.compatibilityAPI !== "v1" && !this.isInitialized)
        return finish(null, this.t.bind(this));
      this.changeLanguage(this.options.lng, finish);
    };
    if (this.options.resources || !this.options.initImmediate) {
      load();
    } else {
      setTimeout(load, 0);
    }
    return deferred;
  }
  loadResources(language) {
    let callback = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : noop;
    let usedCallback = callback;
    const usedLng = typeof language === "string" ? language : this.language;
    if (typeof language === "function")
      usedCallback = language;
    if (!this.options.resources || this.options.partialBundledLanguages) {
      if (usedLng && usedLng.toLowerCase() === "cimode" && (!this.options.preload || this.options.preload.length === 0))
        return usedCallback();
      const toLoad = [];
      const append = (lng) => {
        if (!lng)
          return;
        if (lng === "cimode")
          return;
        const lngs = this.services.languageUtils.toResolveHierarchy(lng);
        lngs.forEach((l) => {
          if (l === "cimode")
            return;
          if (toLoad.indexOf(l) < 0)
            toLoad.push(l);
        });
      };
      if (!usedLng) {
        const fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
        fallbacks.forEach((l) => append(l));
      } else {
        append(usedLng);
      }
      if (this.options.preload) {
        this.options.preload.forEach((l) => append(l));
      }
      this.services.backendConnector.load(toLoad, this.options.ns, (e) => {
        if (!e && !this.resolvedLanguage && this.language)
          this.setResolvedLanguage(this.language);
        usedCallback(e);
      });
    } else {
      usedCallback(null);
    }
  }
  reloadResources(lngs, ns, callback) {
    const deferred = defer();
    if (typeof lngs === "function") {
      callback = lngs;
      lngs = void 0;
    }
    if (typeof ns === "function") {
      callback = ns;
      ns = void 0;
    }
    if (!lngs)
      lngs = this.languages;
    if (!ns)
      ns = this.options.ns;
    if (!callback)
      callback = noop;
    this.services.backendConnector.reload(lngs, ns, (err) => {
      deferred.resolve();
      callback(err);
    });
    return deferred;
  }
  use(module2) {
    if (!module2)
      throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");
    if (!module2.type)
      throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");
    if (module2.type === "backend") {
      this.modules.backend = module2;
    }
    if (module2.type === "logger" || module2.log && module2.warn && module2.error) {
      this.modules.logger = module2;
    }
    if (module2.type === "languageDetector") {
      this.modules.languageDetector = module2;
    }
    if (module2.type === "i18nFormat") {
      this.modules.i18nFormat = module2;
    }
    if (module2.type === "postProcessor") {
      postProcessor.addPostProcessor(module2);
    }
    if (module2.type === "formatter") {
      this.modules.formatter = module2;
    }
    if (module2.type === "3rdParty") {
      this.modules.external.push(module2);
    }
    return this;
  }
  setResolvedLanguage(l) {
    if (!l || !this.languages)
      return;
    if (["cimode", "dev"].indexOf(l) > -1)
      return;
    for (let li = 0; li < this.languages.length; li++) {
      const lngInLngs = this.languages[li];
      if (["cimode", "dev"].indexOf(lngInLngs) > -1)
        continue;
      if (this.store.hasLanguageSomeTranslations(lngInLngs)) {
        this.resolvedLanguage = lngInLngs;
        break;
      }
    }
  }
  changeLanguage(lng, callback) {
    var _this2 = this;
    this.isLanguageChangingTo = lng;
    const deferred = defer();
    this.emit("languageChanging", lng);
    const setLngProps = (l) => {
      this.language = l;
      this.languages = this.services.languageUtils.toResolveHierarchy(l);
      this.resolvedLanguage = void 0;
      this.setResolvedLanguage(l);
    };
    const done = (err, l) => {
      if (l) {
        setLngProps(l);
        this.translator.changeLanguage(l);
        this.isLanguageChangingTo = void 0;
        this.emit("languageChanged", l);
        this.logger.log("languageChanged", l);
      } else {
        this.isLanguageChangingTo = void 0;
      }
      deferred.resolve(function() {
        return _this2.t(...arguments);
      });
      if (callback)
        callback(err, function() {
          return _this2.t(...arguments);
        });
    };
    const setLng = (lngs) => {
      if (!lng && !lngs && this.services.languageDetector)
        lngs = [];
      const l = typeof lngs === "string" ? lngs : this.services.languageUtils.getBestMatchFromCodes(lngs);
      if (l) {
        if (!this.language) {
          setLngProps(l);
        }
        if (!this.translator.language)
          this.translator.changeLanguage(l);
        if (this.services.languageDetector && this.services.languageDetector.cacheUserLanguage)
          this.services.languageDetector.cacheUserLanguage(l);
      }
      this.loadResources(l, (err) => {
        done(err, l);
      });
    };
    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {
      setLng(this.services.languageDetector.detect());
    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {
      if (this.services.languageDetector.detect.length === 0) {
        this.services.languageDetector.detect().then(setLng);
      } else {
        this.services.languageDetector.detect(setLng);
      }
    } else {
      setLng(lng);
    }
    return deferred;
  }
  getFixedT(lng, ns, keyPrefix) {
    var _this3 = this;
    const fixedT = function(key, opts) {
      let options;
      if (typeof opts !== "object") {
        for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {
          rest[_key3 - 2] = arguments[_key3];
        }
        options = _this3.options.overloadTranslationOptionHandler([key, opts].concat(rest));
      } else {
        options = {
          ...opts
        };
      }
      options.lng = options.lng || fixedT.lng;
      options.lngs = options.lngs || fixedT.lngs;
      options.ns = options.ns || fixedT.ns;
      if (options.keyPrefix !== "")
        options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;
      const keySeparator = _this3.options.keySeparator || ".";
      let resultKey;
      if (options.keyPrefix && Array.isArray(key)) {
        resultKey = key.map((k) => `${options.keyPrefix}${keySeparator}${k}`);
      } else {
        resultKey = options.keyPrefix ? `${options.keyPrefix}${keySeparator}${key}` : key;
      }
      return _this3.t(resultKey, options);
    };
    if (typeof lng === "string") {
      fixedT.lng = lng;
    } else {
      fixedT.lngs = lng;
    }
    fixedT.ns = ns;
    fixedT.keyPrefix = keyPrefix;
    return fixedT;
  }
  t() {
    return this.translator && this.translator.translate(...arguments);
  }
  exists() {
    return this.translator && this.translator.exists(...arguments);
  }
  setDefaultNamespace(ns) {
    this.options.defaultNS = ns;
  }
  hasLoadedNamespace(ns) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    if (!this.isInitialized) {
      this.logger.warn("hasLoadedNamespace: i18next was not initialized", this.languages);
      return false;
    }
    if (!this.languages || !this.languages.length) {
      this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty", this.languages);
      return false;
    }
    const lng = options.lng || this.resolvedLanguage || this.languages[0];
    const fallbackLng = this.options ? this.options.fallbackLng : false;
    const lastLng = this.languages[this.languages.length - 1];
    if (lng.toLowerCase() === "cimode")
      return true;
    const loadNotPending = (l, n) => {
      const loadState = this.services.backendConnector.state[`${l}|${n}`];
      return loadState === -1 || loadState === 0 || loadState === 2;
    };
    if (options.precheck) {
      const preResult = options.precheck(this, loadNotPending);
      if (preResult !== void 0)
        return preResult;
    }
    if (this.hasResourceBundle(lng, ns))
      return true;
    if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages)
      return true;
    if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns)))
      return true;
    return false;
  }
  loadNamespaces(ns, callback) {
    const deferred = defer();
    if (!this.options.ns) {
      if (callback)
        callback();
      return Promise.resolve();
    }
    if (typeof ns === "string")
      ns = [ns];
    ns.forEach((n) => {
      if (this.options.ns.indexOf(n) < 0)
        this.options.ns.push(n);
    });
    this.loadResources((err) => {
      deferred.resolve();
      if (callback)
        callback(err);
    });
    return deferred;
  }
  loadLanguages(lngs, callback) {
    const deferred = defer();
    if (typeof lngs === "string")
      lngs = [lngs];
    const preloaded = this.options.preload || [];
    const newLngs = lngs.filter((lng) => preloaded.indexOf(lng) < 0 && this.services.languageUtils.isSupportedCode(lng));
    if (!newLngs.length) {
      if (callback)
        callback();
      return Promise.resolve();
    }
    this.options.preload = preloaded.concat(newLngs);
    this.loadResources((err) => {
      deferred.resolve();
      if (callback)
        callback(err);
    });
    return deferred;
  }
  dir(lng) {
    if (!lng)
      lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);
    if (!lng)
      return "rtl";
    const rtlLngs = ["ar", "shu", "sqr", "ssh", "xaa", "yhd", "yud", "aao", "abh", "abv", "acm", "acq", "acw", "acx", "acy", "adf", "ads", "aeb", "aec", "afb", "ajp", "apc", "apd", "arb", "arq", "ars", "ary", "arz", "auz", "avl", "ayh", "ayl", "ayn", "ayp", "bbz", "pga", "he", "iw", "ps", "pbt", "pbu", "pst", "prp", "prd", "ug", "ur", "ydd", "yds", "yih", "ji", "yi", "hbo", "men", "xmn", "fa", "jpr", "peo", "pes", "prs", "dv", "sam", "ckb"];
    const languageUtils = this.services && this.services.languageUtils || new LanguageUtil(get());
    return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf("-arab") > 1 ? "rtl" : "ltr";
  }
  static createInstance() {
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : void 0;
    return new I18n(options, callback);
  }
  cloneInstance() {
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    let callback = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : noop;
    const forkResourceStore = options.forkResourceStore;
    if (forkResourceStore)
      delete options.forkResourceStore;
    const mergedOptions = {
      ...this.options,
      ...options,
      ...{
        isClone: true
      }
    };
    const clone = new I18n(mergedOptions);
    if (options.debug !== void 0 || options.prefix !== void 0) {
      clone.logger = clone.logger.clone(options);
    }
    const membersToCopy = ["store", "services", "language"];
    membersToCopy.forEach((m) => {
      clone[m] = this[m];
    });
    clone.services = {
      ...this.services
    };
    clone.services.utils = {
      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)
    };
    if (forkResourceStore) {
      clone.store = new ResourceStore(this.store.data, mergedOptions);
      clone.services.resourceStore = clone.store;
    }
    clone.translator = new Translator(clone.services, mergedOptions);
    clone.translator.on("*", function(event) {
      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
        args[_key4 - 1] = arguments[_key4];
      }
      clone.emit(event, ...args);
    });
    clone.init(mergedOptions, callback);
    clone.translator.options = mergedOptions;
    clone.translator.backendConnector.services.utils = {
      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)
    };
    return clone;
  }
  toJSON() {
    return {
      options: this.options,
      store: this.store,
      language: this.language,
      languages: this.languages,
      resolvedLanguage: this.resolvedLanguage
    };
  }
};
var instance = I18n.createInstance();
instance.createInstance = I18n.createInstance;
var createInstance = instance.createInstance;
var dir = instance.dir;
var init = instance.init;
var loadResources = instance.loadResources;
var reloadResources = instance.reloadResources;
var use = instance.use;
var changeLanguage = instance.changeLanguage;
var getFixedT = instance.getFixedT;
var t = instance.t;
var exists = instance.exists;
var setDefaultNamespace = instance.setDefaultNamespace;
var hasLoadedNamespace = instance.hasLoadedNamespace;
var loadNamespaces = instance.loadNamespaces;
var loadLanguages = instance.loadLanguages;

// src/common/types.ts
var globalSettingsKeys = [
  "presetFolderPath",
  "GlobalPreset",
  "lastActivePreset",
  "autoApplyPresets",
  "autoApplyFolderPresets",
  "folderPresets",
  "activeFolderPresets",
  "useSelectedFolder",
  "selectedFolder"
];
var DEFAULT_SETTINGS = {
  useSelectedFolder: false,
  selectedFolder: null,
  sortCriterion: "fileName",
  sortOrder: "asc",
  renderContentAsHtml: false,
  dragDropContent: false,
  centerActiveCardOnOpen: true,
  defaultLayout: "auto",
  cardWidthThreshold: 250,
  alignCardHeight: true,
  cardsPerView: 4,
  gridColumns: 4,
  gridCardHeight: 200,
  masonryColumns: 4,
  showFileName: true,
  showFirstHeader: true,
  showBody: true,
  bodyLengthLimit: true,
  bodyLength: 501,
  fileNameFontSize: 17,
  firstHeaderFontSize: 17,
  bodyFontSize: 15,
  presetFolderPath: "CardNavigatorPresets",
  GlobalPreset: "default",
  lastActivePreset: "default",
  autoApplyPresets: false,
  autoApplyFolderPresets: false,
  folderPresets: {},
  activeFolderPresets: {}
};
var rangeSettingConfigs = {
  cardWidthThreshold: { min: 150, max: 600, step: 10 },
  gridColumns: { min: 1, max: 10, step: 1 },
  gridCardHeight: { min: 100, max: 500, step: 10 },
  masonryColumns: { min: 1, max: 10, step: 1 },
  cardsPerView: { min: 1, max: 10, step: 1 },
  fileNameFontSize: { min: 10, max: 25, step: 1 },
  firstHeaderFontSize: { min: 10, max: 25, step: 1 },
  bodyFontSize: { min: 10, max: 25, step: 1 },
  bodyLength: { min: 1, max: 1001, step: 50 }
};
var sortOptions = [
  { value: "fileName_asc", label: "SORT_FILE_NAME_ASC" },
  { value: "fileName_desc", label: "SORT_FILE_NAME_DESC" },
  { value: "lastModified_desc", label: "SORT_LAST_MODIFIED_DESC" },
  { value: "lastModified_asc", label: "SORT_LAST_MODIFIED_ASC" },
  { value: "created_desc", label: "SORT_CREATED_DESC" },
  { value: "created_asc", label: "SORT_CREATED_ASC" }
];
var contentSettings = [
  { name: "SHOW_FILE_NAME", key: "showFileName", description: "TOGGLE_FILE_NAME_DISPLAY" },
  { name: "SHOW_FIRST_HEADER", key: "showFirstHeader", description: "TOGGLE_FIRST_HEADER_DISPLAY" },
  { name: "SHOW_BODY", key: "showBody", description: "TOGGLE_BODY_DISPLAY" }
];
var fontSizeSettings = [
  { name: "FILE_NAME_FONT_SIZE", key: "fileNameFontSize", description: "SET_FILE_NAME_FONT_SIZE" },
  { name: "FIRST_HEADER_FONT_SIZE", key: "firstHeaderFontSize", description: "SET_FIRST_HEADER_FONT_SIZE" },
  { name: "BODY_FONT_SIZE", key: "bodyFontSize", description: "SET_BODY_FONT_SIZE" }
];
var keyboardShortcuts = [
  { name: "SCROLL_UP_ONE_CARD", description: "MOVE_UP_ONE_CARD" },
  { name: "SCROLL_DOWN_ONE_CARD", description: "MOVE_DOWN_ONE_CARD" },
  { name: "SCROLL_LEFT_ONE_CARD", description: "MOVE_LEFT_ONE_CARD" },
  { name: "SCROLL_RIGHT_ONE_CARD", description: "MOVE_RIGHT_ONE_CARD" },
  { name: "SCROLL_UP_LEFT_ONE_PAGE", description: "MOVE_UP_LEFT_ONE_PAGE" },
  { name: "SCROLL_DOWN_RIGHT_ONE_PAGE", description: "MOVE_DOWN_RIGHT_ONE_PAGE" },
  { name: "CENTER_ACTIVE_CARD", description: "CENTER_CURRENTLY_ACTIVE_CARD" },
  { name: "MOVE_FOCUS_TO_CARD_NAVIGATOR", description: "SET_FOCUS_TO_CARD_NAVIGATOR" },
  { name: "OPEN_CARD_CONTEXT_MENU", description: "OPEN_CONTEXT_MENU_FOR_FOCUSED_CARD" }
];
function getTranslatedSortOptions() {
  return sortOptions.map((option) => ({
    ...option,
    label: t(option.label)
  }));
}

// src/ui/toolbar/toolbarActions.ts
var currentPopups = /* @__PURE__ */ new Map();
function handleWindowClick(event, windowObj) {
  onClickOutside(event, windowObj);
}
function onClickOutside(event, windowObj) {
  const target = event.target;
  const toolbarEl = windowObj.document.querySelector(".card-navigator-toolbar-container");
  const existingPopup = currentPopups.get(windowObj);
  if (existingPopup && !existingPopup.element.contains(target) && !(toolbarEl == null ? void 0 : toolbarEl.contains(target))) {
    if (existingPopup.type === "sort" || existingPopup.type === "settings" && !event.composedPath().some((el) => {
      var _a;
      return (_a = el.classList) == null ? void 0 : _a.contains("card-navigator-settings-popup");
    })) {
      closeCurrentPopup(windowObj);
    }
  }
}
function createPopup(className, type, windowObj) {
  closeCurrentPopup(windowObj);
  const popup = windowObj.document.createElement("div");
  popup.className = className;
  const toolbarEl = windowObj.document.querySelector(".card-navigator-toolbar-container");
  if (toolbarEl) {
    toolbarEl.insertAdjacentElement("afterend", popup);
    currentPopups.set(windowObj, { element: popup, type });
    windowObj.addEventListener("click", (e) => handleWindowClick(e, windowObj));
  }
  return popup;
}
function closeCurrentPopup(windowObj) {
  const existingPopup = currentPopups.get(windowObj);
  if (existingPopup) {
    existingPopup.element.remove();
    currentPopups.delete(windowObj);
    windowObj.removeEventListener("click", (e) => handleWindowClick(e, windowObj));
  }
}
function createCollapsibleSection(parentEl, title, collapsed = true) {
  const sectionEl = parentEl.createDiv("tree-item graph-control-section");
  const selfEl = sectionEl.createDiv("tree-item-self");
  const iconEl = selfEl.createDiv("tree-item-icon collapse-icon");
  iconEl.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg>';
  const innerEl = selfEl.createDiv("tree-item-inner");
  innerEl.createEl("header", { text: title, cls: "graph-control-section-header" });
  const contentEl = sectionEl.createDiv("tree-item-children");
  if (collapsed) {
    sectionEl.addClass("is-collapsed");
    iconEl.addClass("is-collapsed");
    contentEl.style.display = "none";
  }
  selfEl.addEventListener("click", () => {
    const isCollapsed = sectionEl.hasClass("is-collapsed");
    sectionEl.toggleClass("is-collapsed", !isCollapsed);
    iconEl.toggleClass("is-collapsed", !isCollapsed);
    contentEl.style.display = isCollapsed ? "block" : "none";
  });
  return contentEl;
}
function createFullWidthSetting(containerEl) {
  const setting = new import_obsidian3.Setting(containerEl);
  setting.settingEl.addClass("setting-full-width");
  setting.settingEl.addClass("no-info");
  return setting;
}
function addFullWidthText(setting, callback) {
  return setting.addText((text) => {
    text.inputEl.style.width = "100%";
    callback(text);
  });
}
function toggleSort(plugin, containerEl) {
  if (!containerEl) {
    console.error("Container element is undefined in toggleSort");
    return;
  }
  const currentWindow = containerEl.ownerDocument.defaultView;
  if (!currentWindow) {
    console.error("Cannot determine the window of the container element");
    return;
  }
  const sortPopup = createPopup("card-navigator-sort-popup", "sort", currentWindow);
  const currentSort = `${plugin.settings.sortCriterion}_${plugin.settings.sortOrder}`;
  const sortOptions2 = getTranslatedSortOptions();
  sortOptions2.forEach((option) => {
    const button = createSortOption(option.value, option.label, currentSort, plugin, containerEl);
    sortPopup.appendChild(button);
  });
  sortPopup.addEventListener("click", (e) => e.stopPropagation());
}
function createSortOption(value, label, currentSort, plugin, containerEl) {
  const button = containerEl.ownerDocument.createElement("button");
  button.textContent = label;
  button.className = `sort-option${currentSort === value ? " active" : ""}`;
  button.addEventListener("click", async () => {
    const [criterion, order2] = value.split("_");
    await updateSortSettings(plugin, criterion, order2, containerEl);
  });
  return button;
}
async function updateSortSettings(plugin, criterion, order2, containerEl) {
  plugin.settings.sortCriterion = criterion;
  plugin.settings.sortOrder = order2;
  await plugin.saveSettings();
  plugin.triggerRefresh();
  const currentWindow = containerEl.ownerDocument.defaultView;
  if (currentWindow) {
    closeCurrentPopup(currentWindow);
  } else {
    console.error("Cannot determine the window of the container element in updateSortSettings");
  }
}
function toggleSettings(plugin, containerEl) {
  if (!containerEl) {
    console.error("Container element is undefined in toggleSettings");
    return;
  }
  const currentWindow = containerEl.ownerDocument.defaultView;
  if (!currentWindow) {
    console.error("Cannot determine the window of the container element");
    return;
  }
  const settingsPopup = createPopup("card-navigator-settings-popup", "settings", currentWindow);
  const settingsManager = plugin.settingsManager;
  addFolderSelectionSetting(settingsPopup, plugin, settingsManager);
  addPresetSettingsToPopup(settingsPopup, plugin);
  const layoutSection = createCollapsibleSection(settingsPopup, t("LAYOUT_SETTINGS"), true);
  const updateLayoutSettings = (layout) => {
    layoutSection.empty();
    addDropdownSetting("defaultLayout", t("DEFAULT_LAYOUT"), layoutSection, plugin, settingsManager, [
      { value: "auto", label: t("AUTO") },
      { value: "list", label: t("LIST") },
      { value: "grid", label: t("GRID") },
      { value: "masonry", label: t("MASONRY") }
    ], (value) => {
      updateLayoutSettings(value);
    });
    if (layout === "auto") {
      addSliderSetting("cardWidthThreshold", t("CARD_WIDTH_THRESHOLD"), layoutSection, plugin, settingsManager);
    }
    if (layout === "grid") {
      addSliderSetting("gridColumns", t("GRID_COLUMNS"), layoutSection, plugin, settingsManager);
    }
    if (layout === "auto" || layout === "grid") {
      addSliderSetting("gridCardHeight", t("GRID_CARD_HEIGHT"), layoutSection, plugin, settingsManager);
    }
    if (layout === "masonry") {
      addSliderSetting("masonryColumns", t("MASONRY_COLUMNS"), layoutSection, plugin, settingsManager);
    }
    if (layout === "auto" || layout === "list") {
      addToggleSetting("alignCardHeight", t("ALIGN_CARD_HEIGHT"), layoutSection, plugin, settingsManager, () => {
        updateCardsPerViewSetting();
      });
      updateCardsPerViewSetting();
    }
    settingsPopup.addEventListener("click", (e) => e.stopPropagation());
  };
  const updateCardsPerViewSetting = () => {
    const cardsPerViewSetting = layoutSection.querySelector(".setting-cards-per-view");
    if (cardsPerViewSetting) {
      cardsPerViewSetting.remove();
    }
    if (plugin.settings.alignCardHeight) {
      addSliderSetting("cardsPerView", t("CARDS_PER_VIEW"), layoutSection, plugin, settingsManager).settingEl.addClass("setting-cards-per-view");
    }
  };
  updateLayoutSettings(plugin.settings.defaultLayout);
  const displaySection = createCollapsibleSection(settingsPopup, t("CARD_CONTENT_SETTINGS"), true);
  addToggleSetting("renderContentAsHtml", t("RENDER_CONTENT_AS_HTML"), displaySection, plugin, settingsManager);
  addToggleSetting("dragDropContent", t("DRAG_AND_DROP_CONTENT"), displaySection, plugin, settingsManager);
  addToggleSetting("showFileName", t("SHOW_FILE_NAME"), displaySection, plugin, settingsManager);
  addToggleSetting("showFirstHeader", t("SHOW_FIRST_HEADER"), displaySection, plugin, settingsManager);
  addToggleSetting("showBody", t("SHOW_BODY"), displaySection, plugin, settingsManager);
  const updateBodyLengthSetting = () => {
    const bodyLengthSetting = displaySection.querySelector(".setting-body-length");
    if (bodyLengthSetting) {
      bodyLengthSetting.remove();
    }
    if (plugin.settings.bodyLengthLimit) {
      addSliderSetting("bodyLength", t("BODY_LENGTH"), displaySection, plugin, settingsManager).settingEl.addClass("setting-body-length");
    }
  };
  addToggleSetting("bodyLengthLimit", t("BODY_LENGTH_LIMIT"), displaySection, plugin, settingsManager, () => {
    updateBodyLengthSetting();
  });
  updateBodyLengthSetting();
  const stylingSection = createCollapsibleSection(settingsPopup, t("CARD_STYLING_SETTINGS"), true);
  addSliderSetting("fileNameFontSize", t("FILE_NAME_FONT_SIZE"), stylingSection, plugin, settingsManager);
  addSliderSetting("firstHeaderFontSize", t("FIRST_HEADER_FONT_SIZE"), stylingSection, plugin, settingsManager);
  addSliderSetting("bodyFontSize", t("BODY_FONT_SIZE"), stylingSection, plugin, settingsManager);
  settingsPopup.addEventListener("click", (e) => e.stopPropagation());
}
async function addPresetSettingsToPopup(settingsPopup, plugin) {
  const presetSection = createCollapsibleSection(settingsPopup, t("PRESET_SETTINGS"), true);
  presetSection.classList.add("preset-settings-section");
  new import_obsidian3.Setting(presetSection).setName(t("AUTO_APPLY_PRESETS")).addToggle(
    (toggle) => toggle.setValue(plugin.settings.autoApplyPresets).onChange(async (value) => {
      plugin.settings.autoApplyPresets = value;
      await plugin.saveSettings();
      const currentFile = plugin.app.workspace.getActiveFile();
      if (currentFile) {
        await plugin.selectAndApplyPresetForCurrentFile();
      }
    })
  );
  const presetNames = await plugin.presetManager.getPresetNames();
  new import_obsidian3.Setting(presetSection).setName(t("GLOBAL_PRESET")).addDropdown(async (dropdown) => {
    presetNames.forEach((name) => {
      dropdown.addOption(name, name);
    });
    dropdown.setValue(plugin.settings.GlobalPreset).onChange(async (value) => {
      await plugin.presetManager.applyGlobalPreset(value);
      plugin.triggerRefresh();
    });
  });
}
function addFolderSelectionSetting(parentEl, plugin, settingsManager) {
  new import_obsidian3.Setting(parentEl).setName(t("SOURCE_FOLDER")).setClass("setting-item-toggle").addToggle(
    (toggle) => toggle.setValue(plugin.settings.useSelectedFolder).onChange(async (value) => {
      await settingsManager.updateBooleanSetting("useSelectedFolder", value);
      toggleSettings(plugin, parentEl);
    })
  );
  if (plugin.settings.useSelectedFolder) {
    const setting = createFullWidthSetting(parentEl);
    addFullWidthText(setting, (text) => {
      new FolderSuggest(plugin.app, text.inputEl);
      text.setPlaceholder(t("SELECT_FOLDER")).setValue(plugin.settings.selectedFolder || "").onChange(async (newFolder) => {
        if (newFolder) {
          await settingsManager.updateSetting("selectedFolder", newFolder);
        }
      });
    });
  }
}
function addDropdownSetting(key, name, container, plugin, settingsManager, options, onChange) {
  new import_obsidian3.Setting(container).setName(name).setClass("setting-item-dropdown").addDropdown((dropdown) => {
    options.forEach((option) => {
      dropdown.addOption(option.value, option.label);
    });
    dropdown.setValue(plugin.settings[key]).onChange(async (value) => {
      await settingsManager.updateSetting(key, value);
      plugin.triggerRefresh();
      if (onChange) {
        onChange(value);
      }
    });
  });
}
function addToggleSetting(key, name, container, plugin, settingsManager, onChange) {
  new import_obsidian3.Setting(container).setName(name).addToggle(
    (toggle) => toggle.setValue(plugin.settings[key]).onChange(async (value) => {
      await settingsManager.updateBooleanSetting(key, value);
      plugin.triggerRefresh();
      if (onChange) {
        onChange();
      }
    })
  );
}
function addSliderSetting(key, name, container, plugin, settingsManager) {
  const config = settingsManager.getNumberSettingConfig(key);
  const setting = new import_obsidian3.Setting(container).setName(name).setClass("setting-item-slider");
  setting.addSlider(
    (slider) => slider.setLimits(config.min, config.max, config.step).setValue(plugin.settings[key]).setDynamicTooltip().onChange(async (value) => {
      if (key === "bodyLength" && !plugin.settings.bodyLengthLimit || key === "cardsPerView" && !plugin.settings.alignCardHeight) {
        return;
      }
      await settingsManager.updateSetting(key, value);
      if (key === "gridColumns" || key === "masonryColumns") {
        plugin.updateCardNavigatorLayout(plugin.settings.defaultLayout);
      }
      plugin.triggerRefresh();
    })
  );
  if (key === "bodyLength") {
    setting.setDisabled(!plugin.settings.bodyLengthLimit);
  }
  return setting;
}

// src/ui/toolbar/toolbar.ts
var Toolbar = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.containerEl = null;
    this.sortPopupOpen = false;
    this.settingsPopupOpen = false;
    this.sortIcon = null;
    this.settingsIcon = null;
    this.popupObserver = null;
  }
  // Initializes the toolbar with the given container element
  initialize(containerEl) {
    this.containerEl = containerEl;
    this.createToolbar();
    this.setupPopupObserver();
  }
  // Creates the toolbar UI elements
  createToolbar() {
    if (!this.containerEl)
      return;
    this.containerEl.empty();
    const toolbarContainer = this.containerEl.createDiv("card-navigator-toolbar-container");
    toolbarContainer.appendChild(this.createSearchContainer());
    toolbarContainer.appendChild(this.createSeparator());
    toolbarContainer.appendChild(this.createActionIconsContainer());
  }
  // Creates the search input container
  createSearchContainer() {
    const container = createDiv("card-navigator-search-container");
    const input = container.createEl("input", {
      type: "text",
      placeholder: t("SEARCH_PLACEHOLDER"),
      cls: "card-navigator-search-input"
    });
    input.addEventListener("input", (0, import_obsidian4.debounce)(async (e) => {
      const searchTerm = e.target.value;
      const view = this.plugin.app.workspace.getActiveViewOfType(CardNavigator);
      if (view) {
        await view.cardContainer.searchCards(searchTerm);
      }
    }, 300));
    return container;
  }
  // Creates a separator element for the toolbar
  createSeparator() {
    return createDiv("toolbar-separator");
  }
  // Creates the container for action icons (folder select, sort, settings)
  createActionIconsContainer() {
    const container = createDiv("card-navigator-action-icons-container");
    const icons = [
      { name: "folder", label: t("SELECT_FOLDER"), action: () => this.openFolderSelector() },
      { name: "arrow-up-narrow-wide", label: t("SORT_CARDS"), action: () => this.toggleSortPopup() },
      { name: "settings", label: t("SETTINGS"), action: () => this.toggleSettingsPopup() }
    ];
    icons.forEach((icon) => {
      const iconElement = this.createToolbarIcon(icon.name, icon.label, icon.action);
      if (icon.name === "arrow-up-narrow-wide") {
        this.sortIcon = iconElement;
      } else if (icon.name === "settings") {
        this.settingsIcon = iconElement;
      }
      container.appendChild(iconElement);
    });
    return container;
  }
  // Helper function to create individual toolbar icons
  createToolbarIcon(iconName, ariaLabel, action) {
    const icon = createDiv("clickable-icon");
    icon.ariaLabel = ariaLabel;
    (0, import_obsidian4.setIcon)(icon, iconName);
    icon.addEventListener("click", () => action());
    return icon;
  }
  // Opens a folder selector modal and displays cards for the selected folder
  openFolderSelector() {
    this.closeAllPopups();
    new FolderSuggestModal(this.plugin, (folder) => {
      const view = this.plugin.app.workspace.getActiveViewOfType(CardNavigator);
      if (view) {
        view.cardContainer.displayCardsForFolder(folder);
      }
    }).open();
  }
  // Toggles the sort popup
  toggleSortPopup() {
    if (this.sortPopupOpen) {
      this.closeSortPopup();
    } else {
      this.closeAllPopups();
      this.openSortPopup();
    }
    this.updateIconStates();
  }
  // Opens the sort popup
  openSortPopup() {
    this.sortPopupOpen = true;
    toggleSort(this.plugin, this.containerEl);
  }
  // Closes the sort popup
  closeSortPopup() {
    var _a;
    this.sortPopupOpen = false;
    const sortPopup = (_a = this.containerEl) == null ? void 0 : _a.querySelector(".card-navigator-sort-popup");
    if (sortPopup) {
      sortPopup.remove();
    }
  }
  // Toggles the settings popup
  toggleSettingsPopup() {
    if (this.settingsPopupOpen) {
      this.closeSettingsPopup();
    } else {
      this.closeAllPopups();
      this.openSettingsPopup();
    }
    this.updateIconStates();
  }
  // Opens the settings popup
  openSettingsPopup() {
    this.settingsPopupOpen = true;
    toggleSettings(this.plugin, this.containerEl);
  }
  // Closes the settings popup
  closeSettingsPopup() {
    var _a;
    this.settingsPopupOpen = false;
    const settingsPopup = (_a = this.containerEl) == null ? void 0 : _a.querySelector(".card-navigator-settings-popup");
    if (settingsPopup) {
      settingsPopup.remove();
    }
  }
  // Closes all open popups
  closeAllPopups() {
    this.closeSortPopup();
    this.closeSettingsPopup();
    this.updateIconStates();
  }
  // Updates the visual state of the icons based on popup open states
  updateIconStates() {
    if (this.sortIcon) {
      this.sortIcon.classList.toggle("card-navigator-icon-active", this.sortPopupOpen);
    }
    if (this.settingsIcon) {
      this.settingsIcon.classList.toggle("card-navigator-icon-active", this.settingsPopupOpen);
    }
  }
  // Sets up an observer to watch for popup removals
  setupPopupObserver() {
    if (!this.containerEl)
      return;
    this.popupObserver = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        if (mutation.type === "childList") {
          mutation.removedNodes.forEach((node) => {
            if (node instanceof HTMLElement) {
              if (node.classList.contains("card-navigator-sort-popup")) {
                this.sortPopupOpen = false;
                this.updateIconStates();
              } else if (node.classList.contains("card-navigator-settings-popup")) {
                this.settingsPopupOpen = false;
                this.updateIconStates();
              }
            }
          });
        }
      });
    });
    this.popupObserver.observe(this.containerEl, { childList: true, subtree: true });
  }
  // Refreshes the toolbar (to be implemented if needed)
  refresh() {
  }
  // Cleans up resources when the toolbar is closed
  onClose() {
    if (this.popupObserver) {
      this.popupObserver.disconnect();
    }
  }
};
var FolderSuggestModal = class extends import_obsidian4.FuzzySuggestModal {
  constructor(plugin, onSelect) {
    super(plugin.app);
    this.plugin = plugin;
    this.onSelect = onSelect;
  }
  // Retrieve all folders in the vault
  getItems() {
    return this.plugin.app.vault.getAllLoadedFiles().filter((file) => file instanceof import_obsidian4.TFolder);
  }
  // Display the folder path as the item text
  getItemText(folder) {
    return folder.path;
  }
  // Handle folder selection
  onChooseItem(folder) {
    this.onSelect(folder);
  }
};

// src/ui/cardContainer/cardContainer.ts
var import_obsidian7 = require("obsidian");

// src/ui/cardContainer/cardMaker.ts
var import_obsidian5 = require("obsidian");

// src/common/utils.ts
var frontmatterRegex = /^---\s*\n([\s\S]*?)\n---\s*\n/;
function separateFrontmatterAndBody(body) {
  const match = body.match(frontmatterRegex);
  if (match) {
    return {
      frontmatter: match[1],
      cleanBody: body.slice(match[0].length).trim()
    };
  }
  return { frontmatter: null, cleanBody: body.trim() };
}
function sortFiles(files, criterion, order2) {
  return [...files].sort((a, b) => {
    let comparison = 0;
    switch (criterion) {
      case "fileName":
        comparison = a.basename.localeCompare(b.basename, void 0, { numeric: true, sensitivity: "base" });
        break;
      case "lastModified":
        comparison = a.stat.mtime - b.stat.mtime;
        break;
      case "created":
        comparison = a.stat.ctime - b.stat.ctime;
        break;
    }
    return order2 === "asc" ? comparison : -comparison;
  });
}

// src/ui/cardContainer/cardMaker.ts
var CardMaker = class {
  constructor(plugin, copyLinkCallback, copyContentCallback) {
    this.plugin = plugin;
    this.copyLinkCallback = copyLinkCallback;
    this.copyContentCallback = copyContentCallback;
  }
  async getCardsForActiveFile(activeFile) {
    const folder = activeFile.parent;
    if (!folder)
      return [];
    const files = folder.children.filter((file) => file instanceof import_obsidian5.TFile && file.extension === "md");
    const sortedFiles = sortFiles(
      files,
      this.plugin.settings.sortCriterion,
      this.plugin.settings.sortOrder
    );
    return Promise.all(sortedFiles.map((file) => this.createCard(file)));
  }
  async createCard(file) {
    try {
      const content = await this.plugin.app.vault.cachedRead(file);
      const { cleanBody } = separateFrontmatterAndBody(content);
      const bodyWithoutHeader = this.removeFirstHeader(cleanBody);
      return {
        file,
        fileName: this.plugin.settings.showFileName ? file.basename : void 0,
        firstHeader: this.plugin.settings.showFirstHeader ? this.findFirstHeader(cleanBody) : void 0,
        body: this.plugin.settings.showBody ? this.truncateBody(bodyWithoutHeader) : void 0
      };
    } catch (error) {
      console.error(`Failed to create card for file ${file.path}:`, error);
      throw error;
    }
  }
  removeFirstHeader(body) {
    return body.replace(/^#+\s+(.+)$/m, "").trim();
  }
  findFirstHeader(body) {
    const match = body.match(/^#+\s+(.+)$/m);
    return match ? match[1].trim() : void 0;
  }
  truncateBody(body) {
    if (!this.plugin.settings.bodyLengthLimit)
      return body;
    const maxLength = this.plugin.settings.bodyLength;
    return body.length <= maxLength ? body : `${body.slice(0, maxLength)}...`;
  }
  createCardElement(card) {
    const cardElement = document.createElement("div");
    cardElement.className = "card-navigator-card";
    cardElement.dataset.cardId = card.file.path;
    this.addCardContent(cardElement, card);
    this.addCardInteractions(cardElement, card);
    return cardElement;
  }
  addCardContent(cardElement, card) {
    if (this.plugin.settings.showFileName && card.fileName) {
      this.addElement(cardElement, "h3", card.fileName, "card-navigator-filename", this.plugin.settings.fileNameFontSize);
    }
    if (this.plugin.settings.showFirstHeader && card.firstHeader) {
      this.addElement(cardElement, "h4", card.firstHeader, "card-navigator-first-header", this.plugin.settings.firstHeaderFontSize);
    }
    if (this.plugin.settings.showBody && card.body) {
      const contentEl = this.addElement(cardElement, "div", "", "card-navigator-body", this.plugin.settings.bodyFontSize);
      if (this.plugin.settings.renderContentAsHtml) {
        import_obsidian5.MarkdownRenderer.render(
          this.plugin.app,
          card.body,
          contentEl,
          card.file.path,
          this.plugin
        );
      } else {
        contentEl.textContent = card.body;
        contentEl.addClass("ellipsis");
      }
    }
  }
  addElement(parent, tag, text, className, fontSize) {
    const element = parent.createEl(tag, { text, cls: className });
    element.style.fontSize = `${fontSize}px`;
    return element;
  }
  addCardInteractions(cardElement, card) {
    cardElement.addEventListener("click", () => this.openFile(card.file));
    this.setupDragAndDrop(cardElement, card);
    this.setupContextMenu(cardElement, card.file);
  }
  setupDragAndDrop(cardElement, card) {
    cardElement.setAttribute("draggable", "true");
    cardElement.addEventListener("dragstart", (event) => {
      if (event.dataTransfer) {
        const dragContent = this.getDragContent(card);
        event.dataTransfer.setData("text/plain", dragContent);
        event.dataTransfer.setDragImage(cardElement, 0, 0);
      }
    });
  }
  getDragContent(card) {
    if (this.plugin.settings.dragDropContent) {
      let content = "";
      if (this.plugin.settings.showFileName && card.fileName) {
        content += `## ${card.fileName}

`;
      }
      if (this.plugin.settings.showFirstHeader && card.firstHeader) {
        content += `# ${card.firstHeader}

`;
      }
      if (this.plugin.settings.showBody && card.body) {
        content += `${card.body}

`;
      }
      return content.trim() || this.plugin.app.fileManager.generateMarkdownLink(card.file, "");
    }
    return this.plugin.app.fileManager.generateMarkdownLink(card.file, "");
  }
  setupContextMenu(cardElement, file) {
    cardElement.addEventListener("contextmenu", (e) => {
      e.preventDefault();
      const menu = new import_obsidian5.Menu();
      this.plugin.app.workspace.trigger("file-menu", menu, file, "more-options");
      menu.addSeparator();
      menu.addItem((item) => {
        item.setTitle(t("COPY_AS_LINK")).setIcon("link").onClick(() => this.copyLinkCallback(file));
      });
      menu.addItem((item) => {
        item.setTitle(t("COPY_CARD_CONTENT")).setIcon("file-text").onClick(() => this.copyContentCallback(file));
      });
      menu.showAtPosition({ x: e.clientX, y: e.clientY });
    });
  }
  openFile(file) {
    this.plugin.app.workspace.getLeaf().openFile(file);
  }
};

// src/ui/layouts/listLayout.ts
var ListLayout = class {
  constructor(isVertical, cardGap, alignCardHeight) {
    this.isVertical = isVertical;
    this.cardGap = cardGap;
    this.alignCardHeight = alignCardHeight;
  }
  // Arrange cards in a list layout (either vertical or horizontal)
  arrange(cards, containerWidth, containerHeight, cardsPerView) {
    const positions = [];
    let currentPosition = 0;
    const cardSize = this.isVertical ? (containerHeight - (cardsPerView - 1) * this.cardGap) / cardsPerView : (containerWidth - (cardsPerView - 1) * this.cardGap) / cardsPerView;
    cards.forEach((card) => {
      const position = {
        card,
        x: this.isVertical ? 0 : currentPosition,
        y: this.isVertical ? currentPosition : 0,
        width: this.isVertical ? containerWidth : cardSize,
        height: this.isVertical ? cardSize : containerHeight
      };
      positions.push(position);
      currentPosition += cardSize + this.cardGap;
    });
    return positions;
  }
  // Get the number of columns in the layout (always 1 for list layout)
  getColumnsCount() {
    return 1;
  }
  // Get the scroll direction based on layout orientation
  getScrollDirection() {
    return this.isVertical ? "vertical" : "horizontal";
  }
  // Get the container style for the list layout
  getContainerStyle() {
    return {
      display: "flex",
      flexDirection: this.isVertical ? "column" : "row",
      gap: `${this.cardGap}px`,
      alignItems: "stretch",
      overflow: this.isVertical ? "auto hidden" : "hidden auto",
      height: "100%",
      width: "calc(100% + var(--size-4-3))",
      paddingRight: "var(--size-4-3)"
    };
  }
  // Get the card style for the list layout
  getCardStyle() {
    return {
      flex: this.alignCardHeight ? "0 0 auto" : "1 0 auto",
      minHeight: this.isVertical ? "0" : "100%",
      minWidth: this.isVertical ? "100%" : "0"
    };
  }
};

// src/ui/layouts/gridLayout.ts
var GridLayout = class {
  constructor(columns, cardGap, settings) {
    this.columns = columns;
    this.cardGap = cardGap;
    this.settings = settings;
  }
  // Arrange cards in a grid layout
  arrange(cards, containerWidth, _containerHeight, _cardsPerView) {
    const positions = [];
    const totalGapWidth = this.cardGap * (this.columns - 1);
    const cardWidth = (containerWidth - totalGapWidth) / this.columns;
    const cardHeight = this.settings.gridCardHeight;
    cards.forEach((card, index) => {
      const column = index % this.columns;
      const row = Math.floor(index / this.columns);
      positions.push({
        card,
        x: column * (cardWidth + this.cardGap),
        y: row * (cardHeight + this.cardGap),
        width: cardWidth,
        height: cardHeight
      });
    });
    return positions;
  }
  // Get the number of columns in the grid
  getColumnsCount() {
    return this.columns;
  }
  // Get the scroll direction for the grid layout (always vertical)
  getScrollDirection() {
    return "vertical";
  }
};

// src/ui/layouts/masonryLayout.ts
var MasonryLayout = class {
  constructor(columns, cardGap, settings, cardMaker) {
    this.columns = columns;
    this.cardGap = cardGap;
    this.settings = settings;
    this.cardMaker = cardMaker;
    this.container = null;
    this.columnElements = [];
    if (columns <= 0) {
      throw new Error("The number of columns must be greater than 0");
    }
  }
  setContainer(container) {
    this.container = container;
    this.setupContainer();
  }
  setupContainer() {
    if (!this.container)
      return;
    this.container.innerHTML = "";
    this.container.className = "masonry-layout";
    this.container.style.setProperty("--column-count", this.columns.toString());
    this.container.style.setProperty("--card-gap", `${this.cardGap}px`);
    this.columnElements = [];
    for (let i = 0; i < this.columns; i++) {
      const column = document.createElement("div");
      column.className = "masonry-column";
      this.container.appendChild(column);
      this.columnElements.push(column);
    }
  }
  arrange(cards, _containerWidth, _containerHeight, _cardsPerView) {
    if (!this.container) {
      console.warn("Container is not set. Please call setContainer before arrange.");
      return [];
    }
    this.setupContainer();
    const cardPositions = [];
    const containerRect = this.container.getBoundingClientRect();
    const focusedCards = new Set(Array.from(this.container.querySelectorAll(".card-navigator-focused")).map((el) => el.dataset.cardId));
    this.columnElements.forEach((column) => column.innerHTML = "");
    cards.forEach((card, index) => {
      const columnIndex = index % this.columns;
      const cardElement = this.cardMaker.createCardElement(card);
      cardElement.classList.add("masonry-card");
      if (focusedCards.has(card.file.path)) {
        cardElement.classList.add("card-navigator-focused");
      }
      this.columnElements[columnIndex].appendChild(cardElement);
      const rect = cardElement.getBoundingClientRect();
      cardPositions.push({
        card,
        x: rect.left - containerRect.left,
        y: rect.top - containerRect.top,
        width: rect.width,
        height: rect.height
      });
    });
    return cardPositions;
  }
  getColumnsCount() {
    return this.columns;
  }
  getScrollDirection() {
    return "vertical";
  }
  destroy() {
    this.container = null;
    this.columnElements = [];
  }
};

// src/common/keyboardNavigator.ts
var import_obsidian6 = require("obsidian");
var KeyboardNavigator = class {
  constructor(plugin, cardContainer, containerEl) {
    this.plugin = plugin;
    this.cardContainer = cardContainer;
    this.containerEl = containerEl;
    this.focusedCardIndex = null;
    this.previousFocusedCardIndex = null;
    this.isFocused = false;
    // Handle keydown events for navigation
    this.handleKeyDown = (e) => {
      if (!this.isFocused)
        return;
      const keyHandlers = {
        ArrowLeft: () => {
          e.preventDefault();
          this.moveFocus(0, -1);
        },
        ArrowRight: () => {
          e.preventDefault();
          this.moveFocus(0, 1);
        },
        ArrowUp: () => {
          e.preventDefault();
          this.moveFocus(-1, 0);
        },
        ArrowDown: () => {
          e.preventDefault();
          this.moveFocus(1, 0);
        },
        PageUp: () => {
          e.preventDefault();
          this.moveFocusPage(-1);
        },
        PageDown: () => {
          e.preventDefault();
          this.moveFocusPage(1);
        },
        Home: () => {
          e.preventDefault();
          this.moveFocusToStart();
        },
        End: () => {
          e.preventDefault();
          this.moveFocusToEnd();
        },
        Enter: () => {
          e.preventDefault();
          this.openFocusedCard();
        },
        ContextMenu: () => {
          e.preventDefault();
          this.openContextMenu();
        },
        e: () => {
          if (e.metaKey && e.ctrlKey) {
            e.preventDefault();
            this.openContextMenu();
          }
        }
      };
      const handler = keyHandlers[e.key];
      if (handler) {
        handler();
      }
    };
    // Handle blur event
    this.handleBlur = () => {
      this.isFocused = false;
      this.updateFocusedCard();
    };
    // Update the focused card's visual state
    this.updateFocusedCard = (0, import_obsidian6.debounce)(() => {
      if (!this.containerEl)
        return;
      if (this.previousFocusedCardIndex !== null) {
        const prevCard = this.containerEl.children[this.previousFocusedCardIndex];
        prevCard.classList.remove("card-navigator-focused");
      }
      if (this.isFocused && this.focusedCardIndex !== null) {
        const currentCard = this.containerEl.children[this.focusedCardIndex];
        currentCard.classList.add("card-navigator-focused");
      }
      this.previousFocusedCardIndex = this.focusedCardIndex;
    }, 50);
    this.containerEl = containerEl;
    this.setupKeyboardEvents();
  }
  // Set up keyboard event listeners
  setupKeyboardEvents() {
    this.containerEl.addEventListener("keydown", this.handleKeyDown);
    this.containerEl.addEventListener("blur", this.handleBlur);
  }
  // Remove keyboard event listeners
  cleanup() {
    this.containerEl.removeEventListener("keydown", this.handleKeyDown);
    this.containerEl.removeEventListener("blur", this.handleBlur);
    this.updateFocusedCard.cancel();
  }
  // Focus the navigator
  focusNavigator() {
    if (!this.containerEl)
      return;
    this.containerEl.tabIndex = -1;
    this.containerEl.focus();
    this.isFocused = true;
    const activeCardIndex = this.findActiveCardIndex();
    if (activeCardIndex !== -1) {
      this.focusedCardIndex = this.ensureValidIndex(activeCardIndex);
    } else {
      const firstVisibleCardIndex = this.findFirstVisibleCardIndex();
      if (firstVisibleCardIndex !== null) {
        this.focusedCardIndex = this.ensureValidIndex(firstVisibleCardIndex);
      } else {
        this.focusedCardIndex = this.ensureValidIndex(0);
      }
    }
    this.updateFocusedCard();
    this.scrollToFocusedCard(true);
  }
  // Blur the navigator
  blurNavigator() {
    this.containerEl.blur();
    this.isFocused = false;
    this.focusedCardIndex = null;
    this.updateFocusedCard();
  }
  // Calculate new index for grid layout
  calculateGridIndex(rowDelta, colDelta, totalCards) {
    var _a, _b, _c, _d;
    const layoutStrategy = this.cardContainer.getLayoutStrategy();
    if (!(layoutStrategy instanceof GridLayout || layoutStrategy instanceof MasonryLayout)) {
      console.warn("The layout strategy is unexpected.");
      return (_a = this.focusedCardIndex) != null ? _a : 0;
    }
    const columns = layoutStrategy.getColumnsCount();
    const currentRow = Math.floor(((_b = this.focusedCardIndex) != null ? _b : 0) / columns);
    const currentCol = ((_c = this.focusedCardIndex) != null ? _c : 0) % columns;
    let newRow = currentRow + rowDelta;
    let newCol = currentCol + colDelta;
    if (newCol < 0) {
      newRow--;
      newCol = columns - 1;
    } else if (newCol >= columns) {
      newRow++;
      newCol = 0;
    }
    const newIndex = newRow * columns + newCol;
    return newIndex >= 0 && newIndex < totalCards ? newIndex : (_d = this.focusedCardIndex) != null ? _d : 0;
  }
  // Calculate new index for list layout
  calculateListIndex(rowDelta, colDelta, totalCards) {
    var _a, _b;
    const newIndex = ((_a = this.focusedCardIndex) != null ? _a : 0) + rowDelta + colDelta;
    return newIndex >= 0 && newIndex < totalCards ? newIndex : (_b = this.focusedCardIndex) != null ? _b : 0;
  }
  ensureValidIndex(index) {
    const totalCards = this.containerEl.children.length;
    return Math.max(0, Math.min(index, totalCards - 1));
  }
  // Move focus based on row and column deltas
  moveFocus(rowDelta, colDelta) {
    if (this.focusedCardIndex === null) {
      this.focusedCardIndex = 0;
    } else {
      const totalCards = this.containerEl.children.length;
      const layoutStrategy = this.cardContainer.getLayoutStrategy();
      if (layoutStrategy instanceof GridLayout || layoutStrategy instanceof MasonryLayout) {
        this.focusedCardIndex = this.ensureValidIndex(this.calculateGridIndex(rowDelta, colDelta, totalCards));
      } else {
        this.focusedCardIndex = this.ensureValidIndex(this.calculateListIndex(rowDelta, colDelta, totalCards));
      }
    }
    this.updateFocusedCard();
    this.scrollToFocusedCard();
  }
  // Move focus by a page (multiple cards at once)
  moveFocusPage(direction) {
    if (this.focusedCardIndex === null)
      return;
    const totalCards = this.containerEl.children.length;
    const cardsPerView = this.plugin.settings.cardsPerView;
    let newIndex;
    if (direction > 0) {
      newIndex = Math.min(totalCards - 1, this.focusedCardIndex + cardsPerView);
    } else {
      newIndex = Math.max(0, this.focusedCardIndex - cardsPerView);
    }
    this.focusedCardIndex = this.ensureValidIndex(newIndex);
    this.updateFocusedCard();
    this.scrollToFocusedCard();
  }
  // Move focus to the first card
  moveFocusToStart() {
    this.focusedCardIndex = this.ensureValidIndex(0);
    this.updateFocusedCard();
    this.scrollToFocusedCard();
  }
  // Move focus to the last card
  moveFocusToEnd() {
    this.focusedCardIndex = this.ensureValidIndex(this.containerEl.children.length - 1);
    this.updateFocusedCard();
    this.scrollToFocusedCard();
  }
  // Scroll to ensure the focused card is visible
  scrollToFocusedCard(immediate = false) {
    if (this.focusedCardIndex === null || !this.containerEl)
      return;
    const focusedCard = this.containerEl.children[this.focusedCardIndex];
    this.cardContainer.centerCard(focusedCard, !immediate);
  }
  // Open the focused card
  openFocusedCard() {
    try {
      if (this.focusedCardIndex === null)
        return;
      const focusedCard = this.containerEl.children[this.focusedCardIndex];
      const file = this.cardContainer.getFileFromCard(focusedCard);
      if (file) {
        this.plugin.app.workspace.getLeaf().openFile(file);
      }
    } catch (error) {
      console.error("An error occurred while opening the card:", error);
    }
  }
  // Open the context menu for the focused card
  openContextMenu() {
    if (this.focusedCardIndex === null)
      return;
    const focusedCard = this.containerEl.children[this.focusedCardIndex];
    const file = this.cardContainer.getFileFromCard(focusedCard);
    if (file) {
      const menu = new import_obsidian6.Menu();
      this.plugin.app.workspace.trigger("file-menu", menu, file, "more-options");
      menu.addItem((item) => {
        item.setTitle(t("COPY_AS_LINK")).setIcon("link").onClick(() => {
          this.cardContainer.copyLink(file);
        });
      });
      menu.addItem((item) => {
        item.setTitle(t("COPY_CARD_CONTENT")).setIcon("file-text").onClick(() => {
          this.cardContainer.copyCardContent(file);
        });
      });
      const rect = focusedCard.getBoundingClientRect();
      menu.showAtPosition({ x: rect.left, y: rect.bottom });
    }
  }
  // Find the index of the active card
  findActiveCardIndex() {
    return Array.from(this.containerEl.children).findIndex(
      (child) => child.classList.contains("card-navigator-active")
    );
  }
  // Find the index of the first visible card
  findFirstVisibleCardIndex() {
    const containerRect = this.containerEl.getBoundingClientRect();
    for (let i = 0; i < this.containerEl.children.length; i++) {
      const cardRect = this.containerEl.children[i].getBoundingClientRect();
      if (this.isCardVisible(cardRect, containerRect)) {
        return i;
      }
    }
    return null;
  }
  // Check if a card is visible within the container
  isCardVisible(cardRect, containerRect) {
    return cardRect.top >= containerRect.top && cardRect.bottom <= containerRect.bottom && cardRect.left >= containerRect.left && cardRect.right <= containerRect.right;
  }
  // Update the layout strategy (currently empty, can be implemented if needed)
  updateLayout(_layoutStrategy) {
  }
};

// src/ui/cardContainer/cardContainer.ts
var CardContainer = class {
  constructor(plugin, leaf) {
    this.plugin = plugin;
    this.leaf = leaf;
    this.keyboardNavigator = null;
    this.cards = [];
    this.focusedCardId = null;
    const leafView = this.leaf.view;
    if (!leafView || !leafView.containerEl) {
      throw new Error("Invalid leaf view or container");
    }
    this.containerEl = leafView.containerEl.createDiv("card-navigator-container");
    if (!this.containerEl) {
      throw new Error("Failed to create container element");
    }
    this.cardMaker = new CardMaker(
      this.plugin,
      (file) => this.copyLink(file),
      (file) => this.copyCardContent(file)
    );
    this.isVertical = this.calculateIsVertical();
    this.cardGap = this.getCSSVariable("--card-navigator-gap", 10);
    try {
      this.layoutStrategy = this.determineAutoLayout();
    } catch (error) {
      console.error("Failed to determine layout strategy:", error);
      this.layoutStrategy = new ListLayout(this.isVertical, this.cardGap, this.plugin.settings.alignCardHeight);
    }
    if (this.layoutStrategy instanceof MasonryLayout && this.containerEl) {
      this.layoutStrategy.setContainer(this.containerEl);
    }
    this.resizeObserver = new ResizeObserver((0, import_obsidian7.debounce)(() => {
      this.handleResize();
    }, 100));
    this.setupResizeObserver();
    this.initializeKeyboardNavigator();
    this.currentLayout = this.plugin.settings.defaultLayout;
  }
  setupResizeObserver() {
    this.resizeObserver = new ResizeObserver(() => {
      this.updateLayout();
    });
    this.resizeObserver.observe(this.containerEl);
    this.updateLayout();
  }
  initializeKeyboardNavigator() {
    if (this.containerEl) {
      this.keyboardNavigator = new KeyboardNavigator(this.plugin, this, this.containerEl);
    } else {
      console.warn("Container element not available for KeyboardNavigator");
    }
  }
  // Determines whether the container should be considered vertical
  calculateIsVertical() {
    if (!this.containerEl)
      return true;
    const { width, height } = this.containerEl.getBoundingClientRect();
    return height > width;
  }
  // Retrieves the value of a CSS variable, or returns a default value if not found
  getCSSVariable(variableName, defaultValue) {
    if (!this.containerEl)
      return defaultValue;
    const valueStr = getComputedStyle(this.containerEl).getPropertyValue(variableName).trim();
    return parseInt(valueStr) || defaultValue;
  }
  // Initializes the card container with necessary settings and prepares it for use
  async initialize(containerEl) {
    this.containerEl = containerEl;
    await this.waitForContainerSize();
    this.updateContainerStyle();
    this.keyboardNavigator = new KeyboardNavigator(this.plugin, this, this.containerEl);
    this.setupResizeObserver();
    this.layoutStrategy = this.determineAutoLayout();
    await this.refresh();
  }
  waitForContainerSize() {
    return new Promise((resolve) => {
      const checkSize = () => {
        if (this.containerEl && this.containerEl.offsetWidth > 0 && this.containerEl.offsetHeight > 0) {
          resolve();
        } else {
          requestAnimationFrame(checkSize);
        }
      };
      checkSize();
    });
  }
  // Updates the container's styles based on the current plugin settings
  updateContainerStyle() {
    if (this.containerEl) {
      this.containerEl.classList.add("card-navigator-container");
      this.containerEl.classList.toggle("vertical", this.isVertical);
      this.containerEl.classList.toggle("horizontal", !this.isVertical);
      this.containerEl.classList.toggle("align-height", this.plugin.settings.alignCardHeight);
      this.containerEl.classList.toggle("flexible-height", !this.plugin.settings.alignCardHeight);
      this.containerEl.style.setProperty("--cards-per-view", this.plugin.settings.cardsPerView.toString());
    }
  }
  // Refreshes the card container by fetching the current folder, sorting files, and rendering the cards
  async refresh() {
    const folder = await this.getCurrentFolder();
    if (!folder || !this.containerEl)
      return;
    this.updateContainerStyle();
    const files = folder.children.filter((file) => file instanceof import_obsidian7.TFile);
    const sortedFiles = this.sortFiles(files);
    const cardsData = await this.createCardsData(sortedFiles);
    await this.renderCards(cardsData);
  }
  // Updates the container settings based on the provided partial settings
  updateSettings(settings) {
    if (settings.alignCardHeight !== void 0) {
      this.plugin.settings.alignCardHeight = settings.alignCardHeight;
    }
    if (settings.bodyLengthLimit !== void 0) {
      this.plugin.settings.bodyLengthLimit = settings.bodyLengthLimit;
    }
    if (settings.bodyLength !== void 0) {
      this.plugin.settings.bodyLength = settings.bodyLength;
    }
  }
  // Determines the appropriate layout strategy based on the container size and plugin settings
  determineAutoLayout() {
    if (!this.containerEl) {
      throw new Error("Container element is not initialized");
    }
    const containerStyle = window.getComputedStyle(this.containerEl);
    const containerWidth = this.containerEl.offsetWidth;
    const paddingLeft = parseFloat(containerStyle.paddingLeft) || 0;
    const paddingRight = parseFloat(containerStyle.paddingRight) || 0;
    const availableWidth = containerWidth - paddingLeft - paddingRight;
    const {
      alignCardHeight,
      cardWidthThreshold,
      defaultLayout
    } = this.plugin.settings;
    if (defaultLayout !== "auto") {
      switch (defaultLayout) {
        case "list":
          return new ListLayout(this.isVertical, this.cardGap, alignCardHeight);
        case "grid":
          return new GridLayout(this.plugin.settings.gridColumns, this.cardGap, this.plugin.settings);
        case "masonry": {
          const masonryLayout = new MasonryLayout(
            this.plugin.settings.masonryColumns,
            this.cardGap,
            this.plugin.settings,
            this.cardMaker
          );
          masonryLayout.setContainer(this.containerEl);
          return masonryLayout;
        }
      }
    }
    let columns = Math.floor((availableWidth + this.cardGap) / (cardWidthThreshold + this.cardGap));
    columns = Math.max(1, columns);
    const adjustedGap = columns === 1 ? Math.min(this.cardGap, 10) : this.cardGap;
    if (columns === 1) {
      return new ListLayout(this.isVertical, adjustedGap, alignCardHeight);
    } else if (alignCardHeight) {
      return new GridLayout(columns, this.cardGap, this.plugin.settings);
    } else {
      const masonryLayout = new MasonryLayout(columns, this.cardGap, this.plugin.settings, this.cardMaker);
      masonryLayout.setContainer(this.containerEl);
      return masonryLayout;
    }
  }
  updateLayout() {
    var _a;
    if (!this.containerEl)
      return;
    const newIsVertical = this.calculateIsVertical();
    const previousIsVertical = this.isVertical;
    this.isVertical = newIsVertical;
    if (this.plugin.settings.defaultLayout === "auto" || this.plugin.settings.defaultLayout === "list" || previousIsVertical !== this.isVertical) {
      this.layoutStrategy = this.determineAutoLayout();
    }
    (_a = this.keyboardNavigator) == null ? void 0 : _a.updateLayout(this.layoutStrategy);
    this.refresh();
  }
  handleResize() {
    this.updateLayout();
  }
  // Returns the current layout strategy
  getLayoutStrategy() {
    return this.layoutStrategy;
  }
  // Sets the layout strategy based on the provided layout type
  setLayout(layout) {
    var _a;
    const { gridColumns, alignCardHeight } = this.plugin.settings;
    this.currentLayout = layout;
    if (layout === "auto") {
      this.layoutStrategy = this.determineAutoLayout();
    } else {
      switch (layout) {
        case "list":
          this.layoutStrategy = new ListLayout(this.isVertical, this.cardGap, alignCardHeight);
          break;
        case "grid":
          this.layoutStrategy = new GridLayout(gridColumns, this.cardGap, this.plugin.settings);
          break;
        case "masonry":
          this.layoutStrategy = new MasonryLayout(
            this.plugin.settings.masonryColumns,
            this.cardGap,
            this.plugin.settings,
            this.cardMaker
          );
          if (this.containerEl) {
            this.layoutStrategy.setContainer(this.containerEl);
          }
          break;
      }
    }
    (_a = this.keyboardNavigator) == null ? void 0 : _a.updateLayout(this.layoutStrategy);
    this.refresh();
  }
  // Checks if the current layout is a grid layout
  isGridLayout() {
    return this.layoutStrategy instanceof GridLayout;
  }
  // Sets the layout orientation of the cards (vertical or horizontal)
  setOrientation(isVertical) {
    this.isVertical = isVertical;
    this.updateContainerStyle();
  }
  // Retrieves the current folder from which to display cards, either selected or active
  async getCurrentFolder() {
    if (this.plugin.settings.useSelectedFolder && this.plugin.settings.selectedFolder) {
      const abstractFile = this.plugin.app.vault.getAbstractFileByPath(this.plugin.settings.selectedFolder);
      return abstractFile instanceof import_obsidian7.TFolder ? abstractFile : null;
    } else {
      const activeFile = this.plugin.app.workspace.getActiveFile();
      return (activeFile == null ? void 0 : activeFile.parent) || null;
    }
  }
  // Sorts the files based on the plugin's current sort criteria
  sortFiles(files) {
    const mdFiles = files.filter((file) => file.extension === "md");
    return sortFiles(mdFiles, this.plugin.settings.sortCriterion, this.plugin.settings.sortOrder);
  }
  // Retrieves the file associated with a given card element
  getFileFromCard(cardElement) {
    if (!this.containerEl)
      return null;
    const cardIndex = Array.from(this.containerEl.children).indexOf(cardElement);
    if (cardIndex !== -1 && cardIndex < this.cards.length) {
      return this.cards[cardIndex].file;
    }
    return null;
  }
  // Focuses on the keyboard navigator to allow keyboard-based navigation
  focusNavigator() {
    var _a;
    (_a = this.keyboardNavigator) == null ? void 0 : _a.focusNavigator();
  }
  // Removes focus from the keyboard navigator
  blurNavigator() {
    var _a;
    (_a = this.keyboardNavigator) == null ? void 0 : _a.blurNavigator();
  }
  // Creates card data objects for a list of files
  async createCardsData(files) {
    const mdFiles = files.filter((file) => file.extension === "md");
    try {
      return await Promise.all(mdFiles.map((file) => this.cardMaker.createCard(file)));
    } catch (error) {
      console.error("\uCE74\uB4DC \uB370\uC774\uD130 \uC0DD\uC131 \uC911 \uC624\uB958 \uBC1C\uC0DD:", error);
      return [];
    }
  }
  // Renders the card elements inside the container
  async renderCards(cardsData) {
    if (!this.containerEl)
      return;
    if (!cardsData || cardsData.length === 0) {
      console.warn("The card data is empty.");
      return;
    }
    if (!this.layoutStrategy) {
      console.error("The layout strategy has not been set.");
      return;
    }
    const containerEl = this.containerEl;
    const currentScrollTop = containerEl.scrollTop;
    const currentScrollLeft = containerEl.scrollLeft;
    const focusedCardIndex = Array.from(containerEl.children).findIndex(
      (child) => child.classList.contains("card-navigator-focused")
    );
    const containerRect = containerEl.getBoundingClientRect();
    const containerStyle = window.getComputedStyle(this.containerEl);
    const paddingLeft = parseFloat(containerStyle.paddingLeft);
    const paddingRight = parseFloat(containerStyle.paddingRight);
    const paddingTop = parseFloat(containerStyle.paddingTop);
    const availableWidth = containerRect.width - paddingLeft - paddingRight;
    if (this.layoutStrategy instanceof ListLayout) {
      const listContainerStyle = this.layoutStrategy.getContainerStyle();
      Object.assign(containerEl.style, listContainerStyle);
    } else {
      containerEl.style.display = "";
      containerEl.style.flexDirection = "";
      containerEl.style.gap = "";
      containerEl.style.alignItems = "";
      containerEl.style.overflowY = "";
      containerEl.style.height = "100%";
    }
    const cardPositions = this.layoutStrategy.arrange(
      cardsData,
      availableWidth,
      containerRect.height,
      this.plugin.settings.cardsPerView
    );
    if (cardPositions.length !== cardsData.length) {
      console.warn("Card positions and card data length mismatch. Adjusting...");
      const minLength = Math.min(cardPositions.length, cardsData.length);
      cardsData = cardsData.slice(0, minLength);
      cardPositions.length = minLength;
    }
    this.focusedCardId = this.getFocusedCardId();
    containerEl.empty();
    this.cards = cardsData;
    cardPositions.forEach((position, index) => {
      const card = cardsData[index];
      const cardEl = this.cardMaker.createCardElement(card);
      if (this.layoutStrategy instanceof ListLayout) {
        const cardStyle = this.layoutStrategy.getCardStyle();
        Object.assign(cardEl.style, cardStyle);
      } else {
        const position2 = cardPositions[index];
        cardEl.style.position = "absolute";
        cardEl.style.left = `${position2.x + paddingLeft}px`;
        cardEl.style.top = `${position2.y + paddingTop}px`;
        cardEl.style.width = `${position2.width}px`;
        cardEl.style.height = typeof position2.height === "number" ? `${position2.height}px` : position2.height;
      }
      containerEl.appendChild(cardEl);
      cardEl.classList.add(this.layoutStrategy.getScrollDirection() === "vertical" ? "vertical" : "horizontal");
      cardEl.classList.toggle("align-height", this.plugin.settings.alignCardHeight);
      cardEl.classList.toggle("card-navigator-active", card.file === this.plugin.app.workspace.getActiveFile());
      if (index === focusedCardIndex) {
        cardEl.classList.add("card-navigator-focused");
      }
      if (card.file.path === this.focusedCardId) {
        cardEl.classList.add("card-navigator-focused");
      }
      containerEl.appendChild(cardEl);
    });
    containerEl.scrollTop = currentScrollTop;
    containerEl.scrollLeft = currentScrollLeft;
    const newActiveCardIndex = Array.from(containerEl.children).findIndex(
      (child) => child.classList.contains("card-navigator-active")
    );
    if (newActiveCardIndex !== -1) {
      this.scrollToActiveCard(false);
    }
    this.updateScrollDirection();
    void this.ensureCardSizesAreSet();
  }
  getFocusedCardId() {
    if (!this.containerEl)
      return null;
    const focusedCard = this.containerEl.querySelector(".card-navigator-focused");
    return focusedCard ? focusedCard.dataset.cardId || null : null;
  }
  focusCard(cardId) {
    this.focusedCardId = cardId;
    this.updateFocusedCard();
  }
  updateFocusedCard() {
    if (!this.containerEl || !this.focusedCardId)
      return;
    const cards = this.containerEl.querySelectorAll(".card-navigator-card");
    cards.forEach((card) => {
      if (card instanceof HTMLElement) {
        if (card.dataset.cardId === this.focusedCardId) {
          card.classList.add("card-navigator-focused");
        } else {
          card.classList.remove("card-navigator-focused");
        }
      }
    });
  }
  // Updates the scroll direction of the container element based on the layout strategy
  updateScrollDirection() {
    if (!this.containerEl)
      return;
    const scrollDirection = this.layoutStrategy.getScrollDirection();
    this.containerEl.style.overflowY = scrollDirection === "vertical" ? "auto" : "hidden";
    this.containerEl.style.overflowX = scrollDirection === "horizontal" ? "auto" : "hidden";
  }
  // Clears the 'focused' status from all card elements
  clearFocusedCards() {
    if (!this.containerEl)
      return;
    Array.from(this.containerEl.children).forEach((card) => {
      card.classList.remove("card-navigator-focused");
    });
  }
  // Ensures the size of the cards is properly set after rendering
  async ensureCardSizesAreSet() {
    return new Promise((resolve) => {
      const checkSizes = () => {
        var _a;
        const firstCard = (_a = this.containerEl) == null ? void 0 : _a.querySelector(".card-navigator-card");
        if (firstCard && firstCard.offsetWidth > 0 && firstCard.offsetHeight > 0) {
          resolve();
        } else {
          requestAnimationFrame(checkSizes);
        }
      };
      checkSizes();
    });
  }
  // Scrolls to the currently active card, centering it within the container
  scrollToActiveCard(animate = true) {
    if (!this.containerEl)
      return;
    const activeCard = this.containerEl.querySelector(".card-navigator-active");
    if (!activeCard)
      return;
    this.centerCard(activeCard, animate);
  }
  // Centers a specific card within the container, either horizontally or vertically
  centerCard(card, animate = true) {
    if (!this.containerEl)
      return;
    const containerRect = this.containerEl.getBoundingClientRect();
    const cardRect = card.getBoundingClientRect();
    let offset2 = 0;
    let scrollProperty;
    if (this.isVertical) {
      const containerVisibleHeight = containerRect.height;
      offset2 = cardRect.top - containerRect.top - (containerVisibleHeight - cardRect.height) / 2;
      scrollProperty = "scrollTop";
    } else {
      const containerVisibleWidth = containerRect.width;
      offset2 = cardRect.left - containerRect.left - (containerVisibleWidth - cardRect.width) / 2;
      scrollProperty = "scrollLeft";
    }
    const newScrollPosition = this.containerEl[scrollProperty] + offset2;
    if (animate) {
      this.smoothScroll(scrollProperty, newScrollPosition);
    } else {
      this.containerEl[scrollProperty] = newScrollPosition;
    }
  }
  // Smoothly scrolls to a target position in the container
  smoothScroll(scrollProperty, targetPosition) {
    if (!this.containerEl)
      return;
    const startPosition = this.containerEl[scrollProperty];
    const distance = targetPosition - startPosition;
    const duration = 300;
    let startTime = null;
    const animation = (currentTime) => {
      if (startTime === null)
        startTime = currentTime;
      const timeElapsed = currentTime - startTime;
      const progress = Math.min(timeElapsed / duration, 1);
      const easeProgress = 0.5 - Math.cos(progress * Math.PI) / 2;
      if (this.containerEl) {
        this.containerEl[scrollProperty] = startPosition + distance * easeProgress;
      }
      if (timeElapsed < duration && this.containerEl) {
        requestAnimationFrame(animation);
      }
    };
    requestAnimationFrame(animation);
  }
  // Centers the currently active card
  centerActiveCard() {
    this.scrollToActiveCard(true);
  }
  // Retrieves the size of the card elements, including the gap between them
  getCardSize() {
    if (!this.containerEl)
      return { width: 0, height: 0 };
    const firstCard = this.containerEl.querySelector(".card-navigator-card");
    if (!firstCard)
      return { width: 0, height: 0 };
    const computedStyle = getComputedStyle(this.containerEl);
    const gap = parseInt(computedStyle.getPropertyValue("--card-navigator-gap") || "0", 10);
    return {
      width: firstCard.offsetWidth + gap,
      height: firstCard.offsetHeight + gap
    };
  }
  // Scrolls the container in the specified direction by a given number of cards
  scrollInDirection(direction, count = 1) {
    if (!this.containerEl)
      return;
    const { width, height } = this.getCardSize();
    const cardsPerView = this.plugin.settings.cardsPerView;
    const totalCards = this.cards.length;
    const isVertical = this.layoutStrategy.getScrollDirection() === "vertical";
    const cardSize = isVertical ? height : width;
    const currentScroll = isVertical ? this.containerEl.scrollTop : this.containerEl.scrollLeft;
    const totalSize = totalCards * cardSize;
    const containerSize = isVertical ? this.containerEl.clientHeight : this.containerEl.clientWidth;
    let targetScroll;
    if (count === cardsPerView) {
      const currentEdgeCard = Math.floor((currentScroll + (direction === "down" || direction === "right" ? containerSize : 0)) / cardSize);
      if (direction === "up" || direction === "left") {
        if (currentEdgeCard < cardsPerView) {
          targetScroll = 0;
        } else {
          targetScroll = Math.max(0, (currentEdgeCard - cardsPerView) * cardSize);
        }
      } else {
        if (totalCards - currentEdgeCard < cardsPerView) {
          targetScroll = totalSize - containerSize;
        } else {
          targetScroll = Math.min(totalSize - containerSize, (currentEdgeCard + 1) * cardSize);
        }
      }
    } else {
      const scrollAmount = cardSize * count;
      if (direction === "up" || direction === "left") {
        targetScroll = Math.max(0, currentScroll - scrollAmount);
      } else {
        targetScroll = Math.min(totalSize - containerSize, currentScroll + scrollAmount);
      }
    }
    this.containerEl.scrollTo({
      [isVertical ? "top" : "left"]: targetScroll,
      behavior: "smooth"
    });
  }
  // Scrolls the container upwards by a specified number of cards
  scrollUp(count = 1) {
    this.scrollInDirection("up", count);
  }
  // Scrolls the container downwards by a specified number of cards
  scrollDown(count = 1) {
    this.scrollInDirection("down", count);
  }
  // Scrolls the container to the left by a specified number of cards
  scrollLeft(count = 1) {
    this.scrollInDirection("left", count);
  }
  // Scrolls the container to the right by a specified number of cards
  scrollRight(count = 1) {
    this.scrollInDirection("right", count);
  }
  // Displays the cards based on the filtered files
  async displayCards(filteredFiles) {
    const sortedFiles = this.sortFiles(filteredFiles);
    const cardsData = await this.createCardsData(sortedFiles);
    await this.renderCards(cardsData);
  }
  // Searches for cards by file body or file name and displays them
  async searchCards(searchTerm) {
    const folder = await this.getCurrentFolder();
    if (!folder)
      return;
    const files = folder.children.filter((file) => file instanceof import_obsidian7.TFile);
    const filteredFiles = await this.filterFilesByContent(files, searchTerm);
    await this.displayCards(filteredFiles);
  }
  // Filters files based on their body or name
  async filterFilesByContent(files, searchTerm) {
    const lowercaseSearchTerm = searchTerm.toLowerCase();
    const filteredFiles = [];
    for (const file of files) {
      const content = await this.plugin.app.vault.cachedRead(file);
      if (file.basename.toLowerCase().includes(lowercaseSearchTerm) || content.toLowerCase().includes(lowercaseSearchTerm)) {
        filteredFiles.push(file);
      }
    }
    return filteredFiles;
  }
  // Displays cards for a specific folder
  async displayCardsForFolder(folder) {
    const files = folder.children.filter((file) => file instanceof import_obsidian7.TFile);
    await this.displayCards(files);
  }
  // Sorts the cards based on a given criterion and order
  async sortCards(criterion, order2) {
    this.plugin.settings.sortCriterion = criterion;
    this.plugin.settings.sortOrder = order2;
    await this.plugin.saveSettings();
    await this.refresh();
  }
  // Copies the link to a file to the clipboard
  copyLink(file) {
    const link = this.plugin.app.fileManager.generateMarkdownLink(file, "");
    navigator.clipboard.writeText(link).then(() => {
      new import_obsidian7.Notice(t("LINK_COPIED_TO_CLIPBOARD"));
    }).catch((err) => {
      console.error(t("FAILED_TO_COPY_LINK"), err);
      new import_obsidian7.Notice(t("FAILED_TO_COPY_LINK"));
    });
  }
  // Copies the content of a card to the clipboard
  async copyCardContent(file) {
    try {
      const content = await this.plugin.app.vault.read(file);
      const { cleanBody } = separateFrontmatterAndBody(content);
      const truncatedBody = this.truncateBody(cleanBody);
      await navigator.clipboard.writeText(truncatedBody);
      new import_obsidian7.Notice(t("CARD_CONTENT_COPIED_TO_CLIPBOARD"));
    } catch (err) {
      console.error(t("FAILED_TO_COPY_CARD_CONTENT"), err);
      new import_obsidian7.Notice(t("FAILED_TO_COPY_CARD_CONTENT"));
    }
  }
  // Truncates card body if it's longer than the allowed maximum length
  truncateBody(body) {
    if (!this.plugin.settings.bodyLengthLimit) {
      return body;
    }
    const maxLength = this.plugin.settings.bodyLength;
    return body.length <= maxLength ? body : `${body.slice(0, maxLength)}...`;
  }
  // Cleans up event listeners when the card container is closed
  onClose() {
    this.plugin.app.workspace.off("active-leaf-change", this.plugin.triggerRefresh);
    this.plugin.app.vault.off("modify", this.plugin.triggerRefresh);
    if (this.resizeObserver) {
      this.resizeObserver.disconnect();
    }
  }
};

// src/ui/cardNavigator.ts
var VIEW_TYPE_CARD_NAVIGATOR = "card-navigator-view";
var CardNavigator = class extends import_obsidian8.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.toolbar = new Toolbar(this.plugin);
    this.cardContainer = new CardContainer(this.plugin, this.leaf);
    this.isVertical = this.calculateIsVertical();
    this.resizeObserver = new ResizeObserver(this.handleResize.bind(this));
    this.keyboardNavigator = new KeyboardNavigator(this.plugin, this.cardContainer, this.containerEl.children[1]);
  }
  // Return the unique identifier for this view
  getViewType() {
    return VIEW_TYPE_CARD_NAVIGATOR;
  }
  // Return the display name for this view
  getDisplayText() {
    return t("CARD_NAVIGATOR");
  }
  // Return the icon name for this view
  getIcon() {
    return "layers-3";
  }
  // Determine if the view should be displayed vertically
  calculateIsVertical() {
    const containerEl = this.leaf.view instanceof import_obsidian8.ItemView ? this.leaf.view.containerEl : this.containerEl;
    const { width, height } = containerEl.getBoundingClientRect();
    return height > width;
  }
  // Handle resize events and update layout if necessary
  handleResize() {
    const newIsVertical = this.calculateIsVertical();
    if (newIsVertical !== this.isVertical) {
      this.isVertical = newIsVertical;
      this.updateLayoutAndRefresh();
    }
  }
  // Open the context menu for the focused card
  openContextMenu() {
    const focusedCard = this.getFocusedCard();
    if (!focusedCard)
      return;
    const file = this.cardContainer.getFileFromCard(focusedCard);
    if (!file)
      return;
    const menu = new import_obsidian8.Menu();
    this.plugin.app.workspace.trigger("file-menu", menu, file, "more-options");
    menu.addSeparator();
    menu.addItem((item) => {
      item.setTitle(t("COPY_AS_LINK")).setIcon("link").onClick(() => {
        this.cardContainer.copyLink(file);
      });
    });
    menu.addItem((item) => {
      item.setTitle(t("COPY_CARD_CONTENT")).setIcon("file-text").onClick(() => {
        this.cardContainer.copyCardContent(file);
      });
    });
    const rect = focusedCard.getBoundingClientRect();
    menu.showAtPosition({ x: rect.left, y: rect.bottom });
  }
  // Focus the keyboard navigator
  focusNavigator() {
    this.keyboardNavigator.focusNavigator();
  }
  // Get the currently focused card element
  getFocusedCard() {
    return this.containerEl.querySelector(".card-navigator-card.card-navigator-focused");
  }
  // Refresh the toolbar and card container
  async refresh() {
    await this.toolbar.refresh();
    await this.cardContainer.refresh();
    this.updateLayoutAndRefresh();
  }
  // Update layout settings and refresh the view
  updateLayoutAndRefresh() {
    const settings = this.plugin.settings;
    if (settings.defaultLayout) {
      this.cardContainer.setLayout(settings.defaultLayout);
    } else {
      this.cardContainer.setLayout("auto");
    }
    this.cardContainer.updateSettings(settings);
    this.cardContainer.refresh();
  }
  // Set up the view when it's opened
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    const navigatorEl = container.createDiv("card-navigator");
    const toolbarEl = navigatorEl.createDiv("card-navigator-toolbar");
    const cardContainerEl = navigatorEl.createDiv("card-navigator-container");
    this.toolbar.initialize(toolbarEl);
    this.cardContainer.initialize(cardContainerEl);
    requestAnimationFrame(async () => {
      this.keyboardNavigator = new KeyboardNavigator(this.plugin, this.cardContainer, cardContainerEl);
      this.isVertical = this.calculateIsVertical();
      this.updateLayoutAndRefresh();
      this.resizeObserver.observe(this.leaf.view.containerEl);
      await this.refresh();
      await this.centerActiveCardOnOpen();
      await this.plugin.loadSettings();
      await new Promise((resolve) => setTimeout(resolve, 0));
      this.updateLayoutAndRefresh();
    });
  }
  // Center the active card when opening the view, if enabled in settings
  async centerActiveCardOnOpen() {
    if (this.plugin.settings.centerActiveCardOnOpen) {
      setTimeout(() => {
        this.cardContainer.centerActiveCard();
      }, 300);
    }
  }
  // Clean up when the view is closed
  async onClose() {
    this.resizeObserver.disconnect();
    this.toolbar.onClose();
    this.cardContainer.onClose();
    this.keyboardNavigator.blurNavigator();
  }
};

// src/ui/settings/settingsTab.ts
var import_obsidian20 = require("obsidian");

// src/ui/settings/presetSettings.ts
var import_obsidian14 = require("obsidian");

// src/ui/settings/components/PresetSuggest.ts
var import_obsidian11 = require("obsidian");

// src/ui/settings/components/Log.ts
var import_obsidian9 = require("obsidian");
function log_error(e) {
  const notice = new import_obsidian9.Notice("", 8e3);
  if (e instanceof CardNavigatorError && e.console_msg) {
    notice.noticeEl.innerHTML = `<b>Card Navigator Error</b>:<br/>${e.message}<br/>Check console for more information`;
    console.error(`Card Navigator Error:`, e.message, "\n", e.console_msg);
  } else {
    notice.noticeEl.innerHTML = `<b>Card Navigator Error</b>:<br/>${e.message}`;
  }
}

// src/ui/settings/components/Error.ts
var CardNavigatorError = class extends Error {
  constructor(msg, console_msg) {
    super(msg);
    this.console_msg = console_msg;
    this.name = this.constructor.name;
    if (Error.captureStackTrace) {
      Error.captureStackTrace(this, this.constructor);
    }
  }
};
function errorWrapperSync(fn2, msg) {
  try {
    return fn2();
  } catch (e) {
    const error = e;
    log_error(new CardNavigatorError(msg, error.message));
    return null;
  }
}

// src/ui/settings/components/Utils.ts
var import_obsidian10 = require("obsidian");
function resolve_tfolder(app, folder_str) {
  folder_str = (0, import_obsidian10.normalizePath)(folder_str);
  const folder = app.vault.getAbstractFileByPath(folder_str);
  if (!folder) {
    throw new CardNavigatorError(`Folder "${folder_str}" doesn't exist`);
  }
  if (!(folder instanceof import_obsidian10.TFolder)) {
    throw new CardNavigatorError(`${folder_str} is a file, not a folder`);
  }
  return folder;
}
function get_tfiles_from_folder(app, folder_str) {
  const folder = resolve_tfolder(app, folder_str);
  const files = [];
  import_obsidian10.Vault.recurseChildren(folder, (file) => {
    if (file instanceof import_obsidian10.TFile) {
      files.push(file);
    }
  });
  files.sort((a, b) => {
    return a.path.localeCompare(b.path);
  });
  return files;
}

// src/ui/settings/components/PresetSuggest.ts
var path = __toESM(require("path"));
var PresetSuggest = class extends TextInputSuggest {
  constructor(app, inputEl, plugin, mode) {
    super(app, inputEl);
    this.app = app;
    this.inputEl = inputEl;
    this.plugin = plugin;
    this.mode = mode;
  }
  get_folder(mode) {
    switch (mode) {
      case 0 /* PresetsFiles */:
        return this.plugin.settings.presetFolderPath;
    }
  }
  get_error_msg(mode) {
    switch (mode) {
      case 0 /* PresetsFiles */:
        return `Presets folder doesn't exist`;
    }
  }
  getSuggestions(input_str) {
    const all_files = errorWrapperSync(
      () => get_tfiles_from_folder(this.app, this.get_folder(this.mode)),
      this.get_error_msg(this.mode)
    );
    if (!all_files) {
      return [];
    }
    const files = [];
    const lower_input_str = input_str.toLowerCase();
    all_files.forEach((file) => {
      if (file instanceof import_obsidian11.TFile && file.extension === "json" && file.path.toLowerCase().includes(lower_input_str)) {
        files.push(file);
      }
    });
    return files.slice(0, 1e3);
  }
  renderSuggestion(file, el) {
    const presetName = path.basename(file.path, ".json");
    el.setText(presetName);
  }
  selectSuggestion(file) {
    const presetName = path.basename(file.path, ".json");
    this.inputEl.value = presetName;
    this.inputEl.trigger("input");
    this.close();
  }
};

// src/ui/settings/modals/PresetEditModal.ts
var import_obsidian12 = require("obsidian");
var PresetEditModal = class extends import_obsidian12.Modal {
  constructor(app, plugin, settingsManager, mode, existingPresetName, refreshPresetList2) {
    super(app);
    this.plugin = plugin;
    this.settingsManager = settingsManager;
    this.mode = mode;
    this.existingPresetName = existingPresetName;
    this.refreshPresetList = refreshPresetList2;
    this.presetName = "";
    this.description = "";
    this.presetData = "";
    this.dataTextArea = null;
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: this.getModalTitle() });
    new import_obsidian12.Setting(contentEl).setName(t("PRESET_NAME")).setDesc(t("ENTER_PRESET_NAME")).addTextArea(async (text) => {
      text.setPlaceholder(t("ENTER_PRESET_NAME_PLACEHOLDER")).setValue(this.getInitialPresetName()).onChange((value) => this.presetName = value);
      text.inputEl.rows = 1;
      text.inputEl.style.width = "350px";
    });
    new import_obsidian12.Setting(contentEl).setName(t("DESCRIPTION")).setDesc(t("ENTER_PRESET_DESCRIPTION")).addTextArea(async (text) => {
      text.setPlaceholder(t("ENTER_PRESET_DESCRIPTION_PLACEHOLDER")).setValue(await this.getInitialDescription()).onChange((value) => this.description = value);
      text.inputEl.rows = 4;
      text.inputEl.style.width = "350px";
    });
    new import_obsidian12.Setting(contentEl).setName(t("PRESET_DATA")).setDesc(t("EDIT_PRESET_DATA_DESC")).addTextArea(async (text) => {
      this.dataTextArea = text;
      const initialData = await this.getInitialPresetData();
      this.presetData = initialData;
      text.setPlaceholder(t("PRESET_DATA_PLACEHOLDER")).setValue(initialData).onChange((value) => this.presetData = value);
      text.inputEl.rows = 10;
      text.inputEl.style.width = "350px";
    });
    new import_obsidian12.Setting(contentEl).addButton((btn) => btn.setButtonText(t("UPDATE_WITH_CURRENT_SETTINGS")).onClick(() => this.updatePresetWithCurrentSettings()));
    new import_obsidian12.Setting(contentEl).addButton((btn) => btn.setButtonText(t("SAVE")).setCta().onClick(() => this.savePreset()));
  }
  getModalTitle() {
    switch (this.mode) {
      case "create":
        return t("CREATE_NEW_PRESET");
      case "edit":
        return t("EDIT_PRESET");
      case "clone":
        return t("CLONE_PRESET");
    }
  }
  getInitialPresetName() {
    switch (this.mode) {
      case "create":
        return "";
      case "edit":
        return this.existingPresetName || "";
      case "clone":
        return t("PRESET_COPY", { name: this.existingPresetName || "" });
    }
  }
  async getInitialDescription() {
    if (this.mode === "create")
      return "";
    const existingPreset = await this.plugin.presetManager.getPreset(this.existingPresetName || "");
    return (existingPreset == null ? void 0 : existingPreset.description) || "";
  }
  async getInitialPresetData() {
    if (this.mode === "create")
      return JSON.stringify(this.plugin.settingsManager.getCurrentSettings(), null, 2);
    const existingPreset = await this.plugin.presetManager.getPreset(this.existingPresetName || "");
    return JSON.stringify((existingPreset == null ? void 0 : existingPreset.settings) || {}, null, 2);
  }
  async updatePresetWithCurrentSettings() {
    const currentSettings = this.plugin.settingsManager.getCurrentSettings();
    this.presetData = JSON.stringify(currentSettings, null, 2);
    if (this.dataTextArea) {
      this.dataTextArea.setValue(this.presetData);
    }
  }
  async savePreset() {
    if (!this.presetName && this.mode !== "edit") {
      new import_obsidian12.Notice(t("ENTER_PRESET_NAME_NOTICE"));
      return;
    }
    if (!this.presetData.trim()) {
      new import_obsidian12.Notice(t("PRESET_DATA_EMPTY"));
      return;
    }
    try {
      const presetSettings = JSON.parse(this.presetData);
      const saveName = this.mode === "edit" ? this.existingPresetName || this.presetName : this.presetName;
      switch (this.mode) {
        case "create":
        case "clone":
          await this.plugin.presetManager.savePreset(saveName, this.description, presetSettings);
          await this.plugin.presetManager.applyGlobalPreset(saveName);
          break;
        case "edit":
          if (this.existingPresetName) {
            if (this.existingPresetName !== saveName) {
              await this.plugin.presetManager.deletePreset(this.existingPresetName);
            }
            await this.plugin.presetManager.savePreset(saveName, this.description, presetSettings);
          }
          break;
      }
      this.close();
      this.settingsManager.applyChanges();
      new import_obsidian12.Notice(t("PRESET_SAVED", { name: saveName }));
      if (this.refreshPresetList) {
        this.refreshPresetList();
      }
    } catch (error) {
      console.error(t("FAILED_TO_SAVE_PRESET"), error);
      new import_obsidian12.Notice(t("PRESET_SAVE_FAILED", { error: error instanceof Error ? error.message : String(error) }));
    }
  }
};

// src/ui/settings/modals/PresetImportExportModal.ts
var import_obsidian13 = require("obsidian");
var PresetImportExportModal = class extends import_obsidian13.Modal {
  constructor(app, plugin, settingsManager, mode, presetName, refreshPresetList2) {
    super(app);
    this.plugin = plugin;
    this.settingsManager = settingsManager;
    this.mode = mode;
    this.presetName = presetName;
    this.refreshPresetList = refreshPresetList2;
    this.importText = "";
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.mode === "import") {
      this.setupImportUI();
    } else {
      this.setupExportUI();
    }
  }
  setupImportUI() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: t("IMPORT_PRESET") });
    const textAreaContainer = contentEl.createDiv("preset-import-textarea-container");
    const textArea = textAreaContainer.createEl("textarea", {
      attr: {
        placeholder: t("PASTE_PRESET_JSON_HERE")
      }
    });
    textArea.rows = 20;
    textArea.style.width = "100%";
    textArea.addEventListener("input", (e) => {
      this.importText = e.target.value;
    });
    new import_obsidian13.Setting(contentEl).addButton((btn) => btn.setButtonText(t("IMPORT")).setCta().onClick(async () => {
      try {
        const presetData = JSON.parse(this.importText);
        if (!presetData.name || !presetData.settings || typeof presetData.description !== "string") {
          throw new Error(t("INVALID_PRESET_DATA"));
        }
        await this.plugin.presetManager.savePreset(presetData.name, presetData.description, presetData.settings);
        this.settingsManager.applyChanges();
        new import_obsidian13.Notice(t("PRESET_IMPORTED_SUCCESSFULLY", { name: presetData.name }));
        this.close();
        if (this.refreshPresetList) {
          this.refreshPresetList();
        }
      } catch (error) {
        if (error instanceof Error) {
          new import_obsidian13.Notice(t("PRESET_IMPORT_FAILED", { error: error.message }));
        } else {
          new import_obsidian13.Notice(t("UNKNOWN_ERROR_DURING_IMPORT"));
        }
      }
    }));
  }
  async setupExportUI() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: t("EXPORT_PRESET") });
    if (this.presetName) {
      try {
        const preset = await this.plugin.presetManager.getPreset(this.presetName);
        if (preset) {
          const jsonString = JSON.stringify(preset, null, 2);
          const textAreaContainer = contentEl.createDiv("preset-export-textarea-container");
          const textArea = textAreaContainer.createEl("textarea", {
            text: jsonString,
            attr: {
              readonly: "true"
            }
          });
          textArea.rows = 20;
          textArea.style.width = "100%";
          new import_obsidian13.Setting(contentEl).addButton((btn) => btn.setButtonText(t("COPY")).setCta().onClick(() => {
            navigator.clipboard.writeText(jsonString);
            new import_obsidian13.Notice(t("PRESET_JSON_COPIED"));
          }));
        } else {
          contentEl.createEl("p", { text: t("PRESET_NOT_FOUND") });
        }
      } catch (error) {
        console.error(t("ERROR_LOADING_PRESET"), error);
        contentEl.createEl("p", { text: t("ERROR_LOADING_PRESET") });
      }
    } else {
      contentEl.createEl("p", { text: t("NO_PRESET_SELECTED") });
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/ui/settings/presetSettings.ts
var presetListContainer;
function addPresetSettings(containerEl, plugin, settingsManager, settingTab) {
  const debouncedRefreshAllSettings = (0, import_obsidian14.debounce)(() => refreshAllSettings(), 200);
  const refreshAllSettings = () => {
    settingTab.updateAllSections();
  };
  addAutoApplyPresetsSection(containerEl, plugin, settingsManager, debouncedRefreshAllSettings);
  if (plugin.settings.autoApplyPresets) {
    addGlobalPresetSection(containerEl, plugin, debouncedRefreshAllSettings);
    addFolderPresetSection(containerEl, plugin, settingsManager, debouncedRefreshAllSettings);
    addPresetManagementSection(containerEl, plugin, settingsManager, debouncedRefreshAllSettings);
    presetListContainer = containerEl.createDiv("preset-list-container");
    refreshPresetList(plugin, settingsManager, debouncedRefreshAllSettings);
  }
}
function addAutoApplyPresetsSection(containerEl, plugin, settingsManager, debouncedRefreshAllSettings) {
  new import_obsidian14.Setting(containerEl).setName(t("AUTO_APPLY_PRESETS")).setDesc(t("AUTO_APPLY_PRESETS_DESC")).addToggle(
    (toggle) => toggle.setValue(plugin.settings.autoApplyPresets).onChange(async (value) => {
      plugin.settings.autoApplyPresets = value;
      await plugin.saveSettings();
      debouncedRefreshAllSettings();
    })
  );
}
async function refreshPresetList(plugin, settingsManager, debouncedRefreshAllSettings) {
  if (!presetListContainer)
    return;
  presetListContainer.empty();
  await addPresetListSection(presetListContainer, plugin, settingsManager, debouncedRefreshAllSettings);
}
function addGlobalPresetSection(containerEl, plugin, debouncedRefreshAllSettings) {
  new import_obsidian14.Setting(containerEl).setName(t("PRESET_FOLDER")).setDesc(t("SELECT_PRESET_FOLDER")).addSearch((cb) => {
    new FolderSuggest(plugin.app, cb.inputEl, async () => {
      const newFolder = cb.inputEl.value;
      if (newFolder !== plugin.settings.presetFolderPath) {
        plugin.settings.presetFolderPath = newFolder;
        await plugin.saveSettings();
        await plugin.presetManager.updatePresetFolder(newFolder);
        debouncedRefreshAllSettings();
      }
    });
    cb.setPlaceholder(t("PRESET_FOLDER_PLACEHOLDER")).setValue(plugin.settings.presetFolderPath);
    const parentEl = cb.inputEl.parentElement;
    if (parentEl) {
      parentEl.classList.add("wide-input-container");
    }
    cb.inputEl.removeAttribute("autofocus");
    setTimeout(() => {
      cb.inputEl.blur();
    }, 0);
  });
}
function addFolderPresetSection(containerEl, plugin, settingsManager, debouncedRefreshAllSettings) {
  var _a;
  new import_obsidian14.Setting(containerEl).setName(t("AUTO_APPLY_FOLDER_PRESET")).setDesc(t("AUTO_APPLY_FOLDER_PRESET_DESC")).addToggle(
    (toggle) => toggle.setValue(plugin.settings.autoApplyFolderPresets).onChange(async (value) => {
      await settingsManager.toggleAutoApplyPresets(value);
      const currentFile = plugin.app.workspace.getActiveFile();
      if (currentFile) {
        await plugin.selectAndApplyPresetForCurrentFile();
      }
    })
  );
  new import_obsidian14.Setting(containerEl).setName(t("ADD_NEW_FOLDER_PRESET")).setDesc(t("ADD_NEW_FOLDER_PRESET_DESC")).addButton(
    (button) => button.setTooltip(t("ADD_NEW_FOLDER_PRESET")).setIcon("plus").setCta().onClick(async () => {
      const newFolderPath = "";
      plugin.settings.folderPresets = plugin.settings.folderPresets || {};
      plugin.settings.activeFolderPresets = plugin.settings.activeFolderPresets || {};
      if (!plugin.settings.folderPresets[newFolderPath]) {
        plugin.settings.folderPresets[newFolderPath] = [];
        plugin.settings.activeFolderPresets[newFolderPath] = "";
        await settingsManager.saveSettings();
        debouncedRefreshAllSettings();
      } else {
        new import_obsidian14.Notice(t("PRESET_ALREADY_EXISTS"));
      }
    })
  );
  plugin.settings.folderPresets = plugin.settings.folderPresets || {};
  plugin.settings.activeFolderPresets = plugin.settings.activeFolderPresets || {};
  for (const [folderPath, presets] of Object.entries(plugin.settings.folderPresets)) {
    const s = new import_obsidian14.Setting(containerEl).addSearch((cb) => {
      new FolderSuggest(plugin.app, cb.inputEl);
      cb.setPlaceholder(t("FOLDER")).setValue(folderPath).onChange((_newFolder) => {
      });
      cb.inputEl.addEventListener("blur", () => {
        var _a2, _b;
        const newFolder = cb.inputEl.value;
        if (newFolder && ((_a2 = plugin.settings.folderPresets) == null ? void 0 : _a2[newFolder])) {
          new import_obsidian14.Notice(t("PRESET_ALREADY_EXISTS_FOR_FOLDER"));
          return;
        }
        if (plugin.settings.folderPresets) {
          delete plugin.settings.folderPresets[folderPath];
          plugin.settings.folderPresets[newFolder] = presets;
        }
        if ((_b = plugin.settings.activeFolderPresets) == null ? void 0 : _b[folderPath]) {
          plugin.settings.activeFolderPresets[newFolder] = plugin.settings.activeFolderPresets[folderPath];
          delete plugin.settings.activeFolderPresets[folderPath];
        }
        settingsManager.saveSettings();
        debouncedRefreshAllSettings();
      });
    });
    const presetInput = s.controlEl.createEl("input", {
      cls: "preset-suggest-input",
      type: "text",
      value: ((_a = plugin.settings.activeFolderPresets) == null ? void 0 : _a[folderPath]) || "",
      placeholder: t("PRESET")
    });
    new PresetSuggest(
      plugin.app,
      presetInput,
      plugin,
      0 /* PresetsFiles */
    );
    presetInput.onblur = async () => {
      const newValue = presetInput.value;
      plugin.settings.activeFolderPresets = plugin.settings.activeFolderPresets || {};
      plugin.settings.folderPresets = plugin.settings.folderPresets || {};
      if (newValue !== plugin.settings.activeFolderPresets[folderPath]) {
        plugin.settings.activeFolderPresets[folderPath] = newValue;
        plugin.settings.folderPresets[folderPath] = [newValue];
        await settingsManager.saveSettings();
        debouncedRefreshAllSettings();
      }
    };
    s.addExtraButton((cb) => {
      cb.setIcon("down-chevron-glyph").setTooltip(t("MOVE_DOWN")).onClick(() => {
        const entries = Object.entries(plugin.settings.folderPresets || {});
        const index = entries.findIndex(([path3]) => path3 === folderPath);
        if (index < entries.length - 1) {
          [entries[index], entries[index + 1]] = [entries[index + 1], entries[index]];
          plugin.settings.folderPresets = Object.fromEntries(entries);
          settingsManager.saveSettings();
          debouncedRefreshAllSettings();
        }
      });
    }).addExtraButton((cb) => {
      cb.setIcon("cross").setTooltip(t("DELETE")).onClick(() => {
        if (plugin.settings.folderPresets) {
          delete plugin.settings.folderPresets[folderPath];
        }
        if (plugin.settings.activeFolderPresets) {
          delete plugin.settings.activeFolderPresets[folderPath];
        }
        settingsManager.saveSettings();
        debouncedRefreshAllSettings();
      });
    });
    s.infoEl.remove();
  }
}
function addPresetManagementSection(containerEl, plugin, settingsManager, debouncedRefreshAllSettings) {
  addPresetManagementSectionContent(containerEl, plugin, settingsManager, debouncedRefreshAllSettings);
}
function addPresetManagementSectionContent(containerEl, plugin, settingsManager, debouncedRefreshAllSettings) {
  new import_obsidian14.Setting(containerEl).setName(t("PRESET_MANAGEMENT_AND_GLOBAL_SETTINGS")).setDesc(t("PRESET_MANAGEMENT_DESC")).addButton(
    (button) => button.setTooltip(t("CREATE_NEW_PRESET")).setIcon("plus").setCta().onClick(async () => {
      const modal = new PresetEditModal(
        plugin.app,
        plugin,
        settingsManager,
        "create",
        void 0,
        debouncedRefreshAllSettings
      );
      await modal.open();
    })
  ).addButton(
    (button) => button.setTooltip(t("IMPORT_PRESET")).setIcon("upload").onClick(async () => {
      const modal = new PresetImportExportModal(
        plugin.app,
        plugin,
        settingsManager,
        "import",
        void 0,
        () => refreshPresetList(plugin, settingsManager, debouncedRefreshAllSettings)
      );
      await modal.open();
    })
  );
}
async function addPresetListSection(containerEl, plugin, settingsManager, debouncedRefreshAllSettings) {
  const presetNames = await plugin.presetManager.getPresetNames();
  const presets = await Promise.all(presetNames.map((name) => plugin.presetManager.getPreset(name)));
  presets.forEach((preset, index) => {
    if (!preset)
      return;
    const presetName = presetNames[index];
    const setting = new import_obsidian14.Setting(containerEl).setName(presetName).setDesc(preset.description || t("NO_DESCRIPTION"));
    if (presetName !== "default") {
      setting.addButton(
        (button) => button.setTooltip(t("EDIT")).setIcon("pencil").onClick(() => {
          new PresetEditModal(
            plugin.app,
            plugin,
            settingsManager,
            "edit",
            presetName,
            debouncedRefreshAllSettings
          ).open();
        })
      );
      setting.addButton(
        (button) => button.setTooltip(t("CLONE")).setIcon("copy").onClick(() => {
          new PresetEditModal(
            plugin.app,
            plugin,
            settingsManager,
            "clone",
            presetName,
            debouncedRefreshAllSettings
          ).open();
        })
      );
      setting.addButton(
        (button) => button.setTooltip(t("DELETE")).setIcon("trash").onClick(async () => {
          if (await settingsManager.confirmDelete(t("PRESET_NAME", { name: presetName }))) {
            await plugin.presetManager.deletePreset(presetName);
            await plugin.presetManager.removePresetFromAllFolders(presetName);
            if (plugin.settings.GlobalPreset === presetName) {
              await plugin.presetManager.applyGlobalPreset("default");
              new import_obsidian14.Notice(t("PRESET_DELETED_NOTICE"));
            }
            settingsManager.applyChanges();
            debouncedRefreshAllSettings();
          }
        })
      );
    }
    setting.addButton(
      (button) => button.setTooltip(t("EXPORT")).setIcon("download").onClick(() => {
        new PresetImportExportModal(plugin.app, plugin, settingsManager, "export", presetName).open();
      })
    ).addToggle((toggle) => {
      toggle.setTooltip(t("SET_AS_GLOBAL_PRESET")).setValue(plugin.settings.GlobalPreset === presetName).onChange(async (value) => {
        if (value) {
          await plugin.presetManager.applyGlobalPreset(presetName);
          debouncedRefreshAllSettings();
        } else if (plugin.settings.GlobalPreset === presetName) {
          toggle.setValue(true);
        }
      });
    });
  });
}

// src/ui/settings/layoutSettings.ts
var import_obsidian15 = require("obsidian");
function addLayoutSettings(containerEl, plugin, settingsManager, settingTab) {
  containerEl.createEl("div", { cls: "settings-section-margin" });
  new import_obsidian15.Setting(containerEl).setName(t("LAYOUT_SETTINGS")).setHeading();
  const settings = {};
  settings.defaultLayout = new import_obsidian15.Setting(containerEl).setName(t("DEFAULT_LAYOUT")).setDesc(t("DEFAULT_LAYOUT_DESC")).addDropdown((dropdown) => {
    dropdown.addOption("auto", t("AUTO")).addOption("list", t("LIST")).addOption("grid", t("GRID")).addOption("masonry", t("MASONRY")).setValue(plugin.settings.defaultLayout).onChange(async (value) => {
      const layout = value;
      await settingsManager.updateSetting("defaultLayout", layout);
      updateSettingsState(layout, plugin.settings.alignCardHeight);
    });
  });
  settings.cardWidthThreshold = settingTab.addSliderSetting(
    containerEl,
    "cardWidthThreshold",
    t("CARD_WIDTH_THRESHOLD"),
    t("CARD_WIDTH_THRESHOLD_DESC")
  );
  settings.alignCardHeight = new import_obsidian15.Setting(containerEl).setName(t("ALIGN_CARD_HEIGHT")).setDesc(t("ALIGN_CARD_HEIGHT_DESC")).addToggle(
    (toggle) => toggle.setValue(plugin.settings.alignCardHeight).onChange(async (value) => {
      await settingsManager.updateSetting("alignCardHeight", value);
      updateSettingsState(plugin.settings.defaultLayout, value);
    })
  );
  settings.cardsPerView = settingTab.addSliderSetting(
    containerEl,
    "cardsPerView",
    t("CARDS_PER_VIEW"),
    t("CARDS_PER_VIEW_DESC")
  );
  settings.gridColumns = settingTab.addSliderSetting(
    containerEl,
    "gridColumns",
    t("GRID_COLUMNS"),
    t("GRID_COLUMNS_DESC")
  );
  settings.gridCardHeight = settingTab.addSliderSetting(
    containerEl,
    "gridCardHeight",
    t("GRID_CARD_HEIGHT"),
    t("GRID_CARD_HEIGHT_DESC")
  );
  settings.masonryColumns = settingTab.addSliderSetting(
    containerEl,
    "masonryColumns",
    t("MASONRY_COLUMNS"),
    t("MASONRY_COLUMNS_DESC")
  );
  function updateSettingsState(layout, alignCardHeight) {
    const updateSettingState = (setting, isEnabled) => {
      setting.setDisabled(!isEnabled);
      if (isEnabled) {
        setting.settingEl.removeClass("setting-disabled");
      } else {
        setting.settingEl.addClass("setting-disabled");
      }
    };
    updateSettingState(settings.cardWidthThreshold, layout === "auto");
    updateSettingState(settings.gridColumns, layout === "grid");
    updateSettingState(settings.gridCardHeight, layout === "auto" || layout === "grid");
    updateSettingState(settings.masonryColumns, layout === "masonry");
    updateSettingState(settings.alignCardHeight, layout === "auto" || layout === "list");
    updateSettingState(settings.cardsPerView, (layout === "auto" || layout === "list") && alignCardHeight);
  }
  updateSettingsState(plugin.settings.defaultLayout, plugin.settings.alignCardHeight);
}

// src/ui/settings/containerSettings.ts
var import_obsidian16 = require("obsidian");
function addContainerSettings(containerEl, plugin, settingsManager, settingTab) {
  containerEl.createEl("div", { cls: "settings-section-margin" });
  new import_obsidian16.Setting(containerEl).setName(t("CONTAINER_SETTINGS")).setHeading();
  settingTab.addToggleSetting(
    containerEl,
    "useSelectedFolder",
    t("SOURCE_FOLDER"),
    t("SOURCE_FOLDER_DESC")
  );
  new import_obsidian16.Setting(containerEl).setName(t("SELECT_FOLDER")).setDesc(t("SELECT_FOLDER_DESC")).addText((cb) => {
    new FolderSuggest(plugin.app, cb.inputEl);
    cb.setPlaceholder(t("SELECT_FOLDER_PLACEHOLDER")).setValue(plugin.settings.selectedFolder || "").onChange(async (newFolder) => {
      if (newFolder) {
        await settingsManager.updateSetting("selectedFolder", newFolder);
      }
    });
    cb.inputEl.addClass("card-navigator-folder-search");
  });
  settingTab.addDropdownSetting(
    containerEl,
    "sortMethod",
    t("DEFAULT_SORT_METHOD"),
    t("DEFAULT_SORT_METHOD_DESC")
  );
}

// src/ui/settings/cardStyleSettings.ts
var import_obsidian17 = require("obsidian");
function addCardStylingSettings(containerEl, plugin, settingsManager, settingTab) {
  containerEl.createEl("div", { cls: "settings-section-margin" });
  new import_obsidian17.Setting(containerEl).setName(t("CARD_STYLING_SETTINGS")).setHeading();
  fontSizeSettings.forEach(({ key, name, description }) => {
    if (key === "fileNameFontSize" || key === "firstHeaderFontSize" || key === "bodyFontSize") {
      settingTab.addSliderSetting(
        containerEl,
        key,
        t(name),
        t(description)
      );
    }
  });
}

// src/ui/settings/cardContentSettings.ts
var import_obsidian18 = require("obsidian");
function addCardContentSettings(containerEl, plugin, settingsManager, settingTab) {
  containerEl.createEl("div", { cls: "settings-section-margin" });
  new import_obsidian18.Setting(containerEl).setName(t("CARD_CONTENT_SETTINGS")).setHeading();
  settingTab.addToggleSetting(
    containerEl,
    "renderContentAsHtml",
    t("RENDER_CONTENT_AS_HTML"),
    t("RENDER_CONTENT_AS_HTML_DESC")
  );
  settingTab.addToggleSetting(
    containerEl,
    "dragDropContent",
    t("DRAG_AND_DROP_CONTENT"),
    t("DRAG_AND_DROP_CONTENT_DESC")
  );
  contentSettings.forEach(({ key, name, description }) => {
    settingTab.addToggleSetting(
      containerEl,
      key,
      t(name),
      t(description)
    );
  });
  settingTab.addToggleSetting(
    containerEl,
    "bodyLengthLimit",
    t("BODY_LENGTH_LIMIT"),
    t("BODY_LENGTH_LIMIT_DESC")
  );
  const bodyLengthSetting = settingTab.addSliderSetting(
    containerEl,
    "bodyLength",
    t("BODY_LENGTH"),
    t("BODY_LENGTH_DESC")
  );
  const updateBodyLengthState = (isLimited) => {
    bodyLengthSetting.setDisabled(!isLimited);
    if (isLimited) {
      bodyLengthSetting.settingEl.removeClass("setting-disabled");
    } else {
      bodyLengthSetting.settingEl.addClass("setting-disabled");
    }
  };
  updateBodyLengthState(plugin.settings.bodyLengthLimit);
}

// src/ui/settings/keyboardShortcutsInfo.ts
var import_obsidian19 = require("obsidian");
function addKeyboardShortcutsInfo(containerEl) {
  containerEl.createEl("div", { cls: "settings-section-margin" });
  new import_obsidian19.Setting(containerEl).setName(t("KEYBOARD_SHORTCUTS")).setHeading();
  new import_obsidian19.Setting(containerEl).setDesc(t("KEYBOARD_SHORTCUTS_DESC"));
  const tableContainer = containerEl.createEl("div", { cls: "keyboard-shortcuts-table-container" });
  const table = tableContainer.createEl("table", { cls: "keyboard-shortcuts-table" });
  const thead = table.createEl("thead");
  const headerRow = thead.createEl("tr");
  headerRow.createEl("th", { text: t("COMMAND") });
  headerRow.createEl("th", { text: t("DESCRIPTION") });
  const tbody = table.createEl("tbody");
  keyboardShortcuts.forEach(({ name, description }) => {
    const row = tbody.createEl("tr");
    row.createEl("td", { text: t(name), cls: "keyboard-shortcut-name" });
    row.createEl("td", { text: t(description), cls: "keyboard-shortcut-description" });
  });
  const customizeNote = containerEl.createEl("p", { cls: "keyboard-shortcuts-note" });
  customizeNote.setText(t("KEYBOARD_SHORTCUTS_CUSTOMIZE_NOTE"));
  const additionalNote = containerEl.createEl("p", { cls: "keyboard-shortcuts-note" });
  additionalNote.setText(t("KEYBOARD_SHORTCUTS_ADDITIONAL_NOTE"));
}

// src/ui/settings/settingsTab.ts
var SettingTab = class extends import_obsidian20.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
    this.sections = {};
    this.settingsManager = plugin.settingsManager;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    this.sections = {
      preset: containerEl.createDiv("preset-section"),
      container: containerEl.createDiv("container-section"),
      layout: containerEl.createDiv("layout-section"),
      cardContent: containerEl.createDiv("card-content-section"),
      cardStyling: containerEl.createDiv("card-styling-section"),
      keyboardShortcuts: containerEl.createDiv("keyboard-shortcuts-section")
    };
    this.updateAllSections();
  }
  updateAllSections() {
    this.updatePresetSettings();
    this.updateContainerSettings();
    this.updateLayoutSettings();
    this.updateCardContentSettings();
    this.updateCardStylingSettings();
    this.updateKeyboardShortcutsInfo();
  }
  updatePresetSettings() {
    this.sections.preset.empty();
    addPresetSettings(this.sections.preset, this.plugin, this.settingsManager, this);
  }
  updateContainerSettings() {
    this.sections.container.empty();
    addContainerSettings(this.sections.container, this.plugin, this.settingsManager, this);
  }
  updateLayoutSettings() {
    this.sections.layout.empty();
    addLayoutSettings(this.sections.layout, this.plugin, this.settingsManager, this);
  }
  updateCardContentSettings() {
    this.sections.cardContent.empty();
    addCardContentSettings(this.sections.cardContent, this.plugin, this.settingsManager, this);
  }
  updateCardStylingSettings() {
    this.sections.cardStyling.empty();
    addCardStylingSettings(this.sections.cardStyling, this.plugin, this.settingsManager, this);
  }
  updateKeyboardShortcutsInfo() {
    this.sections.keyboardShortcuts.empty();
    addKeyboardShortcutsInfo(this.sections.keyboardShortcuts);
  }
  refreshSettingsUI(changedSetting) {
    switch (changedSetting) {
      case "lastActivePreset":
      case "folderPresets":
      case "activeFolderPresets":
        this.updatePresetSettings();
        break;
      case "useSelectedFolder":
      case "selectedFolder":
      case "sortCriterion":
      case "sortOrder":
      case "centerActiveCardOnOpen":
        this.updateContainerSettings();
        break;
      case "defaultLayout":
      case "cardWidthThreshold":
      case "alignCardHeight":
      case "cardsPerView":
      case "gridColumns":
      case "gridCardHeight":
      case "masonryColumns":
        this.updateLayoutSettings();
        break;
      case "renderContentAsHtml":
      case "dragDropContent":
      case "showFileName":
      case "showFirstHeader":
      case "showBody":
      case "bodyLengthLimit":
      case "bodyLength":
        this.updateCardContentSettings();
        break;
      case "fileNameFontSize":
      case "firstHeaderFontSize":
      case "bodyFontSize":
        this.updateCardStylingSettings();
        break;
      default:
        this.updateAllSections();
    }
  }
  addToggleSetting(containerEl, key, name, desc) {
    return new import_obsidian20.Setting(containerEl).setName(name).setDesc(desc).addToggle(
      (toggle) => toggle.setValue(this.plugin.settings[key]).onChange(async (value) => {
        await this.settingsManager.updateBooleanSetting(key, value);
      })
    );
  }
  addSliderSetting(containerEl, key, name, desc) {
    const config = this.settingsManager.getNumberSettingConfig(key);
    return new import_obsidian20.Setting(containerEl).setName(name).setDesc(desc).addSlider(
      (slider) => slider.setLimits(config.min, config.max, config.step).setValue(this.plugin.settings[key]).setDynamicTooltip().onChange(async (value) => {
        await this.settingsManager.updateSetting(key, value);
      })
    );
  }
  addDropdownSetting(containerEl, key, name, desc) {
    return new import_obsidian20.Setting(containerEl).setName(t(name)).setDesc(t(desc)).addDropdown((dropdown) => {
      sortOptions.forEach((option) => {
        dropdown.addOption(option.value, t(option.label));
      });
      dropdown.setValue(`${this.plugin.settings.sortCriterion}_${this.plugin.settings.sortOrder}`).onChange(async (value) => {
        const [criterion, order2] = value.split("_");
        await this.settingsManager.updateSetting("sortCriterion", criterion);
        await this.settingsManager.updateSetting("sortOrder", order2);
      });
    });
  }
};

// src/ui/settings/settingsManager.ts
var import_obsidian21 = require("obsidian");
var SettingsManager = class {
  constructor(plugin, presetManager) {
    this.plugin = plugin;
    this.presetManager = presetManager;
    this.saveSettingsDebounced = (0, import_obsidian21.debounce)(async () => {
      try {
        await this.plugin.saveSettings();
      } catch (error) {
        console.error("Error saving settings:", error);
      }
    }, 500);
  }
  async saveSettings() {
    try {
      await this.plugin.saveSettings();
    } catch (error) {
      console.error(t("ERROR_SAVING_SETTINGS"), error);
    }
  }
  async loadSettings() {
    const loadedData = await this.plugin.loadData();
    if (loadedData) {
      this.plugin.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
    } else {
      this.plugin.settings = { ...DEFAULT_SETTINGS };
    }
    for (const key in DEFAULT_SETTINGS) {
      if (!(key in this.plugin.settings)) {
        this.plugin.settings[key] = DEFAULT_SETTINGS[key];
      }
    }
    if (!this.plugin.settings.folderPresets) {
      this.plugin.settings.folderPresets = {};
    }
    if (!this.plugin.settings.activeFolderPresets) {
      this.plugin.settings.activeFolderPresets = {};
    }
    await this.saveSettings();
    await this.saveDefaultPreset();
  }
  async saveDefaultPreset() {
    const presetFolderPath = this.plugin.settings.presetFolderPath;
    const filePath = `${presetFolderPath}/default.json`;
    try {
      await this.plugin.app.vault.adapter.write(filePath, JSON.stringify(DEFAULT_SETTINGS, null, 2));
    } catch (error) {
      console.error(t("ERROR_SAVING_DEFAULT_PRESET"), error);
    }
  }
  async updateSetting(key, value) {
    this.plugin.settings[key] = value;
    this.saveSettingsDebounced();
    this.plugin.triggerRefresh();
  }
  async confirmDelete(itemName) {
    return new Promise((resolve) => {
      new ConfirmDeleteModal(this.plugin.app, itemName, (result) => {
        resolve(result);
      }).open();
    });
  }
  applyChanges() {
    this.plugin.triggerRefresh();
  }
  getCurrentSettings() {
    const currentSettings = { ...this.plugin.settings };
    globalSettingsKeys.forEach((key) => delete currentSettings[key]);
    return currentSettings;
  }
  getActiveFolder() {
    return this.plugin.settings.selectedFolder;
  }
  async updateSelectedFolder(folder) {
    await this.updateSetting("selectedFolder", folder ? folder.path : null);
  }
  getNumberSettingConfig(key) {
    return rangeSettingConfigs[key];
  }
  async updateBooleanSetting(key, value) {
    await this.updateSetting(key, value);
  }
  async getPresetFiles() {
    const presetFolderPath = this.plugin.settings.presetFolderPath;
    const presetFolder = this.plugin.app.vault.getAbstractFileByPath(presetFolderPath);
    if (presetFolder instanceof import_obsidian21.TFolder) {
      return presetFolder.children.filter((file) => file instanceof import_obsidian21.TFile && file.extension === "json");
    }
    return [];
  }
  async loadPresetFromFile(fileName) {
    const presetFolderPath = this.plugin.settings.presetFolderPath;
    const filePath = `${presetFolderPath}/${fileName}`;
    try {
      const content = await this.plugin.app.vault.adapter.read(filePath);
      return JSON.parse(content);
    } catch (error) {
      console.error(t("ERROR_LOADING_PRESET_FROM_FILE", { fileName }), error);
      return null;
    }
  }
  async saveAsNewPreset(presetName, settings) {
    const presetFolderPath = this.plugin.settings.presetFolderPath;
    const filePath = `${presetFolderPath}/${presetName}.json`;
    const presetSettings = settings || this.getCurrentSettings();
    try {
      await this.plugin.app.vault.adapter.write(filePath, JSON.stringify(presetSettings, null, 2));
      return true;
    } catch (error) {
      console.error(t("ERROR_SAVING_NEW_PRESET", { presetName }), error);
      return false;
    }
  }
  getFolderPresets() {
    return this.plugin.settings.folderPresets || {};
  }
  getPresetsForFolder(folderPath) {
    var _a;
    return ((_a = this.plugin.settings.folderPresets) == null ? void 0 : _a[folderPath]) || [];
  }
  async addPresetToFolder(folderPath, presetName) {
    if (!this.plugin.settings.folderPresets) {
      this.plugin.settings.folderPresets = {};
    }
    if (!this.plugin.settings.folderPresets[folderPath]) {
      this.plugin.settings.folderPresets[folderPath] = [];
    }
    if (!this.plugin.settings.folderPresets[folderPath].includes(presetName)) {
      this.plugin.settings.folderPresets[folderPath].push(presetName);
      await this.saveSettings();
    }
  }
  async removePresetFromFolder(folderPath, presetName) {
    if (this.plugin.settings.folderPresets && this.plugin.settings.folderPresets[folderPath]) {
      this.plugin.settings.folderPresets[folderPath] = this.plugin.settings.folderPresets[folderPath].filter((name) => name !== presetName);
      if (this.plugin.settings.folderPresets[folderPath].length === 0) {
        delete this.plugin.settings.folderPresets[folderPath];
      }
      await this.saveSettings();
    }
  }
  async setDefaultPresetForFolder(folderPath, presetName) {
    if (!this.plugin.settings.folderPresets) {
      this.plugin.settings.folderPresets = {};
    }
    if (!this.plugin.settings.folderPresets[folderPath]) {
      this.plugin.settings.folderPresets[folderPath] = [];
    }
    this.plugin.settings.folderPresets[folderPath] = [
      presetName,
      ...this.plugin.settings.folderPresets[folderPath].filter((name) => name !== presetName)
    ];
    await this.saveSettings();
  }
  async toggleAutoApplyPresets(value) {
    await this.updateSetting("autoApplyFolderPresets", value);
  }
  async updateLastActivePreset(presetName) {
    await this.updateSetting("lastActivePreset", presetName);
  }
  async updateGlobalPreset(presetName) {
    await this.updateSetting("GlobalPreset", presetName);
  }
  async updateAutoApplyFolderPresets(value) {
    await this.updateSetting("autoApplyFolderPresets", value);
  }
};
var ConfirmDeleteModal = class extends import_obsidian21.Modal {
  constructor(app, itemName, onChoice) {
    super(app);
    this.itemName = itemName;
    this.onChoice = onChoice;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: t("CONFIRM_DELETE") });
    contentEl.createEl("p", { text: t("CONFIRM_DELETE_ITEM") });
    const buttonContainer = contentEl.createDiv("button-container");
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.marginTop = "20px";
    const cancelButton = buttonContainer.createEl("button", { text: t("CANCEL") });
    cancelButton.style.marginRight = "10px";
    cancelButton.onclick = () => {
      this.close();
      this.onChoice(false);
    };
    const deleteButton = buttonContainer.createEl("button", { text: t("DELETE") });
    deleteButton.onclick = () => {
      this.close();
      this.onChoice(true);
    };
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/ui/settings/PresetManager.ts
var path2 = __toESM(require("path"));
var PresetManager = class {
  constructor(app, plugin, settings) {
    this.app = app;
    this.plugin = plugin;
    this.settings = settings;
    this.presetCache = /* @__PURE__ */ new Map();
    this.presetFolder = this.settings.presetFolderPath || "CardNavigatorPresets";
    if (!this.settings.folderPresets) {
      this.settings.folderPresets = {};
    }
    if (!this.settings.activeFolderPresets) {
      this.settings.activeFolderPresets = {};
    }
  }
  updatePresetFolder(newFolder) {
    this.presetFolder = newFolder;
    this.presetCache.clear();
  }
  async ensurePresetFolder() {
    if (!await this.app.vault.adapter.exists(this.presetFolder)) {
      await this.app.vault.createFolder(this.presetFolder);
    }
  }
  async initialize() {
    await this.ensurePresetFolder();
    await this.loadPresetsFromFiles();
    if (!await this.presetExists("default")) {
      const defaultPresetSettings = Object.fromEntries(
        Object.entries(DEFAULT_SETTINGS).filter(([key]) => !globalSettingsKeys.includes(key))
      );
      const defaultPreset = {
        name: "default",
        settings: defaultPresetSettings,
        isDefault: true,
        description: "Default preset"
      };
      await this.savePresetToFile("default", defaultPreset);
    }
  }
  async loadPreset(name) {
    const preset = await this.getPreset(name);
    if (!preset) {
      throw new Error(t("PRESET_NOT_FOUND", { name }));
    }
    this.settings = {
      ...this.settings,
      ...preset.settings
    };
    this.settings.lastActivePreset = name;
    await this.plugin.saveSettings();
    this.plugin.refreshCardNavigator();
  }
  async savePreset(name, description, settings) {
    const currentSettings = settings || this.getCurrentSettings();
    const preset = {
      name,
      settings: currentSettings,
      isDefault: false,
      description
    };
    await this.savePresetToFile(name, preset);
    this.presetCache.set(name, preset);
  }
  getCurrentSettings() {
    const currentSettings = { ...this.plugin.settings };
    globalSettingsKeys.forEach((key) => delete currentSettings[key]);
    return currentSettings;
  }
  async loadPresetFromFile(name) {
    const filePath = `${this.presetFolder}/${name}.json`;
    try {
      const content = await this.app.vault.adapter.read(filePath);
      const preset = JSON.parse(content);
      this.presetCache.set(name, preset);
      return preset;
    } catch (error) {
      console.error(`Error loading preset ${name}:`, error);
      return null;
    }
  }
  async savePresetToFile(name, preset) {
    const filePath = `${this.presetFolder}/${name}.json`;
    await this.app.vault.adapter.write(filePath, JSON.stringify(preset, null, 2));
    this.presetCache.set(name, preset);
  }
  async deletePreset(name) {
    const filePath = `${this.presetFolder}/${name}.json`;
    await this.app.vault.adapter.remove(filePath);
    this.presetCache.delete(name);
  }
  async renamePreset(oldName, newName) {
    const preset = await this.getPreset(oldName);
    if (!preset) {
      throw new Error(t("PRESET_NOT_FOUND", { name: oldName }));
    }
    preset.name = newName;
    await this.savePresetToFile(newName, preset);
    await this.deletePreset(oldName);
  }
  async exportPresets() {
    const presets = await this.getPresets();
    return JSON.stringify(presets, null, 2);
  }
  async importPresets(jsonString) {
    const importedPresets = JSON.parse(jsonString);
    for (const [name, preset] of Object.entries(importedPresets)) {
      await this.savePresetToFile(name, preset);
    }
  }
  async getPresets() {
    const presetNames = await this.getPresetNames();
    const presets = {};
    for (const name of presetNames) {
      const preset = await this.getPreset(name);
      if (preset) {
        presets[name] = preset;
      }
    }
    return presets;
  }
  async removeFolderPreset(folderPath, presetName) {
    if (this.settings.folderPresets && this.settings.folderPresets[folderPath]) {
      this.settings.folderPresets[folderPath] = this.settings.folderPresets[folderPath].filter((name) => name !== presetName);
      if (this.settings.folderPresets[folderPath].length === 0) {
        delete this.settings.folderPresets[folderPath];
      }
      await this.plugin.saveSettings();
    }
  }
  async getPresetNames() {
    const presetFiles = await this.app.vault.adapter.list(this.presetFolder);
    return presetFiles.files.filter((file) => file.endsWith(".json")).map((file) => path2.basename(file, ".json"));
  }
  async clonePreset(sourceName, newName) {
    const sourcePreset = await this.getPreset(sourceName);
    if (!sourcePreset) {
      throw new Error(t("SOURCE_PRESET_NOT_FOUND", { name: sourceName }));
    }
    if (await this.presetExists(newName)) {
      throw new Error(t("PRESET_ALREADY_EXISTS_WITH_NAME", { name: newName }));
    }
    const clonedPreset = { ...sourcePreset, name: newName, isDefault: false };
    await this.savePresetToFile(newName, clonedPreset);
  }
  async exportPreset(name) {
    const preset = await this.getPreset(name);
    if (!preset) {
      throw new Error(t("PRESET_NOT_FOUND", { name }));
    }
    return JSON.stringify(preset, null, 2);
  }
  async importPreset(jsonString) {
    try {
      const importedPreset = JSON.parse(jsonString);
      if (!importedPreset.name || !importedPreset.settings) {
        throw new Error(t("INVALID_PRESET_FORMAT"));
      }
      await this.savePresetToFile(importedPreset.name, importedPreset);
    } catch (error) {
      throw new Error(t("PRESET_IMPORT_FAILED", { error: error instanceof Error ? error.message : String(error) }));
    }
  }
  async getPreset(presetName) {
    if (this.presetCache.has(presetName)) {
      return this.presetCache.get(presetName);
    }
    const preset = await this.loadPresetFromFile(presetName);
    return preset || void 0;
  }
  getFolderPresets() {
    return this.settings.folderPresets || {};
  }
  async deleteAllPresets() {
    const presetNames = await this.getPresetNames();
    for (const name of presetNames) {
      await this.deletePreset(name);
    }
  }
  async removePresetFromAllFolders(presetName) {
    if (this.plugin.settings.folderPresets) {
      for (const folderPath in this.plugin.settings.folderPresets) {
        this.plugin.settings.folderPresets[folderPath] = this.plugin.settings.folderPresets[folderPath].filter((name) => name !== presetName);
        if (this.plugin.settings.folderPresets[folderPath].length === 0) {
          delete this.plugin.settings.folderPresets[folderPath];
        }
      }
      await this.plugin.saveSettings();
    }
  }
  async resetToDefaultPresets() {
    await this.deleteAllPresets();
    const defaultPreset = {
      name: "default",
      settings: DEFAULT_SETTINGS,
      isDefault: true,
      description: "Default preset"
    };
    await this.savePresetToFile("default", defaultPreset);
  }
  async presetExists(name) {
    const filePath = `${this.presetFolder}/${name}.json`;
    return await this.app.vault.adapter.exists(filePath);
  }
  async loadPresetsFromFiles() {
    const presetFiles = await this.app.vault.adapter.list(this.presetFolder);
    for (const file of presetFiles.files) {
      if (file.endsWith(".json")) {
        const presetName = path2.basename(file, ".json");
        await this.loadPresetFromFile(presetName);
      }
    }
  }
  async applyGlobalPreset(presetName) {
    const globalPresetName = presetName || this.plugin.settings.GlobalPreset;
    if (!globalPresetName) {
      console.error(t("GLOBAL_PRESET_NOT_SET"));
      return;
    }
    await this.applyPreset(globalPresetName);
    this.plugin.settings.GlobalPreset = globalPresetName;
    await this.plugin.saveSettings();
  }
  async applyFolderPreset(folderPath) {
    let currentPath = folderPath;
    let presetApplied = false;
    while (currentPath && !presetApplied) {
      if (!this.plugin.settings.activeFolderPresets) {
        this.plugin.settings.activeFolderPresets = {};
      }
      const presetName = this.plugin.settings.activeFolderPresets[currentPath];
      if (presetName) {
        await this.applyPreset(presetName);
        presetApplied = true;
      } else {
        currentPath = currentPath.includes("/") ? currentPath.substring(0, currentPath.lastIndexOf("/")) : null;
      }
    }
    if (!presetApplied) {
      await this.applyGlobalPreset();
    }
  }
  async applyPreset(presetName) {
    const preset = await this.getPreset(presetName);
    if (preset) {
      const globalSettings = globalSettingsKeys.reduce((acc, key) => {
        if (key in this.plugin.settings && this.plugin.settings[key] !== void 0) {
          acc[key] = this.plugin.settings[key];
        }
        return acc;
      }, {});
      this.plugin.settings = {
        ...DEFAULT_SETTINGS,
        // 기본 설정으로 시작
        ...preset.settings,
        // 프리셋 설정 적용
        ...globalSettings,
        // 글로벌 설정값 복원
        lastActivePreset: presetName
      };
      await this.plugin.saveSettings();
      this.plugin.refreshCardNavigator();
    } else {
      console.error(t("PRESET_NOT_FOUND", { name: presetName }));
    }
  }
  async setFolderPreset(folderPath, presetName) {
    if (!this.settings.folderPresets) {
      this.settings.folderPresets = {};
    }
    this.settings.folderPresets[folderPath] = [presetName];
    await this.plugin.saveSettings();
  }
  async toggleAutoApplyFolderPresets(value) {
    this.settings.autoApplyFolderPresets = value;
    await this.plugin.saveSettings();
  }
};

// src/main.ts
var languageResources = {
  en: () => Promise.resolve().then(() => __toESM(require_en())),
  ko: () => Promise.resolve().then(() => __toESM(require_ko()))
};
var translationLanguage = Object.keys(languageResources).includes(import_obsidian22.moment.locale()) ? import_obsidian22.moment.locale() : "en";
var CardNavigatorPlugin = class extends import_obsidian22.Plugin {
  constructor() {
    super(...arguments);
    this.settings = DEFAULT_SETTINGS;
    this.selectedFolder = null;
    this.refreshDebounced = (0, import_obsidian22.debounce)(() => this.refreshViews(), 200);
    this.ribbonIconEl = null;
    this.events = new import_obsidian22.Events();
  }
  async onload() {
    await this.loadSettings();
    this.presetManager = new PresetManager(this.app, this, this.settings);
    this.settingsManager = new SettingsManager(this, this.presetManager);
    await this.presetManager.initialize();
    await this.initializePlugin();
    this.addRibbonIcon("layers-3", t("OPEN_CARD_NAVIGATOR"), () => {
      this.activateView();
    });
    this.registerEvent(
      this.app.workspace.on("file-open", (file) => {
        if (file instanceof import_obsidian22.TFile) {
          this.selectAndApplyPreset(file);
        }
      })
    );
    this.refreshViews();
  }
  // Plugin cleanup
  async onunload() {
    this.events.off("settings-updated", this.refreshDebounced);
    if (this.ribbonIconEl) {
      this.ribbonIconEl.detach();
    }
  }
  // Load plugin settings
  async loadSettings() {
    const loadedData = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
  }
  // Save plugin settings
  async saveSettings() {
    await this.saveData(this.settings);
    this.events.trigger("settings-updated");
  }
  // Initialize plugin components and functionality
  async initializePlugin() {
    await this.initializeI18n();
    this.settingTab = new SettingTab(this.app, this);
    this.addSettingTab(this.settingTab);
    this.registerView(
      VIEW_TYPE_CARD_NAVIGATOR,
      (leaf) => new CardNavigator(leaf, this)
    );
    this.addCommands();
    this.addScrollCommands();
    this.refreshDebounced = (0, import_obsidian22.debounce)(() => this.refreshViews(), 200);
    this.registerCentralizedEvents();
  }
  // Initialize internationalization
  async initializeI18n() {
    const resources = await this.loadLanguageResources();
    await instance.init({
      lng: translationLanguage,
      fallbackLng: "en",
      resources
    });
  }
  // Load language resources
  async loadLanguageResources() {
    const [en, ko] = await Promise.all([
      languageResources.en(),
      languageResources.ko()
    ]);
    return {
      en: { translation: en.default },
      ko: { translation: ko.default }
    };
  }
  addCommands() {
    this.addCommand({
      id: "open-card-navigator",
      name: t("OPEN_CARD_NAVIGATOR"),
      callback: () => this.activateView()
    });
    this.addCommand({
      id: "focus-card-navigator",
      name: t("MOVE_FOCUS_TO_CARD_NAVIGATOR"),
      callback: async () => {
        const cardNavigator = this.getFirstCardNavigator();
        if (cardNavigator) {
          const leaf = this.app.workspace.getLeaf();
          if (leaf) {
            leaf.view.containerEl.focus();
            await new Promise((resolve) => setTimeout(resolve, 0));
            cardNavigator.focusNavigator();
          }
        }
      }
    });
    this.addCommand({
      id: "open-card-context-menu",
      name: t("OPEN_CARD_CONTEXT_MENU"),
      callback: () => {
        const cardNavigator = this.getActiveCardNavigator();
        if (cardNavigator) {
          cardNavigator.openContextMenu();
        }
      }
    });
  }
  // Refresh all Card Navigator views
  refreshViews() {
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR);
    leaves.forEach((leaf) => {
      if (leaf.view instanceof CardNavigator) {
        leaf.view.refresh();
      }
    });
  }
  // Activate or create a Card Navigator view
  async activateView() {
    const { workspace } = this.app;
    let leaf = null;
    const existingLeaf = workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR)[0];
    if (existingLeaf) {
      leaf = existingLeaf;
    } else {
      leaf = workspace.getRightLeaf(false);
      if (leaf) {
        await leaf.setViewState({ type: VIEW_TYPE_CARD_NAVIGATOR, active: true });
      }
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
      if (workspace.activeLeaf) {
        await workspace.activeLeaf.setViewState(leaf.getViewState());
      }
    } else {
      console.error("Failed to activate Card Navigator view");
    }
  }
  getFirstCardNavigator() {
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR);
    for (const leaf of leaves) {
      if (leaf.view instanceof CardNavigator) {
        return leaf.view;
      }
    }
    return null;
  }
  // Display filtered cards in the active Card Navigator
  displayFilteredCards(filteredFiles) {
    const cardNavigator = this.app.workspace.getActiveViewOfType(CardNavigator);
    if (cardNavigator) {
      cardNavigator.cardContainer.displayCards(filteredFiles);
    }
  }
  // Sort cards based on the specified criterion and order
  sortCards(criterion, order2) {
    const cardNavigator = this.app.workspace.getActiveViewOfType(CardNavigator);
    if (cardNavigator) {
      cardNavigator.cardContainer.sortCards(criterion, order2);
    }
  }
  // Get the active Card Navigator view
  getActiveCardNavigator() {
    return this.app.workspace.getActiveViewOfType(CardNavigator);
  }
  async selectAndApplyPreset(file) {
    if (this.settings.autoApplyPresets) {
      if (this.settings.autoApplyFolderPresets && file.parent) {
        await this.presetManager.applyFolderPreset(file.parent.path);
      } else {
        await this.presetManager.applyGlobalPreset(this.settings.GlobalPreset);
      }
    } else {
    }
  }
  async selectAndApplyPresetForCurrentFile() {
    const currentFile = this.app.workspace.getActiveFile();
    if (currentFile) {
      await this.selectAndApplyPreset(currentFile);
    }
  }
  // Refreshes the Card Navigator settings tab
  refreshSettingsTab() {
    if (this.settingTab instanceof SettingTab) {
      this.settingTab.display();
    }
  }
  // Refresh Card Navigator instances
  refreshCardNavigator() {
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR);
    leaves.forEach((leaf) => {
      if (leaf.view instanceof CardNavigator) {
        leaf.view.cardContainer.handleResize();
        leaf.view.refresh();
      }
    });
  }
  // Update layout for all Card Navigator instances
  updateCardNavigatorLayout(layout) {
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR);
    leaves.forEach((leaf) => {
      if (leaf.view instanceof CardNavigator) {
        leaf.view.cardContainer.setLayout(layout);
        leaf.view.refresh();
      }
    });
    this.saveSettings();
  }
  // Center the active card in all Card Navigator views
  centerActiveCard() {
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR);
    leaves.forEach((leaf) => {
      if (leaf.view instanceof CardNavigator) {
        leaf.view.cardContainer.centerActiveCard();
      }
    });
  }
  // Add scroll-related commands
  addScrollCommands() {
    const scrollCommands = [
      { id: "scroll-up-one-card", name: t("SCROLL_UP_ONE_CARD"), direction: "up", count: 1 },
      { id: "scroll-down-one-card", name: t("SCROLL_DOWN_ONE_CARD"), direction: "down", count: 1 },
      { id: "scroll-left-one-card", name: t("SCROLL_LEFT_ONE_CARD"), direction: "left", count: 1 },
      { id: "scroll-right-one-card", name: t("SCROLL_RIGHT_ONE_CARD"), direction: "right", count: 1 },
      { id: "scroll-up-page", name: t("SCROLL_UP_LEFT_ONE_PAGE"), direction: "up", count: this.settings.cardsPerView },
      { id: "scroll-down-page", name: t("SCROLL_DOWN_RIGHT_ONE_PAGE"), direction: "down", count: this.settings.cardsPerView },
      { id: "center-active-card", name: t("CENTER_ACTIVE_CARD"), direction: "", count: 0 }
    ];
    scrollCommands.forEach(({ id, name, direction, count }) => {
      this.addCommand({
        id,
        name,
        callback: () => {
          if (id === "center-active-card") {
            this.centerActiveCard();
          } else {
            this.scrollCards(direction, count);
          }
        }
      });
    });
  }
  // Scroll cards in the specified direction
  scrollCards(direction, count) {
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR);
    leaves.forEach((leaf) => {
      if (leaf.view instanceof CardNavigator) {
        const { cardContainer } = leaf.view;
        const isVertical = cardContainer.isVertical;
        switch (direction) {
          case "up":
            isVertical ? cardContainer.scrollUp(count) : cardContainer.scrollLeft(count);
            break;
          case "down":
            isVertical ? cardContainer.scrollDown(count) : cardContainer.scrollRight(count);
            break;
          case "left":
            cardContainer.scrollLeft(count);
            break;
          case "right":
            cardContainer.scrollRight(count);
            break;
        }
      }
    });
  }
  // Set up event listeners for file and workspace changes
  registerCentralizedEvents() {
    const debouncedRefresh = (0, import_obsidian22.debounce)(() => {
      this.refreshViews();
    }, 200);
    this.registerEvent(
      this.app.workspace.on("layout-change", () => {
        this.refreshCardNavigator();
      })
    );
    this.events.on("settings-updated", () => {
      debouncedRefresh();
    });
    this.registerEvent(
      this.app.vault.on("rename", (file) => {
        if (file instanceof import_obsidian22.TFile) {
          debouncedRefresh();
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("modify", () => {
        debouncedRefresh();
      })
    );
  }
  // Manually trigger a refresh of the views
  triggerRefresh() {
    this.refreshDebounced();
    this.app.workspace.trigger("layout-change");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL2xvY2FsZXMvZW4uanNvbiIsICJzcmMvbG9jYWxlcy9rby5qc29uIiwgInNyYy9tYWluLnRzIiwgInNyYy91aS9jYXJkTmF2aWdhdG9yLnRzIiwgInNyYy91aS90b29sYmFyL3Rvb2xiYXIudHMiLCAic3JjL3VpL3Rvb2xiYXIvdG9vbGJhckFjdGlvbnMudHMiLCAic3JjL3VpL3NldHRpbmdzL2NvbXBvbmVudHMvRm9sZGVyU3VnZ2VzdC50cyIsICJzcmMvdWkvc2V0dGluZ3MvY29tcG9uZW50cy9zdWdnZXN0LnRzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZW51bXMuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Tm9kZU5hbWUuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0V2luZG93LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2luc3RhbmNlT2YuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvYXBwbHlTdHlsZXMuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvbWF0aC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL3VzZXJBZ2VudC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9pc0xheW91dFZpZXdwb3J0LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRMYXlvdXRSZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2NvbnRhaW5zLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldENvbXB1dGVkU3R5bGUuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvaXNUYWJsZUVsZW1lbnQuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0RG9jdW1lbnRFbGVtZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFBhcmVudE5vZGUuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0T2Zmc2V0UGFyZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvd2l0aGluLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0RnJlc2hTaWRlT2JqZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvbWVyZ2VQYWRkaW5nT2JqZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZXhwYW5kVG9IYXNoTWFwLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL2Fycm93LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0VmFyaWF0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL2NvbXB1dGVTdHlsZXMuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvZXZlbnRMaXN0ZW5lcnMuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRPcHBvc2l0ZVBsYWNlbWVudC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2dldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFdpbmRvd1Njcm9sbC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRXaW5kb3dTY3JvbGxCYXJYLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFZpZXdwb3J0UmVjdC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXREb2N1bWVudFJlY3QuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvaXNTY3JvbGxQYXJlbnQuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0U2Nyb2xsUGFyZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2xpc3RTY3JvbGxQYXJlbnRzLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvcmVjdFRvQ2xpZW50UmVjdC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRDbGlwcGluZ1JlY3QuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9jb21wdXRlT2Zmc2V0cy5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvY29tcHV0ZUF1dG9QbGFjZW1lbnQuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvZmxpcC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9oaWRlLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL29mZnNldC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9wb3BwZXJPZmZzZXRzLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0QWx0QXhpcy5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9wcmV2ZW50T3ZlcmZsb3cuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0SFRNTEVsZW1lbnRTY3JvbGwuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Tm9kZVNjcm9sbC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRDb21wb3NpdGVSZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvb3JkZXJNb2RpZmllcnMuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9kZWJvdW5jZS5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL21lcmdlQnlOYW1lLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvY3JlYXRlUG9wcGVyLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvcG9wcGVyLmpzIiwgIm5vZGVfbW9kdWxlcy9pMThuZXh0L2Rpc3QvZXNtL2kxOG5leHQuanMiLCAic3JjL2NvbW1vbi90eXBlcy50cyIsICJzcmMvdWkvY2FyZENvbnRhaW5lci9jYXJkQ29udGFpbmVyLnRzIiwgInNyYy91aS9jYXJkQ29udGFpbmVyL2NhcmRNYWtlci50cyIsICJzcmMvY29tbW9uL3V0aWxzLnRzIiwgInNyYy91aS9sYXlvdXRzL2xpc3RMYXlvdXQudHMiLCAic3JjL3VpL2xheW91dHMvZ3JpZExheW91dC50cyIsICJzcmMvdWkvbGF5b3V0cy9tYXNvbnJ5TGF5b3V0LnRzIiwgInNyYy9jb21tb24va2V5Ym9hcmROYXZpZ2F0b3IudHMiLCAic3JjL3VpL3NldHRpbmdzL3NldHRpbmdzVGFiLnRzIiwgInNyYy91aS9zZXR0aW5ncy9wcmVzZXRTZXR0aW5ncy50cyIsICJzcmMvdWkvc2V0dGluZ3MvY29tcG9uZW50cy9QcmVzZXRTdWdnZXN0LnRzIiwgInNyYy91aS9zZXR0aW5ncy9jb21wb25lbnRzL0xvZy50cyIsICJzcmMvdWkvc2V0dGluZ3MvY29tcG9uZW50cy9FcnJvci50cyIsICJzcmMvdWkvc2V0dGluZ3MvY29tcG9uZW50cy9VdGlscy50cyIsICJzcmMvdWkvc2V0dGluZ3MvbW9kYWxzL1ByZXNldEVkaXRNb2RhbC50cyIsICJzcmMvdWkvc2V0dGluZ3MvbW9kYWxzL1ByZXNldEltcG9ydEV4cG9ydE1vZGFsLnRzIiwgInNyYy91aS9zZXR0aW5ncy9sYXlvdXRTZXR0aW5ncy50cyIsICJzcmMvdWkvc2V0dGluZ3MvY29udGFpbmVyU2V0dGluZ3MudHMiLCAic3JjL3VpL3NldHRpbmdzL2NhcmRTdHlsZVNldHRpbmdzLnRzIiwgInNyYy91aS9zZXR0aW5ncy9jYXJkQ29udGVudFNldHRpbmdzLnRzIiwgInNyYy91aS9zZXR0aW5ncy9rZXlib2FyZFNob3J0Y3V0c0luZm8udHMiLCAic3JjL3VpL3NldHRpbmdzL3NldHRpbmdzTWFuYWdlci50cyIsICJzcmMvdWkvc2V0dGluZ3MvUHJlc2V0TWFuYWdlci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsie1xuICAgIFwiT1BFTl9DQVJEX05BVklHQVRPUlwiOiBcIk9wZW4gQ2FyZCBOYXZpZ2F0b3JcIixcblxuICAgIFwiQ0FSRF9OQVZJR0FUT1JcIjogXCJDYXJkIE5hdmlnYXRvclwiLFxuICAgIFwiQ09QWV9BU19MSU5LXCI6IFwiQ29weSBhcyBMaW5rXCIsXG4gICAgXCJDT1BZX0NBUkRfQ09OVEVOVFwiOiBcIkNvcHkgQ2FyZCBDb250ZW50XCIsXG5cblx0XCJMSU5LX0NPUElFRF9UT19DTElQQk9BUkRcIjogXCJMaW5rIGNvcGllZCB0byBjbGlwYm9hcmRcIixcbiAgICBcIkZBSUxFRF9UT19DT1BZX0xJTktcIjogXCJGYWlsZWQgdG8gY29weSBsaW5rXCIsXG4gICAgXCJDQVJEX0NPTlRFTlRfQ09QSUVEX1RPX0NMSVBCT0FSRFwiOiBcIkNhcmQgY29udGVudCBjb3BpZWQgdG8gY2xpcGJvYXJkXCIsXG4gICAgXCJGQUlMRURfVE9fQ09QWV9DQVJEX0NPTlRFTlRcIjogXCJGYWlsZWQgdG8gY29weSBjYXJkIGNvbnRlbnRcIixcblxuXHRcIlNFQVJDSF9QTEFDRUhPTERFUlwiOiBcIlNlYXJjaC4uLlwiLFxuICAgIFwiU09SVF9DQVJEU1wiOiBcIlNvcnQgY2FyZHNcIixcbiAgICBcIlNFVFRJTkdTXCI6IFwiU2V0dGluZ3NcIixcblxuXHRcIlBSRVNFVF9TRVRUSU5HU1wiOiBcIlByZXNldCBTZXR0aW5nc1wiLFxuICAgIFwiR0xPQkFMX1BSRVNFVFwiOiBcIkdsb2JhbCBQcmVzZXRcIixcblxuICAgIFwiU09SVF9GSUxFX05BTUVfQVNDXCI6IFwiRmlsZSBuYW1lKEEgdG8gWilcIixcbiAgICBcIlNPUlRfRklMRV9OQU1FX0RFU0NcIjogXCJGaWxlIG5hbWUoWiB0byBBKVwiLFxuICAgIFwiU09SVF9MQVNUX01PRElGSUVEX0RFU0NcIjogXCJMYXN0IG1vZGlmaWVkKG5ld2VzdCBmaXJzdClcIixcbiAgICBcIlNPUlRfTEFTVF9NT0RJRklFRF9BU0NcIjogXCJMYXN0IG1vZGlmaWVkKG9sZGVzdCBmaXJzdClcIixcbiAgICBcIlNPUlRfQ1JFQVRFRF9ERVNDXCI6IFwiQ3JlYXRlZChuZXdlc3QgZmlyc3QpXCIsXG4gICAgXCJTT1JUX0NSRUFURURfQVNDXCI6IFwiQ3JlYXRlZChvbGRlc3QgZmlyc3QpXCIsXG4gICAgXCJTSE9XX0ZJTEVfTkFNRVwiOiBcIlNob3cgZmlsZSBuYW1lXCIsXG4gICAgXCJTSE9XX0ZJUlNUX0hFQURFUlwiOiBcIlNob3cgZmlyc3QgaGVhZGVyXCIsXG4gICAgXCJTSE9XX0JPRFlcIjogXCJTaG93IGJvZHlcIixcbiAgICBcIlRPR0dMRV9GSUxFX05BTUVfRElTUExBWVwiOiBcIlRvZ2dsZSBmaWxlIG5hbWUgZGlzcGxheVwiLFxuICAgIFwiVE9HR0xFX0ZJUlNUX0hFQURFUl9ESVNQTEFZXCI6IFwiVG9nZ2xlIGZpcnN0IGhlYWRlciBkaXNwbGF5XCIsXG4gICAgXCJUT0dHTEVfQk9EWV9ESVNQTEFZXCI6IFwiVG9nZ2xlIGJvZHkgZGlzcGxheVwiLFxuICAgIFwiRklMRV9OQU1FX0ZPTlRfU0laRVwiOiBcIkZpbGUgbmFtZSBmb250IHNpemVcIixcbiAgICBcIkZJUlNUX0hFQURFUl9GT05UX1NJWkVcIjogXCJGaXJzdCBoZWFkZXIgZm9udCBzaXplXCIsXG4gICAgXCJCT0RZX0ZPTlRfU0laRVwiOiBcIkJvZHkgZm9udCBzaXplXCIsXG4gICAgXCJTRVRfRklMRV9OQU1FX0ZPTlRfU0laRVwiOiBcIlNldCBmb250IHNpemUgZm9yIGZpbGUgbmFtZVwiLFxuICAgIFwiU0VUX0ZJUlNUX0hFQURFUl9GT05UX1NJWkVcIjogXCJTZXQgZm9udCBzaXplIGZvciBmaXJzdCBoZWFkZXJcIixcbiAgICBcIlNFVF9CT0RZX0ZPTlRfU0laRVwiOiBcIlNldCBmb250IHNpemUgZm9yIGJvZHlcIixcbiAgICBcIlNDUk9MTF9VUF9PTkVfQ0FSRFwiOiBcIlNjcm9sbCB1cCBvbmUgY2FyZFwiLFxuICAgIFwiU0NST0xMX0RPV05fT05FX0NBUkRcIjogXCJTY3JvbGwgZG93biBvbmUgY2FyZFwiLFxuICAgIFwiU0NST0xMX0xFRlRfT05FX0NBUkRcIjogXCJTY3JvbGwgbGVmdCBvbmUgY2FyZFwiLFxuICAgIFwiU0NST0xMX1JJR0hUX09ORV9DQVJEXCI6IFwiU2Nyb2xsIHJpZ2h0IG9uZSBjYXJkXCIsXG4gICAgXCJTQ1JPTExfVVBfTEVGVF9PTkVfUEFHRVwiOiBcIlNjcm9sbCB1cC9sZWZ0IG9uZSBwYWdlXCIsXG4gICAgXCJTQ1JPTExfRE9XTl9SSUdIVF9PTkVfUEFHRVwiOiBcIlNjcm9sbCBkb3duL3JpZ2h0IG9uZSBwYWdlXCIsXG4gICAgXCJDRU5URVJfQUNUSVZFX0NBUkRcIjogXCJDZW50ZXIgYWN0aXZlIGNhcmRcIixcbiAgICBcIk1PVkVfRk9DVVNfVE9fQ0FSRF9OQVZJR0FUT1JcIjogXCJNb3ZlIGZvY3VzIHRvIENhcmQgTmF2aWdhdG9yXCIsXG4gICAgXCJPUEVOX0NBUkRfQ09OVEVYVF9NRU5VXCI6IFwiT3BlbiBjYXJkIGNvbnRleHQgbWVudVwiLFxuICAgIFwiTU9WRV9VUF9PTkVfQ0FSRFwiOiBcIk1vdmUgdXAgYnkgb25lIGNhcmQuXCIsXG4gICAgXCJNT1ZFX0RPV05fT05FX0NBUkRcIjogXCJNb3ZlIGRvd24gYnkgb25lIGNhcmQuXCIsXG4gICAgXCJNT1ZFX0xFRlRfT05FX0NBUkRcIjogXCJNb3ZlIGxlZnQgYnkgb25lIGNhcmQuXCIsXG4gICAgXCJNT1ZFX1JJR0hUX09ORV9DQVJEXCI6IFwiTW92ZSByaWdodCBieSBvbmUgY2FyZC5cIixcbiAgICBcIk1PVkVfVVBfTEVGVF9PTkVfUEFHRVwiOiBcIk1vdmUgdXAvbGVmdCBieSBvbmUgcGFnZSBvZiBjYXJkcy5cIixcbiAgICBcIk1PVkVfRE9XTl9SSUdIVF9PTkVfUEFHRVwiOiBcIk1vdmUgZG93bi9yaWdodCBieSBvbmUgcGFnZSBvZiBjYXJkcy5cIixcbiAgICBcIkNFTlRFUl9DVVJSRU5UTFlfQUNUSVZFX0NBUkRcIjogXCJDZW50ZXIgdGhlIGN1cnJlbnRseSBhY3RpdmUgY2FyZC5cIixcbiAgICBcIlNFVF9GT0NVU19UT19DQVJEX05BVklHQVRPUlwiOiBcIlNldCBmb2N1cyB0byB0aGUgQ2FyZCBOYXZpZ2F0b3IuXCIsXG4gICAgXCJPUEVOX0NPTlRFWFRfTUVOVV9GT1JfRk9DVVNFRF9DQVJEXCI6IFwiT3BlbiB0aGUgY29udGV4dCBtZW51IGZvciB0aGUgZm9jdXNlZCBjYXJkLlwiLFxuXG5cdFwiQ09ORklSTV9ERUxFVEVcIjogXCJDb25maXJtIERlbGV0ZVwiLFxuXHRcIkNPTkZJUk1fREVMRVRFX0lURU1cIjogXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlP1wiLFxuXHRcIkNBTkNFTFwiOiBcIkNhbmNlbFwiLFxuXG4gICAgXCJFUlJPUl9TQVZJTkdfU0VUVElOR1NcIjogXCJFcnJvciBzYXZpbmcgc2V0dGluZ3M6XCIsXG4gICAgXCJFUlJPUl9TQVZJTkdfREVGQVVMVF9QUkVTRVRcIjogXCJFcnJvciBzYXZpbmcgZGVmYXVsdCBwcmVzZXQ6XCIsXG4gICAgXCJFUlJPUl9MT0FESU5HX1BSRVNFVF9GUk9NX0ZJTEVcIjogXCJFcnJvciBsb2FkaW5nIHByZXNldCBmcm9tIGZpbGUge3tmaWxlTmFtZX19OlwiLFxuICAgIFwiRVJST1JfU0FWSU5HX05FV19QUkVTRVRcIjogXCJFcnJvciBzYXZpbmcgbmV3IHByZXNldCB7e3ByZXNldE5hbWV9fTpcIixcblxuICAgIFwiUFJFU0VUX0ZPTERFUlwiOiBcIlByZXNldCBGb2xkZXJcIixcbiAgICBcIlNFTEVDVF9QUkVTRVRfRk9MREVSXCI6IFwiRmlyc3QsIGNyZWF0ZSBhIGZvbGRlciB3aXRoaW4geW91ciBWYXVsdCB0byBzYXZlIHByZXNldCBmaWxlcyBpbiBKU09OIGZvcm1hdCBhbmQgc2VsZWN0IHRoYXQgZm9sZGVyLiBGb3IgZXhpc3RpbmcgZm9sZGVycywgbWFudWFsbHkgbW92ZSB0aGUgcHJlc2V0IGZpbGVzIHRvIHRoZSBuZXdseSBkZXNpZ25hdGVkIGZvbGRlciBhbmQgdGhlbiBzYWZlbHkgZGVsZXRlIHRoZSBvbGQgZm9sZGVyLlwiLFxuICAgIFwiUFJFU0VUX0ZPTERFUl9QTEFDRUhPTERFUlwiOiBcImUuZy4gQ2FyZE5hdmlnYXRvclByZXNldHNcIixcbiAgICBcIlBSRVNFVF9NQU5BR0VNRU5UX0FORF9HTE9CQUxfU0VUVElOR1NcIjogXCJQcmVzZXQgTWFuYWdlbWVudCBhbmQgR2xvYmFsIFNldHRpbmdzXCIsXG4gICAgXCJQUkVTRVRfTUFOQUdFTUVOVF9ERVNDXCI6IFwiWW91IGNhbiBjcmVhdGUgYSBuZXcgcHJlc2V0IHdpdGggdGhlIGN1cnJlbnQgc2V0dGluZ3Mgb3IgY3JlYXRlIGEgbmV3IHByZXNldCBieSBlbnRlcmluZyBkYXRhIGluIEpTT04gZm9ybWF0LiBZb3UgY2FuIGVkaXQsIGNvcHksIGRlbGV0ZSwgZXhwb3J0IHByZXNldHMgYW5kIHNldCB0aGVtIGFzIGdsb2JhbCBwcmVzZXRzLlwiLFxuICAgIFwiQ1JFQVRFX05FV19QUkVTRVRcIjogXCJDcmVhdGUgbmV3IHByZXNldFwiLFxuICAgIFwiSU1QT1JUX1BSRVNFVFwiOiBcIkltcG9ydCBwcmVzZXRcIixcbiAgICBcIk5PX0RFU0NSSVBUSU9OXCI6IFwiTm8gZGVzY3JpcHRpb25cIixcbiAgICBcIkVESVRcIjogXCJFZGl0XCIsXG4gICAgXCJDTE9ORVwiOiBcIkNsb25lXCIsXG4gICAgXCJERUxFVEVcIjogXCJEZWxldGVcIixcbiAgICBcIkVYUE9SVFwiOiBcIkV4cG9ydFwiLFxuICAgIFwiU0VUX0FTX0dMT0JBTF9QUkVTRVRcIjogXCJTZXQgYXMgZ2xvYmFsIHByZXNldFwiLFxuICAgIFwiUFJFU0VUX05BTUVcIjogXCJOYW1lXCIsXG4gICAgXCJQUkVTRVRfREVMRVRFRF9OT1RJQ0VcIjogXCJQcmVzZXQgZGVsZXRlZCBhbmQgZGVmYXVsdCBwcmVzZXQgYXBwbGllZFwiLFxuXHRcIkFVVE9fQVBQTFlfUFJFU0VUU1wiOiBcIkF1dG8gQXBwbHkgUHJlc2V0c1wiLFxuXHRcIkFVVE9fQVBQTFlfUFJFU0VUU19ERVNDXCI6IFwiQXV0b21hdGljYWxseSBhcHBseSBwcmVzZXRzIHdoZW4gb3BlbmluZyBmaWxlcy5cIixcblx0XCJBVVRPX0FQUExZX0ZPTERFUl9QUkVTRVRcIjogXCJBdXRvIEFwcGx5IEZvbGRlciBQcmVzZXRzXCIsXG5cdFwiQVVUT19BUFBMWV9GT0xERVJfUFJFU0VUX0RFU0NcIjogXCJBdXRvbWF0aWNhbGx5IGFwcGx5IGZvbGRlci1zcGVjaWZpYyBwcmVzZXRzIHdoZW4gb3BlbmluZyBmaWxlcyBpbiBkaWZmZXJlbnQgZm9sZGVycy4gSWYgbm8gcHJlc2V0IGlzIGZvdW5kIGZvciBhIGZvbGRlciwgdGhlIGdsb2JhbCBwcmVzZXQgd2lsbCBiZSBhcHBsaWVkLlwiLFxuXHRcIkFERF9ORVdfRk9MREVSX1BSRVNFVFwiOiBcIkFkZCBOZXcgRm9sZGVyIFByZXNldFwiLFxuXHRcIkFERF9ORVdfRk9MREVSX1BSRVNFVF9ERVNDXCI6IFwiQWRkIGEgbmV3IGZvbGRlci1zcGVjaWZpYyBwcmVzZXQuXCIsXG4gICAgXCJQUkVTRVRfQUxSRUFEWV9FWElTVFNcIjogXCJQcmVzZXQgYWxyZWFkeSBleGlzdHNcIixcbiAgICBcIkZPTERFUlwiOiBcIkZvbGRlclwiLFxuICAgIFwiUFJFU0VUX0FMUkVBRFlfRVhJU1RTX0ZPUl9GT0xERVJcIjogXCJQcmVzZXQgYWxyZWFkeSBleGlzdHMgZm9yIHRoaXMgZm9sZGVyXCIsXG4gICAgXCJQUkVTRVRcIjogXCJQcmVzZXRcIixcbiAgICBcIk1PVkVfRE9XTlwiOiBcIk1vdmUgZG93blwiLFxuXG5cdFwiUFJFU0VUX05PVF9GT1VORFwiOiBcIlByZXNldCAne3tuYW1lfX0nIG5vdCBmb3VuZFwiLFxuICAgIFwiU09VUkNFX1BSRVNFVF9OT1RfRk9VTkRcIjogXCJTb3VyY2UgcHJlc2V0ICd7e25hbWV9fScgbm90IGZvdW5kXCIsXG4gICAgXCJQUkVTRVRfQUxSRUFEWV9FWElTVFNfV0lUSF9OQU1FXCI6IFwiUHJlc2V0ICd7e25hbWV9fScgYWxyZWFkeSBleGlzdHNcIixcbiAgICBcIklOVkFMSURfUFJFU0VUX0ZPUk1BVFwiOiBcIkludmFsaWQgcHJlc2V0IGZvcm1hdFwiLFxuICAgIFwiUFJFU0VUX0lNUE9SVF9GQUlMRURcIjogXCJGYWlsZWQgdG8gaW1wb3J0IHByZXNldDoge3tlcnJvcn19XCIsXG4gICAgXCJHTE9CQUxfUFJFU0VUX05PVF9TRVRcIjogXCJHbG9iYWwgcHJlc2V0IGlzIG5vdCBzZXRcIixcblxuXHRcIkNPTlRBSU5FUl9TRVRUSU5HU1wiOiBcIkNvbnRhaW5lciBzZXR0aW5nc1wiLFxuICAgIFwiU09VUkNFX0ZPTERFUlwiOiBcIlNvdXJjZSBmb2xkZXJcIixcbiAgICBcIlNPVVJDRV9GT0xERVJfREVTQ1wiOiBcIkNob29zZSB3aGV0aGVyIHRvIGRpc3BsYXkgbm90ZXMgZnJvbSB0aGUgYWN0aXZlIGZvbGRlciBvciBmcm9tIGEgc2VsZWN0ZWQgZm9sZGVyIGFzIGNhcmRzIGluIHRoZSBDYXJkIE5hdmlnYXRvci5cIixcbiAgICBcIlNFTEVDVF9GT0xERVJcIjogXCJTZWxlY3Qgc291cmNlIGZvbGRlclwiLFxuICAgIFwiU0VMRUNUX0ZPTERFUl9ERVNDXCI6IFwiU2VsZWN0IGEgZm9sZGVyIGZvciBDYXJkIE5hdmlnYXRvclwiLFxuICAgIFwiU0VMRUNUX0ZPTERFUl9QTEFDRUhPTERFUlwiOiBcIlNlbGVjdCBmb2xkZXJcIixcbiAgICBcIkRFRkFVTFRfU09SVF9NRVRIT0RcIjogXCJEZWZhdWx0IHNvcnQgbWV0aG9kXCIsXG4gICAgXCJERUZBVUxUX1NPUlRfTUVUSE9EX0RFU0NcIjogXCJDaG9vc2UgdGhlIGRlZmF1bHQgc29ydGluZyBtZXRob2QgZm9yIGNhcmRzLlwiLFxuICAgIFwiQ0VOVEVSX0FDVElWRV9DQVJEX09OX09QRU5cIjogXCJDZW50ZXIgYWN0aXZlIGNhcmQgb24gb3BlblwiLFxuICAgIFwiQ0VOVEVSX0FDVElWRV9DQVJEX09OX09QRU5fREVTQ1wiOiBcIkF1dG9tYXRpY2FsbHkgY2VudGVyIHRoZSBhY3RpdmUgY2FyZCB3aGVuIG9wZW5pbmcgdGhlIENhcmQgTmF2aWdhdG9yXCIsXG5cblx0XCJMQVlPVVRfU0VUVElOR1NcIjogXCJMYXlvdXQgc2V0dGluZ3NcIixcbiAgICBcIkRFRkFVTFRfTEFZT1VUXCI6IFwiRGVmYXVsdCBsYXlvdXRcIixcbiAgICBcIkRFRkFVTFRfTEFZT1VUX0RFU0NcIjogXCJDaG9vc2UgdGhlIGRlZmF1bHQgbGF5b3V0IGZvciBDYXJkIE5hdmlnYXRvci5cIixcbiAgICBcIkFVVE9cIjogXCJBdXRvXCIsXG4gICAgXCJMSVNUXCI6IFwiTGlzdFwiLFxuICAgIFwiR1JJRFwiOiBcIkdyaWRcIixcbiAgICBcIk1BU09OUllcIjogXCJNYXNvbnJ5XCIsXG4gICAgXCJDQVJEX1dJRFRIX1RIUkVTSE9MRFwiOiBcIkNhcmQgd2lkdGggdGhyZXNob2xkXCIsXG4gICAgXCJDQVJEX1dJRFRIX1RIUkVTSE9MRF9ERVNDXCI6IFwiQ2FyZCB3aWR0aCB0aHJlc2hvbGQgZm9yIGFkZGluZy9yZW1vdmluZyBjb2x1bW5zIGluIGF1dG8gbGF5b3V0XCIsXG4gICAgXCJBTElHTl9DQVJEX0hFSUdIVFwiOiBcIkFsaWduIGNhcmQgaGVpZ2h0XCIsXG4gICAgXCJBTElHTl9DQVJEX0hFSUdIVF9ERVNDXCI6IFwiSWYgZW5hYmxlZCwgYWxsIGNhcmRzIHdpbGwgaGF2ZSB0aGUgc2FtZSBoZWlnaHQoR3JpZCkuIElmIGRpc2FibGVkLCBjYXJkIGhlaWdodCB3aWxsIGFkanVzdCB0byBjb250ZW50KE1hc29ucnkpLlwiLFxuICAgIFwiQ0FSRFNfUEVSX1ZJRVdcIjogXCJDYXJkcyBwZXIgdmlld1wiLFxuICAgIFwiQ0FSRFNfUEVSX1ZJRVdfREVTQ1wiOiBcIk51bWJlciBvZiBjYXJkcyB0byBkaXNwbGF5IGF0IG9uY2UgaW4gbGlzdCBsYXlvdXQgd2hlbiBjYXJkIGhlaWdodHMgYXJlIGVxdWFsXCIsXG4gICAgXCJHUklEX0NPTFVNTlNcIjogXCJHcmlkIGNvbHVtbnNcIixcbiAgICBcIkdSSURfQ09MVU1OU19ERVNDXCI6IFwiTnVtYmVyIG9mIGNvbHVtbnMgaW4gZ3JpZCBsYXlvdXRcIixcbiAgICBcIkdSSURfQ0FSRF9IRUlHSFRcIjogXCJHcmlkIGNhcmQgaGVpZ2h0XCIsXG4gICAgXCJHUklEX0NBUkRfSEVJR0hUX0RFU0NcIjogXCJDYXJkIGhlaWdodCBpbiBncmlkIGxheW91dFwiLFxuICAgIFwiTUFTT05SWV9DT0xVTU5TXCI6IFwiTWFzb25yeSBjb2x1bW5zXCIsXG4gICAgXCJNQVNPTlJZX0NPTFVNTlNfREVTQ1wiOiBcIk51bWJlciBvZiBjb2x1bW5zIGluIG1hc29ucnkgbGF5b3V0XCIsXG5cblx0XCJDQVJEX0NPTlRFTlRfU0VUVElOR1NcIjogXCJDYXJkIGNvbnRlbnQgc2V0dGluZ3NcIixcbiAgICBcIlJFTkRFUl9DT05URU5UX0FTX0hUTUxcIjogXCJSZW5kZXIgY29udGVudCBhcyBIVE1MXCIsXG4gICAgXCJSRU5ERVJfQ09OVEVOVF9BU19IVE1MX0RFU0NcIjogXCJXaGVuIGFjdGl2YXRlZCwgdGhlIGNhcmQgY29udGVudCBpcyByZW5kZXJlZCBpbiBIVE1MLiBJZiB0aGUgY29udGVudCBpcyBub3QgZGlzcGxheWVkIHByb3Blcmx5IG9yIGVycm9ycyBvY2N1ciwgYWRqdXN0IHRoZSBib2R5IGxlbmd0aCBsaW1pdC5cIixcbiAgICBcIkRSQUdfQU5EX0RST1BfQ09OVEVOVFwiOiBcIkRyYWcgYW5kIGRyb3AgY29udGVudFwiLFxuICAgIFwiRFJBR19BTkRfRFJPUF9DT05URU5UX0RFU0NcIjogXCJXaGVuIGVuYWJsZWQsIGRyYWdnaW5nIGEgY2FyZCB3aWxsIGluc2VydCB0aGUgY29udGVudCBvZiB0aGUgY2FyZCBzZWxlY3RlZCBiZWxvdyBpbnN0ZWFkIG9mIGEgbGluay5cIixcbiAgICBcIkJPRFlfTEVOR1RIX0xJTUlUXCI6IFwiQm9keSBsZW5ndGggbGltaXRcIixcbiAgICBcIkJPRFlfTEVOR1RIX0xJTUlUX0RFU0NcIjogXCJUb2dnbGUgYmV0d2VlbiBsaW1pdGVkIGFuZCB1bmxpbWl0ZWQgYm9keSBsZW5ndGguXCIsXG4gICAgXCJCT0RZX0xFTkdUSFwiOiBcIkJvZHkgbGVuZ3RoXCIsXG4gICAgXCJCT0RZX0xFTkdUSF9ERVNDXCI6IFwiU2V0IHRoZSBtYXhpbXVtIGJvZHkgbGVuZ3RoIGRpc3BsYXllZCBvbiBlYWNoIGNhcmQgd2hlbiBib2R5IGxlbmd0aCBpcyBsaW1pdGVkLlwiLFxuXG5cdFwiQ0FSRF9TVFlMSU5HX1NFVFRJTkdTXCI6IFwiQ2FyZCBzdHlsaW5nIHNldHRpbmdzXCIsXG4gICAgXCJGSUxFX05BTUVfRk9OVF9TSVpFX0RFU0NcIjogXCJTZXQgdGhlIGZvbnQgc2l6ZSBmb3IgZmlsZSBuYW1lcyBpbiBjYXJkc1wiLFxuICAgIFwiRklSU1RfSEVBREVSX0ZPTlRfU0laRV9ERVNDXCI6IFwiU2V0IHRoZSBmb250IHNpemUgZm9yIHRoZSBmaXJzdCBoZWFkZXIgaW4gY2FyZHNcIixcbiAgICBcIkJPRFlfRk9OVF9TSVpFX0RFU0NcIjogXCJTZXQgdGhlIGZvbnQgc2l6ZSBmb3IgdGhlIGJvZHkgdGV4dCBpbiBjYXJkc1wiLFxuXG5cdFwiS0VZQk9BUkRfU0hPUlRDVVRTXCI6IFwiS2V5Ym9hcmQgc2hvcnRjdXRzXCIsXG5cdFwiS0VZQk9BUkRfU0hPUlRDVVRTX0RFU0NcIjogXCJDYXJkIE5hdmlnYXRvciBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGZlYXR1cmVzIHRoYXQgY2FuIGJlIGFzc2lnbmVkIGtleWJvYXJkIHNob3J0Y3V0cy4gWW91IGNhbiBzZXQgdGhlc2UgdXAgaW4gT2JzaWRpYW4ncyBIb3RrZXlzIHNldHRpbmdzOlwiLFxuXHRcIkNPTU1BTkRcIjogXCJDb21tYW5kXCIsXG5cdFwiREVTQ1JJUFRJT05cIjogXCJEZXNjcmlwdGlvblwiLFxuXHRcIktFWUJPQVJEX1NIT1JUQ1VUU19DVVNUT01JWkVfTk9URVwiOiBcIlRvIHNldCB1cCBzaG9ydGN1dHMgZm9yIHRoZXNlIGFjdGlvbnMsIGdvIHRvIFNldHRpbmdzIFx1MjE5MiBIb3RrZXlzIGFuZCBzZWFyY2ggZm9yIFxcXCJDYXJkIE5hdmlnYXRvclxcXCIuIFlvdSBjYW4gdGhlbiBhc3NpZ24geW91ciBwcmVmZXJyZWQga2V5IGNvbWJpbmF0aW9ucyBmb3IgZWFjaCBhY3Rpb24uXCIsXG5cdFwiS0VZQk9BUkRfU0hPUlRDVVRTX0FERElUSU9OQUxfTk9URVwiOiBcIk5vdGU6IFNvbWUgc2hvcnRjdXRzIGxpa2UgYXJyb3cga2V5cyBmb3IgbmF2aWdhdGlvbiBhbmQgRW50ZXIgZm9yIG9wZW5pbmcgY2FyZHMgYXJlIGJ1aWx0LWluIGFuZCBjYW5ub3QgYmUgY3VzdG9taXplZC5cIixcblxuICAgIFwiRU5URVJfUFJFU0VUX05BTUVcIjogXCJFbnRlciBwcmVzZXQgbmFtZVwiLFxuICAgIFwiRU5URVJfUFJFU0VUX05BTUVfUExBQ0VIT0xERVJcIjogXCJFbnRlciBwcmVzZXQgbmFtZVwiLFxuICAgIFwiRU5URVJfUFJFU0VUX0RFU0NSSVBUSU9OXCI6IFwiRW50ZXIgcHJlc2V0IGRlc2NyaXB0aW9uXCIsXG4gICAgXCJFTlRFUl9QUkVTRVRfREVTQ1JJUFRJT05fUExBQ0VIT0xERVJcIjogXCJFbnRlciBwcmVzZXQgZGVzY3JpcHRpb25cIixcbiAgICBcIlBSRVNFVF9EQVRBXCI6IFwiUHJlc2V0IERhdGFcIixcbiAgICBcIkVESVRfUFJFU0VUX0RBVEFfREVTQ1wiOiBcIkVkaXQgcHJlc2V0IGRhdGEgKEpTT04gZm9ybWF0KVwiLFxuICAgIFwiUFJFU0VUX0RBVEFfUExBQ0VIT0xERVJcIjogXCJFbnRlciBwcmVzZXQgZGF0YSBpbiBKU09OIGZvcm1hdFwiLFxuICAgIFwiVVBEQVRFX1dJVEhfQ1VSUkVOVF9TRVRUSU5HU1wiOiBcIlVwZGF0ZSB3aXRoIGN1cnJlbnQgc2V0dGluZ3NcIixcbiAgICBcIlNBVkVcIjogXCJTYXZlXCIsXG4gICAgXCJFRElUX1BSRVNFVFwiOiBcIkVkaXQgUHJlc2V0XCIsXG4gICAgXCJDTE9ORV9QUkVTRVRcIjogXCJDbG9uZSBQcmVzZXRcIixcbiAgICBcIlBSRVNFVF9DT1BZXCI6IFwiQ29weSBvZiB7e25hbWV9fVwiLFxuICAgIFwiRU5URVJfUFJFU0VUX05BTUVfTk9USUNFXCI6IFwiUGxlYXNlIGVudGVyIGEgcHJlc2V0IG5hbWVcIixcbiAgICBcIlBSRVNFVF9EQVRBX0VNUFRZXCI6IFwiUHJlc2V0IGRhdGEgY2Fubm90IGJlIGVtcHR5XCIsXG4gICAgXCJQUkVTRVRfU0FWRURcIjogXCJQcmVzZXQgJ3t7bmFtZX19JyBzYXZlZFwiLFxuICAgIFwiRkFJTEVEX1RPX1NBVkVfUFJFU0VUXCI6IFwiRmFpbGVkIHRvIHNhdmUgcHJlc2V0XCIsXG4gICAgXCJQUkVTRVRfU0FWRV9GQUlMRURcIjogXCJGYWlsZWQgdG8gc2F2ZSBwcmVzZXQ6IHt7ZXJyb3J9fVwiLFxuXG4gICAgXCJQQVNURV9QUkVTRVRfSlNPTl9IRVJFXCI6IFwiUGFzdGUgcHJlc2V0IEpTT04gaGVyZVwiLFxuICAgIFwiSU1QT1JUXCI6IFwiSW1wb3J0XCIsXG4gICAgXCJJTlZBTElEX1BSRVNFVF9EQVRBXCI6IFwiSW52YWxpZCBwcmVzZXQgZGF0YVwiLFxuICAgIFwiUFJFU0VUX0lNUE9SVEVEX1NVQ0NFU1NGVUxMWVwiOiBcIlByZXNldCAne3tuYW1lfX0nIGltcG9ydGVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgIFwiVU5LTk9XTl9FUlJPUl9EVVJJTkdfSU1QT1JUXCI6IFwiVW5rbm93biBlcnJvciBvY2N1cnJlZCBkdXJpbmcgaW1wb3J0XCIsXG4gICAgXCJFWFBPUlRfUFJFU0VUXCI6IFwiRXhwb3J0IFByZXNldFwiLFxuICAgIFwiQ09QWVwiOiBcIkNvcHlcIixcbiAgICBcIlBSRVNFVF9KU09OX0NPUElFRFwiOiBcIlByZXNldCBKU09OIGNvcGllZCB0byBjbGlwYm9hcmRcIixcbiAgICBcIkVSUk9SX0xPQURJTkdfUFJFU0VUXCI6IFwiRXJyb3IgbG9hZGluZyBwcmVzZXRcIixcbiAgICBcIk5PX1BSRVNFVF9TRUxFQ1RFRFwiOiBcIk5vIHByZXNldCBzZWxlY3RlZFwiXG5cblxuXG5cblxuXG5cblxuXG59XG4iLCAie1xuICAgIFwiT1BFTl9DQVJEX05BVklHQVRPUlwiOiBcIlx1Q0U3NFx1QjREQyBcdUIxMjRcdUJFNDRcdUFDOENcdUM3NzRcdUQxMzAgXHVDNUY0XHVBRTMwXCIsXG5cbiAgICBcIkNBUkRfTkFWSUdBVE9SXCI6IFwiXHVDRTc0XHVCNERDIFx1QjEyNFx1QkU0NFx1QUM4Q1x1Qzc3NFx1RDEzMFwiLFxuICAgIFwiQ09QWV9BU19MSU5LXCI6IFwiXHVCOUMxXHVEMDZDXHVCODVDIFx1QkNGNVx1QzBBQ1wiLFxuICAgIFwiQ09QWV9DQVJEX0NPTlRFTlRcIjogXCJcdUNFNzRcdUI0REMgXHVCMEI0XHVDNkE5IFx1QkNGNVx1QzBBQ1wiLFxuXG5cdFwiTElOS19DT1BJRURfVE9fQ0xJUEJPQVJEXCI6IFwiXHVCOUMxXHVEMDZDXHVBQzAwIFx1RDA3NFx1QjlCRFx1QkNGNFx1QjREQ1x1QzVEMCBcdUJDRjVcdUMwQUNcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTRcIixcbiAgICBcIkZBSUxFRF9UT19DT1BZX0xJTktcIjogXCJcdUI5QzFcdUQwNkMgXHVCQ0Y1XHVDMEFDIFx1QzJFNFx1RDMyOFwiLFxuICAgIFwiQ0FSRF9DT05URU5UX0NPUElFRF9UT19DTElQQk9BUkRcIjogXCJcdUNFNzRcdUI0REMgXHVCMEI0XHVDNkE5XHVDNzc0IFx1RDA3NFx1QjlCRFx1QkNGNFx1QjREQ1x1QzVEMCBcdUJDRjVcdUMwQUNcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTRcIixcbiAgICBcIkZBSUxFRF9UT19DT1BZX0NBUkRfQ09OVEVOVFwiOiBcIlx1Q0U3NFx1QjREQyBcdUIwQjRcdUM2QTkgXHVCQ0Y1XHVDMEFDIFx1QzJFNFx1RDMyOFwiLFxuXG4gICAgXCJTRUFSQ0hfUExBQ0VIT0xERVJcIjogXCJcdUFDODBcdUMwQzkuLi5cIixcbiAgICBcIlNPUlRfQ0FSRFNcIjogXCJcdUNFNzRcdUI0REMgXHVDODE1XHVCODJDXCIsXG4gICAgXCJTRVRUSU5HU1wiOiBcIlx1QzEyNFx1QzgxNVwiLFxuXG5cdFwiUFJFU0VUX1NFVFRJTkdTXCI6IFwiXHVENTA0XHVCOUFDXHVDMTRCIFx1QzEyNFx1QzgxNVwiLFxuICAgIFwiR0xPQkFMX1BSRVNFVFwiOiBcIlx1QzgwNFx1QzVFRCBcdUQ1MDRcdUI5QUNcdUMxNEJcIixcblxuICAgIFwiU09SVF9GSUxFX05BTUVfQVNDXCI6IFwiXHVEMzBDXHVDNzdDIFx1Qzc3NFx1Qjk4NChcdUM1NENcdUQzMENcdUJDQjNcdUMyMUMpXCIsXG4gICAgXCJTT1JUX0ZJTEVfTkFNRV9ERVNDXCI6IFwiXHVEMzBDXHVDNzdDIFx1Qzc3NFx1Qjk4NChcdUM1NENcdUQzMENcdUJDQjMgXHVDNUVEXHVDMjFDKVwiLFxuICAgIFwiU09SVF9MQVNUX01PRElGSUVEX0RFU0NcIjogXCJcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjggXHVCMEEwXHVDOURDKFx1Q0Q1Q1x1QzJFMFx1QzIxQylcIixcbiAgICBcIlNPUlRfTEFTVF9NT0RJRklFRF9BU0NcIjogXCJcdUM1QzVcdUIzNzBcdUM3NzRcdUQyQjggXHVCMEEwXHVDOURDKFx1QzYyNFx1Qjc5OFx1QjQxQyBcdUMyMUMpXCIsXG4gICAgXCJTT1JUX0NSRUFURURfREVTQ1wiOiBcIlx1Qzc5MVx1QzEzMVx1Qzc3QyhcdUNENUNcdUMyRTBcdUMyMUMpXCIsXG4gICAgXCJTT1JUX0NSRUFURURfQVNDXCI6IFwiXHVDNzkxXHVDMTMxXHVDNzdDKFx1QzYyNFx1Qjc5OFx1QjQxQyBcdUMyMUMpXCIsXG4gICAgXCJTSE9XX0ZJTEVfTkFNRVwiOiBcIlx1RDMwQ1x1Qzc3QyBcdUM3NzRcdUI5ODQgXHVENDVDXHVDMkRDXCIsXG4gICAgXCJTSE9XX0ZJUlNUX0hFQURFUlwiOiBcIlx1Q0NBQiBcdUJDODhcdUM5RjggXHVENUU0XHVCMzU0IFx1RDQ1Q1x1QzJEQ1wiLFxuICAgIFwiU0hPV19CT0RZXCI6IFwiXHVCQ0Y4XHVCQjM4IFx1RDQ1Q1x1QzJEQ1wiLFxuICAgIFwiVE9HR0xFX0ZJTEVfTkFNRV9ESVNQTEFZXCI6IFwiXHVEMzBDXHVDNzdDIFx1Qzc3NFx1Qjk4NCBcdUQ0NUNcdUMyREMgXHVEMUEwXHVBRTAwXCIsXG4gICAgXCJUT0dHTEVfRklSU1RfSEVBREVSX0RJU1BMQVlcIjogXCJcdUNDQUIgXHVCQzg4XHVDOUY4IFx1RDVFNFx1QjM1NCBcdUQ0NUNcdUMyREMgXHVEMUEwXHVBRTAwXCIsXG4gICAgXCJUT0dHTEVfQk9EWV9ESVNQTEFZXCI6IFwiXHVCQ0Y4XHVCQjM4IFx1RDQ1Q1x1QzJEQyBcdUQxQTBcdUFFMDBcIixcbiAgICBcIkZJTEVfTkFNRV9GT05UX1NJWkVcIjogXCJcdUQzMENcdUM3N0MgXHVDNzc0XHVCOTg0IFx1QUUwMFx1QUYzNCBcdUQwNkNcdUFFMzBcIixcbiAgICBcIkZJUlNUX0hFQURFUl9GT05UX1NJWkVcIjogXCJcdUNDQUIgXHVCQzg4XHVDOUY4IFx1RDVFNFx1QjM1NCBcdUFFMDBcdUFGMzQgXHVEMDZDXHVBRTMwXCIsXG4gICAgXCJCT0RZX0ZPTlRfU0laRVwiOiBcIlx1QkNGOFx1QkIzOCBcdUFFMDBcdUFGMzQgXHVEMDZDXHVBRTMwXCIsXG4gICAgXCJTRVRfRklMRV9OQU1FX0ZPTlRfU0laRVwiOiBcIlx1RDMwQ1x1Qzc3QyBcdUM3NzRcdUI5ODQgXHVBRTAwXHVBRjM0IFx1RDA2Q1x1QUUzMCBcdUMxMjRcdUM4MTVcIixcbiAgICBcIlNFVF9GSVJTVF9IRUFERVJfRk9OVF9TSVpFXCI6IFwiXHVDQ0FCIFx1QkM4OFx1QzlGOCBcdUQ1RTRcdUIzNTQgXHVBRTAwXHVBRjM0IFx1RDA2Q1x1QUUzMCBcdUMxMjRcdUM4MTVcIixcbiAgICBcIlNFVF9CT0RZX0ZPTlRfU0laRVwiOiBcIlx1QkNGOFx1QkIzOCBcdUFFMDBcdUFGMzQgXHVEMDZDXHVBRTMwIFx1QzEyNFx1QzgxNVwiLFxuICAgIFwiU0NST0xMX1VQX09ORV9DQVJEXCI6IFwiXHVDRTc0XHVCNERDIFx1RDU1OFx1QjA5OFx1QjlDQ1x1RDA3QyBcdUM3MDRcdUI4NUMgXHVDMkE0XHVEMDZDXHVCODY0XCIsXG4gICAgXCJTQ1JPTExfRE9XTl9PTkVfQ0FSRFwiOiBcIlx1Q0U3NFx1QjREQyBcdUQ1NThcdUIwOThcdUI5Q0NcdUQwN0MgXHVDNTQ0XHVCNzk4XHVCODVDIFx1QzJBNFx1RDA2Q1x1Qjg2NFwiLFxuICAgIFwiU0NST0xMX0xFRlRfT05FX0NBUkRcIjogXCJcdUNFNzRcdUI0REMgXHVENTU4XHVCMDk4XHVCOUNDXHVEMDdDIFx1QzY3Q1x1Q0FCRFx1QzczQ1x1Qjg1QyBcdUMyQTRcdUQwNkNcdUI4NjRcIixcbiAgICBcIlNDUk9MTF9SSUdIVF9PTkVfQ0FSRFwiOiBcIlx1Q0U3NFx1QjREQyBcdUQ1NThcdUIwOThcdUI5Q0NcdUQwN0MgXHVDNjI0XHVCOTc4XHVDQUJEXHVDNzNDXHVCODVDIFx1QzJBNFx1RDA2Q1x1Qjg2NFwiLFxuICAgIFwiU0NST0xMX1VQX0xFRlRfT05FX1BBR0VcIjogXCJcdUQ1NUMgXHVEMzk4XHVDNzc0XHVDOUMwIFx1QzcwNFx1Qjg1Qy9cdUM2N0NcdUNBQkRcdUM3M0NcdUI4NUMgXHVDMkE0XHVEMDZDXHVCODY0XCIsXG4gICAgXCJTQ1JPTExfRE9XTl9SSUdIVF9PTkVfUEFHRVwiOiBcIlx1RDU1QyBcdUQzOThcdUM3NzRcdUM5QzAgXHVDNTQ0XHVCNzk4XHVCODVDL1x1QzYyNFx1Qjk3OFx1Q0FCRFx1QzczQ1x1Qjg1QyBcdUMyQTRcdUQwNkNcdUI4NjRcIixcbiAgICBcIkNFTlRFUl9BQ1RJVkVfQ0FSRFwiOiBcIlx1RDY1Q1x1QzEzMSBcdUNFNzRcdUI0REMgXHVDOTExXHVDNTU5IFx1QzgxNVx1QjgyQ1wiLFxuICAgIFwiTU9WRV9GT0NVU19UT19DQVJEX05BVklHQVRPUlwiOiBcIlx1Q0U3NFx1QjREQyBcdUIxMjRcdUJFNDRcdUFDOENcdUM3NzRcdUQxMzBcdUI4NUMgXHVEM0VDXHVDRUU0XHVDMkE0IFx1Qzc3NFx1QjNEOVwiLFxuICAgIFwiT1BFTl9DQVJEX0NPTlRFWFRfTUVOVVwiOiBcIlx1Q0U3NFx1QjREQyBcdUNFRThcdUQxNERcdUMyQTRcdUQyQjggXHVCQTU0XHVCMjc0IFx1QzVGNFx1QUUzMFwiLFxuICAgIFwiTU9WRV9VUF9PTkVfQ0FSRFwiOiBcIlx1Q0U3NFx1QjREQyBcdUQ1NThcdUIwOThcdUI5Q0NcdUQwN0MgXHVDNzA0XHVCODVDIFx1Qzc3NFx1QjNEOVwiLFxuICAgIFwiTU9WRV9ET1dOX09ORV9DQVJEXCI6IFwiXHVDRTc0XHVCNERDIFx1RDU1OFx1QjA5OFx1QjlDQ1x1RDA3QyBcdUM1NDRcdUI3OThcdUI4NUMgXHVDNzc0XHVCM0Q5XCIsXG4gICAgXCJNT1ZFX0xFRlRfT05FX0NBUkRcIjogXCJcdUNFNzRcdUI0REMgXHVENTU4XHVCMDk4XHVCOUNDXHVEMDdDIFx1QzY3Q1x1Q0FCRFx1QzczQ1x1Qjg1QyBcdUM3NzRcdUIzRDlcIixcbiAgICBcIk1PVkVfUklHSFRfT05FX0NBUkRcIjogXCJcdUNFNzRcdUI0REMgXHVENTU4XHVCMDk4XHVCOUNDXHVEMDdDIFx1QzYyNFx1Qjk3OFx1Q0FCRFx1QzczQ1x1Qjg1QyBcdUM3NzRcdUIzRDlcIixcbiAgICBcIk1PVkVfVVBfTEVGVF9PTkVfUEFHRVwiOiBcIlx1RDU1QyBcdUQzOThcdUM3NzRcdUM5QzAgXHVDNzA0XHVCODVDL1x1QzY3Q1x1Q0FCRFx1QzczQ1x1Qjg1QyBcdUM3NzRcdUIzRDlcIixcbiAgICBcIk1PVkVfRE9XTl9SSUdIVF9PTkVfUEFHRVwiOiBcIlx1RDU1QyBcdUQzOThcdUM3NzRcdUM5QzAgXHVDNTQ0XHVCNzk4XHVCODVDL1x1QzYyNFx1Qjk3OFx1Q0FCRFx1QzczQ1x1Qjg1QyBcdUM3NzRcdUIzRDlcIixcbiAgICBcIkNFTlRFUl9DVVJSRU5UTFlfQUNUSVZFX0NBUkRcIjogXCJcdUQ2MDRcdUM3QUMgXHVENjVDXHVDMTMxIFx1Q0U3NFx1QjREQ1x1Qjk3QyBcdUM5MTFcdUM1NTlcdUM1RDAgXHVCQzMwXHVDRTU4XCIsXG4gICAgXCJTRVRfRk9DVVNfVE9fQ0FSRF9OQVZJR0FUT1JcIjogXCJcdUNFNzRcdUI0REMgXHVCMTI0XHVCRTQ0XHVBQzhDXHVDNzc0XHVEMTMwXHVDNUQwIFx1RDNFQ1x1Q0VFNFx1QzJBNCBcdUMxMjRcdUM4MTVcIixcbiAgICBcIk9QRU5fQ09OVEVYVF9NRU5VX0ZPUl9GT0NVU0VEX0NBUkRcIjogXCJcdUQzRUNcdUNFRTRcdUMyQTRcdUI0MUMgXHVDRTc0XHVCNERDXHVDNzU4IFx1Q0VFOFx1RDE0RFx1QzJBNFx1RDJCOCBcdUJBNTRcdUIyNzQgXHVDNUY0XHVBRTMwXCIsXG5cblx0XCJDT05GSVJNX0RFTEVURVwiOiBcIlx1QzBBRFx1QzgxQyBcdUQ2NTVcdUM3NzhcIixcblx0XCJDT05GSVJNX0RFTEVURV9JVEVNXCI6IFwiXHVDODE1XHVCOUQwXHVCODVDIFx1QzBBRFx1QzgxQ1x1RDU1OFx1QzJEQ1x1QUNBMFx1QzJCNVx1QjJDOFx1QUU0Qz9cIixcblx0XCJDQU5DRUxcIjogXCJcdUNERThcdUMxOENcIixcblxuICAgIFwiRVJST1JfU0FWSU5HX1NFVFRJTkdTXCI6IFwiXHVDMTI0XHVDODE1IFx1QzgwMFx1QzdBNSBcdUM5MTEgXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERDpcIixcbiAgICBcIkVSUk9SX1NBVklOR19ERUZBVUxUX1BSRVNFVFwiOiBcIlx1QUUzMFx1QkNGOCBcdUQ1MDRcdUI5QUNcdUMxNEIgXHVDODAwXHVDN0E1IFx1QzkxMSBcdUM2MjRcdUI5NTggXHVCQzFDXHVDMEREOlwiLFxuICAgIFwiRVJST1JfTE9BRElOR19QUkVTRVRfRlJPTV9GSUxFXCI6IFwie3tmaWxlTmFtZX19IFx1RDMwQ1x1Qzc3Q1x1QzVEMFx1QzExQyBcdUQ1MDRcdUI5QUNcdUMxNEIgXHVCODVDXHVCNTI5IFx1QzkxMSBcdUM2MjRcdUI5NTggXHVCQzFDXHVDMEREOlwiLFxuICAgIFwiRVJST1JfU0FWSU5HX05FV19QUkVTRVRcIjogXCJcdUMwQzggXHVENTA0XHVCOUFDXHVDMTRCIHt7cHJlc2V0TmFtZX19IFx1QzgwMFx1QzdBNSBcdUM5MTEgXHVDNjI0XHVCOTU4IFx1QkMxQ1x1QzBERDpcIixcblxuICAgIFwiUFJFU0VUX0ZPTERFUlwiOiBcIlx1RDUwNFx1QjlBQ1x1QzE0QiBcdUQzRjRcdUIzNTRcIixcbiAgICBcIlNFTEVDVF9QUkVTRVRfRk9MREVSXCI6IFwiXHVCQTNDXHVDODAwIFZhdWx0IFx1QjBCNFx1QzVEMCBKU09OIFx1RDYxNVx1QzJERFx1Qzc1OCBcdUQ1MDRcdUI5QUNcdUMxNEIgXHVEMzBDXHVDNzdDXHVDNzQ0IFx1QzgwMFx1QzdBNVx1RDU2MCBcdUQzRjRcdUIzNTRcdUI5N0MgXHVCOUNDXHVCNEU0XHVBQ0UwIFx1QURGOCBcdUQzRjRcdUIzNTRcdUI5N0MgXHVDMTIwXHVEMEREXHVENTU4XHVDMTM4XHVDNjk0LiBcdUFFMzBcdUM4NzRcdUM3NTggXHVEM0Y0XHVCMzU0XHVCMjk0IFx1RDUwNFx1QjlBQ1x1QzE0QiBcdUQzMENcdUM3N0NcdUM3NDQgXHVDMEM4XHVCODVDIFx1QzlDMFx1QzgxNVx1RDU1QyBcdUQzRjRcdUIzNTRcdUM1RDAgXHVDMjE4XHVCM0Q5XHVDNzNDXHVCODVDIFx1QzYyRVx1QUUzNCBcdUQ2QzQgXHVDNTQ4XHVDODA0XHVENTU4XHVBQzhDIFx1QzBBRFx1QzgxQ1x1RDU1OFx1QzEzOFx1QzY5NC5cIixcbiAgICBcIlBSRVNFVF9GT0xERVJfUExBQ0VIT0xERVJcIjogXCJcdUM2MDg6IENhcmROYXZpZ2F0b3JQcmVzZXRzXCIsXG4gICAgXCJQUkVTRVRfTUFOQUdFTUVOVF9BTkRfR0xPQkFMX1NFVFRJTkdTXCI6IFwiXHVENTA0XHVCOUFDXHVDMTRCIFx1QUQwMFx1QjlBQyBcdUJDMEYgXHVDODA0XHVDNUVEIFx1QzEyNFx1QzgxNVwiLFxuICAgIFwiUFJFU0VUX01BTkFHRU1FTlRfREVTQ1wiOiBcIlx1RDYwNFx1QzdBQyBcdUMxMjRcdUM4MTVcdUM3M0NcdUI4NUMgXHVENTA0XHVCOUFDXHVDMTRCXHVDNzQ0IFx1QzBDOFx1Qjg1QyBcdUI5Q0NcdUI0RTRcdUFDNzBcdUIwOTggSlNPTiBcdUQ2MTVcdUMyRERcdUM3NTggXHVCMzcwXHVDNzc0XHVEMTMwXHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzVFQyBcdUMwQzggXHVENTA0XHVCOUFDXHVDMTRCXHVDNzQ0IFx1QjlDQ1x1QjRFNCBcdUMyMTggXHVDNzg4XHVDMkI1XHVCMkM4XHVCMkU0LiBcdUQ1MDRcdUI5QUNcdUMxNEJcdUM3NDQgXHVEM0I4XHVDOUQxLCBcdUJDRjVcdUMwQUMsIFx1QzBBRFx1QzgxQywgXHVCMEI0XHVCQ0Y0XHVCMEI0XHVBRTMwIFx1QkMwRiBcdUM4MDRcdUM1RUQgXHVENTA0XHVCOUFDXHVDMTRCXHVDNzNDXHVCODVDIFx1QzEyNFx1QzgxNSBcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC5cIixcbiAgICBcIkNSRUFURV9ORVdfUFJFU0VUXCI6IFwiXHVDMEM4IFx1RDUwNFx1QjlBQ1x1QzE0QiBcdUMwRERcdUMxMzFcIixcbiAgICBcIklNUE9SVF9QUkVTRVRcIjogXCJcdUQ1MDRcdUI5QUNcdUMxNEIgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXCIsXG4gICAgXCJOT19ERVNDUklQVElPTlwiOiBcIlx1QzEyNFx1QkE4NSBcdUM1QzZcdUM3NENcIixcbiAgICBcIkVESVRcIjogXCJcdUQzQjhcdUM5RDFcIixcbiAgICBcIkNMT05FXCI6IFwiXHVCQ0Y1XHVDODFDXCIsXG4gICAgXCJERUxFVEVcIjogXCJcdUMwQURcdUM4MUNcIixcbiAgICBcIkVYUE9SVFwiOiBcIlx1QjBCNFx1QkNGNFx1QjBCNFx1QUUzMFwiLFxuICAgIFwiU0VUX0FTX0dMT0JBTF9QUkVTRVRcIjogXCJcdUM4MDRcdUM1RUQgXHVENTA0XHVCOUFDXHVDMTRCXHVDNzNDXHVCODVDIFx1QzEyNFx1QzgxNVwiLFxuICAgIFwiUFJFU0VUX05BTUVcIjogXCJcdUM3NzRcdUI5ODRcIixcbiAgICBcIlBSRVNFVF9ERUxFVEVEX05PVElDRVwiOiBcIlx1RDUwNFx1QjlBQ1x1QzE0Qlx1Qzc3NCBcdUMwQURcdUM4MUNcdUI0MThcdUFDRTAgXHVBRTMwXHVCQ0Y4IFx1RDUwNFx1QjlBQ1x1QzE0Qlx1Qzc3NCBcdUM4MDFcdUM2QTlcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTRcIixcblx0XCJBVVRPX0FQUExZX1BSRVNFVFNcIjogXCJcdUQ1MDRcdUI5QUNcdUMxNEIgXHVDNzkwXHVCM0Q5IFx1QzgwMVx1QzZBOVwiLFxuXHRcIkFVVE9fQVBQTFlfUFJFU0VUU19ERVNDXCI6IFwiXHVEMzBDXHVDNzdDXHVDNzQ0IFx1QzVGNCBcdUI1NEMgXHVENTA0XHVCOUFDXHVDMTRCXHVDNzQ0IFx1Qzc5MFx1QjNEOVx1QzczQ1x1Qjg1QyBcdUM4MDFcdUM2QTlcdUQ1NjlcdUIyQzhcdUIyRTQuXCIsXG5cdFwiQVVUT19BUFBMWV9GT0xERVJfUFJFU0VUXCI6IFwiXHVEM0Y0XHVCMzU0XHVCQ0M0IFx1RDUwNFx1QjlBQ1x1QzE0QiBcdUM3OTBcdUIzRDkgXHVDODAxXHVDNkE5XCIsXG5cdFwiQVVUT19BUFBMWV9GT0xERVJfUFJFU0VUX0RFU0NcIjogXCJcdUIyRTRcdUI5NzggXHVEM0Y0XHVCMzU0XHVDNzU4IFx1RDMwQ1x1Qzc3Q1x1Qzc0NCBcdUM1RjQgXHVCNTRDIFx1RDNGNFx1QjM1NFx1QkNDNCBcdUQ1MDRcdUI5QUNcdUMxNEJcdUM3NDQgXHVDNzkwXHVCM0Q5XHVDNzNDXHVCODVDIFx1QzgwMVx1QzZBOVx1RDU2OVx1QjJDOFx1QjJFNC4gXHVEM0Y0XHVCMzU0XHVDNUQwIFx1RDUwNFx1QjlBQ1x1QzE0Qlx1Qzc3NCBcdUM1QzZcdUM3M0NcdUJBNzQgXHVDODA0XHVDNUVEIFx1RDUwNFx1QjlBQ1x1QzE0Qlx1Qzc3NCBcdUM4MDFcdUM2QTlcdUI0MjlcdUIyQzhcdUIyRTQuXCIsXG5cdFwiQUREX05FV19GT0xERVJfUFJFU0VUXCI6IFwiXHVDMEM4IFx1RDNGNFx1QjM1NCBcdUQ1MDRcdUI5QUNcdUMxNEIgXHVDRDk0XHVBQzAwXCIsXG5cdFwiQUREX05FV19GT0xERVJfUFJFU0VUX0RFU0NcIjogXCJcdUMwQzhcdUI4NUNcdUM2QjQgXHVEM0Y0XHVCMzU0XHVCQ0M0IFx1RDUwNFx1QjlBQ1x1QzE0Qlx1Qzc0NCBcdUNEOTRcdUFDMDBcdUQ1NjlcdUIyQzhcdUIyRTQuXCIsXG4gICAgXCJQUkVTRVRfQUxSRUFEWV9FWElTVFNcIjogXCJcdUQ1MDRcdUI5QUNcdUMxNEJcdUM3NzQgXHVDNzc0XHVCQkY4IFx1Qzg3NFx1QzdBQ1x1RDU2OVx1QjJDOFx1QjJFNFwiLFxuICAgIFwiRk9MREVSXCI6IFwiXHVEM0Y0XHVCMzU0XCIsXG4gICAgXCJQUkVTRVRfQUxSRUFEWV9FWElTVFNfRk9SX0ZPTERFUlwiOiBcIlx1Qzc3NCBcdUQzRjRcdUIzNTRcdUM1RDAgXHVCMzAwXHVENTVDIFx1RDUwNFx1QjlBQ1x1QzE0Qlx1Qzc3NCBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTY5XHVCMkM4XHVCMkU0XCIsXG4gICAgXCJQUkVTRVRcIjogXCJcdUQ1MDRcdUI5QUNcdUMxNEJcIixcbiAgICBcIk1PVkVfRE9XTlwiOiBcIlx1QzU0NFx1Qjc5OFx1Qjg1QyBcdUM3NzRcdUIzRDlcIixcblxuXHRcIlBSRVNFVF9OT1RfRk9VTkRcIjogXCJcdUQ1MDRcdUI5QUNcdUMxNEIgJ3t7bmFtZX19J1x1Qzc0NChcdUI5N0MpIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0XCIsXG4gICAgXCJTT1VSQ0VfUFJFU0VUX05PVF9GT1VORFwiOiBcIlx1QzE4Q1x1QzJBNCBcdUQ1MDRcdUI5QUNcdUMxNEIgJ3t7bmFtZX19J1x1Qzc0NChcdUI5N0MpIFx1Q0MzRVx1Qzc0NCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0XCIsXG4gICAgXCJQUkVTRVRfQUxSRUFEWV9FWElTVFNfV0lUSF9OQU1FXCI6IFwiXHVENTA0XHVCOUFDXHVDMTRCICd7e25hbWV9fSdcdUM3NzQoXHVBQzAwKSBcdUM3NzRcdUJCRjggXHVDODc0XHVDN0FDXHVENTY5XHVCMkM4XHVCMkU0XCIsXG4gICAgXCJJTlZBTElEX1BSRVNFVF9GT1JNQVRcIjogXCJcdUM3OThcdUJBQkJcdUI0MUMgXHVENTA0XHVCOUFDXHVDMTRCIFx1RDYxNVx1QzJERFx1Qzc4NVx1QjJDOFx1QjJFNFwiLFxuICAgIFwiUFJFU0VUX0lNUE9SVF9GQUlMRURcIjogXCJcdUQ1MDRcdUI5QUNcdUMxNEIgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwIFx1QzJFNFx1RDMyODoge3tlcnJvcn19XCIsXG4gICAgXCJHTE9CQUxfUFJFU0VUX05PVF9TRVRcIjogXCJcdUM4MDRcdUM1RUQgXHVENTA0XHVCOUFDXHVDMTRCXHVDNzc0IFx1QzEyNFx1QzgxNVx1QjQxOFx1QzlDMCBcdUM1NEFcdUM1NThcdUMyQjVcdUIyQzhcdUIyRTRcIixcblxuXHRcIkNPTlRBSU5FUl9TRVRUSU5HU1wiOiBcIlx1Q0VFOFx1RDE0Q1x1Qzc3NFx1QjEwOCBcdUMxMjRcdUM4MTVcIixcbiAgICBcIlNPVVJDRV9GT0xERVJcIjogXCJcdUMxOENcdUMyQTQgXHVEM0Y0XHVCMzU0XCIsXG4gICAgXCJTT1VSQ0VfRk9MREVSX0RFU0NcIjogXCJcdUNFNzRcdUI0REMgXHVCMTI0XHVCRTQ0XHVBQzhDXHVDNzc0XHVEMTMwXHVDNUQwXHVDMTFDIFx1RDY1Q1x1QzEzMSBcdUQzRjRcdUIzNTRcdUM3NTggXHVCMTc4XHVEMkI4XHVCOTdDIFx1Q0U3NFx1QjREQ1x1Qjg1QyBcdUQ0NUNcdUMyRENcdUQ1NjBcdUM5QzAgXHVDMTIwXHVEMEREXHVENTVDIFx1RDNGNFx1QjM1NFx1Qzc1OCBcdUIxNzhcdUQyQjhcdUI5N0MgXHVDRTc0XHVCNERDXHVCODVDIFx1RDQ1Q1x1QzJEQ1x1RDU2MFx1QzlDMCBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuXCIsXG4gICAgXCJTRUxFQ1RfRk9MREVSXCI6IFwiXHVEM0Y0XHVCMzU0IFx1QzEyMFx1RDBERFwiLFxuICAgIFwiU0VMRUNUX0ZPTERFUl9ERVNDXCI6IFwiXHVDMThDXHVDMkE0IFx1RDNGNFx1QjM1NCBcdUMxMjBcdUQwRERcIixcbiAgICBcIlNFTEVDVF9GT0xERVJfUExBQ0VIT0xERVJcIjogXCJcdUQzRjRcdUIzNTQgXHVDMTIwXHVEMEREXCIsXG4gICAgXCJERUZBVUxUX1NPUlRfTUVUSE9EXCI6IFwiXHVBRTMwXHVCQ0Y4IFx1QzgxNVx1QjgyQyBcdUJDMjlcdUJDOTVcIixcbiAgICBcIkRFRkFVTFRfU09SVF9NRVRIT0RfREVTQ1wiOiBcIlx1Q0U3NFx1QjREQ1x1Qzc1OCBcdUFFMzBcdUJDRjggXHVDODE1XHVCODJDIFx1QkMyOVx1QkM5NVx1Qzc0NCBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuXCIsXG4gICAgXCJDRU5URVJfQUNUSVZFX0NBUkRfT05fT1BFTlwiOiBcIlx1QzVGNCBcdUI1NEMgXHVENjVDXHVDMTMxIFx1Q0U3NFx1QjREQyBcdUM5MTFcdUM1NTkgXHVDODE1XHVCODJDXCIsXG4gICAgXCJDRU5URVJfQUNUSVZFX0NBUkRfT05fT1BFTl9ERVNDXCI6IFwiXHVDRTc0XHVCNERDIFx1QjEyNFx1QkU0NFx1QUM4Q1x1Qzc3NFx1RDEzMFx1Qjk3QyBcdUM1RjQgXHVCNTRDIFx1Qzc5MFx1QjNEOVx1QzczQ1x1Qjg1QyBcdUQ2NUNcdUMxMzEgXHVDRTc0XHVCNERDXHVCOTdDIFx1QzkxMVx1QzU1OVx1QzVEMCBcdUM4MTVcdUI4MkNcdUQ1NjlcdUIyQzhcdUIyRTRcIixcblxuXHRcIkxBWU9VVF9TRVRUSU5HU1wiOiBcIlx1QjgwOFx1Qzc3NFx1QzU0NFx1QzZDMyBcdUMxMjRcdUM4MTVcIixcbiAgICBcIkRFRkFVTFRfTEFZT1VUXCI6IFwiXHVBRTMwXHVCQ0Y4IFx1QjgwOFx1Qzc3NFx1QzU0NFx1QzZDM1wiLFxuICAgIFwiREVGQVVMVF9MQVlPVVRfREVTQ1wiOiBcIlx1Q0U3NFx1QjREQyBcdUIxMjRcdUJFNDRcdUFDOENcdUM3NzRcdUQxMzBcdUM3NTggXHVBRTMwXHVCQ0Y4IFx1QjgwOFx1Qzc3NFx1QzU0NFx1QzZDM1x1Qzc0NCBcdUMxMjBcdUQwRERcdUQ1NThcdUMxMzhcdUM2OTQuXCIsXG4gICAgXCJBVVRPXCI6IFwiXHVDNzkwXHVCM0Q5XCIsXG4gICAgXCJMSVNUXCI6IFwiXHVCQUE5XHVCODVEXCIsXG4gICAgXCJHUklEXCI6IFwiXHVBREY4XHVCOUFDXHVCNERDXCIsXG4gICAgXCJNQVNPTlJZXCI6IFwiXHVCOUU0XHVDMThDXHVCMkM4XCIsXG4gICAgXCJDQVJEX1dJRFRIX1RIUkVTSE9MRFwiOiBcIlx1Q0U3NFx1QjREQyBcdUIxMDhcdUJFNDQgXHVDNzg0XHVBQ0M0XHVBQzEyXCIsXG4gICAgXCJDQVJEX1dJRFRIX1RIUkVTSE9MRF9ERVNDXCI6IFwiXHVDNzkwXHVCM0Q5IFx1QjgwOFx1Qzc3NFx1QzU0NFx1QzZDM1x1QzVEMFx1QzExQyBcdUM1RjQgXHVDRDk0XHVBQzAwL1x1QzgxQ1x1QUM3MFx1Qjk3QyBcdUM3MDRcdUQ1NUMgXHVDRTc0XHVCNERDIFx1QjEwOFx1QkU0NCBcdUM3ODRcdUFDQzRcdUFDMTJcIixcbiAgICBcIkFMSUdOX0NBUkRfSEVJR0hUXCI6IFwiXHVDRTc0XHVCNERDIFx1QjE5Mlx1Qzc3NCBcdUM4MTVcdUI4MkNcIixcbiAgICBcIkFMSUdOX0NBUkRfSEVJR0hUX0RFU0NcIjogXCJcdUQ2NUNcdUMxMzFcdUQ2NTRcdUQ1NThcdUJBNzQgXHVCQUE4XHVCNEUwIFx1Q0U3NFx1QjREQ1x1Qzc1OCBcdUIxOTJcdUM3NzRcdUFDMDAgXHVCM0Q5XHVDNzdDXHVENTY5XHVCMkM4XHVCMkU0KFx1QURGOFx1QjlBQ1x1QjREQykuIFx1QkU0NFx1RDY1Q1x1QzEzMVx1RDY1NFx1RDU1OFx1QkE3NCBcdUNFNzRcdUI0REMgXHVCMTkyXHVDNzc0XHVBQzAwIFx1QjBCNFx1QzZBOVx1QzVEMCBcdUI5REVcdUFDOEMgXHVDODcwXHVDODE1XHVCNDI5XHVCMkM4XHVCMkU0KFx1QjlFNFx1QzE4Q1x1QjJDOCkuXCIsXG4gICAgXCJDQVJEU19QRVJfVklFV1wiOiBcIlx1QkRGMFx1QjJGOSBcdUNFNzRcdUI0REMgXHVDMjE4XCIsXG4gICAgXCJDQVJEU19QRVJfVklFV19ERVNDXCI6IFwiXHVCOUFDXHVDMkE0XHVEMkI4IFx1QjgwOFx1Qzc3NFx1QzU0NFx1QzZDM1x1QzVEMFx1QzExQyBcdUNFNzRcdUI0RENcdUM3NTggXHVCMTkyXHVDNzc0XHVBQzAwIFx1QUMxOVx1Qzc0NCBcdUI1NEMgXHVENTVDIFx1QkM4OFx1QzVEMCBcdUQ0NUNcdUMyRENcdUQ1NjAgXHVDRTc0XHVCNERDIFx1QzIxOFwiLFxuICAgIFwiR1JJRF9DT0xVTU5TXCI6IFwiXHVBREY4XHVCOUFDXHVCNERDIFx1QzVGNFwiLFxuICAgIFwiR1JJRF9DT0xVTU5TX0RFU0NcIjogXCJcdUFERjhcdUI5QUNcdUI0REMgXHVCODA4XHVDNzc0XHVDNTQ0XHVDNkMzXHVDNzU4IFx1QzVGNCBcdUMyMThcIixcbiAgICBcIkdSSURfQ0FSRF9IRUlHSFRcIjogXCJcdUFERjhcdUI5QUNcdUI0REMgXHVDRTc0XHVCNERDIFx1QjE5Mlx1Qzc3NFwiLFxuICAgIFwiR1JJRF9DQVJEX0hFSUdIVF9ERVNDXCI6IFwiXHVBREY4XHVCOUFDXHVCNERDIFx1QjgwOFx1Qzc3NFx1QzU0NFx1QzZDM1x1Qzc1OCBcdUNFNzRcdUI0REMgXHVCMTkyXHVDNzc0XCIsXG4gICAgXCJNQVNPTlJZX0NPTFVNTlNcIjogXCJcdUI5RTRcdUMxOENcdUIyQzggXHVDNUY0XCIsXG4gICAgXCJNQVNPTlJZX0NPTFVNTlNfREVTQ1wiOiBcIlx1QjlFNFx1QzE4Q1x1QjJDOCBcdUI4MDhcdUM3NzRcdUM1NDRcdUM2QzNcdUM3NTggXHVDNUY0IFx1QzIxOFwiLFxuXG5cdFwiQ0FSRF9DT05URU5UX1NFVFRJTkdTXCI6IFwiXHVDRTc0XHVCNERDIFx1QjBCNFx1QzZBOSBcdUMxMjRcdUM4MTVcIixcbiAgICBcIlJFTkRFUl9DT05URU5UX0FTX0hUTUxcIjogXCJIVE1MXHVCODVDIFx1QjBCNFx1QzZBOSBcdUI4MENcdUIzNTRcdUI5QzFcIixcbiAgICBcIlJFTkRFUl9DT05URU5UX0FTX0hUTUxfREVTQ1wiOiBcIlx1RDY1Q1x1QzEzMVx1RDY1NFx1RDU1OFx1QkE3NCBcdUNFNzRcdUI0REMgXHVCMEI0XHVDNkE5XHVDNzc0IEhUTUxcdUI4NUMgXHVCODBDXHVCMzU0XHVCOUMxXHVCNDI5XHVCMkM4XHVCMkU0LiBcdUIwQjRcdUM2QTlcdUM3NzQgXHVDNzk4IFx1RDQ1Q1x1QzJEQ1x1QjQxOFx1QzlDMCBcdUM1NEFcdUFDNzBcdUIwOTggXHVDNjI0XHVCOTU4XHVBQzAwIFx1QkMxQ1x1QzBERFx1RDU2MCBcdUI1NENcdUM1RDBcdUIyOTQgXHVCQ0Y4XHVCQjM4IFx1QUUzOFx1Qzc3NCBcdUM4MUNcdUQ1NUNcdUM3NDQgXHVDODcwXHVDODE1XHVENTU4XHVDMTM4XHVDNjk0LlwiLFxuICAgIFwiRFJBR19BTkRfRFJPUF9DT05URU5UXCI6IFwiXHVCMEI0XHVDNkE5IFx1QjREQ1x1Qjc5OFx1QURGOCBcdUM1NjQgXHVCNERDXHVCODZEXCIsXG4gICAgXCJEUkFHX0FORF9EUk9QX0NPTlRFTlRfREVTQ1wiOiBcIlx1RDY1Q1x1QzEzMVx1RDY1NFx1RDU1OFx1QkE3NCBcdUNFNzRcdUI0RENcdUI5N0MgXHVCNERDXHVCNzk4XHVBREY4XHVENTYwIFx1QjU0QyBcdUI5QzFcdUQwNkMgXHVCMzAwXHVDMkUwIFx1QzU0NFx1Qjc5OFx1QzVEMFx1QzExQyBcdUMxMjBcdUQwRERcdUQ1NUMgXHVDRTc0XHVCNERDXHVDNzU4IFx1QjBCNFx1QzZBOVx1Qzc3NCBcdUMwQkRcdUM3ODVcdUI0MjlcdUIyQzhcdUIyRTQuXCIsXG4gICAgXCJCT0RZX0xFTkdUSF9MSU1JVFwiOiBcIlx1QkNGOFx1QkIzOCBcdUFFMzhcdUM3NzQgXHVDODFDXHVENTVDXCIsXG4gICAgXCJCT0RZX0xFTkdUSF9MSU1JVF9ERVNDXCI6IFwiXHVDODFDXHVENTVDXHVCNDFDIFx1QkNGOFx1QkIzOCBcdUFFMzhcdUM3NzRcdUM2NDAgXHVCQjM0XHVDODFDXHVENTVDIFx1QkNGOFx1QkIzOCBcdUFFMzhcdUM3NzQgXHVDMEFDXHVDNzc0XHVCOTdDIFx1QzgwNFx1RDY1OFx1RDU2OVx1QjJDOFx1QjJFNC5cIixcbiAgICBcIkJPRFlfTEVOR1RIXCI6IFwiXHVCQ0Y4XHVCQjM4IFx1QUUzOFx1Qzc3NFwiLFxuICAgIFwiQk9EWV9MRU5HVEhfREVTQ1wiOiBcIlx1QkNGOFx1QkIzOCBcdUFFMzhcdUM3NzRcdUFDMDAgXHVDODFDXHVENTVDXHVCNDFDIFx1QUNCRFx1QzZCMCBcdUFDMDEgXHVDRTc0XHVCNERDXHVDNUQwIFx1RDQ1Q1x1QzJEQ1x1QjQxOFx1QjI5NCBcdUNENUNcdUIzMDAgXHVCQ0Y4XHVCQjM4IFx1QUUzOFx1Qzc3NFx1Qjk3QyBcdUMxMjRcdUM4MTVcdUQ1NjlcdUIyQzhcdUIyRTQuXCIsXG5cblx0XCJDQVJEX1NUWUxJTkdfU0VUVElOR1NcIjogXCJcdUNFNzRcdUI0REMgXHVDMkE0XHVEMEMwXHVDNzdDIFx1QzEyNFx1QzgxNVwiLFxuICAgIFwiRklMRV9OQU1FX0ZPTlRfU0laRV9ERVNDXCI6IFwiXHVDRTc0XHVCNERDXHVDNzU4IFx1RDMwQ1x1Qzc3QyBcdUM3NzRcdUI5ODQgXHVBRTAwXHVBRjM0IFx1RDA2Q1x1QUUzMCBcdUMxMjRcdUM4MTVcIixcbiAgICBcIkZJUlNUX0hFQURFUl9GT05UX1NJWkVfREVTQ1wiOiBcIlx1Q0U3NFx1QjREQ1x1Qzc1OCBcdUNDQUIgXHVCQzg4XHVDOUY4IFx1RDVFNFx1QjM1NCBcdUFFMDBcdUFGMzQgXHVEMDZDXHVBRTMwIFx1QzEyNFx1QzgxNVwiLFxuICAgIFwiQk9EWV9GT05UX1NJWkVfREVTQ1wiOiBcIlx1Q0U3NFx1QjREQ1x1Qzc1OCBcdUJDRjhcdUJCMzggXHVEMTREXHVDMkE0XHVEMkI4IFx1QUUwMFx1QUYzNCBcdUQwNkNcdUFFMzAgXHVDMTI0XHVDODE1XCIsXG5cblx0XCJLRVlCT0FSRF9TSE9SVENVVFNcIjogXCJcdUQwQTRcdUJDRjRcdUI0REMgXHVCMkU4XHVDRDk1XHVEMEE0XCIsXG5cdFwiS0VZQk9BUkRfU0hPUlRDVVRTX0RFU0NcIjogXCJcdUNFNzRcdUI0REMgXHVCMTI0XHVCRTQ0XHVBQzhDXHVDNzc0XHVEMTMwXHVCMjk0IFx1QjJFNFx1Qzc0QyBcdUFFMzBcdUIyQTVcdUI0RTRcdUM1RDAgXHVEMEE0XHVCQ0Y0XHVCNERDIFx1QjJFOFx1Q0Q5NVx1RDBBNFx1Qjk3QyBcdUQ1NjBcdUIyRjlcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC4gT2JzaWRpYW5cdUM3NTggXHVCMkU4XHVDRDk1XHVEMEE0IFx1QzEyNFx1QzgxNVx1QzVEMFx1QzExQyBcdUM3NzRcdUI5N0MgXHVDMTI0XHVDODE1XHVENTYwIFx1QzIxOCBcdUM3ODhcdUMyQjVcdUIyQzhcdUIyRTQ6XCIsXG5cdFwiQ09NTUFORFwiOiBcIlx1QkE4NVx1QjgzOVwiLFxuXHRcIkRFU0NSSVBUSU9OXCI6IFwiXHVDMTI0XHVCQTg1XCIsXG5cdFwiS0VZQk9BUkRfU0hPUlRDVVRTX0NVU1RPTUlaRV9OT1RFXCI6IFwiXHVDNzc0IFx1Qzc5MVx1QzVDNVx1QjRFNFx1Qzc1OCBcdUIyRThcdUNEOTVcdUQwQTRcdUI5N0MgXHVDMTI0XHVDODE1XHVENTU4XHVCODI0XHVCQTc0IFx1QzEyNFx1QzgxNSBcdTIxOTIgXHVCMkU4XHVDRDk1XHVEMEE0XHVCODVDIFx1Qzc3NFx1QjNEOVx1RDU1OFx1QzVFQyBcXFwiQ2FyZCBOYXZpZ2F0b3JcXFwiXHVCOTdDIFx1QUM4MFx1QzBDOVx1RDU1OFx1QzEzOFx1QzY5NC4gXHVBREY4XHVCN0YwIFx1QjJFNFx1Qzc0QyBcdUFDMDEgXHVDNzkxXHVDNUM1XHVDNUQwIFx1QjMwMFx1RDU3NCBcdUM2RDBcdUQ1NThcdUIyOTQgXHVEMEE0IFx1Qzg3MFx1RDU2OVx1Qzc0NCBcdUQ1NjBcdUIyRjlcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNC5cIixcblx0XCJLRVlCT0FSRF9TSE9SVENVVFNfQURESVRJT05BTF9OT1RFXCI6IFwiXHVDQzM4XHVBQ0UwOiBcdUQwRDBcdUMwQzlcdUM3NDQgXHVDNzA0XHVENTVDIFx1RDY1NFx1QzBCNFx1RDQ1QyBcdUQwQTRcdUM2NDAgXHVDRTc0XHVCNERDXHVCOTdDIFx1QzVGNFx1QUUzMCBcdUM3MDRcdUQ1NUMgRW50ZXIgXHVEMEE0XHVDNjQwIFx1QUMxOVx1Qzc0MCBcdUM3N0NcdUJEODAgXHVCMkU4XHVDRDk1XHVEMEE0XHVCMjk0IFx1QjBCNFx1QzdBNVx1QjQxOFx1QzVCNCBcdUM3ODhcdUM3M0NcdUJBNzAgXHVDMEFDXHVDNkE5XHVDNzkwIFx1QzgxNVx1Qzc1OFx1RDU2MCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0LlwiLFxuXG4gICAgXCJFTlRFUl9QUkVTRVRfTkFNRVwiOiBcIlx1RDUwNFx1QjlBQ1x1QzE0QiBcdUM3NzRcdUI5ODQgXHVDNzg1XHVCODI1XCIsXG4gICAgXCJFTlRFUl9QUkVTRVRfTkFNRV9QTEFDRUhPTERFUlwiOiBcIlx1RDUwNFx1QjlBQ1x1QzE0QiBcdUM3NzRcdUI5ODRcdUM3NDQgXHVDNzg1XHVCODI1XHVENTU4XHVDMTM4XHVDNjk0XCIsXG4gICAgXCJFTlRFUl9QUkVTRVRfREVTQ1JJUFRJT05cIjogXCJcdUQ1MDRcdUI5QUNcdUMxNEIgXHVDMTI0XHVCQTg1IFx1Qzc4NVx1QjgyNVwiLFxuICAgIFwiRU5URVJfUFJFU0VUX0RFU0NSSVBUSU9OX1BMQUNFSE9MREVSXCI6IFwiXHVENTA0XHVCOUFDXHVDMTRCIFx1QzEyNFx1QkE4NVx1Qzc0NCBcdUM3ODVcdUI4MjVcdUQ1NThcdUMxMzhcdUM2OTRcIixcbiAgICBcIlBSRVNFVF9EQVRBXCI6IFwiXHVENTA0XHVCOUFDXHVDMTRCIFx1QjM3MFx1Qzc3NFx1RDEzMFwiLFxuICAgIFwiRURJVF9QUkVTRVRfREFUQV9ERVNDXCI6IFwiXHVENTA0XHVCOUFDXHVDMTRCIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUQzQjhcdUM5RDEgKEpTT04gXHVENjE1XHVDMkREKVwiLFxuICAgIFwiUFJFU0VUX0RBVEFfUExBQ0VIT0xERVJcIjogXCJKU09OIFx1RDYxNVx1QzJERFx1QzczQ1x1Qjg1QyBcdUQ1MDRcdUI5QUNcdUMxNEIgXHVCMzcwXHVDNzc0XHVEMTMwXHVCOTdDIFx1Qzc4NVx1QjgyNVx1RDU1OFx1QzEzOFx1QzY5NFwiLFxuICAgIFwiVVBEQVRFX1dJVEhfQ1VSUkVOVF9TRVRUSU5HU1wiOiBcIlx1RDYwNFx1QzdBQyBcdUMxMjRcdUM4MTVcdUM3M0NcdUI4NUMgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XCIsXG4gICAgXCJTQVZFXCI6IFwiXHVDODAwXHVDN0E1XCIsXG4gICAgXCJFRElUX1BSRVNFVFwiOiBcIlx1RDUwNFx1QjlBQ1x1QzE0QiBcdUQzQjhcdUM5RDFcIixcbiAgICBcIkNMT05FX1BSRVNFVFwiOiBcIlx1RDUwNFx1QjlBQ1x1QzE0QiBcdUJDRjVcdUM4MUNcIixcbiAgICBcIlBSRVNFVF9DT1BZXCI6IFwie3tuYW1lfX1cdUM3NTggXHVCQ0Y1XHVDMEFDXHVCQ0Y4XCIsXG4gICAgXCJFTlRFUl9QUkVTRVRfTkFNRV9OT1RJQ0VcIjogXCJcdUQ1MDRcdUI5QUNcdUMxNEIgXHVDNzc0XHVCOTg0XHVDNzQ0IFx1Qzc4NVx1QjgyNVx1RDU3NFx1QzhGQ1x1QzEzOFx1QzY5NFwiLFxuICAgIFwiUFJFU0VUX0RBVEFfRU1QVFlcIjogXCJcdUQ1MDRcdUI5QUNcdUMxNEIgXHVCMzcwXHVDNzc0XHVEMTMwXHVCMjk0IFx1QkU0NFx1QzZDQ1x1QjQ1OCBcdUMyMTggXHVDNUM2XHVDMkI1XHVCMkM4XHVCMkU0XCIsXG4gICAgXCJQUkVTRVRfU0FWRURcIjogXCIne3tuYW1lfX0nIFx1RDUwNFx1QjlBQ1x1QzE0Qlx1Qzc3NCBcdUM4MDBcdUM3QTVcdUI0MThcdUM1QzhcdUMyQjVcdUIyQzhcdUIyRTRcIixcbiAgICBcIkZBSUxFRF9UT19TQVZFX1BSRVNFVFwiOiBcIlx1RDUwNFx1QjlBQ1x1QzE0QiBcdUM4MDBcdUM3QTUgXHVDMkU0XHVEMzI4XCIsXG4gICAgXCJQUkVTRVRfU0FWRV9GQUlMRURcIjogXCJcdUQ1MDRcdUI5QUNcdUMxNEIgXHVDODAwXHVDN0E1IFx1QzJFNFx1RDMyODoge3tlcnJvcn19XCIsXG5cbiAgICBcIlBBU1RFX1BSRVNFVF9KU09OX0hFUkVcIjogXCJcdUM1RUNcdUFFMzBcdUM1RDAgXHVENTA0XHVCOUFDXHVDMTRCIEpTT05cdUM3NDQgXHVCRDk5XHVDNUVDXHVCMTIzXHVDNzNDXHVDMTM4XHVDNjk0XCIsXG4gICAgXCJJTVBPUlRcIjogXCJcdUFDMDBcdUM4MzhcdUM2MjRcdUFFMzBcIixcbiAgICBcIklOVkFMSURfUFJFU0VUX0RBVEFcIjogXCJcdUM3OThcdUJBQkJcdUI0MUMgXHVENTA0XHVCOUFDXHVDMTRCIFx1QjM3MFx1Qzc3NFx1RDEzMFwiLFxuICAgIFwiUFJFU0VUX0lNUE9SVEVEX1NVQ0NFU1NGVUxMWVwiOiBcIlx1RDUwNFx1QjlBQ1x1QzE0QiAne3tuYW1lfX0nXHVDNzQ0KFx1Qjk3QykgXHVDMTMxXHVBQ0Y1XHVDODAxXHVDNzNDXHVCODVDIFx1QUMwMFx1QzgzOFx1QzY1NFx1QzJCNVx1QjJDOFx1QjJFNFwiLFxuICAgIFwiVU5LTk9XTl9FUlJPUl9EVVJJTkdfSU1QT1JUXCI6IFwiXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwIFx1QzkxMSBcdUM1NEMgXHVDMjE4IFx1QzVDNlx1QjI5NCBcdUM2MjRcdUI5NTggXHVCQzFDXHVDMEREXCIsXG4gICAgXCJFWFBPUlRfUFJFU0VUXCI6IFwiXHVENTA0XHVCOUFDXHVDMTRCIFx1QjBCNFx1QkNGNFx1QjBCNFx1QUUzMFwiLFxuICAgIFwiQ09QWVwiOiBcIlx1QkNGNVx1QzBBQ1wiLFxuICAgIFwiUFJFU0VUX0pTT05fQ09QSUVEXCI6IFwiXHVENTA0XHVCOUFDXHVDMTRCIEpTT05cdUM3NzQgXHVEMDc0XHVCOUJEXHVCQ0Y0XHVCNERDXHVDNUQwIFx1QkNGNVx1QzBBQ1x1QjQxOFx1QzVDOFx1QzJCNVx1QjJDOFx1QjJFNFwiLFxuICAgIFwiRVJST1JfTE9BRElOR19QUkVTRVRcIjogXCJcdUQ1MDRcdUI5QUNcdUMxNEIgXHVCODVDXHVCNTI5IFx1QzkxMSBcdUM2MjRcdUI5NTggXHVCQzFDXHVDMEREXCIsXG4gICAgXCJOT19QUkVTRVRfU0VMRUNURURcIjogXCJcdUMxMjBcdUQwRERcdUI0MUMgXHVENTA0XHVCOUFDXHVDMTRCIFx1QzVDNlx1Qzc0Q1wiXG5cblxuXG5cblxuXG5cblxuXG5cblxufVxuIiwgImltcG9ydCB7IFBsdWdpbiwgRXZlbnRzLCBURmlsZSwgZGVib3VuY2UsIG1vbWVudCwgV29ya3NwYWNlTGVhZiAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBDYXJkTmF2aWdhdG9yLCBWSUVXX1RZUEVfQ0FSRF9OQVZJR0FUT1IgfSBmcm9tICcuL3VpL2NhcmROYXZpZ2F0b3InO1xuaW1wb3J0IHsgU2V0dGluZ1RhYiB9IGZyb20gJy4vdWkvc2V0dGluZ3Mvc2V0dGluZ3NUYWInO1xuaW1wb3J0IHsgQ2FyZE5hdmlnYXRvclNldHRpbmdzLCBTY3JvbGxEaXJlY3Rpb24sIFNvcnRDcml0ZXJpb24sIFNvcnRPcmRlciwgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vY29tbW9uL3R5cGVzJztcbmltcG9ydCB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4vdWkvc2V0dGluZ3Mvc2V0dGluZ3NNYW5hZ2VyJztcbmltcG9ydCB7IFByZXNldE1hbmFnZXIgfSBmcm9tICcuL3VpL3NldHRpbmdzL1ByZXNldE1hbmFnZXInO1xuaW1wb3J0IGkxOG5leHQgZnJvbSAnaTE4bmV4dCc7XG5pbXBvcnQgeyB0IH0gZnJvbSAnaTE4bmV4dCc7XG5cbi8vIERlZmluZSBsYW5ndWFnZSByZXNvdXJjZXMgZm9yIGludGVybmF0aW9uYWxpemF0aW9uXG5leHBvcnQgY29uc3QgbGFuZ3VhZ2VSZXNvdXJjZXMgPSB7XG4gICAgZW46ICgpID0+IGltcG9ydCgnLi9sb2NhbGVzL2VuLmpzb24nKSxcbiAgICBrbzogKCkgPT4gaW1wb3J0KCcuL2xvY2FsZXMva28uanNvbicpLFxufSBhcyBjb25zdDtcblxuLy8gU2V0IHRoZSB0cmFuc2xhdGlvbiBsYW5ndWFnZSBiYXNlZCBvbiB0aGUgdXNlcidzIGxvY2FsZSwgZGVmYXVsdGluZyB0byBFbmdsaXNoIGlmIG5vdCBhdmFpbGFibGVcbmV4cG9ydCBjb25zdCB0cmFuc2xhdGlvbkxhbmd1YWdlID0gT2JqZWN0LmtleXMobGFuZ3VhZ2VSZXNvdXJjZXMpLmluY2x1ZGVzKG1vbWVudC5sb2NhbGUoKSkgPyBtb21lbnQubG9jYWxlKCkgOiBcImVuXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmROYXZpZ2F0b3JQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBDYXJkTmF2aWdhdG9yU2V0dGluZ3MgPSBERUZBVUxUX1NFVFRJTkdTO1xuICAgIHNlbGVjdGVkRm9sZGVyOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICBzZXR0aW5nc01hbmFnZXIhOiBTZXR0aW5nc01hbmFnZXI7XG4gICAgcHJlc2V0TWFuYWdlciE6IFByZXNldE1hbmFnZXI7XG4gICAgc2V0dGluZ1RhYiE6IFNldHRpbmdUYWI7XG4gICAgcHJpdmF0ZSByZWZyZXNoRGVib3VuY2VkID0gZGVib3VuY2UoKCkgPT4gdGhpcy5yZWZyZXNoVmlld3MoKSwgMjAwKTtcbiAgICBwcml2YXRlIHJpYmJvbkljb25FbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgICBwdWJsaWMgZXZlbnRzOiBFdmVudHMgPSBuZXcgRXZlbnRzKCk7XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMucHJlc2V0TWFuYWdlciA9IG5ldyBQcmVzZXRNYW5hZ2VyKHRoaXMuYXBwLCB0aGlzLCB0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIgPSBuZXcgU2V0dGluZ3NNYW5hZ2VyKHRoaXMsIHRoaXMucHJlc2V0TWFuYWdlcik7XG4gICAgICAgIGF3YWl0IHRoaXMucHJlc2V0TWFuYWdlci5pbml0aWFsaXplKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVBsdWdpbigpO1xuXHRcblx0XHR0aGlzLmFkZFJpYmJvbkljb24oJ2xheWVycy0zJywgdCgnT1BFTl9DQVJEX05BVklHQVRPUicpLCAoKSA9PiB7XG5cdFx0XHR0aGlzLmFjdGl2YXRlVmlldygpO1xuXHRcdH0pO1xuXHRcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtb3BlbicsIChmaWxlKSA9PiB7XG5cdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdEFuZEFwcGx5UHJlc2V0KGZpbGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdCk7XG5cdFxuXHRcdHRoaXMucmVmcmVzaFZpZXdzKCk7XG5cdH1cblxuXHQvLyBQbHVnaW4gY2xlYW51cFxuXHRhc3luYyBvbnVubG9hZCgpIHtcblx0XHR0aGlzLmV2ZW50cy5vZmYoJ3NldHRpbmdzLXVwZGF0ZWQnLCB0aGlzLnJlZnJlc2hEZWJvdW5jZWQpO1xuXG5cdFx0aWYgKHRoaXMucmliYm9uSWNvbkVsKSB7XG5cdFx0XHR0aGlzLnJpYmJvbkljb25FbC5kZXRhY2goKTtcblx0XHR9XG5cdH1cblxuXHQvLyBMb2FkIHBsdWdpbiBzZXR0aW5nc1xuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0Y29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgbG9hZGVkRGF0YSk7XG5cdH1cblxuXHQvLyBTYXZlIHBsdWdpbiBzZXR0aW5nc1xuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0XHR0aGlzLmV2ZW50cy50cmlnZ2VyKCdzZXR0aW5ncy11cGRhdGVkJyk7XG5cdH1cblxuXHQvLyBJbml0aWFsaXplIHBsdWdpbiBjb21wb25lbnRzIGFuZCBmdW5jdGlvbmFsaXR5XG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplUGx1Z2luKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVJMThuKCk7XG5cbiAgICAgICAgdGhpcy5zZXR0aW5nVGFiID0gbmV3IFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpO1xuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIodGhpcy5zZXR0aW5nVGFiKTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgICAgICAgIFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUixcbiAgICAgICAgICAgIChsZWFmKSA9PiBuZXcgQ2FyZE5hdmlnYXRvcihsZWFmLCB0aGlzKVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZHMoKTtcbiAgICAgICAgdGhpcy5hZGRTY3JvbGxDb21tYW5kcygpO1xuXG4gICAgICAgIHRoaXMucmVmcmVzaERlYm91bmNlZCA9IGRlYm91bmNlKCgpID0+IHRoaXMucmVmcmVzaFZpZXdzKCksIDIwMCk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJDZW50cmFsaXplZEV2ZW50cygpO1xuICAgIH1cblxuXHQvLyBJbml0aWFsaXplIGludGVybmF0aW9uYWxpemF0aW9uXG5cdHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZUkxOG4oKSB7XG5cdFx0Y29uc3QgcmVzb3VyY2VzID0gYXdhaXQgdGhpcy5sb2FkTGFuZ3VhZ2VSZXNvdXJjZXMoKTtcblx0XHRhd2FpdCBpMThuZXh0LmluaXQoe1xuXHRcdFx0bG5nOiB0cmFuc2xhdGlvbkxhbmd1YWdlLFxuXHRcdFx0ZmFsbGJhY2tMbmc6IFwiZW5cIixcblx0XHRcdHJlc291cmNlcyxcblx0XHR9KTtcblx0fVxuXG5cdC8vIExvYWQgbGFuZ3VhZ2UgcmVzb3VyY2VzXG5cdHByaXZhdGUgYXN5bmMgbG9hZExhbmd1YWdlUmVzb3VyY2VzKCkge1xuXHRcdGNvbnN0IFtlbiwga29dID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuXHRcdFx0bGFuZ3VhZ2VSZXNvdXJjZXMuZW4oKSxcblx0XHRcdGxhbmd1YWdlUmVzb3VyY2VzLmtvKClcblx0XHRdKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0ZW46IHsgdHJhbnNsYXRpb246IGVuLmRlZmF1bHQgfSxcblx0XHRcdGtvOiB7IHRyYW5zbGF0aW9uOiBrby5kZWZhdWx0IH0sXG5cdFx0fTtcblx0fVx0XG5cblx0cHJpdmF0ZSBhZGRDb21tYW5kcygpIHtcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdvcGVuLWNhcmQtbmF2aWdhdG9yJyxcblx0XHRcdG5hbWU6IHQoJ09QRU5fQ0FSRF9OQVZJR0FUT1InKSxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLmFjdGl2YXRlVmlldygpLFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnZm9jdXMtY2FyZC1uYXZpZ2F0b3InLFxuXHRcdFx0bmFtZTogdCgnTU9WRV9GT0NVU19UT19DQVJEX05BVklHQVRPUicpLFxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0Y29uc3QgY2FyZE5hdmlnYXRvciA9IHRoaXMuZ2V0Rmlyc3RDYXJkTmF2aWdhdG9yKCk7XG5cdFx0XHRcdGlmIChjYXJkTmF2aWdhdG9yKSB7XG5cdFx0XHRcdFx0Y29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCk7XG5cdFx0XHRcdFx0aWYgKGxlYWYpIHtcblx0XHRcdFx0XHRcdGxlYWYudmlldy5jb250YWluZXJFbC5mb2N1cygpO1xuXHRcdFx0XHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcblx0XHRcdFx0XHRcdGNhcmROYXZpZ2F0b3IuZm9jdXNOYXZpZ2F0b3IoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ29wZW4tY2FyZC1jb250ZXh0LW1lbnUnLFxuXHRcdFx0bmFtZTogdCgnT1BFTl9DQVJEX0NPTlRFWFRfTUVOVScpLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0Y29uc3QgY2FyZE5hdmlnYXRvciA9IHRoaXMuZ2V0QWN0aXZlQ2FyZE5hdmlnYXRvcigpO1xuXHRcdFx0XHRpZiAoY2FyZE5hdmlnYXRvcikge1xuXHRcdFx0XHRcdGNhcmROYXZpZ2F0b3Iub3BlbkNvbnRleHRNZW51KCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuICAgIC8vIFJlZnJlc2ggYWxsIENhcmQgTmF2aWdhdG9yIHZpZXdzXG4gICAgcmVmcmVzaFZpZXdzKCkge1xuICAgICAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUik7XG4gICAgICAgIGxlYXZlcy5mb3JFYWNoKGxlYWYgPT4ge1xuICAgICAgICAgICAgaWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIENhcmROYXZpZ2F0b3IpIHtcbiAgICAgICAgICAgICAgICBsZWFmLnZpZXcucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBY3RpdmF0ZSBvciBjcmVhdGUgYSBDYXJkIE5hdmlnYXRvciB2aWV3XG5cdGFzeW5jIGFjdGl2YXRlVmlldygpIHtcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG5cdFx0bGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcblx0XG5cdFx0Ly8gRmlyc3QsIGxvb2sgZm9yIGFuIGV4aXN0aW5nIENhcmQgTmF2aWdhdG9yIHZpZXdcblx0XHRjb25zdCBleGlzdGluZ0xlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUilbMF07XG5cdFx0aWYgKGV4aXN0aW5nTGVhZikge1xuXHRcdFx0bGVhZiA9IGV4aXN0aW5nTGVhZjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gQ3JlYXRlIGEgbmV3IGxlYWYgaW4gdGhlIHJpZ2h0IHNpZGViYXJcblx0XHRcdGxlYWYgPSB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcblx0XHRcdGlmIChsZWFmKSB7XG5cdFx0XHRcdGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogVklFV19UWVBFX0NBUkRfTkFWSUdBVE9SLCBhY3RpdmU6IHRydWUgfSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHRpZiAobGVhZikge1xuXHRcdFx0Ly8gUmV2ZWFsIHRoZSBsZWFmIGFuZCBzZXQgaXQgYXMgYWN0aXZlXG5cdFx0XHR3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcblx0XHRcdGlmICh3b3Jrc3BhY2UuYWN0aXZlTGVhZikge1xuXHRcdFx0XHRhd2FpdCB3b3Jrc3BhY2UuYWN0aXZlTGVhZi5zZXRWaWV3U3RhdGUobGVhZi5nZXRWaWV3U3RhdGUoKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gYWN0aXZhdGUgQ2FyZCBOYXZpZ2F0b3Igdmlld1wiKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGdldEZpcnN0Q2FyZE5hdmlnYXRvcigpOiBDYXJkTmF2aWdhdG9yIHwgbnVsbCB7XG5cdFx0Y29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfQ0FSRF9OQVZJR0FUT1IpO1xuXHRcdGZvciAoY29uc3QgbGVhZiBvZiBsZWF2ZXMpIHtcblx0XHRcdGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBDYXJkTmF2aWdhdG9yKSB7XG5cdFx0XHRcdHJldHVybiBsZWFmLnZpZXc7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cbiAgICAvLyBEaXNwbGF5IGZpbHRlcmVkIGNhcmRzIGluIHRoZSBhY3RpdmUgQ2FyZCBOYXZpZ2F0b3Jcblx0ZGlzcGxheUZpbHRlcmVkQ2FyZHMoZmlsdGVyZWRGaWxlczogVEZpbGVbXSkge1xuXHRcdGNvbnN0IGNhcmROYXZpZ2F0b3IgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShDYXJkTmF2aWdhdG9yKTtcblx0XHRpZiAoY2FyZE5hdmlnYXRvcikge1xuXHRcdFx0Y2FyZE5hdmlnYXRvci5jYXJkQ29udGFpbmVyLmRpc3BsYXlDYXJkcyhmaWx0ZXJlZEZpbGVzKTtcblx0XHR9XG5cdH1cblxuICAgIC8vIFNvcnQgY2FyZHMgYmFzZWQgb24gdGhlIHNwZWNpZmllZCBjcml0ZXJpb24gYW5kIG9yZGVyXG5cdHNvcnRDYXJkcyhjcml0ZXJpb246IFNvcnRDcml0ZXJpb24sIG9yZGVyOiBTb3J0T3JkZXIpIHtcblx0XHRjb25zdCBjYXJkTmF2aWdhdG9yID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoQ2FyZE5hdmlnYXRvcik7XG5cdFx0aWYgKGNhcmROYXZpZ2F0b3IpIHtcblx0XHRcdGNhcmROYXZpZ2F0b3IuY2FyZENvbnRhaW5lci5zb3J0Q2FyZHMoY3JpdGVyaW9uLCBvcmRlcik7XG5cdFx0fVxuXHR9XG5cbiAgICAvLyBHZXQgdGhlIGFjdGl2ZSBDYXJkIE5hdmlnYXRvciB2aWV3XG5cdHByaXZhdGUgZ2V0QWN0aXZlQ2FyZE5hdmlnYXRvcigpOiBDYXJkTmF2aWdhdG9yIHwgbnVsbCB7XG5cdFx0cmV0dXJuIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKENhcmROYXZpZ2F0b3IpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBzZWxlY3RBbmRBcHBseVByZXNldChmaWxlOiBURmlsZSkge1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hdXRvQXBwbHlQcmVzZXRzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hdXRvQXBwbHlGb2xkZXJQcmVzZXRzICYmIGZpbGUucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wcmVzZXRNYW5hZ2VyLmFwcGx5Rm9sZGVyUHJlc2V0KGZpbGUucGFyZW50LnBhdGgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnByZXNldE1hbmFnZXIuYXBwbHlHbG9iYWxQcmVzZXQodGhpcy5zZXR0aW5ncy5HbG9iYWxQcmVzZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHVENjA0XHVDN0FDIFx1QzEyNFx1QzgxNShkYXRhLmpzb25cdUM3NTggXHVDMTI0XHVDODE1XHVBQzEyKVx1Qzc0NCBcdUM3MjBcdUM5QzBcbiAgICAgICAgfVxuICAgIH1cblxuXHRhc3luYyBzZWxlY3RBbmRBcHBseVByZXNldEZvckN1cnJlbnRGaWxlKCkge1xuICAgICAgICBjb25zdCBjdXJyZW50RmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmIChjdXJyZW50RmlsZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZWxlY3RBbmRBcHBseVByZXNldChjdXJyZW50RmlsZSk7XG4gICAgICAgIH1cbiAgICB9XG5cblx0Ly8gUmVmcmVzaGVzIHRoZSBDYXJkIE5hdmlnYXRvciBzZXR0aW5ncyB0YWJcblx0cmVmcmVzaFNldHRpbmdzVGFiKCkge1xuXHRcdGlmICh0aGlzLnNldHRpbmdUYWIgaW5zdGFuY2VvZiBTZXR0aW5nVGFiKSB7XG5cdFx0XHR0aGlzLnNldHRpbmdUYWIuZGlzcGxheSgpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJlZnJlc2ggQ2FyZCBOYXZpZ2F0b3IgaW5zdGFuY2VzXG5cdHJlZnJlc2hDYXJkTmF2aWdhdG9yKCkge1xuXHRcdGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX0NBUkRfTkFWSUdBVE9SKTtcblx0XHRsZWF2ZXMuZm9yRWFjaCgobGVhZikgPT4ge1xuXHRcdFx0aWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIENhcmROYXZpZ2F0b3IpIHtcblx0XHRcdFx0bGVhZi52aWV3LmNhcmRDb250YWluZXIuaGFuZGxlUmVzaXplKCk7XG5cdFx0XHRcdGxlYWYudmlldy5yZWZyZXNoKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBVcGRhdGUgbGF5b3V0IGZvciBhbGwgQ2FyZCBOYXZpZ2F0b3IgaW5zdGFuY2VzXG5cdHB1YmxpYyB1cGRhdGVDYXJkTmF2aWdhdG9yTGF5b3V0KGxheW91dDogQ2FyZE5hdmlnYXRvclNldHRpbmdzWydkZWZhdWx0TGF5b3V0J10pIHtcblx0XHRjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUik7XG5cdFx0bGVhdmVzLmZvckVhY2goKGxlYWYpID0+IHtcblx0XHRcdGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBDYXJkTmF2aWdhdG9yKSB7XG5cdFx0XHRcdGxlYWYudmlldy5jYXJkQ29udGFpbmVyLnNldExheW91dChsYXlvdXQpO1xuXHRcdFx0XHRsZWFmLnZpZXcucmVmcmVzaCgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdH1cblxuICAgIC8vIENlbnRlciB0aGUgYWN0aXZlIGNhcmQgaW4gYWxsIENhcmQgTmF2aWdhdG9yIHZpZXdzXG5cdGNlbnRlckFjdGl2ZUNhcmQoKSB7XG5cdFx0Y29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfQ0FSRF9OQVZJR0FUT1IpO1xuXHRcdGxlYXZlcy5mb3JFYWNoKGxlYWYgPT4ge1xuXHRcdFx0aWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIENhcmROYXZpZ2F0b3IpIHtcblx0XHRcdFx0bGVhZi52aWV3LmNhcmRDb250YWluZXIuY2VudGVyQWN0aXZlQ2FyZCgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cbiAgICAvLyBBZGQgc2Nyb2xsLXJlbGF0ZWQgY29tbWFuZHNcblx0cHJpdmF0ZSBhZGRTY3JvbGxDb21tYW5kcygpIHtcblx0XHRjb25zdCBzY3JvbGxDb21tYW5kcyA9IFtcblx0XHRcdHsgaWQ6ICdzY3JvbGwtdXAtb25lLWNhcmQnLCBuYW1lOiB0KCdTQ1JPTExfVVBfT05FX0NBUkQnKSwgZGlyZWN0aW9uOiAndXAnLCBjb3VudDogMSB9LFxuXHRcdFx0eyBpZDogJ3Njcm9sbC1kb3duLW9uZS1jYXJkJywgbmFtZTogdCgnU0NST0xMX0RPV05fT05FX0NBUkQnKSwgZGlyZWN0aW9uOiAnZG93bicsIGNvdW50OiAxIH0sXG5cdFx0XHR7IGlkOiAnc2Nyb2xsLWxlZnQtb25lLWNhcmQnLCBuYW1lOiB0KCdTQ1JPTExfTEVGVF9PTkVfQ0FSRCcpLCBkaXJlY3Rpb246ICdsZWZ0JywgY291bnQ6IDEgfSxcblx0XHRcdHsgaWQ6ICdzY3JvbGwtcmlnaHQtb25lLWNhcmQnLCBuYW1lOiB0KCdTQ1JPTExfUklHSFRfT05FX0NBUkQnKSwgZGlyZWN0aW9uOiAncmlnaHQnLCBjb3VudDogMSB9LFxuXHRcdFx0eyBpZDogJ3Njcm9sbC11cC1wYWdlJywgbmFtZTogdCgnU0NST0xMX1VQX0xFRlRfT05FX1BBR0UnKSwgZGlyZWN0aW9uOiAndXAnLCBjb3VudDogdGhpcy5zZXR0aW5ncy5jYXJkc1BlclZpZXcgfSxcblx0XHRcdHsgaWQ6ICdzY3JvbGwtZG93bi1wYWdlJywgbmFtZTogdCgnU0NST0xMX0RPV05fUklHSFRfT05FX1BBR0UnKSwgZGlyZWN0aW9uOiAnZG93bicsIGNvdW50OiB0aGlzLnNldHRpbmdzLmNhcmRzUGVyVmlldyB9LFxuXHRcdFx0eyBpZDogJ2NlbnRlci1hY3RpdmUtY2FyZCcsIG5hbWU6IHQoJ0NFTlRFUl9BQ1RJVkVfQ0FSRCcpLCBkaXJlY3Rpb246ICcnLCBjb3VudDogMCB9LFxuXHRcdF07XG5cbiAgICAgICAgc2Nyb2xsQ29tbWFuZHMuZm9yRWFjaCgoeyBpZCwgbmFtZSwgZGlyZWN0aW9uLCBjb3VudCB9KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09PSAnY2VudGVyLWFjdGl2ZS1jYXJkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZW50ZXJBY3RpdmVDYXJkKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbENhcmRzKGRpcmVjdGlvbiBhcyBTY3JvbGxEaXJlY3Rpb24sIGNvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU2Nyb2xsIGNhcmRzIGluIHRoZSBzcGVjaWZpZWQgZGlyZWN0aW9uXG5cdHNjcm9sbENhcmRzKGRpcmVjdGlvbjogU2Nyb2xsRGlyZWN0aW9uLCBjb3VudDogbnVtYmVyKSB7XG5cdFx0Y29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfQ0FSRF9OQVZJR0FUT1IpO1xuXHRcdGxlYXZlcy5mb3JFYWNoKGxlYWYgPT4ge1xuXHRcdFx0aWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIENhcmROYXZpZ2F0b3IpIHtcblx0XHRcdFx0Y29uc3QgeyBjYXJkQ29udGFpbmVyIH0gPSBsZWFmLnZpZXc7XG5cdFx0XHRcdGNvbnN0IGlzVmVydGljYWwgPSBjYXJkQ29udGFpbmVyLmlzVmVydGljYWw7XG5cdFxuXHRcdFx0XHRzd2l0Y2ggKGRpcmVjdGlvbikge1xuXHRcdFx0XHRcdGNhc2UgJ3VwJzpcblx0XHRcdFx0XHRcdGlzVmVydGljYWwgPyBjYXJkQ29udGFpbmVyLnNjcm9sbFVwKGNvdW50KSA6IGNhcmRDb250YWluZXIuc2Nyb2xsTGVmdChjb3VudCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdkb3duJzpcblx0XHRcdFx0XHRcdGlzVmVydGljYWwgPyBjYXJkQ29udGFpbmVyLnNjcm9sbERvd24oY291bnQpIDogY2FyZENvbnRhaW5lci5zY3JvbGxSaWdodChjb3VudCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdsZWZ0Jzpcblx0XHRcdFx0XHRcdGNhcmRDb250YWluZXIuc2Nyb2xsTGVmdChjb3VudCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdyaWdodCc6XG5cdFx0XHRcdFx0XHRjYXJkQ29udGFpbmVyLnNjcm9sbFJpZ2h0KGNvdW50KTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBTZXQgdXAgZXZlbnQgbGlzdGVuZXJzIGZvciBmaWxlIGFuZCB3b3Jrc3BhY2UgY2hhbmdlc1xuICAgIHByaXZhdGUgcmVnaXN0ZXJDZW50cmFsaXplZEV2ZW50cygpIHtcbiAgICAgICAgY29uc3QgZGVib3VuY2VkUmVmcmVzaCA9IGRlYm91bmNlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXdzKCk7XG4gICAgICAgIH0sIDIwMCk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaENhcmROYXZpZ2F0b3IoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5ldmVudHMub24oJ3NldHRpbmdzLXVwZGF0ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICBkZWJvdW5jZWRSZWZyZXNoKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKCdyZW5hbWUnLCAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVib3VuY2VkUmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAudmF1bHQub24oJ21vZGlmeScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBkZWJvdW5jZWRSZWZyZXNoKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuXHQvLyBNYW51YWxseSB0cmlnZ2VyIGEgcmVmcmVzaCBvZiB0aGUgdmlld3Ncblx0dHJpZ2dlclJlZnJlc2goKSB7XG5cdFx0dGhpcy5yZWZyZXNoRGVib3VuY2VkKCk7XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ2xheW91dC1jaGFuZ2UnKTtcblx0fVxufVxuIiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBNZW51IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgQ2FyZE5hdmlnYXRvclBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IFRvb2xiYXIgfSBmcm9tICcuL3Rvb2xiYXIvdG9vbGJhcic7XG5pbXBvcnQgeyBDYXJkQ29udGFpbmVyIH0gZnJvbSAnLi9jYXJkQ29udGFpbmVyL2NhcmRDb250YWluZXInO1xuaW1wb3J0IHsgS2V5Ym9hcmROYXZpZ2F0b3IgfSBmcm9tIFwiLi4vY29tbW9uL2tleWJvYXJkTmF2aWdhdG9yXCI7XG5pbXBvcnQgeyB0IH0gZnJvbSAnaTE4bmV4dCc7XG5cbi8vIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgQ2FyZCBOYXZpZ2F0b3Igdmlld1xuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUiA9IFwiY2FyZC1uYXZpZ2F0b3Itdmlld1wiO1xuXG4vLyBNYWluIGNsYXNzIGZvciB0aGUgQ2FyZCBOYXZpZ2F0b3Igdmlld1xuZXhwb3J0IGNsYXNzIENhcmROYXZpZ2F0b3IgZXh0ZW5kcyBJdGVtVmlldyB7XG4gICAgcHVibGljIHRvb2xiYXI6IFRvb2xiYXI7XG4gICAgcHVibGljIGNhcmRDb250YWluZXI6IENhcmRDb250YWluZXI7XG4gICAgcHJpdmF0ZSByZXNpemVPYnNlcnZlcjogUmVzaXplT2JzZXJ2ZXI7XG4gICAgcHJpdmF0ZSBpc1ZlcnRpY2FsOiBib29sZWFuO1xuICAgIHByaXZhdGUga2V5Ym9hcmROYXZpZ2F0b3I6IEtleWJvYXJkTmF2aWdhdG9yO1xuXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcHJpdmF0ZSBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgICAgIHRoaXMudG9vbGJhciA9IG5ldyBUb29sYmFyKHRoaXMucGx1Z2luKTtcbiAgICAgICAgdGhpcy5jYXJkQ29udGFpbmVyID0gbmV3IENhcmRDb250YWluZXIodGhpcy5wbHVnaW4sIHRoaXMubGVhZik7XG4gICAgICAgIHRoaXMuaXNWZXJ0aWNhbCA9IHRoaXMuY2FsY3VsYXRlSXNWZXJ0aWNhbCgpO1xuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKHRoaXMuaGFuZGxlUmVzaXplLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmtleWJvYXJkTmF2aWdhdG9yID0gbmV3IEtleWJvYXJkTmF2aWdhdG9yKHRoaXMucGx1Z2luLCB0aGlzLmNhcmRDb250YWluZXIsIHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgdmlld1xuICAgIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBWSUVXX1RZUEVfQ0FSRF9OQVZJR0FUT1I7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBkaXNwbGF5IG5hbWUgZm9yIHRoaXMgdmlld1xuXHRnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0KFwiQ0FSRF9OQVZJR0FUT1JcIik7XG5cdH1cblxuICAgIC8vIFJldHVybiB0aGUgaWNvbiBuYW1lIGZvciB0aGlzIHZpZXdcbiAgICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcImxheWVycy0zXCI7XG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIGlmIHRoZSB2aWV3IHNob3VsZCBiZSBkaXNwbGF5ZWQgdmVydGljYWxseVxuXHRwcml2YXRlIGNhbGN1bGF0ZUlzVmVydGljYWwoKTogYm9vbGVhbiB7XG5cdFx0Y29uc3QgY29udGFpbmVyRWwgPSB0aGlzLmxlYWYudmlldyBpbnN0YW5jZW9mIEl0ZW1WaWV3ID8gdGhpcy5sZWFmLnZpZXcuY29udGFpbmVyRWwgOiB0aGlzLmNvbnRhaW5lckVsO1xuXHRcdGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gY29udGFpbmVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0cmV0dXJuIGhlaWdodCA+IHdpZHRoO1xuXHR9XG5cbiAgICAvLyBIYW5kbGUgcmVzaXplIGV2ZW50cyBhbmQgdXBkYXRlIGxheW91dCBpZiBuZWNlc3NhcnlcbiAgICBwcml2YXRlIGhhbmRsZVJlc2l6ZSgpIHtcbiAgICAgICAgY29uc3QgbmV3SXNWZXJ0aWNhbCA9IHRoaXMuY2FsY3VsYXRlSXNWZXJ0aWNhbCgpO1xuICAgICAgICBpZiAobmV3SXNWZXJ0aWNhbCAhPT0gdGhpcy5pc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICB0aGlzLmlzVmVydGljYWwgPSBuZXdJc1ZlcnRpY2FsO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVMYXlvdXRBbmRSZWZyZXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBPcGVuIHRoZSBjb250ZXh0IG1lbnUgZm9yIHRoZSBmb2N1c2VkIGNhcmRcbiAgICBwdWJsaWMgb3BlbkNvbnRleHRNZW51KCkge1xuICAgICAgICBjb25zdCBmb2N1c2VkQ2FyZCA9IHRoaXMuZ2V0Rm9jdXNlZENhcmQoKTtcbiAgICAgICAgaWYgKCFmb2N1c2VkQ2FyZCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmNhcmRDb250YWluZXIuZ2V0RmlsZUZyb21DYXJkKGZvY3VzZWRDYXJkKTtcbiAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XG5cbiAgICAgICAgLy8gQWRkIGRlZmF1bHQgT2JzaWRpYW4gZmlsZSBtZW51IGl0ZW1zXG4gICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignZmlsZS1tZW51JywgbWVudSwgZmlsZSwgJ21vcmUtb3B0aW9ucycpO1xuXG4gICAgICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cblx0Ly8gQWRkIGN1c3RvbSBtZW51IGl0ZW1zXG5cdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdGl0ZW1cblx0XHRcdC5zZXRUaXRsZSh0KCdDT1BZX0FTX0xJTksnKSlcblx0XHRcdC5zZXRJY29uKCdsaW5rJylcblx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0dGhpcy5jYXJkQ29udGFpbmVyLmNvcHlMaW5rKGZpbGUpO1xuXHRcdFx0fSk7XG5cdH0pO1xuXG5cdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdGl0ZW1cblx0XHRcdC5zZXRUaXRsZSh0KCdDT1BZX0NBUkRfQ09OVEVOVCcpKVxuXHRcdFx0LnNldEljb24oJ2ZpbGUtdGV4dCcpXG5cdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdHRoaXMuY2FyZENvbnRhaW5lci5jb3B5Q2FyZENvbnRlbnQoZmlsZSk7XG5cdFx0XHR9KTtcblx0fSk7XG5cbiAgICAgICAgLy8gU2hvdyB0aGUgbWVudSBhdCB0aGUgY2FyZCdzIHBvc2l0aW9uXG4gICAgICAgIGNvbnN0IHJlY3QgPSBmb2N1c2VkQ2FyZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbWVudS5zaG93QXRQb3NpdGlvbih7IHg6IHJlY3QubGVmdCwgeTogcmVjdC5ib3R0b20gfSk7XG4gICAgfVxuXG4gICAgLy8gRm9jdXMgdGhlIGtleWJvYXJkIG5hdmlnYXRvclxuXHRwdWJsaWMgZm9jdXNOYXZpZ2F0b3IoKSB7XG4gICAgICAgIHRoaXMua2V5Ym9hcmROYXZpZ2F0b3IuZm9jdXNOYXZpZ2F0b3IoKTtcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGN1cnJlbnRseSBmb2N1c2VkIGNhcmQgZWxlbWVudFxuICAgIHByaXZhdGUgZ2V0Rm9jdXNlZENhcmQoKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLmNhcmQtbmF2aWdhdG9yLWNhcmQuY2FyZC1uYXZpZ2F0b3ItZm9jdXNlZCcpO1xuICAgIH1cblxuICAgIC8vIFJlZnJlc2ggdGhlIHRvb2xiYXIgYW5kIGNhcmQgY29udGFpbmVyXG4gICAgYXN5bmMgcmVmcmVzaCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy50b29sYmFyLnJlZnJlc2goKTtcbiAgICAgICAgYXdhaXQgdGhpcy5jYXJkQ29udGFpbmVyLnJlZnJlc2goKTtcbiAgICAgICAgdGhpcy51cGRhdGVMYXlvdXRBbmRSZWZyZXNoKCk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGxheW91dCBzZXR0aW5ncyBhbmQgcmVmcmVzaCB0aGUgdmlld1xuICAgIHB1YmxpYyB1cGRhdGVMYXlvdXRBbmRSZWZyZXNoKCkge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgICAgICBpZiAoc2V0dGluZ3MuZGVmYXVsdExheW91dCkge1xuICAgICAgICAgICAgdGhpcy5jYXJkQ29udGFpbmVyLnNldExheW91dChzZXR0aW5ncy5kZWZhdWx0TGF5b3V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2FyZENvbnRhaW5lci5zZXRMYXlvdXQoJ2F1dG8nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhcmRDb250YWluZXIudXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLmNhcmRDb250YWluZXIucmVmcmVzaCgpO1xuICAgIH1cblxuICAgIC8vIFNldCB1cCB0aGUgdmlldyB3aGVuIGl0J3Mgb3BlbmVkXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHRjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXHRcblx0XHRjb25zdCBuYXZpZ2F0b3JFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtbmF2aWdhdG9yJyk7XG5cdFx0Y29uc3QgdG9vbGJhckVsID0gbmF2aWdhdG9yRWwuY3JlYXRlRGl2KCdjYXJkLW5hdmlnYXRvci10b29sYmFyJyk7XG5cdFx0Y29uc3QgY2FyZENvbnRhaW5lckVsID0gbmF2aWdhdG9yRWwuY3JlYXRlRGl2KCdjYXJkLW5hdmlnYXRvci1jb250YWluZXInKTtcblx0XG5cdFx0Ly8gXHVBRTMwXHVCQ0Y4XHVDODAxXHVDNzc4IFVJIFx1QUQ2Q1x1Qzg3MFx1QjlDQyBcdUJBM0NcdUM4MDAgXHVDMEREXHVDMTMxXG5cdFx0dGhpcy50b29sYmFyLmluaXRpYWxpemUodG9vbGJhckVsKTtcblx0XHR0aGlzLmNhcmRDb250YWluZXIuaW5pdGlhbGl6ZShjYXJkQ29udGFpbmVyRWwpO1xuXHRcblx0XHQvLyBcdUIwOThcdUJBMzhcdUM5QzAgXHVDRDA4XHVBRTMwXHVENjU0IFx1Qzc5MVx1QzVDNVx1Qzc0NCBcdUIyRTRcdUM3NEMgXHVENTA0XHVCODA4XHVDNzg0XHVDNzNDXHVCODVDIFx1QzlDMFx1QzVGMFxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShhc3luYyAoKSA9PiB7XG5cdFx0XHR0aGlzLmtleWJvYXJkTmF2aWdhdG9yID0gbmV3IEtleWJvYXJkTmF2aWdhdG9yKHRoaXMucGx1Z2luLCB0aGlzLmNhcmRDb250YWluZXIsIGNhcmRDb250YWluZXJFbCk7XG5cdFx0XHR0aGlzLmlzVmVydGljYWwgPSB0aGlzLmNhbGN1bGF0ZUlzVmVydGljYWwoKTtcblx0XHRcdHRoaXMudXBkYXRlTGF5b3V0QW5kUmVmcmVzaCgpO1xuXHRcdFx0dGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKHRoaXMubGVhZi52aWV3LmNvbnRhaW5lckVsKTtcblx0XG5cdFx0XHRhd2FpdCB0aGlzLnJlZnJlc2goKTtcblx0XHRcdGF3YWl0IHRoaXMuY2VudGVyQWN0aXZlQ2FyZE9uT3BlbigpO1xuXHRcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmxvYWRTZXR0aW5ncygpO1xuXHRcdFx0Ly8gRE9NXHVDNzc0IFx1QzY0NFx1QzgwNFx1RDc4OCBcdUI4MENcdUIzNTRcdUI5QzFcdUI0MjAgXHVCNTRDXHVBRTRDXHVDOUMwIFx1QUUzMFx1QjJFNFx1QjlCRFx1QjJDOFx1QjJFNFxuXHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcblx0XHRcdHRoaXMudXBkYXRlTGF5b3V0QW5kUmVmcmVzaCgpO1xuXHRcdH0pO1xuXHR9XG5cbiAgICAvLyBDZW50ZXIgdGhlIGFjdGl2ZSBjYXJkIHdoZW4gb3BlbmluZyB0aGUgdmlldywgaWYgZW5hYmxlZCBpbiBzZXR0aW5nc1xuICAgIHByaXZhdGUgYXN5bmMgY2VudGVyQWN0aXZlQ2FyZE9uT3BlbigpIHtcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNlbnRlckFjdGl2ZUNhcmRPbk9wZW4pIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FyZENvbnRhaW5lci5jZW50ZXJBY3RpdmVDYXJkKCk7XG4gICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2xlYW4gdXAgd2hlbiB0aGUgdmlldyBpcyBjbG9zZWRcbiAgICBhc3luYyBvbkNsb3NlKCkge1xuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy50b29sYmFyLm9uQ2xvc2UoKTtcbiAgICAgICAgdGhpcy5jYXJkQ29udGFpbmVyLm9uQ2xvc2UoKTtcblx0XHR0aGlzLmtleWJvYXJkTmF2aWdhdG9yLmJsdXJOYXZpZ2F0b3IoKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgc2V0SWNvbiwgVEZvbGRlciwgRnV6enlTdWdnZXN0TW9kYWwsIGRlYm91bmNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IENhcmROYXZpZ2F0b3JQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XG5pbXBvcnQgeyBDYXJkTmF2aWdhdG9yIH0gZnJvbSAnLi4vY2FyZE5hdmlnYXRvcic7XG5pbXBvcnQgeyB0b2dnbGVTb3J0LCB0b2dnbGVTZXR0aW5ncyB9IGZyb20gJy4vdG9vbGJhckFjdGlvbnMnO1xuaW1wb3J0IHsgdCB9IGZyb20gJ2kxOG5leHQnO1xuXG4vLyBDbGFzcyByZXByZXNlbnRpbmcgdGhlIHRvb2xiYXIgZm9yIHRoZSBDYXJkIE5hdmlnYXRvciBwbHVnaW5cbmV4cG9ydCBjbGFzcyBUb29sYmFyIHtcbiAgICBwcml2YXRlIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgc29ydFBvcHVwT3BlbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgc2V0dGluZ3NQb3B1cE9wZW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIHNvcnRJY29uOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgc2V0dGluZ3NJY29uOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgcG9wdXBPYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlciB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4pIHt9XG5cbiAgICAvLyBJbml0aWFsaXplcyB0aGUgdG9vbGJhciB3aXRoIHRoZSBnaXZlbiBjb250YWluZXIgZWxlbWVudFxuICAgIGluaXRpYWxpemUoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcbiAgICAgICAgdGhpcy5jcmVhdGVUb29sYmFyKCk7XG4gICAgICAgIHRoaXMuc2V0dXBQb3B1cE9ic2VydmVyKCk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlcyB0aGUgdG9vbGJhciBVSSBlbGVtZW50c1xuICAgIHByaXZhdGUgY3JlYXRlVG9vbGJhcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lckVsKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IHRvb2xiYXJDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdignY2FyZC1uYXZpZ2F0b3ItdG9vbGJhci1jb250YWluZXInKTtcblxuICAgICAgICB0b29sYmFyQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlU2VhcmNoQ29udGFpbmVyKCkpO1xuICAgICAgICB0b29sYmFyQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlU2VwYXJhdG9yKCkpO1xuICAgICAgICB0b29sYmFyQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQWN0aW9uSWNvbnNDb250YWluZXIoKSk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlcyB0aGUgc2VhcmNoIGlucHV0IGNvbnRhaW5lclxuXHRwcml2YXRlIGNyZWF0ZVNlYXJjaENvbnRhaW5lcigpOiBIVE1MRWxlbWVudCB7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gY3JlYXRlRGl2KCdjYXJkLW5hdmlnYXRvci1zZWFyY2gtY29udGFpbmVyJyk7XG5cdFxuXHRcdGNvbnN0IGlucHV0ID0gY29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcblx0XHRcdHR5cGU6ICd0ZXh0Jyxcblx0XHRcdHBsYWNlaG9sZGVyOiB0KCdTRUFSQ0hfUExBQ0VIT0xERVInKSxcblx0XHRcdGNsczogJ2NhcmQtbmF2aWdhdG9yLXNlYXJjaC1pbnB1dCdcblx0XHR9KTtcblxuICAgICAgICAvLyBBZGRzIGV2ZW50IGxpc3RlbmVyIHRvIGhhbmRsZSBzZWFyY2ggaW5wdXQgd2l0aCBkZWJvdW5jZVxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGRlYm91bmNlKGFzeW5jIChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VhcmNoVGVybSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoQ2FyZE5hdmlnYXRvcik7XG4gICAgICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHZpZXcuY2FyZENvbnRhaW5lci5zZWFyY2hDYXJkcyhzZWFyY2hUZXJtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMzAwKSk7IC8vIERlYm91bmNlIGZvciAzMDBtcyB0byByZWR1Y2UgZnJlcXVlbnQgdXBkYXRlc1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG5cdC8vIENyZWF0ZXMgYSBzZXBhcmF0b3IgZWxlbWVudCBmb3IgdGhlIHRvb2xiYXJcblx0cHJpdmF0ZSBjcmVhdGVTZXBhcmF0b3IoKTogSFRNTEVsZW1lbnQge1xuXHRcdHJldHVybiBjcmVhdGVEaXYoJ3Rvb2xiYXItc2VwYXJhdG9yJyk7XG5cdH1cblxuXHQvLyBDcmVhdGVzIHRoZSBjb250YWluZXIgZm9yIGFjdGlvbiBpY29ucyAoZm9sZGVyIHNlbGVjdCwgc29ydCwgc2V0dGluZ3MpXG5cdHByaXZhdGUgY3JlYXRlQWN0aW9uSWNvbnNDb250YWluZXIoKTogSFRNTEVsZW1lbnQge1xuXHRcdGNvbnN0IGNvbnRhaW5lciA9IGNyZWF0ZURpdignY2FyZC1uYXZpZ2F0b3ItYWN0aW9uLWljb25zLWNvbnRhaW5lcicpO1xuXHRcblx0XHRjb25zdCBpY29ucyA9IFtcblx0XHRcdHsgbmFtZTogJ2ZvbGRlcicsIGxhYmVsOiB0KCdTRUxFQ1RfRk9MREVSJyksIGFjdGlvbjogKCkgPT4gdGhpcy5vcGVuRm9sZGVyU2VsZWN0b3IoKSB9LFxuXHRcdFx0eyBuYW1lOiAnYXJyb3ctdXAtbmFycm93LXdpZGUnLCBsYWJlbDogdCgnU09SVF9DQVJEUycpLCBhY3Rpb246ICgpID0+IHRoaXMudG9nZ2xlU29ydFBvcHVwKCkgfSxcblx0XHRcdHsgbmFtZTogJ3NldHRpbmdzJywgbGFiZWw6IHQoJ1NFVFRJTkdTJyksIGFjdGlvbjogKCkgPT4gdGhpcy50b2dnbGVTZXR0aW5nc1BvcHVwKCkgfSxcblx0XHRdIGFzIGNvbnN0O1xuXHRcblx0XHQvLyBJdGVyYXRlcyBvdmVyIGljb24gZGVmaW5pdGlvbnMgdG8gY3JlYXRlIHRvb2xiYXIgaWNvbnNcblx0XHRpY29ucy5mb3JFYWNoKGljb24gPT4ge1xuXHRcdFx0Y29uc3QgaWNvbkVsZW1lbnQgPSB0aGlzLmNyZWF0ZVRvb2xiYXJJY29uKGljb24ubmFtZSwgaWNvbi5sYWJlbCwgaWNvbi5hY3Rpb24pO1xuXHRcdFx0aWYgKGljb24ubmFtZSA9PT0gJ2Fycm93LXVwLW5hcnJvdy13aWRlJykge1xuXHRcdFx0XHR0aGlzLnNvcnRJY29uID0gaWNvbkVsZW1lbnQ7XG5cdFx0XHR9IGVsc2UgaWYgKGljb24ubmFtZSA9PT0gJ3NldHRpbmdzJykge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzSWNvbiA9IGljb25FbGVtZW50O1xuXHRcdFx0fVxuXHRcdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKGljb25FbGVtZW50KTtcblx0XHR9KTtcblx0XG5cdFx0cmV0dXJuIGNvbnRhaW5lcjtcblx0fVxuXG4gICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBpbmRpdmlkdWFsIHRvb2xiYXIgaWNvbnNcbiAgICBwcml2YXRlIGNyZWF0ZVRvb2xiYXJJY29uKGljb25OYW1lOiBzdHJpbmcsIGFyaWFMYWJlbDogc3RyaW5nLCBhY3Rpb246ICgpID0+IHZvaWQpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGljb24gPSBjcmVhdGVEaXYoJ2NsaWNrYWJsZS1pY29uJyk7XG4gICAgICAgIGljb24uYXJpYUxhYmVsID0gYXJpYUxhYmVsO1xuICAgIFxuICAgICAgICBzZXRJY29uKGljb24sIGljb25OYW1lKTtcbiAgICAgICAgaWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGFjdGlvbigpKTtcbiAgICBcbiAgICAgICAgcmV0dXJuIGljb247XG4gICAgfVxuXG4gICAgLy8gT3BlbnMgYSBmb2xkZXIgc2VsZWN0b3IgbW9kYWwgYW5kIGRpc3BsYXlzIGNhcmRzIGZvciB0aGUgc2VsZWN0ZWQgZm9sZGVyXG4gICAgcHVibGljIG9wZW5Gb2xkZXJTZWxlY3RvcigpIHtcbiAgICAgICAgdGhpcy5jbG9zZUFsbFBvcHVwcygpOyAvLyBDbG9zZSBhbnkgb3BlbiBwb3B1cHMgYmVmb3JlIG9wZW5pbmcgdGhlIGZvbGRlciBzZWxlY3RvclxuICAgICAgICBuZXcgRm9sZGVyU3VnZ2VzdE1vZGFsKHRoaXMucGx1Z2luLCAoZm9sZGVyOiBURm9sZGVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKENhcmROYXZpZ2F0b3IpO1xuICAgICAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICAgICAgICB2aWV3LmNhcmRDb250YWluZXIuZGlzcGxheUNhcmRzRm9yRm9sZGVyKGZvbGRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLm9wZW4oKTtcbiAgICB9XG5cbiAgICAvLyBUb2dnbGVzIHRoZSBzb3J0IHBvcHVwXG4gICAgcHJpdmF0ZSB0b2dnbGVTb3J0UG9wdXAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNvcnRQb3B1cE9wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VTb3J0UG9wdXAoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VBbGxQb3B1cHMoKTtcbiAgICAgICAgICAgIHRoaXMub3BlblNvcnRQb3B1cCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlSWNvblN0YXRlcygpO1xuICAgIH1cblxuICAgIC8vIE9wZW5zIHRoZSBzb3J0IHBvcHVwXG4gICAgcHJpdmF0ZSBvcGVuU29ydFBvcHVwKCkge1xuICAgICAgICB0aGlzLnNvcnRQb3B1cE9wZW4gPSB0cnVlO1xuICAgICAgICB0b2dnbGVTb3J0KHRoaXMucGx1Z2luLCB0aGlzLmNvbnRhaW5lckVsKTtcbiAgICB9XG5cbiAgICAvLyBDbG9zZXMgdGhlIHNvcnQgcG9wdXBcbiAgICBwcml2YXRlIGNsb3NlU29ydFBvcHVwKCkge1xuICAgICAgICB0aGlzLnNvcnRQb3B1cE9wZW4gPSBmYWxzZTtcbiAgICAgICAgY29uc3Qgc29ydFBvcHVwID0gdGhpcy5jb250YWluZXJFbD8ucXVlcnlTZWxlY3RvcignLmNhcmQtbmF2aWdhdG9yLXNvcnQtcG9wdXAnKTtcbiAgICAgICAgaWYgKHNvcnRQb3B1cCkge1xuICAgICAgICAgICAgc29ydFBvcHVwLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVG9nZ2xlcyB0aGUgc2V0dGluZ3MgcG9wdXBcbiAgICBwcml2YXRlIHRvZ2dsZVNldHRpbmdzUG9wdXAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzUG9wdXBPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlU2V0dGluZ3NQb3B1cCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbG9zZUFsbFBvcHVwcygpO1xuICAgICAgICAgICAgdGhpcy5vcGVuU2V0dGluZ3NQb3B1cCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlSWNvblN0YXRlcygpO1xuICAgIH1cblxuICAgIC8vIE9wZW5zIHRoZSBzZXR0aW5ncyBwb3B1cFxuICAgIHByaXZhdGUgb3BlblNldHRpbmdzUG9wdXAoKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3NQb3B1cE9wZW4gPSB0cnVlO1xuICAgICAgICB0b2dnbGVTZXR0aW5ncyh0aGlzLnBsdWdpbiwgdGhpcy5jb250YWluZXJFbCk7XG4gICAgfVxuXG4gICAgLy8gQ2xvc2VzIHRoZSBzZXR0aW5ncyBwb3B1cFxuICAgIHByaXZhdGUgY2xvc2VTZXR0aW5nc1BvcHVwKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzUG9wdXBPcGVuID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzUG9wdXAgPSB0aGlzLmNvbnRhaW5lckVsPy5xdWVyeVNlbGVjdG9yKCcuY2FyZC1uYXZpZ2F0b3Itc2V0dGluZ3MtcG9wdXAnKTtcbiAgICAgICAgaWYgKHNldHRpbmdzUG9wdXApIHtcbiAgICAgICAgICAgIHNldHRpbmdzUG9wdXAucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDbG9zZXMgYWxsIG9wZW4gcG9wdXBzXG4gICAgcHJpdmF0ZSBjbG9zZUFsbFBvcHVwcygpIHtcbiAgICAgICAgdGhpcy5jbG9zZVNvcnRQb3B1cCgpO1xuICAgICAgICB0aGlzLmNsb3NlU2V0dGluZ3NQb3B1cCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZUljb25TdGF0ZXMoKTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGVzIHRoZSB2aXN1YWwgc3RhdGUgb2YgdGhlIGljb25zIGJhc2VkIG9uIHBvcHVwIG9wZW4gc3RhdGVzXG4gICAgcHJpdmF0ZSB1cGRhdGVJY29uU3RhdGVzKCkge1xuICAgICAgICBpZiAodGhpcy5zb3J0SWNvbikge1xuICAgICAgICAgICAgdGhpcy5zb3J0SWNvbi5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkLW5hdmlnYXRvci1pY29uLWFjdGl2ZScsIHRoaXMuc29ydFBvcHVwT3Blbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3NJY29uKSB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzSWNvbi5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkLW5hdmlnYXRvci1pY29uLWFjdGl2ZScsIHRoaXMuc2V0dGluZ3NQb3B1cE9wZW4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2V0cyB1cCBhbiBvYnNlcnZlciB0byB3YXRjaCBmb3IgcG9wdXAgcmVtb3ZhbHNcbiAgICBwcml2YXRlIHNldHVwUG9wdXBPYnNlcnZlcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lckVsKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5wb3B1cE9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xuICAgICAgICAgICAgbXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGlsZExpc3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIG11dGF0aW9uLnJlbW92ZWROb2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJkLW5hdmlnYXRvci1zb3J0LXBvcHVwJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0UG9wdXBPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSWNvblN0YXRlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmQtbmF2aWdhdG9yLXNldHRpbmdzLXBvcHVwJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nc1BvcHVwT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUljb25TdGF0ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnBvcHVwT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmNvbnRhaW5lckVsLCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICAvLyBSZWZyZXNoZXMgdGhlIHRvb2xiYXIgKHRvIGJlIGltcGxlbWVudGVkIGlmIG5lZWRlZClcbiAgICByZWZyZXNoKCkge1xuICAgICAgICAvLyBJbXBsZW1lbnQgcmVmcmVzaCBsb2dpYyBpZiBuZWNlc3NhcnlcbiAgICB9XG5cbiAgICAvLyBDbGVhbnMgdXAgcmVzb3VyY2VzIHdoZW4gdGhlIHRvb2xiYXIgaXMgY2xvc2VkXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucG9wdXBPYnNlcnZlcikge1xuICAgICAgICAgICAgdGhpcy5wb3B1cE9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gTW9kYWwgZm9yIHNlbGVjdGluZyBmb2xkZXJzIGluIHRoZSB0b29sYmFyXG5jbGFzcyBGb2xkZXJTdWdnZXN0TW9kYWwgZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxURm9sZGVyPiB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4sIHByaXZhdGUgb25TZWxlY3Q6IChmb2xkZXI6IFRGb2xkZXIpID0+IHZvaWQpIHtcbiAgICAgICAgc3VwZXIocGx1Z2luLmFwcCk7XG4gICAgfVxuXG4gICAgLy8gUmV0cmlldmUgYWxsIGZvbGRlcnMgaW4gdGhlIHZhdWx0XG4gICAgZ2V0SXRlbXMoKTogVEZvbGRlcltdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpXG4gICAgICAgICAgICAuZmlsdGVyKChmaWxlKTogZmlsZSBpcyBURm9sZGVyID0+IGZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKTtcbiAgICB9XG5cbiAgICAvLyBEaXNwbGF5IHRoZSBmb2xkZXIgcGF0aCBhcyB0aGUgaXRlbSB0ZXh0XG4gICAgZ2V0SXRlbVRleHQoZm9sZGVyOiBURm9sZGVyKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGZvbGRlci5wYXRoO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBmb2xkZXIgc2VsZWN0aW9uXG4gICAgb25DaG9vc2VJdGVtKGZvbGRlcjogVEZvbGRlcik6IHZvaWQge1xuICAgICAgICB0aGlzLm9uU2VsZWN0KGZvbGRlcik7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFNldHRpbmcsIFRleHRDb21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgQ2FyZE5hdmlnYXRvclBsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcbmltcG9ydCB7IFNvcnRDcml0ZXJpb24sIFNvcnRPcmRlciwgVG9vbGJhck1lbnUsIENhcmROYXZpZ2F0b3JTZXR0aW5ncywgTnVtYmVyU2V0dGluZ0tleSB9IGZyb20gJy4uLy4uL2NvbW1vbi90eXBlcyc7XG5pbXBvcnQgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tICcuLi9zZXR0aW5ncy9zZXR0aW5nc01hbmFnZXInO1xuaW1wb3J0IHsgRm9sZGVyU3VnZ2VzdCB9IGZyb20gJy4uL3NldHRpbmdzL2NvbXBvbmVudHMvRm9sZGVyU3VnZ2VzdCc7XG5pbXBvcnQgeyBnZXRUcmFuc2xhdGVkU29ydE9wdGlvbnMgfSBmcm9tICcuLi8uLi9jb21tb24vdHlwZXMnO1xuaW1wb3J0IHsgdCB9IGZyb20gJ2kxOG5leHQnO1xuXG4vLyBcdUM4MDRcdUM1RUQgXHVCQ0MwXHVDMjE4IFx1QkMwRiBcdUMwQzFcdUMyMThcbmNvbnN0IGN1cnJlbnRQb3B1cHM6IE1hcDxXaW5kb3csIHsgZWxlbWVudDogSFRNTEVsZW1lbnQsIHR5cGU6IFRvb2xiYXJNZW51IH0+ID0gbmV3IE1hcCgpO1xuXG4vLyBcdUM3MjBcdUQyRjhcdUI5QUNcdUQyRjAgXHVENTY4XHVDMjE4XG5mdW5jdGlvbiBoYW5kbGVXaW5kb3dDbGljayhldmVudDogTW91c2VFdmVudCwgd2luZG93T2JqOiBXaW5kb3cpIHtcbiAgICBvbkNsaWNrT3V0c2lkZShldmVudCwgd2luZG93T2JqKTtcbn1cblxuZnVuY3Rpb24gb25DbGlja091dHNpZGUoZXZlbnQ6IE1vdXNlRXZlbnQsIHdpbmRvd09iajogV2luZG93KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIE5vZGU7XG4gICAgY29uc3QgdG9vbGJhckVsID0gd2luZG93T2JqLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLW5hdmlnYXRvci10b29sYmFyLWNvbnRhaW5lcicpO1xuICAgIGNvbnN0IGV4aXN0aW5nUG9wdXAgPSBjdXJyZW50UG9wdXBzLmdldCh3aW5kb3dPYmopO1xuICAgIGlmIChleGlzdGluZ1BvcHVwICYmICFleGlzdGluZ1BvcHVwLmVsZW1lbnQuY29udGFpbnModGFyZ2V0KSAmJiAhdG9vbGJhckVsPy5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGV4aXN0aW5nUG9wdXAudHlwZSA9PT0gJ3NvcnQnIHx8XG4gICAgICAgICAgICAoZXhpc3RpbmdQb3B1cC50eXBlID09PSAnc2V0dGluZ3MnICYmXG4gICAgICAgICAgICAgICAgIWV2ZW50LmNvbXBvc2VkUGF0aCgpLnNvbWUoZWwgPT4gKGVsIGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3Q/LmNvbnRhaW5zKCdjYXJkLW5hdmlnYXRvci1zZXR0aW5ncy1wb3B1cCcpKSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjbG9zZUN1cnJlbnRQb3B1cCh3aW5kb3dPYmopO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVQb3B1cChjbGFzc05hbWU6IHN0cmluZywgdHlwZTogVG9vbGJhck1lbnUsIHdpbmRvd09iajogV2luZG93KTogSFRNTEVsZW1lbnQge1xuICAgIGNsb3NlQ3VycmVudFBvcHVwKHdpbmRvd09iaik7XG4gICAgY29uc3QgcG9wdXAgPSB3aW5kb3dPYmouZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcG9wdXAuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgIGNvbnN0IHRvb2xiYXJFbCA9IHdpbmRvd09iai5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1uYXZpZ2F0b3ItdG9vbGJhci1jb250YWluZXInKTtcbiAgICBpZiAodG9vbGJhckVsKSB7XG4gICAgICAgIHRvb2xiYXJFbC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgcG9wdXApO1xuICAgICAgICBjdXJyZW50UG9wdXBzLnNldCh3aW5kb3dPYmosIHsgZWxlbWVudDogcG9wdXAsIHR5cGUgfSk7XG4gICAgICAgIHdpbmRvd09iai5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBoYW5kbGVXaW5kb3dDbGljayhlLCB3aW5kb3dPYmopKTtcbiAgICB9XG4gICAgcmV0dXJuIHBvcHVwO1xufVxuXG5mdW5jdGlvbiBjbG9zZUN1cnJlbnRQb3B1cCh3aW5kb3dPYmo6IFdpbmRvdykge1xuICAgIGNvbnN0IGV4aXN0aW5nUG9wdXAgPSBjdXJyZW50UG9wdXBzLmdldCh3aW5kb3dPYmopO1xuICAgIGlmIChleGlzdGluZ1BvcHVwKSB7XG4gICAgICAgIGV4aXN0aW5nUG9wdXAuZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgY3VycmVudFBvcHVwcy5kZWxldGUod2luZG93T2JqKTtcbiAgICAgICAgd2luZG93T2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGhhbmRsZVdpbmRvd0NsaWNrKGUsIHdpbmRvd09iaikpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQ29sbGFwc2libGVTZWN0aW9uKHBhcmVudEVsOiBIVE1MRWxlbWVudCwgdGl0bGU6IHN0cmluZywgY29sbGFwc2VkID0gdHJ1ZSk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBzZWN0aW9uRWwgPSBwYXJlbnRFbC5jcmVhdGVEaXYoJ3RyZWUtaXRlbSBncmFwaC1jb250cm9sLXNlY3Rpb24nKTtcbiAgICBjb25zdCBzZWxmRWwgPSBzZWN0aW9uRWwuY3JlYXRlRGl2KCd0cmVlLWl0ZW0tc2VsZicpO1xuICAgIGNvbnN0IGljb25FbCA9IHNlbGZFbC5jcmVhdGVEaXYoJ3RyZWUtaXRlbS1pY29uIGNvbGxhcHNlLWljb24nKTtcbiAgICBpY29uRWwuaW5uZXJIVE1MID0gJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBjbGFzcz1cInN2Zy1pY29uIHJpZ2h0LXRyaWFuZ2xlXCI+PHBhdGggZD1cIk0zIDhMMTIgMTdMMjEgOFwiPjwvcGF0aD48L3N2Zz4nO1xuICAgIGNvbnN0IGlubmVyRWwgPSBzZWxmRWwuY3JlYXRlRGl2KCd0cmVlLWl0ZW0taW5uZXInKTtcbiAgICBpbm5lckVsLmNyZWF0ZUVsKCdoZWFkZXInLCB7IHRleHQ6IHRpdGxlLCBjbHM6ICdncmFwaC1jb250cm9sLXNlY3Rpb24taGVhZGVyJyB9KTtcbiAgICBjb25zdCBjb250ZW50RWwgPSBzZWN0aW9uRWwuY3JlYXRlRGl2KCd0cmVlLWl0ZW0tY2hpbGRyZW4nKTtcblxuICAgIGlmIChjb2xsYXBzZWQpIHtcbiAgICAgICAgc2VjdGlvbkVsLmFkZENsYXNzKCdpcy1jb2xsYXBzZWQnKTtcbiAgICAgICAgaWNvbkVsLmFkZENsYXNzKCdpcy1jb2xsYXBzZWQnKTtcbiAgICAgICAgY29udGVudEVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuXG4gICAgc2VsZkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBpc0NvbGxhcHNlZCA9IHNlY3Rpb25FbC5oYXNDbGFzcygnaXMtY29sbGFwc2VkJyk7XG4gICAgICAgIHNlY3Rpb25FbC50b2dnbGVDbGFzcygnaXMtY29sbGFwc2VkJywgIWlzQ29sbGFwc2VkKTtcbiAgICAgICAgaWNvbkVsLnRvZ2dsZUNsYXNzKCdpcy1jb2xsYXBzZWQnLCAhaXNDb2xsYXBzZWQpO1xuICAgICAgICBjb250ZW50RWwuc3R5bGUuZGlzcGxheSA9IGlzQ29sbGFwc2VkID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICB9KTtcblxuICAgIHJldHVybiBjb250ZW50RWw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGdWxsV2lkdGhTZXR0aW5nKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IFNldHRpbmcge1xuXHRjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xuXHRzZXR0aW5nLnNldHRpbmdFbC5hZGRDbGFzcygnc2V0dGluZy1mdWxsLXdpZHRoJyk7XG5cdHNldHRpbmcuc2V0dGluZ0VsLmFkZENsYXNzKCduby1pbmZvJyk7XG5cdHJldHVybiBzZXR0aW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkRnVsbFdpZHRoVGV4dChzZXR0aW5nOiBTZXR0aW5nLCBjYWxsYmFjazogKHRleHQ6IFRleHRDb21wb25lbnQpID0+IHZvaWQpOiBTZXR0aW5nIHtcblx0cmV0dXJuIHNldHRpbmcuYWRkVGV4dCh0ZXh0ID0+IHtcblx0dGV4dC5pbnB1dEVsLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuXHRjYWxsYmFjayh0ZXh0KTtcblx0fSk7XG59XG5cbi8vIFx1QzgxNVx1QjgyQyBcdUFEMDBcdUI4MjggXHVENTY4XHVDMjE4XG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlU29ydChwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4sIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCB8IG51bGwpIHtcbiAgICBpZiAoIWNvbnRhaW5lckVsKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbnRhaW5lciBlbGVtZW50IGlzIHVuZGVmaW5lZCBpbiB0b2dnbGVTb3J0Jyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY3VycmVudFdpbmRvdyA9IGNvbnRhaW5lckVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG4gICAgaWYgKCFjdXJyZW50V2luZG93KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBkZXRlcm1pbmUgdGhlIHdpbmRvdyBvZiB0aGUgY29udGFpbmVyIGVsZW1lbnQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzb3J0UG9wdXAgPSBjcmVhdGVQb3B1cCgnY2FyZC1uYXZpZ2F0b3Itc29ydC1wb3B1cCcsICdzb3J0JywgY3VycmVudFdpbmRvdyk7XG4gICAgY29uc3QgY3VycmVudFNvcnQgPSBgJHtwbHVnaW4uc2V0dGluZ3Muc29ydENyaXRlcmlvbn1fJHtwbHVnaW4uc2V0dGluZ3Muc29ydE9yZGVyfWA7XG4gICAgY29uc3Qgc29ydE9wdGlvbnMgPSBnZXRUcmFuc2xhdGVkU29ydE9wdGlvbnMoKTtcbiAgICBzb3J0T3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGNyZWF0ZVNvcnRPcHRpb24ob3B0aW9uLnZhbHVlLCBvcHRpb24ubGFiZWwsIGN1cnJlbnRTb3J0LCBwbHVnaW4sIGNvbnRhaW5lckVsKTtcbiAgICAgICAgc29ydFBvcHVwLmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgfSk7XG4gICAgc29ydFBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTb3J0T3B0aW9uKFxuICAgIHZhbHVlOiBzdHJpbmcsIFxuICAgIGxhYmVsOiBzdHJpbmcsIFxuICAgIGN1cnJlbnRTb3J0OiBzdHJpbmcsIFxuICAgIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbiwgXG4gICAgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50XG4pOiBIVE1MQnV0dG9uRWxlbWVudCB7XG4gICAgY29uc3QgYnV0dG9uID0gY29udGFpbmVyRWwub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSBsYWJlbDtcbiAgICBidXR0b24uY2xhc3NOYW1lID0gYHNvcnQtb3B0aW9uJHtjdXJyZW50U29ydCA9PT0gdmFsdWUgPyAnIGFjdGl2ZScgOiAnJ31gO1xuICAgIFxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgW2NyaXRlcmlvbiwgb3JkZXJdID0gdmFsdWUuc3BsaXQoJ18nKSBhcyBbU29ydENyaXRlcmlvbiwgU29ydE9yZGVyXTtcbiAgICAgICAgYXdhaXQgdXBkYXRlU29ydFNldHRpbmdzKHBsdWdpbiwgY3JpdGVyaW9uLCBvcmRlciwgY29udGFpbmVyRWwpO1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBidXR0b247XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVNvcnRTZXR0aW5ncyhcbiAgICBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4sIFxuICAgIGNyaXRlcmlvbjogU29ydENyaXRlcmlvbiwgXG4gICAgb3JkZXI6IFNvcnRPcmRlciwgXG4gICAgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50XG4pIHtcbiAgICBwbHVnaW4uc2V0dGluZ3Muc29ydENyaXRlcmlvbiA9IGNyaXRlcmlvbjtcbiAgICBwbHVnaW4uc2V0dGluZ3Muc29ydE9yZGVyID0gb3JkZXI7XG4gICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgIHBsdWdpbi50cmlnZ2VyUmVmcmVzaCgpO1xuICAgIFxuICAgIGNvbnN0IGN1cnJlbnRXaW5kb3cgPSBjb250YWluZXJFbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICAgIGlmIChjdXJyZW50V2luZG93KSB7XG4gICAgICAgIGNsb3NlQ3VycmVudFBvcHVwKGN1cnJlbnRXaW5kb3cpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBkZXRlcm1pbmUgdGhlIHdpbmRvdyBvZiB0aGUgY29udGFpbmVyIGVsZW1lbnQgaW4gdXBkYXRlU29ydFNldHRpbmdzJyk7XG4gICAgfVxufVxuXG4vLyBcdUMxMjRcdUM4MTUgXHVBRDAwXHVCODI4IFx1RDU2OFx1QzIxOFxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZVNldHRpbmdzKHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbiwgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50IHwgbnVsbCkge1xuICAgIGlmICghY29udGFpbmVyRWwpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQ29udGFpbmVyIGVsZW1lbnQgaXMgdW5kZWZpbmVkIGluIHRvZ2dsZVNldHRpbmdzJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY3VycmVudFdpbmRvdyA9IGNvbnRhaW5lckVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG4gICAgaWYgKCFjdXJyZW50V2luZG93KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBkZXRlcm1pbmUgdGhlIHdpbmRvdyBvZiB0aGUgY29udGFpbmVyIGVsZW1lbnQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzZXR0aW5nc1BvcHVwID0gY3JlYXRlUG9wdXAoJ2NhcmQtbmF2aWdhdG9yLXNldHRpbmdzLXBvcHVwJywgJ3NldHRpbmdzJywgY3VycmVudFdpbmRvdyk7XG4gICAgY29uc3Qgc2V0dGluZ3NNYW5hZ2VyID0gcGx1Z2luLnNldHRpbmdzTWFuYWdlcjtcblxuXHRhZGRGb2xkZXJTZWxlY3Rpb25TZXR0aW5nKHNldHRpbmdzUG9wdXAsIHBsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyKTtcblxuXHRhZGRQcmVzZXRTZXR0aW5nc1RvUG9wdXAoc2V0dGluZ3NQb3B1cCwgcGx1Z2luKTtcblx0XG5cdGNvbnN0IGxheW91dFNlY3Rpb24gPSBjcmVhdGVDb2xsYXBzaWJsZVNlY3Rpb24oc2V0dGluZ3NQb3B1cCwgdCgnTEFZT1VUX1NFVFRJTkdTJyksIHRydWUpO1xuICAgIFxuICAgIGNvbnN0IHVwZGF0ZUxheW91dFNldHRpbmdzID0gKGxheW91dDogQ2FyZE5hdmlnYXRvclNldHRpbmdzWydkZWZhdWx0TGF5b3V0J10pID0+IHtcbiAgICAgICAgbGF5b3V0U2VjdGlvbi5lbXB0eSgpO1xuXG5cdFx0YWRkRHJvcGRvd25TZXR0aW5nKCdkZWZhdWx0TGF5b3V0JywgdCgnREVGQVVMVF9MQVlPVVQnKSwgbGF5b3V0U2VjdGlvbiwgcGx1Z2luLCBzZXR0aW5nc01hbmFnZXIsIFtcblx0XHRcdHsgdmFsdWU6ICdhdXRvJywgbGFiZWw6IHQoJ0FVVE8nKSB9LFxuXHRcdFx0eyB2YWx1ZTogJ2xpc3QnLCBsYWJlbDogdCgnTElTVCcpIH0sXG5cdFx0XHR7IHZhbHVlOiAnZ3JpZCcsIGxhYmVsOiB0KCdHUklEJykgfSxcblx0XHRcdHsgdmFsdWU6ICdtYXNvbnJ5JywgbGFiZWw6IHQoJ01BU09OUlknKSB9XG5cdFx0XSwgKHZhbHVlKSA9PiB7XG5cdFx0XHR1cGRhdGVMYXlvdXRTZXR0aW5ncyh2YWx1ZSBhcyBDYXJkTmF2aWdhdG9yU2V0dGluZ3NbJ2RlZmF1bHRMYXlvdXQnXSk7XG5cdFx0fSk7XG5cdFx0XG5cdFx0aWYgKGxheW91dCA9PT0gJ2F1dG8nKSB7XG5cdFx0XHRhZGRTbGlkZXJTZXR0aW5nKCdjYXJkV2lkdGhUaHJlc2hvbGQnLCB0KCdDQVJEX1dJRFRIX1RIUkVTSE9MRCcpLCBsYXlvdXRTZWN0aW9uLCBwbHVnaW4sIHNldHRpbmdzTWFuYWdlcik7XG5cdFx0fVxuXHRcdGlmIChsYXlvdXQgPT09ICdncmlkJykge1xuXHRcdFx0YWRkU2xpZGVyU2V0dGluZygnZ3JpZENvbHVtbnMnLCB0KCdHUklEX0NPTFVNTlMnKSwgbGF5b3V0U2VjdGlvbiwgcGx1Z2luLCBzZXR0aW5nc01hbmFnZXIpO1xuXHRcdH1cblx0XHRpZiAobGF5b3V0ID09PSAnYXV0bycgfHwgbGF5b3V0ID09PSAnZ3JpZCcpIHtcblx0XHRcdGFkZFNsaWRlclNldHRpbmcoJ2dyaWRDYXJkSGVpZ2h0JywgdCgnR1JJRF9DQVJEX0hFSUdIVCcpLCBsYXlvdXRTZWN0aW9uLCBwbHVnaW4sIHNldHRpbmdzTWFuYWdlcik7XG5cdFx0fVxuXHRcdGlmIChsYXlvdXQgPT09ICdtYXNvbnJ5Jykge1xuXHRcdFx0YWRkU2xpZGVyU2V0dGluZygnbWFzb25yeUNvbHVtbnMnLCB0KCdNQVNPTlJZX0NPTFVNTlMnKSwgbGF5b3V0U2VjdGlvbiwgcGx1Z2luLCBzZXR0aW5nc01hbmFnZXIpO1xuXHRcdH1cblx0XHRpZiAobGF5b3V0ID09PSAnYXV0bycgfHwgbGF5b3V0ID09PSAnbGlzdCcpIHtcblx0XHRcdGFkZFRvZ2dsZVNldHRpbmcoJ2FsaWduQ2FyZEhlaWdodCcsIHQoJ0FMSUdOX0NBUkRfSEVJR0hUJyksIGxheW91dFNlY3Rpb24sIHBsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyLCAoKSA9PiB7XG5cdFx0XHRcdHVwZGF0ZUNhcmRzUGVyVmlld1NldHRpbmcoKTtcblx0XHRcdH0pO1xuXHRcdFx0dXBkYXRlQ2FyZHNQZXJWaWV3U2V0dGluZygpO1xuXHRcdH1cblxuICAgICAgICBzZXR0aW5nc1BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuICAgIH07XG5cbiAgICAvLyBGdW5jdGlvbiB0byB1cGRhdGUgY2FyZHNQZXJWaWV3IHNldHRpbmdcbiAgICBjb25zdCB1cGRhdGVDYXJkc1BlclZpZXdTZXR0aW5nID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjYXJkc1BlclZpZXdTZXR0aW5nID0gbGF5b3V0U2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuc2V0dGluZy1jYXJkcy1wZXItdmlldycpO1xuICAgICAgICBpZiAoY2FyZHNQZXJWaWV3U2V0dGluZykge1xuICAgICAgICAgICAgY2FyZHNQZXJWaWV3U2V0dGluZy5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFsaWduQ2FyZEhlaWdodCkge1xuICAgICAgICAgICAgYWRkU2xpZGVyU2V0dGluZygnY2FyZHNQZXJWaWV3JywgdCgnQ0FSRFNfUEVSX1ZJRVcnKSwgbGF5b3V0U2VjdGlvbiwgcGx1Z2luLCBzZXR0aW5nc01hbmFnZXIpXG4gICAgICAgICAgICAgICAgLnNldHRpbmdFbC5hZGRDbGFzcygnc2V0dGluZy1jYXJkcy1wZXItdmlldycpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIEluaXRpYWwgdXBkYXRlIG9mIGxheW91dCBzZXR0aW5nc1xuICAgIHVwZGF0ZUxheW91dFNldHRpbmdzKHBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TGF5b3V0KTtcblxuICAgIC8vIEFkZCBDYXJkIERpc3BsYXkgU2V0dGluZ3Mgc2VjdGlvblxuXHRjb25zdCBkaXNwbGF5U2VjdGlvbiA9IGNyZWF0ZUNvbGxhcHNpYmxlU2VjdGlvbihzZXR0aW5nc1BvcHVwLCB0KCdDQVJEX0NPTlRFTlRfU0VUVElOR1MnKSwgdHJ1ZSk7XG5cdGFkZFRvZ2dsZVNldHRpbmcoJ3JlbmRlckNvbnRlbnRBc0h0bWwnLCB0KCdSRU5ERVJfQ09OVEVOVF9BU19IVE1MJyksIGRpc3BsYXlTZWN0aW9uLCBwbHVnaW4sIHNldHRpbmdzTWFuYWdlcik7XG5cdGFkZFRvZ2dsZVNldHRpbmcoJ2RyYWdEcm9wQ29udGVudCcsIHQoJ0RSQUdfQU5EX0RST1BfQ09OVEVOVCcpLCBkaXNwbGF5U2VjdGlvbiwgcGx1Z2luLCBzZXR0aW5nc01hbmFnZXIpO1xuXHRhZGRUb2dnbGVTZXR0aW5nKCdzaG93RmlsZU5hbWUnLCB0KCdTSE9XX0ZJTEVfTkFNRScpLCBkaXNwbGF5U2VjdGlvbiwgcGx1Z2luLCBzZXR0aW5nc01hbmFnZXIpO1xuXHRhZGRUb2dnbGVTZXR0aW5nKCdzaG93Rmlyc3RIZWFkZXInLCB0KCdTSE9XX0ZJUlNUX0hFQURFUicpLCBkaXNwbGF5U2VjdGlvbiwgcGx1Z2luLCBzZXR0aW5nc01hbmFnZXIpO1xuXHRhZGRUb2dnbGVTZXR0aW5nKCdzaG93Qm9keScsIHQoJ1NIT1dfQk9EWScpLCBkaXNwbGF5U2VjdGlvbiwgcGx1Z2luLCBzZXR0aW5nc01hbmFnZXIpO1xuXG4gICAgLy8gRnVuY3Rpb24gdG8gdXBkYXRlIGJvZHlMZW5ndGggc2V0dGluZyB2aXNpYmlsaXR5XG4gICAgY29uc3QgdXBkYXRlQm9keUxlbmd0aFNldHRpbmcgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvZHlMZW5ndGhTZXR0aW5nID0gZGlzcGxheVNlY3Rpb24ucXVlcnlTZWxlY3RvcignLnNldHRpbmctYm9keS1sZW5ndGgnKTtcbiAgICAgICAgaWYgKGJvZHlMZW5ndGhTZXR0aW5nKSB7XG4gICAgICAgICAgICBib2R5TGVuZ3RoU2V0dGluZy5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmJvZHlMZW5ndGhMaW1pdCkge1xuXHRcdFx0YWRkU2xpZGVyU2V0dGluZygnYm9keUxlbmd0aCcsIHQoJ0JPRFlfTEVOR1RIJyksIGRpc3BsYXlTZWN0aW9uLCBwbHVnaW4sIHNldHRpbmdzTWFuYWdlcilcblx0XHRcdC5zZXR0aW5nRWwuYWRkQ2xhc3MoJ3NldHRpbmctYm9keS1sZW5ndGgnKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBBZGQgQm9keSBMZW5ndGggTGltaXQgdG9nZ2xlIHdpdGggdXBkYXRlQm9keUxlbmd0aFNldHRpbmcgY2FsbGJhY2tcblx0YWRkVG9nZ2xlU2V0dGluZygnYm9keUxlbmd0aExpbWl0JywgdCgnQk9EWV9MRU5HVEhfTElNSVQnKSwgZGlzcGxheVNlY3Rpb24sIHBsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyLCAoKSA9PiB7XG5cdFx0dXBkYXRlQm9keUxlbmd0aFNldHRpbmcoKTtcblx0fSk7XG5cbiAgICAvLyBJbml0aWFsIHVwZGF0ZSBvZiBib2R5TGVuZ3RoIHNldHRpbmdcbiAgICB1cGRhdGVCb2R5TGVuZ3RoU2V0dGluZygpO1xuXG4gICAgLy8gQWRkIENhcmQgU3R5bGluZyBTZXR0aW5ncyBzZWN0aW9uXG5cdGNvbnN0IHN0eWxpbmdTZWN0aW9uID0gY3JlYXRlQ29sbGFwc2libGVTZWN0aW9uKHNldHRpbmdzUG9wdXAsIHQoJ0NBUkRfU1RZTElOR19TRVRUSU5HUycpLCB0cnVlKTtcblx0YWRkU2xpZGVyU2V0dGluZygnZmlsZU5hbWVGb250U2l6ZScsIHQoJ0ZJTEVfTkFNRV9GT05UX1NJWkUnKSwgc3R5bGluZ1NlY3Rpb24sIHBsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyKTtcblx0YWRkU2xpZGVyU2V0dGluZygnZmlyc3RIZWFkZXJGb250U2l6ZScsIHQoJ0ZJUlNUX0hFQURFUl9GT05UX1NJWkUnKSwgc3R5bGluZ1NlY3Rpb24sIHBsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyKTtcblx0YWRkU2xpZGVyU2V0dGluZygnYm9keUZvbnRTaXplJywgdCgnQk9EWV9GT05UX1NJWkUnKSwgc3R5bGluZ1NlY3Rpb24sIHBsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyKTtcblxuICAgIC8vIFByZXZlbnQgY2xpY2sgZXZlbnRzIGZyb20gY2xvc2luZyB0aGUgcG9wdXBcbiAgICBzZXR0aW5nc1BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBhZGRQcmVzZXRTZXR0aW5nc1RvUG9wdXAoc2V0dGluZ3NQb3B1cDogSFRNTEVsZW1lbnQsIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbikge1xuICAgIGNvbnN0IHByZXNldFNlY3Rpb24gPSBjcmVhdGVDb2xsYXBzaWJsZVNlY3Rpb24oc2V0dGluZ3NQb3B1cCwgdCgnUFJFU0VUX1NFVFRJTkdTJyksIHRydWUpO1xuICAgIHByZXNldFNlY3Rpb24uY2xhc3NMaXN0LmFkZCgncHJlc2V0LXNldHRpbmdzLXNlY3Rpb24nKTtcblxuICAgIC8vIFx1RDUwNFx1QjlBQ1x1QzE0QiBcdUM3OTBcdUIzRDkgXHVDODAxXHVDNkE5IFx1RDFBMFx1QUUwMCBcdUJDODRcdUQyQkMgXHVDRDk0XHVBQzAwXG4gICAgbmV3IFNldHRpbmcocHJlc2V0U2VjdGlvbilcbiAgICAgICAgLnNldE5hbWUodCgnQVVUT19BUFBMWV9QUkVTRVRTJykpXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4gXG4gICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLmF1dG9BcHBseVByZXNldHMpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYXV0b0FwcGx5UHJlc2V0cyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGaWxlID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zZWxlY3RBbmRBcHBseVByZXNldEZvckN1cnJlbnRGaWxlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgLy8gXHVDODA0XHVDNUVEIFx1RDUwNFx1QjlBQ1x1QzE0QiBcdUI0RENcdUI4NkRcdUIyRTRcdUM2QjQgXHVDRDk0XHVBQzAwXG4gICAgY29uc3QgcHJlc2V0TmFtZXMgPSBhd2FpdCBwbHVnaW4ucHJlc2V0TWFuYWdlci5nZXRQcmVzZXROYW1lcygpO1xuICAgIG5ldyBTZXR0aW5nKHByZXNldFNlY3Rpb24pXG4gICAgICAgIC5zZXROYW1lKHQoJ0dMT0JBTF9QUkVTRVQnKSlcbiAgICAgICAgLmFkZERyb3Bkb3duKGFzeW5jIChkcm9wZG93bikgPT4ge1xuICAgICAgICAgICAgcHJlc2V0TmFtZXMuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24obmFtZSwgbmFtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5HbG9iYWxQcmVzZXQpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwbHVnaW4ucHJlc2V0TWFuYWdlci5hcHBseUdsb2JhbFByZXNldCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi50cmlnZ2VyUmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbn1cblxuZnVuY3Rpb24gYWRkRm9sZGVyU2VsZWN0aW9uU2V0dGluZyhwYXJlbnRFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIpOiB2b2lkIHtcbiAgICBuZXcgU2V0dGluZyhwYXJlbnRFbClcbiAgICAgICAgLnNldE5hbWUodCgnU09VUkNFX0ZPTERFUicpKVxuICAgICAgICAuc2V0Q2xhc3MoJ3NldHRpbmctaXRlbS10b2dnbGUnKVxuICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudXNlU2VsZWN0ZWRGb2xkZXIpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NNYW5hZ2VyLnVwZGF0ZUJvb2xlYW5TZXR0aW5nKCd1c2VTZWxlY3RlZEZvbGRlcicsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0b2dnbGVTZXR0aW5ncyhwbHVnaW4sIHBhcmVudEVsKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICBpZiAocGx1Z2luLnNldHRpbmdzLnVzZVNlbGVjdGVkRm9sZGVyKSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmcgPSBjcmVhdGVGdWxsV2lkdGhTZXR0aW5nKHBhcmVudEVsKTtcbiAgICAgICAgYWRkRnVsbFdpZHRoVGV4dChzZXR0aW5nLCB0ZXh0ID0+IHtcbiAgICAgICAgICAgIG5ldyBGb2xkZXJTdWdnZXN0KHBsdWdpbi5hcHAsIHRleHQuaW5wdXRFbCk7XG4gICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKHQoJ1NFTEVDVF9GT0xERVInKSlcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnNlbGVjdGVkRm9sZGVyIHx8ICcnKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAobmV3Rm9sZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0ZvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXR0aW5nc01hbmFnZXIudXBkYXRlU2V0dGluZygnc2VsZWN0ZWRGb2xkZXInLCBuZXdGb2xkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFkZERyb3Bkb3duU2V0dGluZyhcbiAgICBrZXk6IGtleW9mIENhcmROYXZpZ2F0b3JTZXR0aW5ncywgXG4gICAgbmFtZTogc3RyaW5nLCBcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LCBcbiAgICBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4sIFxuICAgIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyLCBcbiAgICBvcHRpb25zOiB7IHZhbHVlOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgfVtdLCBcbiAgICBvbkNoYW5nZT86ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkXG4pIHtcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXIpXG4gICAgICAgIC5zZXROYW1lKG5hbWUpXG4gICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pdGVtLWRyb3Bkb3duJylcbiAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgICAgIG9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihvcHRpb24udmFsdWUsIG9wdGlvbi5sYWJlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5nc1trZXldIGFzIHN0cmluZylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNldHRpbmdzTWFuYWdlci51cGRhdGVTZXR0aW5nKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4udHJpZ2dlclJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZFRvZ2dsZVNldHRpbmcoXG4gICAga2V5OiBrZXlvZiBDYXJkTmF2aWdhdG9yU2V0dGluZ3MsIFxuICAgIG5hbWU6IHN0cmluZywgXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgXG4gICAgcGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luLCBcbiAgICBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlciwgXG4gICAgb25DaGFuZ2U/OiAoKSA9PiB2b2lkXG4pIHtcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXIpXG4gICAgICAgIC5zZXROYW1lKG5hbWUpXG4gICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5nc1trZXldIGFzIGJvb2xlYW4pXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NNYW5hZ2VyLnVwZGF0ZUJvb2xlYW5TZXR0aW5nKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHBsdWdpbi50cmlnZ2VyUmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIGlmIChvbkNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG59XG5cbmZ1bmN0aW9uIGFkZFNsaWRlclNldHRpbmcoXG4gICAga2V5OiBOdW1iZXJTZXR0aW5nS2V5LCBcbiAgICBuYW1lOiBzdHJpbmcsIFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIFxuICAgIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbiwgXG4gICAgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXJcbik6IFNldHRpbmcge1xuICAgIGNvbnN0IGNvbmZpZyA9IHNldHRpbmdzTWFuYWdlci5nZXROdW1iZXJTZXR0aW5nQ29uZmlnKGtleSk7XG4gICAgY29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUobmFtZSlcbiAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWl0ZW0tc2xpZGVyJyk7XG5cbiAgICBzZXR0aW5nLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAgIC5zZXRMaW1pdHMoY29uZmlnLm1pbiwgY29uZmlnLm1heCwgY29uZmlnLnN0ZXApXG4gICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3Nba2V5XSlcbiAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNldHRpbmcgc2hvdWxkIGJlIHVwZGF0ZWQgYmFzZWQgb24gb3RoZXIgc2V0dGluZ3NcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAoa2V5ID09PSAnYm9keUxlbmd0aCcgJiYgIXBsdWdpbi5zZXR0aW5ncy5ib2R5TGVuZ3RoTGltaXQpIHx8XG4gICAgICAgICAgICAgICAgKGtleSA9PT0gJ2NhcmRzUGVyVmlldycgJiYgIXBsdWdpbi5zZXR0aW5ncy5hbGlnbkNhcmRIZWlnaHQpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBzZXR0aW5nc01hbmFnZXIudXBkYXRlU2V0dGluZyhrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBsYXlvdXQgaWYgbmVjZXNzYXJ5XG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnZ3JpZENvbHVtbnMnIHx8IGtleSA9PT0gJ21hc29ucnlDb2x1bW5zJykge1xuICAgICAgICAgICAgICAgIHBsdWdpbi51cGRhdGVDYXJkTmF2aWdhdG9yTGF5b3V0KHBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TGF5b3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBsdWdpbi50cmlnZ2VyUmVmcmVzaCgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICAvLyBEaXNhYmxlIGJvZHlMZW5ndGggc2V0dGluZyBpZiBib2R5IGxlbmd0aCBpcyBub3QgbGltaXRlZFxuICAgIGlmIChrZXkgPT09ICdib2R5TGVuZ3RoJykge1xuICAgICAgICBzZXR0aW5nLnNldERpc2FibGVkKCFwbHVnaW4uc2V0dGluZ3MuYm9keUxlbmd0aExpbWl0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2V0dGluZztcbn1cbiIsICIvLyBDcmVkaXRzIGdvIHRvIExpYW0ncyBQZXJpb2RpYyBOb3RlcyBQbHVnaW46IGh0dHBzOi8vZ2l0aHViLmNvbS9saWFtY2Fpbi9vYnNpZGlhbi1wZXJpb2RpYy1ub3Rlc1xuXG5pbXBvcnQgeyBBcHAsIFRBYnN0cmFjdEZpbGUsIFRGb2xkZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFRleHRJbnB1dFN1Z2dlc3QgfSBmcm9tIFwiLi9zdWdnZXN0XCI7XG5cbmV4cG9ydCBjbGFzcyBGb2xkZXJTdWdnZXN0IGV4dGVuZHMgVGV4dElucHV0U3VnZ2VzdDxURm9sZGVyPiB7XG4gICAgb25CbHVyOiAoKSA9PiB2b2lkO1xuICAgIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcm90ZWN0ZWQgYXBwOiBBcHAsXG4gICAgICAgIHB1YmxpYyBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50LFxuICAgICAgICBvbkJsdXI/OiAoKSA9PiB2b2lkXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgaW5wdXRFbCk7XG4gICAgICAgIHRoaXMub25CbHVyID0gb25CbHVyIHx8ICgoKSA9PiB7fSk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwgPSBjcmVhdGVEaXYoJ3N1Z2dlc3Rpb24tY29udGFpbmVyJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdUM3ODVcdUI4MjUgXHVDNjk0XHVDMThDXHVDNUQwIGJsdXIgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1QjlBQ1x1QzJBNFx1QjEwOCBcdUNEOTRcdUFDMDBcbiAgICAgICAgdGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyRWwuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkJsdXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRTdWdnZXN0aW9ucyhpbnB1dFN0cjogc3RyaW5nKTogVEZvbGRlcltdIHtcbiAgICAgICAgY29uc3QgYWJzdHJhY3RGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCk7XG4gICAgICAgIGNvbnN0IGZvbGRlcnM6IFRGb2xkZXJbXSA9IFtdO1xuICAgICAgICBjb25zdCBsb3dlckNhc2VJbnB1dFN0ciA9IGlucHV0U3RyLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgYWJzdHJhY3RGaWxlcy5mb3JFYWNoKChmb2xkZXI6IFRBYnN0cmFjdEZpbGUpID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyICYmXG4gICAgICAgICAgICAgICAgZm9sZGVyLnBhdGgudG9Mb3dlckNhc2UoKS5jb250YWlucyhsb3dlckNhc2VJbnB1dFN0cilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGZvbGRlcnMucHVzaChmb2xkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZm9sZGVycy5zbGljZSgwLCAxMDAwKTtcbiAgICB9XG5cbiAgICByZW5kZXJTdWdnZXN0aW9uKGZpbGU6IFRGb2xkZXIsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBlbC5zZXRUZXh0KGZpbGUucGF0aCk7XG4gICAgfVxuXG4gICAgc2VsZWN0U3VnZ2VzdGlvbihmaWxlOiBURm9sZGVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9IGZpbGUucGF0aDtcbiAgICAgICAgdGhpcy5pbnB1dEVsLnRyaWdnZXIoXCJpbnB1dFwiKTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbn1cbiIsICIvLyBDcmVkaXRzIGdvIHRvIExpYW0ncyBQZXJpb2RpYyBOb3RlcyBQbHVnaW46IGh0dHBzOi8vZ2l0aHViLmNvbS9saWFtY2Fpbi9vYnNpZGlhbi1wZXJpb2RpYy1ub3Rlc1xuXG5pbXBvcnQgeyBBcHAsIElTdWdnZXN0T3duZXIsIFNjb3BlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBjcmVhdGVQb3BwZXIsIEluc3RhbmNlIGFzIFBvcHBlckluc3RhbmNlIH0gZnJvbSBcIkBwb3BwZXJqcy9jb3JlXCI7XG5cbmNvbnN0IHdyYXBBcm91bmQgPSAodmFsdWU6IG51bWJlciwgc2l6ZTogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgICByZXR1cm4gKCh2YWx1ZSAlIHNpemUpICsgc2l6ZSkgJSBzaXplO1xufTtcblxuY2xhc3MgU3VnZ2VzdDxUPiB7XG4gICAgcHJpdmF0ZSBvd25lcjogSVN1Z2dlc3RPd25lcjxUPjtcbiAgICBwcml2YXRlIHZhbHVlczogVFtdID0gW107IC8vIFx1QkU0OCBcdUJDMzBcdUM1RjRcdUI4NUMgXHVDRDA4XHVBRTMwXHVENjU0XG4gICAgcHJpdmF0ZSBzdWdnZXN0aW9uczogSFRNTERpdkVsZW1lbnRbXSA9IFtdOyAvLyBcdUM3NzRcdUFDODNcdUIzQzQgXHVDRDA4XHVBRTMwXHVENjU0XHVENTU4XHVCMjk0IFx1QUM4M1x1Qzc3NCBcdUM4OEJcdUMyQjVcdUIyQzhcdUIyRTRcbiAgICBwcml2YXRlIHNlbGVjdGVkSXRlbSA9IDA7IC8vIFx1Qzc3NFx1QUM4M1x1QjNDNCBcdUNEMDhcdUFFMzBcdUQ2NTRcdUQ1NThcdUIyOTQgXHVBQzgzXHVDNzc0IFx1Qzg4Qlx1QzJCNVx1QjJDOFx1QjJFNFxuICAgIHByaXZhdGUgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIG93bmVyOiBJU3VnZ2VzdE93bmVyPFQ+LFxuICAgICAgICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXG4gICAgICAgIHNjb3BlOiBTY29wZVxuICAgICkge1xuICAgICAgICB0aGlzLm93bmVyID0gb3duZXI7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcblxuICAgICAgICBjb250YWluZXJFbC5vbihcbiAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgIFwiLnN1Z2dlc3Rpb24taXRlbVwiLFxuICAgICAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50LCB0YXJnZXQ6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblN1Z2dlc3Rpb25DbGljayhldmVudCwgdGFyZ2V0IGFzIEhUTUxEaXZFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgY29udGFpbmVyRWwub24oXG4gICAgICAgICAgICBcIm1vdXNlbW92ZVwiLFxuICAgICAgICAgICAgXCIuc3VnZ2VzdGlvbi1pdGVtXCIsXG4gICAgICAgICAgICAoZXZlbnQ6IE1vdXNlRXZlbnQsIHRhcmdldDogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3VnZ2VzdGlvbk1vdXNlb3ZlcihldmVudCwgdGFyZ2V0IGFzIEhUTUxEaXZFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBzY29wZS5yZWdpc3RlcihbXSwgXCJBcnJvd1VwXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFldmVudC5pc0NvbXBvc2luZykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRJdGVtKHRoaXMuc2VsZWN0ZWRJdGVtIC0gMSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBzY29wZS5yZWdpc3RlcihbXSwgXCJBcnJvd0Rvd25cIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWV2ZW50LmlzQ29tcG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZEl0ZW0odGhpcy5zZWxlY3RlZEl0ZW0gKyAxLCB0cnVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNjb3BlLnJlZ2lzdGVyKFtdLCBcIkVudGVyXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFldmVudC5pc0NvbXBvc2luZykge1xuICAgICAgICAgICAgICAgIHRoaXMudXNlU2VsZWN0ZWRJdGVtKGV2ZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uU3VnZ2VzdGlvbkNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50LCBlbDogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5zdWdnZXN0aW9ucy5pbmRleE9mKGVsKTtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZEl0ZW0oaXRlbSwgZmFsc2UpO1xuICAgICAgICB0aGlzLnVzZVNlbGVjdGVkSXRlbShldmVudCk7XG4gICAgfVxuXG4gICAgb25TdWdnZXN0aW9uTW91c2VvdmVyKF9ldmVudDogTW91c2VFdmVudCwgZWw6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnN1Z2dlc3Rpb25zLmluZGV4T2YoZWwpO1xuICAgICAgICB0aGlzLnNldFNlbGVjdGVkSXRlbShpdGVtLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgc2V0U3VnZ2VzdGlvbnModmFsdWVzOiBUW10pIHtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICBjb25zdCBzdWdnZXN0aW9uRWxzOiBIVE1MRGl2RWxlbWVudFtdID0gW107XG5cbiAgICAgICAgdmFsdWVzLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdWdnZXN0aW9uRWwgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdihcInN1Z2dlc3Rpb24taXRlbVwiKTtcbiAgICAgICAgICAgIHRoaXMub3duZXIucmVuZGVyU3VnZ2VzdGlvbih2YWx1ZSwgc3VnZ2VzdGlvbkVsKTtcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25FbHMucHVzaChzdWdnZXN0aW9uRWwpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlcztcbiAgICAgICAgdGhpcy5zdWdnZXN0aW9ucyA9IHN1Z2dlc3Rpb25FbHM7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRJdGVtKDAsIGZhbHNlKTtcbiAgICB9XG5cbiAgICB1c2VTZWxlY3RlZEl0ZW0oZXZlbnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHRoaXMudmFsdWVzW3RoaXMuc2VsZWN0ZWRJdGVtXTtcbiAgICAgICAgaWYgKGN1cnJlbnRWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5vd25lci5zZWxlY3RTdWdnZXN0aW9uKGN1cnJlbnRWYWx1ZSwgZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0U2VsZWN0ZWRJdGVtKHNlbGVjdGVkSW5kZXg6IG51bWJlciwgc2Nyb2xsSW50b1ZpZXc6IGJvb2xlYW4pIHtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZEluZGV4ID0gd3JhcEFyb3VuZChcbiAgICAgICAgICAgIHNlbGVjdGVkSW5kZXgsXG4gICAgICAgICAgICB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBwcmV2U2VsZWN0ZWRTdWdnZXN0aW9uID0gdGhpcy5zdWdnZXN0aW9uc1t0aGlzLnNlbGVjdGVkSXRlbV07XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkU3VnZ2VzdGlvbiA9IHRoaXMuc3VnZ2VzdGlvbnNbbm9ybWFsaXplZEluZGV4XTtcblxuICAgICAgICBwcmV2U2VsZWN0ZWRTdWdnZXN0aW9uPy5yZW1vdmVDbGFzcyhcImlzLXNlbGVjdGVkXCIpO1xuICAgICAgICBzZWxlY3RlZFN1Z2dlc3Rpb24/LmFkZENsYXNzKFwiaXMtc2VsZWN0ZWRcIik7XG5cbiAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSBub3JtYWxpemVkSW5kZXg7XG5cbiAgICAgICAgaWYgKHNjcm9sbEludG9WaWV3KSB7XG4gICAgICAgICAgICBzZWxlY3RlZFN1Z2dlc3Rpb24uc2Nyb2xsSW50b1ZpZXcoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVGV4dElucHV0U3VnZ2VzdDxUPiBpbXBsZW1lbnRzIElTdWdnZXN0T3duZXI8VD4ge1xuICAgIHByb3RlY3RlZCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50IHwgSFRNTFRleHRBcmVhRWxlbWVudDtcblx0cHJvdGVjdGVkIGFwcDogQXBwO1xuXG4gICAgcHJpdmF0ZSBwb3BwZXI/OiBQb3BwZXJJbnN0YW5jZTtcbiAgICBwcml2YXRlIHNjb3BlOiBTY29wZTtcbiAgICBwcml2YXRlIHN1Z2dlc3RFbDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzdWdnZXN0OiBTdWdnZXN0PFQ+O1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MVGV4dEFyZWFFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLmlucHV0RWwgPSBpbnB1dEVsO1xuICAgICAgICB0aGlzLnNjb3BlID0gbmV3IFNjb3BlKCk7XG5cbiAgICAgICAgdGhpcy5zdWdnZXN0RWwgPSBjcmVhdGVEaXYoXCJzdWdnZXN0aW9uLWNvbnRhaW5lclwiKTtcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbiA9IHRoaXMuc3VnZ2VzdEVsLmNyZWF0ZURpdihcInN1Z2dlc3Rpb25cIik7XG4gICAgICAgIHRoaXMuc3VnZ2VzdCA9IG5ldyBTdWdnZXN0KHRoaXMsIHN1Z2dlc3Rpb24sIHRoaXMuc2NvcGUpO1xuXG4gICAgICAgIHRoaXMuc2NvcGUucmVnaXN0ZXIoW10sIFwiRXNjYXBlXCIsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgdGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLm9uSW5wdXRDaGFuZ2VkLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMub25JbnB1dENoYW5nZWQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnN1Z2dlc3RFbC5vbihcbiAgICAgICAgICAgIFwibW91c2Vkb3duXCIsXG4gICAgICAgICAgICBcIi5zdWdnZXN0aW9uLWNvbnRhaW5lclwiLFxuICAgICAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBvbklucHV0Q2hhbmdlZCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaW5wdXRTdHIgPSB0aGlzLmlucHV0RWwudmFsdWU7XG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gdGhpcy5nZXRTdWdnZXN0aW9ucyhpbnB1dFN0cik7XG5cbiAgICAgICAgaWYgKCFzdWdnZXN0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuc3VnZ2VzdC5zZXRTdWdnZXN0aW9ucyhzdWdnZXN0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLm9wZW4odGhpcy5hcHAud29ya3NwYWNlLmNvbnRhaW5lckVsLCB0aGlzLmlucHV0RWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb3Blbihjb250YWluZXI6IEhUTUxFbGVtZW50LCBpbnB1dEVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLmFwcC5rZXltYXAucHVzaFNjb3BlKHRoaXMuc2NvcGUpO1xuXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnN1Z2dlc3RFbCk7XG4gICAgICAgIHRoaXMucG9wcGVyID0gY3JlYXRlUG9wcGVyKGlucHV0RWwsIHRoaXMuc3VnZ2VzdEVsLCB7XG4gICAgICAgICAgICBwbGFjZW1lbnQ6IFwiYm90dG9tLXN0YXJ0XCIsXG4gICAgICAgICAgICBtb2RpZmllcnM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic2FtZVdpZHRoXCIsXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGZuOiAoeyBzdGF0ZSwgaW5zdGFuY2UgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90ZTogcG9zaXRpb25pbmcgbmVlZHMgdG8gYmUgY2FsY3VsYXRlZCB0d2ljZSAtXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJzdCBwYXNzIC0gcG9zaXRpb25pbmcgaXQgYWNjb3JkaW5nIHRvIHRoZSB3aWR0aCBvZiB0aGUgcG9wcGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWNvbmQgcGFzcyAtIHBvc2l0aW9uIGl0IHdpdGggdGhlIHdpZHRoIGJvdW5kIHRvIHRoZSByZWZlcmVuY2UgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBlYXJseSBleGl0IHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFdpZHRoID0gYCR7c3RhdGUucmVjdHMucmVmZXJlbmNlLndpZHRofXB4YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5zdHlsZXMucG9wcGVyLndpZHRoID09PSB0YXJnZXRXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnN0eWxlcy5wb3BwZXIud2lkdGggPSB0YXJnZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwaGFzZTogXCJiZWZvcmVXcml0ZVwiLFxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlczogW1wiY29tcHV0ZVN0eWxlc1wiXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYXBwLmtleW1hcC5wb3BTY29wZSh0aGlzLnNjb3BlKTtcblxuICAgICAgICB0aGlzLnN1Z2dlc3Quc2V0U3VnZ2VzdGlvbnMoW10pO1xuICAgICAgICBpZiAodGhpcy5wb3BwZXIpIHRoaXMucG9wcGVyLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5zdWdnZXN0RWwuZGV0YWNoKCk7XG4gICAgfVxuXG4gICAgYWJzdHJhY3QgZ2V0U3VnZ2VzdGlvbnMoaW5wdXRTdHI6IHN0cmluZyk6IFRbXTtcbiAgICBhYnN0cmFjdCByZW5kZXJTdWdnZXN0aW9uKGl0ZW06IFQsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQ7XG4gICAgYWJzdHJhY3Qgc2VsZWN0U3VnZ2VzdGlvbihpdGVtOiBUKTogdm9pZDtcbn1cbiIsICJleHBvcnQgdmFyIHRvcCA9ICd0b3AnO1xuZXhwb3J0IHZhciBib3R0b20gPSAnYm90dG9tJztcbmV4cG9ydCB2YXIgcmlnaHQgPSAncmlnaHQnO1xuZXhwb3J0IHZhciBsZWZ0ID0gJ2xlZnQnO1xuZXhwb3J0IHZhciBhdXRvID0gJ2F1dG8nO1xuZXhwb3J0IHZhciBiYXNlUGxhY2VtZW50cyA9IFt0b3AsIGJvdHRvbSwgcmlnaHQsIGxlZnRdO1xuZXhwb3J0IHZhciBzdGFydCA9ICdzdGFydCc7XG5leHBvcnQgdmFyIGVuZCA9ICdlbmQnO1xuZXhwb3J0IHZhciBjbGlwcGluZ1BhcmVudHMgPSAnY2xpcHBpbmdQYXJlbnRzJztcbmV4cG9ydCB2YXIgdmlld3BvcnQgPSAndmlld3BvcnQnO1xuZXhwb3J0IHZhciBwb3BwZXIgPSAncG9wcGVyJztcbmV4cG9ydCB2YXIgcmVmZXJlbmNlID0gJ3JlZmVyZW5jZSc7XG5leHBvcnQgdmFyIHZhcmlhdGlvblBsYWNlbWVudHMgPSAvKiNfX1BVUkVfXyovYmFzZVBsYWNlbWVudHMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICByZXR1cm4gYWNjLmNvbmNhdChbcGxhY2VtZW50ICsgXCItXCIgKyBzdGFydCwgcGxhY2VtZW50ICsgXCItXCIgKyBlbmRdKTtcbn0sIFtdKTtcbmV4cG9ydCB2YXIgcGxhY2VtZW50cyA9IC8qI19fUFVSRV9fKi9bXS5jb25jYXQoYmFzZVBsYWNlbWVudHMsIFthdXRvXSkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICByZXR1cm4gYWNjLmNvbmNhdChbcGxhY2VtZW50LCBwbGFjZW1lbnQgKyBcIi1cIiArIHN0YXJ0LCBwbGFjZW1lbnQgKyBcIi1cIiArIGVuZF0pO1xufSwgW10pOyAvLyBtb2RpZmllcnMgdGhhdCBuZWVkIHRvIHJlYWQgdGhlIERPTVxuXG5leHBvcnQgdmFyIGJlZm9yZVJlYWQgPSAnYmVmb3JlUmVhZCc7XG5leHBvcnQgdmFyIHJlYWQgPSAncmVhZCc7XG5leHBvcnQgdmFyIGFmdGVyUmVhZCA9ICdhZnRlclJlYWQnOyAvLyBwdXJlLWxvZ2ljIG1vZGlmaWVyc1xuXG5leHBvcnQgdmFyIGJlZm9yZU1haW4gPSAnYmVmb3JlTWFpbic7XG5leHBvcnQgdmFyIG1haW4gPSAnbWFpbic7XG5leHBvcnQgdmFyIGFmdGVyTWFpbiA9ICdhZnRlck1haW4nOyAvLyBtb2RpZmllciB3aXRoIHRoZSBwdXJwb3NlIHRvIHdyaXRlIHRvIHRoZSBET00gKG9yIHdyaXRlIGludG8gYSBmcmFtZXdvcmsgc3RhdGUpXG5cbmV4cG9ydCB2YXIgYmVmb3JlV3JpdGUgPSAnYmVmb3JlV3JpdGUnO1xuZXhwb3J0IHZhciB3cml0ZSA9ICd3cml0ZSc7XG5leHBvcnQgdmFyIGFmdGVyV3JpdGUgPSAnYWZ0ZXJXcml0ZSc7XG5leHBvcnQgdmFyIG1vZGlmaWVyUGhhc2VzID0gW2JlZm9yZVJlYWQsIHJlYWQsIGFmdGVyUmVhZCwgYmVmb3JlTWFpbiwgbWFpbiwgYWZ0ZXJNYWluLCBiZWZvcmVXcml0ZSwgd3JpdGUsIGFmdGVyV3JpdGVdOyIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXROb2RlTmFtZShlbGVtZW50KSB7XG4gIHJldHVybiBlbGVtZW50ID8gKGVsZW1lbnQubm9kZU5hbWUgfHwgJycpLnRvTG93ZXJDYXNlKCkgOiBudWxsO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRXaW5kb3cobm9kZSkge1xuICBpZiAobm9kZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHdpbmRvdztcbiAgfVxuXG4gIGlmIChub2RlLnRvU3RyaW5nKCkgIT09ICdbb2JqZWN0IFdpbmRvd10nKSB7XG4gICAgdmFyIG93bmVyRG9jdW1lbnQgPSBub2RlLm93bmVyRG9jdW1lbnQ7XG4gICAgcmV0dXJuIG93bmVyRG9jdW1lbnQgPyBvd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IHx8IHdpbmRvdyA6IHdpbmRvdztcbiAgfVxuXG4gIHJldHVybiBub2RlO1xufSIsICJpbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuXG5mdW5jdGlvbiBpc0VsZW1lbnQobm9kZSkge1xuICB2YXIgT3duRWxlbWVudCA9IGdldFdpbmRvdyhub2RlKS5FbGVtZW50O1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIE93bkVsZW1lbnQgfHwgbm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGlzSFRNTEVsZW1lbnQobm9kZSkge1xuICB2YXIgT3duRWxlbWVudCA9IGdldFdpbmRvdyhub2RlKS5IVE1MRWxlbWVudDtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBPd25FbGVtZW50IHx8IG5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gaXNTaGFkb3dSb290KG5vZGUpIHtcbiAgLy8gSUUgMTEgaGFzIG5vIFNoYWRvd1Jvb3RcbiAgaWYgKHR5cGVvZiBTaGFkb3dSb290ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBPd25FbGVtZW50ID0gZ2V0V2luZG93KG5vZGUpLlNoYWRvd1Jvb3Q7XG4gIHJldHVybiBub2RlIGluc3RhbmNlb2YgT3duRWxlbWVudCB8fCBub2RlIGluc3RhbmNlb2YgU2hhZG93Um9vdDtcbn1cblxuZXhwb3J0IHsgaXNFbGVtZW50LCBpc0hUTUxFbGVtZW50LCBpc1NoYWRvd1Jvb3QgfTsiLCAiaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi4vZG9tLXV0aWxzL2luc3RhbmNlT2YuanNcIjsgLy8gVGhpcyBtb2RpZmllciB0YWtlcyB0aGUgc3R5bGVzIHByZXBhcmVkIGJ5IHRoZSBgY29tcHV0ZVN0eWxlc2AgbW9kaWZpZXJcbi8vIGFuZCBhcHBsaWVzIHRoZW0gdG8gdGhlIEhUTUxFbGVtZW50cyBzdWNoIGFzIHBvcHBlciBhbmQgYXJyb3dcblxuZnVuY3Rpb24gYXBwbHlTdHlsZXMoX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlO1xuICBPYmplY3Qua2V5cyhzdGF0ZS5lbGVtZW50cykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciBzdHlsZSA9IHN0YXRlLnN0eWxlc1tuYW1lXSB8fCB7fTtcbiAgICB2YXIgYXR0cmlidXRlcyA9IHN0YXRlLmF0dHJpYnV0ZXNbbmFtZV0gfHwge307XG4gICAgdmFyIGVsZW1lbnQgPSBzdGF0ZS5lbGVtZW50c1tuYW1lXTsgLy8gYXJyb3cgaXMgb3B0aW9uYWwgKyB2aXJ0dWFsIGVsZW1lbnRzXG5cbiAgICBpZiAoIWlzSFRNTEVsZW1lbnQoZWxlbWVudCkgfHwgIWdldE5vZGVOYW1lKGVsZW1lbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBGbG93IGRvZXNuJ3Qgc3VwcG9ydCB0byBleHRlbmQgdGhpcyBwcm9wZXJ0eSwgYnV0IGl0J3MgdGhlIG1vc3RcbiAgICAvLyBlZmZlY3RpdmUgd2F5IHRvIGFwcGx5IHN0eWxlcyB0byBhbiBIVE1MRWxlbWVudFxuICAgIC8vICRGbG93Rml4TWVbY2Fubm90LXdyaXRlXVxuXG5cbiAgICBPYmplY3QuYXNzaWduKGVsZW1lbnQuc3R5bGUsIHN0eWxlKTtcbiAgICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICB2YXIgdmFsdWUgPSBhdHRyaWJ1dGVzW25hbWVdO1xuXG4gICAgICBpZiAodmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGVmZmVjdChfcmVmMikge1xuICB2YXIgc3RhdGUgPSBfcmVmMi5zdGF0ZTtcbiAgdmFyIGluaXRpYWxTdHlsZXMgPSB7XG4gICAgcG9wcGVyOiB7XG4gICAgICBwb3NpdGlvbjogc3RhdGUub3B0aW9ucy5zdHJhdGVneSxcbiAgICAgIGxlZnQ6ICcwJyxcbiAgICAgIHRvcDogJzAnLFxuICAgICAgbWFyZ2luOiAnMCdcbiAgICB9LFxuICAgIGFycm93OiB7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuICAgIH0sXG4gICAgcmVmZXJlbmNlOiB7fVxuICB9O1xuICBPYmplY3QuYXNzaWduKHN0YXRlLmVsZW1lbnRzLnBvcHBlci5zdHlsZSwgaW5pdGlhbFN0eWxlcy5wb3BwZXIpO1xuICBzdGF0ZS5zdHlsZXMgPSBpbml0aWFsU3R5bGVzO1xuXG4gIGlmIChzdGF0ZS5lbGVtZW50cy5hcnJvdykge1xuICAgIE9iamVjdC5hc3NpZ24oc3RhdGUuZWxlbWVudHMuYXJyb3cuc3R5bGUsIGluaXRpYWxTdHlsZXMuYXJyb3cpO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBPYmplY3Qua2V5cyhzdGF0ZS5lbGVtZW50cykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgdmFyIGVsZW1lbnQgPSBzdGF0ZS5lbGVtZW50c1tuYW1lXTtcbiAgICAgIHZhciBhdHRyaWJ1dGVzID0gc3RhdGUuYXR0cmlidXRlc1tuYW1lXSB8fCB7fTtcbiAgICAgIHZhciBzdHlsZVByb3BlcnRpZXMgPSBPYmplY3Qua2V5cyhzdGF0ZS5zdHlsZXMuaGFzT3duUHJvcGVydHkobmFtZSkgPyBzdGF0ZS5zdHlsZXNbbmFtZV0gOiBpbml0aWFsU3R5bGVzW25hbWVdKTsgLy8gU2V0IGFsbCB2YWx1ZXMgdG8gYW4gZW1wdHkgc3RyaW5nIHRvIHVuc2V0IHRoZW1cblxuICAgICAgdmFyIHN0eWxlID0gc3R5bGVQcm9wZXJ0aWVzLnJlZHVjZShmdW5jdGlvbiAoc3R5bGUsIHByb3BlcnR5KSB7XG4gICAgICAgIHN0eWxlW3Byb3BlcnR5XSA9ICcnO1xuICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICB9LCB7fSk7IC8vIGFycm93IGlzIG9wdGlvbmFsICsgdmlydHVhbCBlbGVtZW50c1xuXG4gICAgICBpZiAoIWlzSFRNTEVsZW1lbnQoZWxlbWVudCkgfHwgIWdldE5vZGVOYW1lKGVsZW1lbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBzdHlsZSk7XG4gICAgICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyaWJ1dGUpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnYXBwbHlTdHlsZXMnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ3dyaXRlJyxcbiAgZm46IGFwcGx5U3R5bGVzLFxuICBlZmZlY3Q6IGVmZmVjdCxcbiAgcmVxdWlyZXM6IFsnY29tcHV0ZVN0eWxlcyddXG59OyIsICJpbXBvcnQgeyBhdXRvIH0gZnJvbSBcIi4uL2VudW1zLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCkge1xuICByZXR1cm4gcGxhY2VtZW50LnNwbGl0KCctJylbMF07XG59IiwgImV4cG9ydCB2YXIgbWF4ID0gTWF0aC5tYXg7XG5leHBvcnQgdmFyIG1pbiA9IE1hdGgubWluO1xuZXhwb3J0IHZhciByb3VuZCA9IE1hdGgucm91bmQ7IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFVBU3RyaW5nKCkge1xuICB2YXIgdWFEYXRhID0gbmF2aWdhdG9yLnVzZXJBZ2VudERhdGE7XG5cbiAgaWYgKHVhRGF0YSAhPSBudWxsICYmIHVhRGF0YS5icmFuZHMgJiYgQXJyYXkuaXNBcnJheSh1YURhdGEuYnJhbmRzKSkge1xuICAgIHJldHVybiB1YURhdGEuYnJhbmRzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0uYnJhbmQgKyBcIi9cIiArIGl0ZW0udmVyc2lvbjtcbiAgICB9KS5qb2luKCcgJyk7XG4gIH1cblxuICByZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbn0iLCAiaW1wb3J0IGdldFVBU3RyaW5nIGZyb20gXCIuLi91dGlscy91c2VyQWdlbnQuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzTGF5b3V0Vmlld3BvcnQoKSB7XG4gIHJldHVybiAhL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdChnZXRVQVN0cmluZygpKTtcbn0iLCAiaW1wb3J0IHsgaXNFbGVtZW50LCBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IHsgcm91bmQgfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcbmltcG9ydCBpc0xheW91dFZpZXdwb3J0IGZyb20gXCIuL2lzTGF5b3V0Vmlld3BvcnQuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50LCBpbmNsdWRlU2NhbGUsIGlzRml4ZWRTdHJhdGVneSkge1xuICBpZiAoaW5jbHVkZVNjYWxlID09PSB2b2lkIDApIHtcbiAgICBpbmNsdWRlU2NhbGUgPSBmYWxzZTtcbiAgfVxuXG4gIGlmIChpc0ZpeGVkU3RyYXRlZ3kgPT09IHZvaWQgMCkge1xuICAgIGlzRml4ZWRTdHJhdGVneSA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIGNsaWVudFJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB2YXIgc2NhbGVYID0gMTtcbiAgdmFyIHNjYWxlWSA9IDE7XG5cbiAgaWYgKGluY2x1ZGVTY2FsZSAmJiBpc0hUTUxFbGVtZW50KGVsZW1lbnQpKSB7XG4gICAgc2NhbGVYID0gZWxlbWVudC5vZmZzZXRXaWR0aCA+IDAgPyByb3VuZChjbGllbnRSZWN0LndpZHRoKSAvIGVsZW1lbnQub2Zmc2V0V2lkdGggfHwgMSA6IDE7XG4gICAgc2NhbGVZID0gZWxlbWVudC5vZmZzZXRIZWlnaHQgPiAwID8gcm91bmQoY2xpZW50UmVjdC5oZWlnaHQpIC8gZWxlbWVudC5vZmZzZXRIZWlnaHQgfHwgMSA6IDE7XG4gIH1cblxuICB2YXIgX3JlZiA9IGlzRWxlbWVudChlbGVtZW50KSA/IGdldFdpbmRvdyhlbGVtZW50KSA6IHdpbmRvdyxcbiAgICAgIHZpc3VhbFZpZXdwb3J0ID0gX3JlZi52aXN1YWxWaWV3cG9ydDtcblxuICB2YXIgYWRkVmlzdWFsT2Zmc2V0cyA9ICFpc0xheW91dFZpZXdwb3J0KCkgJiYgaXNGaXhlZFN0cmF0ZWd5O1xuICB2YXIgeCA9IChjbGllbnRSZWN0LmxlZnQgKyAoYWRkVmlzdWFsT2Zmc2V0cyAmJiB2aXN1YWxWaWV3cG9ydCA/IHZpc3VhbFZpZXdwb3J0Lm9mZnNldExlZnQgOiAwKSkgLyBzY2FsZVg7XG4gIHZhciB5ID0gKGNsaWVudFJlY3QudG9wICsgKGFkZFZpc3VhbE9mZnNldHMgJiYgdmlzdWFsVmlld3BvcnQgPyB2aXN1YWxWaWV3cG9ydC5vZmZzZXRUb3AgOiAwKSkgLyBzY2FsZVk7XG4gIHZhciB3aWR0aCA9IGNsaWVudFJlY3Qud2lkdGggLyBzY2FsZVg7XG4gIHZhciBoZWlnaHQgPSBjbGllbnRSZWN0LmhlaWdodCAvIHNjYWxlWTtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgdG9wOiB5LFxuICAgIHJpZ2h0OiB4ICsgd2lkdGgsXG4gICAgYm90dG9tOiB5ICsgaGVpZ2h0LFxuICAgIGxlZnQ6IHgsXG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH07XG59IiwgImltcG9ydCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZnJvbSBcIi4vZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmpzXCI7IC8vIFJldHVybnMgdGhlIGxheW91dCByZWN0IG9mIGFuIGVsZW1lbnQgcmVsYXRpdmUgdG8gaXRzIG9mZnNldFBhcmVudC4gTGF5b3V0XG4vLyBtZWFucyBpdCBkb2Vzbid0IHRha2UgaW50byBhY2NvdW50IHRyYW5zZm9ybXMuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldExheW91dFJlY3QoZWxlbWVudCkge1xuICB2YXIgY2xpZW50UmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50KTsgLy8gVXNlIHRoZSBjbGllbnRSZWN0IHNpemVzIGlmIGl0J3Mgbm90IGJlZW4gdHJhbnNmb3JtZWQuXG4gIC8vIEZpeGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9wb3BwZXJqcy9wb3BwZXItY29yZS9pc3N1ZXMvMTIyM1xuXG4gIHZhciB3aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gIHZhciBoZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcblxuICBpZiAoTWF0aC5hYnMoY2xpZW50UmVjdC53aWR0aCAtIHdpZHRoKSA8PSAxKSB7XG4gICAgd2lkdGggPSBjbGllbnRSZWN0LndpZHRoO1xuICB9XG5cbiAgaWYgKE1hdGguYWJzKGNsaWVudFJlY3QuaGVpZ2h0IC0gaGVpZ2h0KSA8PSAxKSB7XG4gICAgaGVpZ2h0ID0gY2xpZW50UmVjdC5oZWlnaHQ7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHg6IGVsZW1lbnQub2Zmc2V0TGVmdCxcbiAgICB5OiBlbGVtZW50Lm9mZnNldFRvcCxcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHRcbiAgfTtcbn0iLCAiaW1wb3J0IHsgaXNTaGFkb3dSb290IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29udGFpbnMocGFyZW50LCBjaGlsZCkge1xuICB2YXIgcm9vdE5vZGUgPSBjaGlsZC5nZXRSb290Tm9kZSAmJiBjaGlsZC5nZXRSb290Tm9kZSgpOyAvLyBGaXJzdCwgYXR0ZW1wdCB3aXRoIGZhc3RlciBuYXRpdmUgbWV0aG9kXG5cbiAgaWYgKHBhcmVudC5jb250YWlucyhjaGlsZCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSAvLyB0aGVuIGZhbGxiYWNrIHRvIGN1c3RvbSBpbXBsZW1lbnRhdGlvbiB3aXRoIFNoYWRvdyBET00gc3VwcG9ydFxuICBlbHNlIGlmIChyb290Tm9kZSAmJiBpc1NoYWRvd1Jvb3Qocm9vdE5vZGUpKSB7XG4gICAgICB2YXIgbmV4dCA9IGNoaWxkO1xuXG4gICAgICBkbyB7XG4gICAgICAgIGlmIChuZXh0ICYmIHBhcmVudC5pc1NhbWVOb2RlKG5leHQpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddOiBuZWVkIGEgYmV0dGVyIHdheSB0byBoYW5kbGUgdGhpcy4uLlxuXG5cbiAgICAgICAgbmV4dCA9IG5leHQucGFyZW50Tm9kZSB8fCBuZXh0Lmhvc3Q7XG4gICAgICB9IHdoaWxlIChuZXh0KTtcbiAgICB9IC8vIEdpdmUgdXAsIHRoZSByZXN1bHQgaXMgZmFsc2VcblxuXG4gIHJldHVybiBmYWxzZTtcbn0iLCAiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkge1xuICByZXR1cm4gZ2V0V2luZG93KGVsZW1lbnQpLmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG59IiwgImltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNUYWJsZUVsZW1lbnQoZWxlbWVudCkge1xuICByZXR1cm4gWyd0YWJsZScsICd0ZCcsICd0aCddLmluZGV4T2YoZ2V0Tm9kZU5hbWUoZWxlbWVudCkpID49IDA7XG59IiwgImltcG9ydCB7IGlzRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KSB7XG4gIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXJldHVybl06IGFzc3VtZSBib2R5IGlzIGFsd2F5cyBhdmFpbGFibGVcbiAgcmV0dXJuICgoaXNFbGVtZW50KGVsZW1lbnQpID8gZWxlbWVudC5vd25lckRvY3VtZW50IDogLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG4gIGVsZW1lbnQuZG9jdW1lbnQpIHx8IHdpbmRvdy5kb2N1bWVudCkuZG9jdW1lbnRFbGVtZW50O1xufSIsICJpbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4vZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBpc1NoYWRvd1Jvb3QgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRQYXJlbnROb2RlKGVsZW1lbnQpIHtcbiAgaWYgKGdldE5vZGVOYW1lKGVsZW1lbnQpID09PSAnaHRtbCcpIHtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxuXG4gIHJldHVybiAoLy8gdGhpcyBpcyBhIHF1aWNrZXIgKGJ1dCBsZXNzIHR5cGUgc2FmZSkgd2F5IHRvIHNhdmUgcXVpdGUgc29tZSBieXRlcyBmcm9tIHRoZSBidW5kbGVcbiAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dXG4gICAgLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG4gICAgZWxlbWVudC5hc3NpZ25lZFNsb3QgfHwgLy8gc3RlcCBpbnRvIHRoZSBzaGFkb3cgRE9NIG9mIHRoZSBwYXJlbnQgb2YgYSBzbG90dGVkIG5vZGVcbiAgICBlbGVtZW50LnBhcmVudE5vZGUgfHwgKCAvLyBET00gRWxlbWVudCBkZXRlY3RlZFxuICAgIGlzU2hhZG93Um9vdChlbGVtZW50KSA/IGVsZW1lbnQuaG9zdCA6IG51bGwpIHx8IC8vIFNoYWRvd1Jvb3QgZGV0ZWN0ZWRcbiAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYWxsXTogSFRNTEVsZW1lbnQgaXMgYSBOb2RlXG4gICAgZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpIC8vIGZhbGxiYWNrXG5cbiAgKTtcbn0iLCAiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcbmltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4vZ2V0Q29tcHV0ZWRTdHlsZS5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCwgaXNTaGFkb3dSb290IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IGlzVGFibGVFbGVtZW50IGZyb20gXCIuL2lzVGFibGVFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0UGFyZW50Tm9kZSBmcm9tIFwiLi9nZXRQYXJlbnROb2RlLmpzXCI7XG5pbXBvcnQgZ2V0VUFTdHJpbmcgZnJvbSBcIi4uL3V0aWxzL3VzZXJBZ2VudC5qc1wiO1xuXG5mdW5jdGlvbiBnZXRUcnVlT2Zmc2V0UGFyZW50KGVsZW1lbnQpIHtcbiAgaWYgKCFpc0hUTUxFbGVtZW50KGVsZW1lbnQpIHx8IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wb3BwZXJqcy9wb3BwZXItY29yZS9pc3N1ZXMvODM3XG4gIGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkucG9zaXRpb24gPT09ICdmaXhlZCcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBlbGVtZW50Lm9mZnNldFBhcmVudDtcbn0gLy8gYC5vZmZzZXRQYXJlbnRgIHJlcG9ydHMgYG51bGxgIGZvciBmaXhlZCBlbGVtZW50cywgd2hpbGUgYWJzb2x1dGUgZWxlbWVudHNcbi8vIHJldHVybiB0aGUgY29udGFpbmluZyBibG9ja1xuXG5cbmZ1bmN0aW9uIGdldENvbnRhaW5pbmdCbG9jayhlbGVtZW50KSB7XG4gIHZhciBpc0ZpcmVmb3ggPSAvZmlyZWZveC9pLnRlc3QoZ2V0VUFTdHJpbmcoKSk7XG4gIHZhciBpc0lFID0gL1RyaWRlbnQvaS50ZXN0KGdldFVBU3RyaW5nKCkpO1xuXG4gIGlmIChpc0lFICYmIGlzSFRNTEVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICAvLyBJbiBJRSA5LCAxMCBhbmQgMTEgZml4ZWQgZWxlbWVudHMgY29udGFpbmluZyBibG9jayBpcyBhbHdheXMgZXN0YWJsaXNoZWQgYnkgdGhlIHZpZXdwb3J0XG4gICAgdmFyIGVsZW1lbnRDc3MgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuXG4gICAgaWYgKGVsZW1lbnRDc3MucG9zaXRpb24gPT09ICdmaXhlZCcpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHZhciBjdXJyZW50Tm9kZSA9IGdldFBhcmVudE5vZGUoZWxlbWVudCk7XG5cbiAgaWYgKGlzU2hhZG93Um9vdChjdXJyZW50Tm9kZSkpIHtcbiAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLmhvc3Q7XG4gIH1cblxuICB3aGlsZSAoaXNIVE1MRWxlbWVudChjdXJyZW50Tm9kZSkgJiYgWydodG1sJywgJ2JvZHknXS5pbmRleE9mKGdldE5vZGVOYW1lKGN1cnJlbnROb2RlKSkgPCAwKSB7XG4gICAgdmFyIGNzcyA9IGdldENvbXB1dGVkU3R5bGUoY3VycmVudE5vZGUpOyAvLyBUaGlzIGlzIG5vbi1leGhhdXN0aXZlIGJ1dCBjb3ZlcnMgdGhlIG1vc3QgY29tbW9uIENTUyBwcm9wZXJ0aWVzIHRoYXRcbiAgICAvLyBjcmVhdGUgYSBjb250YWluaW5nIGJsb2NrLlxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9Db250YWluaW5nX2Jsb2NrI2lkZW50aWZ5aW5nX3RoZV9jb250YWluaW5nX2Jsb2NrXG5cbiAgICBpZiAoY3NzLnRyYW5zZm9ybSAhPT0gJ25vbmUnIHx8IGNzcy5wZXJzcGVjdGl2ZSAhPT0gJ25vbmUnIHx8IGNzcy5jb250YWluID09PSAncGFpbnQnIHx8IFsndHJhbnNmb3JtJywgJ3BlcnNwZWN0aXZlJ10uaW5kZXhPZihjc3Mud2lsbENoYW5nZSkgIT09IC0xIHx8IGlzRmlyZWZveCAmJiBjc3Mud2lsbENoYW5nZSA9PT0gJ2ZpbHRlcicgfHwgaXNGaXJlZm94ICYmIGNzcy5maWx0ZXIgJiYgY3NzLmZpbHRlciAhPT0gJ25vbmUnKSB7XG4gICAgICByZXR1cm4gY3VycmVudE5vZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn0gLy8gR2V0cyB0aGUgY2xvc2VzdCBhbmNlc3RvciBwb3NpdGlvbmVkIGVsZW1lbnQuIEhhbmRsZXMgc29tZSBlZGdlIGNhc2VzLFxuLy8gc3VjaCBhcyB0YWJsZSBhbmNlc3RvcnMgYW5kIGNyb3NzIGJyb3dzZXIgYnVncy5cblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRPZmZzZXRQYXJlbnQoZWxlbWVudCkge1xuICB2YXIgd2luZG93ID0gZ2V0V2luZG93KGVsZW1lbnQpO1xuICB2YXIgb2Zmc2V0UGFyZW50ID0gZ2V0VHJ1ZU9mZnNldFBhcmVudChlbGVtZW50KTtcblxuICB3aGlsZSAob2Zmc2V0UGFyZW50ICYmIGlzVGFibGVFbGVtZW50KG9mZnNldFBhcmVudCkgJiYgZ2V0Q29tcHV0ZWRTdHlsZShvZmZzZXRQYXJlbnQpLnBvc2l0aW9uID09PSAnc3RhdGljJykge1xuICAgIG9mZnNldFBhcmVudCA9IGdldFRydWVPZmZzZXRQYXJlbnQob2Zmc2V0UGFyZW50KTtcbiAgfVxuXG4gIGlmIChvZmZzZXRQYXJlbnQgJiYgKGdldE5vZGVOYW1lKG9mZnNldFBhcmVudCkgPT09ICdodG1sJyB8fCBnZXROb2RlTmFtZShvZmZzZXRQYXJlbnQpID09PSAnYm9keScgJiYgZ2V0Q29tcHV0ZWRTdHlsZShvZmZzZXRQYXJlbnQpLnBvc2l0aW9uID09PSAnc3RhdGljJykpIHtcbiAgICByZXR1cm4gd2luZG93O1xuICB9XG5cbiAgcmV0dXJuIG9mZnNldFBhcmVudCB8fCBnZXRDb250YWluaW5nQmxvY2soZWxlbWVudCkgfHwgd2luZG93O1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQocGxhY2VtZW50KSB7XG4gIHJldHVybiBbJ3RvcCcsICdib3R0b20nXS5pbmRleE9mKHBsYWNlbWVudCkgPj0gMCA/ICd4JyA6ICd5Jztcbn0iLCAiaW1wb3J0IHsgbWF4IGFzIG1hdGhNYXgsIG1pbiBhcyBtYXRoTWluIH0gZnJvbSBcIi4vbWF0aC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhpbihtaW4sIHZhbHVlLCBtYXgpIHtcbiAgcmV0dXJuIG1hdGhNYXgobWluLCBtYXRoTWluKHZhbHVlLCBtYXgpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB3aXRoaW5NYXhDbGFtcChtaW4sIHZhbHVlLCBtYXgpIHtcbiAgdmFyIHYgPSB3aXRoaW4obWluLCB2YWx1ZSwgbWF4KTtcbiAgcmV0dXJuIHYgPiBtYXggPyBtYXggOiB2O1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRGcmVzaFNpZGVPYmplY3QoKSB7XG4gIHJldHVybiB7XG4gICAgdG9wOiAwLFxuICAgIHJpZ2h0OiAwLFxuICAgIGJvdHRvbTogMCxcbiAgICBsZWZ0OiAwXG4gIH07XG59IiwgImltcG9ydCBnZXRGcmVzaFNpZGVPYmplY3QgZnJvbSBcIi4vZ2V0RnJlc2hTaWRlT2JqZWN0LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtZXJnZVBhZGRpbmdPYmplY3QocGFkZGluZ09iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgZ2V0RnJlc2hTaWRlT2JqZWN0KCksIHBhZGRpbmdPYmplY3QpO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBleHBhbmRUb0hhc2hNYXAodmFsdWUsIGtleXMpIHtcbiAgcmV0dXJuIGtleXMucmVkdWNlKGZ1bmN0aW9uIChoYXNoTWFwLCBrZXkpIHtcbiAgICBoYXNoTWFwW2tleV0gPSB2YWx1ZTtcbiAgICByZXR1cm4gaGFzaE1hcDtcbiAgfSwge30pO1xufSIsICJpbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldExheW91dFJlY3QgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRMYXlvdXRSZWN0LmpzXCI7XG5pbXBvcnQgY29udGFpbnMgZnJvbSBcIi4uL2RvbS11dGlscy9jb250YWlucy5qc1wiO1xuaW1wb3J0IGdldE9mZnNldFBhcmVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldE9mZnNldFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgeyB3aXRoaW4gfSBmcm9tIFwiLi4vdXRpbHMvd2l0aGluLmpzXCI7XG5pbXBvcnQgbWVyZ2VQYWRkaW5nT2JqZWN0IGZyb20gXCIuLi91dGlscy9tZXJnZVBhZGRpbmdPYmplY3QuanNcIjtcbmltcG9ydCBleHBhbmRUb0hhc2hNYXAgZnJvbSBcIi4uL3V0aWxzL2V4cGFuZFRvSGFzaE1hcC5qc1wiO1xuaW1wb3J0IHsgbGVmdCwgcmlnaHQsIGJhc2VQbGFjZW1lbnRzLCB0b3AsIGJvdHRvbSB9IGZyb20gXCIuLi9lbnVtcy5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbnZhciB0b1BhZGRpbmdPYmplY3QgPSBmdW5jdGlvbiB0b1BhZGRpbmdPYmplY3QocGFkZGluZywgc3RhdGUpIHtcbiAgcGFkZGluZyA9IHR5cGVvZiBwYWRkaW5nID09PSAnZnVuY3Rpb24nID8gcGFkZGluZyhPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5yZWN0cywge1xuICAgIHBsYWNlbWVudDogc3RhdGUucGxhY2VtZW50XG4gIH0pKSA6IHBhZGRpbmc7XG4gIHJldHVybiBtZXJnZVBhZGRpbmdPYmplY3QodHlwZW9mIHBhZGRpbmcgIT09ICdudW1iZXInID8gcGFkZGluZyA6IGV4cGFuZFRvSGFzaE1hcChwYWRkaW5nLCBiYXNlUGxhY2VtZW50cykpO1xufTtcblxuZnVuY3Rpb24gYXJyb3coX3JlZikge1xuICB2YXIgX3N0YXRlJG1vZGlmaWVyc0RhdGEkO1xuXG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBuYW1lID0gX3JlZi5uYW1lLFxuICAgICAgb3B0aW9ucyA9IF9yZWYub3B0aW9ucztcbiAgdmFyIGFycm93RWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzLmFycm93O1xuICB2YXIgcG9wcGVyT2Zmc2V0cyA9IHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cztcbiAgdmFyIGJhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHN0YXRlLnBsYWNlbWVudCk7XG4gIHZhciBheGlzID0gZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50KGJhc2VQbGFjZW1lbnQpO1xuICB2YXIgaXNWZXJ0aWNhbCA9IFtsZWZ0LCByaWdodF0uaW5kZXhPZihiYXNlUGxhY2VtZW50KSA+PSAwO1xuICB2YXIgbGVuID0gaXNWZXJ0aWNhbCA/ICdoZWlnaHQnIDogJ3dpZHRoJztcblxuICBpZiAoIWFycm93RWxlbWVudCB8fCAhcG9wcGVyT2Zmc2V0cykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBwYWRkaW5nT2JqZWN0ID0gdG9QYWRkaW5nT2JqZWN0KG9wdGlvbnMucGFkZGluZywgc3RhdGUpO1xuICB2YXIgYXJyb3dSZWN0ID0gZ2V0TGF5b3V0UmVjdChhcnJvd0VsZW1lbnQpO1xuICB2YXIgbWluUHJvcCA9IGF4aXMgPT09ICd5JyA/IHRvcCA6IGxlZnQ7XG4gIHZhciBtYXhQcm9wID0gYXhpcyA9PT0gJ3knID8gYm90dG9tIDogcmlnaHQ7XG4gIHZhciBlbmREaWZmID0gc3RhdGUucmVjdHMucmVmZXJlbmNlW2xlbl0gKyBzdGF0ZS5yZWN0cy5yZWZlcmVuY2VbYXhpc10gLSBwb3BwZXJPZmZzZXRzW2F4aXNdIC0gc3RhdGUucmVjdHMucG9wcGVyW2xlbl07XG4gIHZhciBzdGFydERpZmYgPSBwb3BwZXJPZmZzZXRzW2F4aXNdIC0gc3RhdGUucmVjdHMucmVmZXJlbmNlW2F4aXNdO1xuICB2YXIgYXJyb3dPZmZzZXRQYXJlbnQgPSBnZXRPZmZzZXRQYXJlbnQoYXJyb3dFbGVtZW50KTtcbiAgdmFyIGNsaWVudFNpemUgPSBhcnJvd09mZnNldFBhcmVudCA/IGF4aXMgPT09ICd5JyA/IGFycm93T2Zmc2V0UGFyZW50LmNsaWVudEhlaWdodCB8fCAwIDogYXJyb3dPZmZzZXRQYXJlbnQuY2xpZW50V2lkdGggfHwgMCA6IDA7XG4gIHZhciBjZW50ZXJUb1JlZmVyZW5jZSA9IGVuZERpZmYgLyAyIC0gc3RhcnREaWZmIC8gMjsgLy8gTWFrZSBzdXJlIHRoZSBhcnJvdyBkb2Vzbid0IG92ZXJmbG93IHRoZSBwb3BwZXIgaWYgdGhlIGNlbnRlciBwb2ludCBpc1xuICAvLyBvdXRzaWRlIG9mIHRoZSBwb3BwZXIgYm91bmRzXG5cbiAgdmFyIG1pbiA9IHBhZGRpbmdPYmplY3RbbWluUHJvcF07XG4gIHZhciBtYXggPSBjbGllbnRTaXplIC0gYXJyb3dSZWN0W2xlbl0gLSBwYWRkaW5nT2JqZWN0W21heFByb3BdO1xuICB2YXIgY2VudGVyID0gY2xpZW50U2l6ZSAvIDIgLSBhcnJvd1JlY3RbbGVuXSAvIDIgKyBjZW50ZXJUb1JlZmVyZW5jZTtcbiAgdmFyIG9mZnNldCA9IHdpdGhpbihtaW4sIGNlbnRlciwgbWF4KTsgLy8gUHJldmVudHMgYnJlYWtpbmcgc3ludGF4IGhpZ2hsaWdodGluZy4uLlxuXG4gIHZhciBheGlzUHJvcCA9IGF4aXM7XG4gIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0gPSAoX3N0YXRlJG1vZGlmaWVyc0RhdGEkID0ge30sIF9zdGF0ZSRtb2RpZmllcnNEYXRhJFtheGlzUHJvcF0gPSBvZmZzZXQsIF9zdGF0ZSRtb2RpZmllcnNEYXRhJC5jZW50ZXJPZmZzZXQgPSBvZmZzZXQgLSBjZW50ZXIsIF9zdGF0ZSRtb2RpZmllcnNEYXRhJCk7XG59XG5cbmZ1bmN0aW9uIGVmZmVjdChfcmVmMikge1xuICB2YXIgc3RhdGUgPSBfcmVmMi5zdGF0ZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmMi5vcHRpb25zO1xuICB2YXIgX29wdGlvbnMkZWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudCxcbiAgICAgIGFycm93RWxlbWVudCA9IF9vcHRpb25zJGVsZW1lbnQgPT09IHZvaWQgMCA/ICdbZGF0YS1wb3BwZXItYXJyb3ddJyA6IF9vcHRpb25zJGVsZW1lbnQ7XG5cbiAgaWYgKGFycm93RWxlbWVudCA9PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9IC8vIENTUyBzZWxlY3RvclxuXG5cbiAgaWYgKHR5cGVvZiBhcnJvd0VsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgYXJyb3dFbGVtZW50ID0gc3RhdGUuZWxlbWVudHMucG9wcGVyLnF1ZXJ5U2VsZWN0b3IoYXJyb3dFbGVtZW50KTtcblxuICAgIGlmICghYXJyb3dFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgaWYgKCFjb250YWlucyhzdGF0ZS5lbGVtZW50cy5wb3BwZXIsIGFycm93RWxlbWVudCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzdGF0ZS5lbGVtZW50cy5hcnJvdyA9IGFycm93RWxlbWVudDtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2Fycm93JyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdtYWluJyxcbiAgZm46IGFycm93LFxuICBlZmZlY3Q6IGVmZmVjdCxcbiAgcmVxdWlyZXM6IFsncG9wcGVyT2Zmc2V0cyddLFxuICByZXF1aXJlc0lmRXhpc3RzOiBbJ3ByZXZlbnRPdmVyZmxvdyddXG59OyIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRWYXJpYXRpb24ocGxhY2VtZW50KSB7XG4gIHJldHVybiBwbGFjZW1lbnQuc3BsaXQoJy0nKVsxXTtcbn0iLCAiaW1wb3J0IHsgdG9wLCBsZWZ0LCByaWdodCwgYm90dG9tLCBlbmQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanNcIjtcbmltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRXaW5kb3cuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4uL2RvbS11dGlscy9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0Q29tcHV0ZWRTdHlsZS5qc1wiO1xuaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRWYXJpYXRpb24gZnJvbSBcIi4uL3V0aWxzL2dldFZhcmlhdGlvbi5qc1wiO1xuaW1wb3J0IHsgcm91bmQgfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbnZhciB1bnNldFNpZGVzID0ge1xuICB0b3A6ICdhdXRvJyxcbiAgcmlnaHQ6ICdhdXRvJyxcbiAgYm90dG9tOiAnYXV0bycsXG4gIGxlZnQ6ICdhdXRvJ1xufTsgLy8gUm91bmQgdGhlIG9mZnNldHMgdG8gdGhlIG5lYXJlc3Qgc3VpdGFibGUgc3VicGl4ZWwgYmFzZWQgb24gdGhlIERQUi5cbi8vIFpvb21pbmcgY2FuIGNoYW5nZSB0aGUgRFBSLCBidXQgaXQgc2VlbXMgdG8gcmVwb3J0IGEgdmFsdWUgdGhhdCB3aWxsXG4vLyBjbGVhbmx5IGRpdmlkZSB0aGUgdmFsdWVzIGludG8gdGhlIGFwcHJvcHJpYXRlIHN1YnBpeGVscy5cblxuZnVuY3Rpb24gcm91bmRPZmZzZXRzQnlEUFIoX3JlZiwgd2luKSB7XG4gIHZhciB4ID0gX3JlZi54LFxuICAgICAgeSA9IF9yZWYueTtcbiAgdmFyIGRwciA9IHdpbi5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG4gIHJldHVybiB7XG4gICAgeDogcm91bmQoeCAqIGRwcikgLyBkcHIgfHwgMCxcbiAgICB5OiByb3VuZCh5ICogZHByKSAvIGRwciB8fCAwXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXBUb1N0eWxlcyhfcmVmMikge1xuICB2YXIgX09iamVjdCRhc3NpZ24yO1xuXG4gIHZhciBwb3BwZXIgPSBfcmVmMi5wb3BwZXIsXG4gICAgICBwb3BwZXJSZWN0ID0gX3JlZjIucG9wcGVyUmVjdCxcbiAgICAgIHBsYWNlbWVudCA9IF9yZWYyLnBsYWNlbWVudCxcbiAgICAgIHZhcmlhdGlvbiA9IF9yZWYyLnZhcmlhdGlvbixcbiAgICAgIG9mZnNldHMgPSBfcmVmMi5vZmZzZXRzLFxuICAgICAgcG9zaXRpb24gPSBfcmVmMi5wb3NpdGlvbixcbiAgICAgIGdwdUFjY2VsZXJhdGlvbiA9IF9yZWYyLmdwdUFjY2VsZXJhdGlvbixcbiAgICAgIGFkYXB0aXZlID0gX3JlZjIuYWRhcHRpdmUsXG4gICAgICByb3VuZE9mZnNldHMgPSBfcmVmMi5yb3VuZE9mZnNldHMsXG4gICAgICBpc0ZpeGVkID0gX3JlZjIuaXNGaXhlZDtcbiAgdmFyIF9vZmZzZXRzJHggPSBvZmZzZXRzLngsXG4gICAgICB4ID0gX29mZnNldHMkeCA9PT0gdm9pZCAwID8gMCA6IF9vZmZzZXRzJHgsXG4gICAgICBfb2Zmc2V0cyR5ID0gb2Zmc2V0cy55LFxuICAgICAgeSA9IF9vZmZzZXRzJHkgPT09IHZvaWQgMCA/IDAgOiBfb2Zmc2V0cyR5O1xuXG4gIHZhciBfcmVmMyA9IHR5cGVvZiByb3VuZE9mZnNldHMgPT09ICdmdW5jdGlvbicgPyByb3VuZE9mZnNldHMoe1xuICAgIHg6IHgsXG4gICAgeTogeVxuICB9KSA6IHtcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfTtcblxuICB4ID0gX3JlZjMueDtcbiAgeSA9IF9yZWYzLnk7XG4gIHZhciBoYXNYID0gb2Zmc2V0cy5oYXNPd25Qcm9wZXJ0eSgneCcpO1xuICB2YXIgaGFzWSA9IG9mZnNldHMuaGFzT3duUHJvcGVydHkoJ3knKTtcbiAgdmFyIHNpZGVYID0gbGVmdDtcbiAgdmFyIHNpZGVZID0gdG9wO1xuICB2YXIgd2luID0gd2luZG93O1xuXG4gIGlmIChhZGFwdGl2ZSkge1xuICAgIHZhciBvZmZzZXRQYXJlbnQgPSBnZXRPZmZzZXRQYXJlbnQocG9wcGVyKTtcbiAgICB2YXIgaGVpZ2h0UHJvcCA9ICdjbGllbnRIZWlnaHQnO1xuICAgIHZhciB3aWR0aFByb3AgPSAnY2xpZW50V2lkdGgnO1xuXG4gICAgaWYgKG9mZnNldFBhcmVudCA9PT0gZ2V0V2luZG93KHBvcHBlcikpIHtcbiAgICAgIG9mZnNldFBhcmVudCA9IGdldERvY3VtZW50RWxlbWVudChwb3BwZXIpO1xuXG4gICAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShvZmZzZXRQYXJlbnQpLnBvc2l0aW9uICE9PSAnc3RhdGljJyAmJiBwb3NpdGlvbiA9PT0gJ2Fic29sdXRlJykge1xuICAgICAgICBoZWlnaHRQcm9wID0gJ3Njcm9sbEhlaWdodCc7XG4gICAgICAgIHdpZHRoUHJvcCA9ICdzY3JvbGxXaWR0aCc7XG4gICAgICB9XG4gICAgfSAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYXN0XTogZm9yY2UgdHlwZSByZWZpbmVtZW50LCB3ZSBjb21wYXJlIG9mZnNldFBhcmVudCB3aXRoIHdpbmRvdyBhYm92ZSwgYnV0IEZsb3cgZG9lc24ndCBkZXRlY3QgaXRcblxuXG4gICAgb2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50O1xuXG4gICAgaWYgKHBsYWNlbWVudCA9PT0gdG9wIHx8IChwbGFjZW1lbnQgPT09IGxlZnQgfHwgcGxhY2VtZW50ID09PSByaWdodCkgJiYgdmFyaWF0aW9uID09PSBlbmQpIHtcbiAgICAgIHNpZGVZID0gYm90dG9tO1xuICAgICAgdmFyIG9mZnNldFkgPSBpc0ZpeGVkICYmIG9mZnNldFBhcmVudCA9PT0gd2luICYmIHdpbi52aXN1YWxWaWV3cG9ydCA/IHdpbi52aXN1YWxWaWV3cG9ydC5oZWlnaHQgOiAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgICAgIG9mZnNldFBhcmVudFtoZWlnaHRQcm9wXTtcbiAgICAgIHkgLT0gb2Zmc2V0WSAtIHBvcHBlclJlY3QuaGVpZ2h0O1xuICAgICAgeSAqPSBncHVBY2NlbGVyYXRpb24gPyAxIDogLTE7XG4gICAgfVxuXG4gICAgaWYgKHBsYWNlbWVudCA9PT0gbGVmdCB8fCAocGxhY2VtZW50ID09PSB0b3AgfHwgcGxhY2VtZW50ID09PSBib3R0b20pICYmIHZhcmlhdGlvbiA9PT0gZW5kKSB7XG4gICAgICBzaWRlWCA9IHJpZ2h0O1xuICAgICAgdmFyIG9mZnNldFggPSBpc0ZpeGVkICYmIG9mZnNldFBhcmVudCA9PT0gd2luICYmIHdpbi52aXN1YWxWaWV3cG9ydCA/IHdpbi52aXN1YWxWaWV3cG9ydC53aWR0aCA6IC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXVxuICAgICAgb2Zmc2V0UGFyZW50W3dpZHRoUHJvcF07XG4gICAgICB4IC09IG9mZnNldFggLSBwb3BwZXJSZWN0LndpZHRoO1xuICAgICAgeCAqPSBncHVBY2NlbGVyYXRpb24gPyAxIDogLTE7XG4gICAgfVxuICB9XG5cbiAgdmFyIGNvbW1vblN0eWxlcyA9IE9iamVjdC5hc3NpZ24oe1xuICAgIHBvc2l0aW9uOiBwb3NpdGlvblxuICB9LCBhZGFwdGl2ZSAmJiB1bnNldFNpZGVzKTtcblxuICB2YXIgX3JlZjQgPSByb3VuZE9mZnNldHMgPT09IHRydWUgPyByb3VuZE9mZnNldHNCeURQUih7XG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH0sIGdldFdpbmRvdyhwb3BwZXIpKSA6IHtcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfTtcblxuICB4ID0gX3JlZjQueDtcbiAgeSA9IF9yZWY0Lnk7XG5cbiAgaWYgKGdwdUFjY2VsZXJhdGlvbikge1xuICAgIHZhciBfT2JqZWN0JGFzc2lnbjtcblxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjb21tb25TdHlsZXMsIChfT2JqZWN0JGFzc2lnbiA9IHt9LCBfT2JqZWN0JGFzc2lnbltzaWRlWV0gPSBoYXNZID8gJzAnIDogJycsIF9PYmplY3QkYXNzaWduW3NpZGVYXSA9IGhhc1ggPyAnMCcgOiAnJywgX09iamVjdCRhc3NpZ24udHJhbnNmb3JtID0gKHdpbi5kZXZpY2VQaXhlbFJhdGlvIHx8IDEpIDw9IDEgPyBcInRyYW5zbGF0ZShcIiArIHggKyBcInB4LCBcIiArIHkgKyBcInB4KVwiIDogXCJ0cmFuc2xhdGUzZChcIiArIHggKyBcInB4LCBcIiArIHkgKyBcInB4LCAwKVwiLCBfT2JqZWN0JGFzc2lnbikpO1xuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblN0eWxlcywgKF9PYmplY3QkYXNzaWduMiA9IHt9LCBfT2JqZWN0JGFzc2lnbjJbc2lkZVldID0gaGFzWSA/IHkgKyBcInB4XCIgOiAnJywgX09iamVjdCRhc3NpZ24yW3NpZGVYXSA9IGhhc1ggPyB4ICsgXCJweFwiIDogJycsIF9PYmplY3QkYXNzaWduMi50cmFuc2Zvcm0gPSAnJywgX09iamVjdCRhc3NpZ24yKSk7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVTdHlsZXMoX3JlZjUpIHtcbiAgdmFyIHN0YXRlID0gX3JlZjUuc3RhdGUsXG4gICAgICBvcHRpb25zID0gX3JlZjUub3B0aW9ucztcbiAgdmFyIF9vcHRpb25zJGdwdUFjY2VsZXJhdCA9IG9wdGlvbnMuZ3B1QWNjZWxlcmF0aW9uLFxuICAgICAgZ3B1QWNjZWxlcmF0aW9uID0gX29wdGlvbnMkZ3B1QWNjZWxlcmF0ID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkZ3B1QWNjZWxlcmF0LFxuICAgICAgX29wdGlvbnMkYWRhcHRpdmUgPSBvcHRpb25zLmFkYXB0aXZlLFxuICAgICAgYWRhcHRpdmUgPSBfb3B0aW9ucyRhZGFwdGl2ZSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJGFkYXB0aXZlLFxuICAgICAgX29wdGlvbnMkcm91bmRPZmZzZXRzID0gb3B0aW9ucy5yb3VuZE9mZnNldHMsXG4gICAgICByb3VuZE9mZnNldHMgPSBfb3B0aW9ucyRyb3VuZE9mZnNldHMgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRyb3VuZE9mZnNldHM7XG4gIHZhciBjb21tb25TdHlsZXMgPSB7XG4gICAgcGxhY2VtZW50OiBnZXRCYXNlUGxhY2VtZW50KHN0YXRlLnBsYWNlbWVudCksXG4gICAgdmFyaWF0aW9uOiBnZXRWYXJpYXRpb24oc3RhdGUucGxhY2VtZW50KSxcbiAgICBwb3BwZXI6IHN0YXRlLmVsZW1lbnRzLnBvcHBlcixcbiAgICBwb3BwZXJSZWN0OiBzdGF0ZS5yZWN0cy5wb3BwZXIsXG4gICAgZ3B1QWNjZWxlcmF0aW9uOiBncHVBY2NlbGVyYXRpb24sXG4gICAgaXNGaXhlZDogc3RhdGUub3B0aW9ucy5zdHJhdGVneSA9PT0gJ2ZpeGVkJ1xuICB9O1xuXG4gIGlmIChzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMgIT0gbnVsbCkge1xuICAgIHN0YXRlLnN0eWxlcy5wb3BwZXIgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5zdHlsZXMucG9wcGVyLCBtYXBUb1N0eWxlcyhPYmplY3QuYXNzaWduKHt9LCBjb21tb25TdHlsZXMsIHtcbiAgICAgIG9mZnNldHM6IHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cyxcbiAgICAgIHBvc2l0aW9uOiBzdGF0ZS5vcHRpb25zLnN0cmF0ZWd5LFxuICAgICAgYWRhcHRpdmU6IGFkYXB0aXZlLFxuICAgICAgcm91bmRPZmZzZXRzOiByb3VuZE9mZnNldHNcbiAgICB9KSkpO1xuICB9XG5cbiAgaWYgKHN0YXRlLm1vZGlmaWVyc0RhdGEuYXJyb3cgIT0gbnVsbCkge1xuICAgIHN0YXRlLnN0eWxlcy5hcnJvdyA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLnN0eWxlcy5hcnJvdywgbWFwVG9TdHlsZXMoT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uU3R5bGVzLCB7XG4gICAgICBvZmZzZXRzOiBzdGF0ZS5tb2RpZmllcnNEYXRhLmFycm93LFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICBhZGFwdGl2ZTogZmFsc2UsXG4gICAgICByb3VuZE9mZnNldHM6IHJvdW5kT2Zmc2V0c1xuICAgIH0pKSk7XG4gIH1cblxuICBzdGF0ZS5hdHRyaWJ1dGVzLnBvcHBlciA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLmF0dHJpYnV0ZXMucG9wcGVyLCB7XG4gICAgJ2RhdGEtcG9wcGVyLXBsYWNlbWVudCc6IHN0YXRlLnBsYWNlbWVudFxuICB9KTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2NvbXB1dGVTdHlsZXMnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ2JlZm9yZVdyaXRlJyxcbiAgZm46IGNvbXB1dGVTdHlsZXMsXG4gIGRhdGE6IHt9XG59OyIsICJpbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0V2luZG93LmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxudmFyIHBhc3NpdmUgPSB7XG4gIHBhc3NpdmU6IHRydWVcbn07XG5cbmZ1bmN0aW9uIGVmZmVjdChfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBpbnN0YW5jZSA9IF9yZWYuaW5zdGFuY2UsXG4gICAgICBvcHRpb25zID0gX3JlZi5vcHRpb25zO1xuICB2YXIgX29wdGlvbnMkc2Nyb2xsID0gb3B0aW9ucy5zY3JvbGwsXG4gICAgICBzY3JvbGwgPSBfb3B0aW9ucyRzY3JvbGwgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRzY3JvbGwsXG4gICAgICBfb3B0aW9ucyRyZXNpemUgPSBvcHRpb25zLnJlc2l6ZSxcbiAgICAgIHJlc2l6ZSA9IF9vcHRpb25zJHJlc2l6ZSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHJlc2l6ZTtcbiAgdmFyIHdpbmRvdyA9IGdldFdpbmRvdyhzdGF0ZS5lbGVtZW50cy5wb3BwZXIpO1xuICB2YXIgc2Nyb2xsUGFyZW50cyA9IFtdLmNvbmNhdChzdGF0ZS5zY3JvbGxQYXJlbnRzLnJlZmVyZW5jZSwgc3RhdGUuc2Nyb2xsUGFyZW50cy5wb3BwZXIpO1xuXG4gIGlmIChzY3JvbGwpIHtcbiAgICBzY3JvbGxQYXJlbnRzLmZvckVhY2goZnVuY3Rpb24gKHNjcm9sbFBhcmVudCkge1xuICAgICAgc2Nyb2xsUGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGluc3RhbmNlLnVwZGF0ZSwgcGFzc2l2ZSk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAocmVzaXplKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGluc3RhbmNlLnVwZGF0ZSwgcGFzc2l2ZSk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmIChzY3JvbGwpIHtcbiAgICAgIHNjcm9sbFBhcmVudHMuZm9yRWFjaChmdW5jdGlvbiAoc2Nyb2xsUGFyZW50KSB7XG4gICAgICAgIHNjcm9sbFBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBpbnN0YW5jZS51cGRhdGUsIHBhc3NpdmUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHJlc2l6ZSkge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGluc3RhbmNlLnVwZGF0ZSwgcGFzc2l2ZSk7XG4gICAgfVxuICB9O1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnZXZlbnRMaXN0ZW5lcnMnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ3dyaXRlJyxcbiAgZm46IGZ1bmN0aW9uIGZuKCkge30sXG4gIGVmZmVjdDogZWZmZWN0LFxuICBkYXRhOiB7fVxufTsiLCAidmFyIGhhc2ggPSB7XG4gIGxlZnQ6ICdyaWdodCcsXG4gIHJpZ2h0OiAnbGVmdCcsXG4gIGJvdHRvbTogJ3RvcCcsXG4gIHRvcDogJ2JvdHRvbSdcbn07XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRPcHBvc2l0ZVBsYWNlbWVudChwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHBsYWNlbWVudC5yZXBsYWNlKC9sZWZ0fHJpZ2h0fGJvdHRvbXx0b3AvZywgZnVuY3Rpb24gKG1hdGNoZWQpIHtcbiAgICByZXR1cm4gaGFzaFttYXRjaGVkXTtcbiAgfSk7XG59IiwgInZhciBoYXNoID0ge1xuICBzdGFydDogJ2VuZCcsXG4gIGVuZDogJ3N0YXJ0J1xufTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50KHBsYWNlbWVudCkge1xuICByZXR1cm4gcGxhY2VtZW50LnJlcGxhY2UoL3N0YXJ0fGVuZC9nLCBmdW5jdGlvbiAobWF0Y2hlZCkge1xuICAgIHJldHVybiBoYXNoW21hdGNoZWRdO1xuICB9KTtcbn0iLCAiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFdpbmRvd1Njcm9sbChub2RlKSB7XG4gIHZhciB3aW4gPSBnZXRXaW5kb3cobm9kZSk7XG4gIHZhciBzY3JvbGxMZWZ0ID0gd2luLnBhZ2VYT2Zmc2V0O1xuICB2YXIgc2Nyb2xsVG9wID0gd2luLnBhZ2VZT2Zmc2V0O1xuICByZXR1cm4ge1xuICAgIHNjcm9sbExlZnQ6IHNjcm9sbExlZnQsXG4gICAgc2Nyb2xsVG9wOiBzY3JvbGxUb3BcbiAgfTtcbn0iLCAiaW1wb3J0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmcm9tIFwiLi9nZXRCb3VuZGluZ0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4vZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93U2Nyb2xsIGZyb20gXCIuL2dldFdpbmRvd1Njcm9sbC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0V2luZG93U2Nyb2xsQmFyWChlbGVtZW50KSB7XG4gIC8vIElmIDxodG1sPiBoYXMgYSBDU1Mgd2lkdGggZ3JlYXRlciB0aGFuIHRoZSB2aWV3cG9ydCwgdGhlbiB0aGlzIHdpbGwgYmVcbiAgLy8gaW5jb3JyZWN0IGZvciBSVEwuXG4gIC8vIFBvcHBlciAxIGlzIGJyb2tlbiBpbiB0aGlzIGNhc2UgYW5kIG5ldmVyIGhhZCBhIGJ1ZyByZXBvcnQgc28gbGV0J3MgYXNzdW1lXG4gIC8vIGl0J3Mgbm90IGFuIGlzc3VlLiBJIGRvbid0IHRoaW5rIGFueW9uZSBldmVyIHNwZWNpZmllcyB3aWR0aCBvbiA8aHRtbD5cbiAgLy8gYW55d2F5LlxuICAvLyBCcm93c2VycyB3aGVyZSB0aGUgbGVmdCBzY3JvbGxiYXIgZG9lc24ndCBjYXVzZSBhbiBpc3N1ZSByZXBvcnQgYDBgIGZvclxuICAvLyB0aGlzIChlLmcuIEVkZ2UgMjAxOSwgSUUxMSwgU2FmYXJpKVxuICByZXR1cm4gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KSkubGVmdCArIGdldFdpbmRvd1Njcm9sbChlbGVtZW50KS5zY3JvbGxMZWZ0O1xufSIsICJpbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRXaW5kb3dTY3JvbGxCYXJYIGZyb20gXCIuL2dldFdpbmRvd1Njcm9sbEJhclguanNcIjtcbmltcG9ydCBpc0xheW91dFZpZXdwb3J0IGZyb20gXCIuL2lzTGF5b3V0Vmlld3BvcnQuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFZpZXdwb3J0UmVjdChlbGVtZW50LCBzdHJhdGVneSkge1xuICB2YXIgd2luID0gZ2V0V2luZG93KGVsZW1lbnQpO1xuICB2YXIgaHRtbCA9IGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KTtcbiAgdmFyIHZpc3VhbFZpZXdwb3J0ID0gd2luLnZpc3VhbFZpZXdwb3J0O1xuICB2YXIgd2lkdGggPSBodG1sLmNsaWVudFdpZHRoO1xuICB2YXIgaGVpZ2h0ID0gaHRtbC5jbGllbnRIZWlnaHQ7XG4gIHZhciB4ID0gMDtcbiAgdmFyIHkgPSAwO1xuXG4gIGlmICh2aXN1YWxWaWV3cG9ydCkge1xuICAgIHdpZHRoID0gdmlzdWFsVmlld3BvcnQud2lkdGg7XG4gICAgaGVpZ2h0ID0gdmlzdWFsVmlld3BvcnQuaGVpZ2h0O1xuICAgIHZhciBsYXlvdXRWaWV3cG9ydCA9IGlzTGF5b3V0Vmlld3BvcnQoKTtcblxuICAgIGlmIChsYXlvdXRWaWV3cG9ydCB8fCAhbGF5b3V0Vmlld3BvcnQgJiYgc3RyYXRlZ3kgPT09ICdmaXhlZCcpIHtcbiAgICAgIHggPSB2aXN1YWxWaWV3cG9ydC5vZmZzZXRMZWZ0O1xuICAgICAgeSA9IHZpc3VhbFZpZXdwb3J0Lm9mZnNldFRvcDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHdpZHRoOiB3aWR0aCxcbiAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICB4OiB4ICsgZ2V0V2luZG93U2Nyb2xsQmFyWChlbGVtZW50KSxcbiAgICB5OiB5XG4gIH07XG59IiwgImltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4vZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSBmcm9tIFwiLi9nZXRDb21wdXRlZFN0eWxlLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93U2Nyb2xsQmFyWCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGxCYXJYLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93U2Nyb2xsIGZyb20gXCIuL2dldFdpbmRvd1Njcm9sbC5qc1wiO1xuaW1wb3J0IHsgbWF4IH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjsgLy8gR2V0cyB0aGUgZW50aXJlIHNpemUgb2YgdGhlIHNjcm9sbGFibGUgZG9jdW1lbnQgYXJlYSwgZXZlbiBleHRlbmRpbmcgb3V0c2lkZVxuLy8gb2YgdGhlIGA8aHRtbD5gIGFuZCBgPGJvZHk+YCByZWN0IGJvdW5kcyBpZiBob3Jpem9udGFsbHkgc2Nyb2xsYWJsZVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXREb2N1bWVudFJlY3QoZWxlbWVudCkge1xuICB2YXIgX2VsZW1lbnQkb3duZXJEb2N1bWVuO1xuXG4gIHZhciBodG1sID0gZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpO1xuICB2YXIgd2luU2Nyb2xsID0gZ2V0V2luZG93U2Nyb2xsKGVsZW1lbnQpO1xuICB2YXIgYm9keSA9IChfZWxlbWVudCRvd25lckRvY3VtZW4gPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfZWxlbWVudCRvd25lckRvY3VtZW4uYm9keTtcbiAgdmFyIHdpZHRoID0gbWF4KGh0bWwuc2Nyb2xsV2lkdGgsIGh0bWwuY2xpZW50V2lkdGgsIGJvZHkgPyBib2R5LnNjcm9sbFdpZHRoIDogMCwgYm9keSA/IGJvZHkuY2xpZW50V2lkdGggOiAwKTtcbiAgdmFyIGhlaWdodCA9IG1heChodG1sLnNjcm9sbEhlaWdodCwgaHRtbC5jbGllbnRIZWlnaHQsIGJvZHkgPyBib2R5LnNjcm9sbEhlaWdodCA6IDAsIGJvZHkgPyBib2R5LmNsaWVudEhlaWdodCA6IDApO1xuICB2YXIgeCA9IC13aW5TY3JvbGwuc2Nyb2xsTGVmdCArIGdldFdpbmRvd1Njcm9sbEJhclgoZWxlbWVudCk7XG4gIHZhciB5ID0gLXdpblNjcm9sbC5zY3JvbGxUb3A7XG5cbiAgaWYgKGdldENvbXB1dGVkU3R5bGUoYm9keSB8fCBodG1sKS5kaXJlY3Rpb24gPT09ICdydGwnKSB7XG4gICAgeCArPSBtYXgoaHRtbC5jbGllbnRXaWR0aCwgYm9keSA/IGJvZHkuY2xpZW50V2lkdGggOiAwKSAtIHdpZHRoO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH07XG59IiwgImltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2Nyb2xsUGFyZW50KGVsZW1lbnQpIHtcbiAgLy8gRmlyZWZveCB3YW50cyB1cyB0byBjaGVjayBgLXhgIGFuZCBgLXlgIHZhcmlhdGlvbnMgYXMgd2VsbFxuICB2YXIgX2dldENvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLFxuICAgICAgb3ZlcmZsb3cgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5vdmVyZmxvdyxcbiAgICAgIG92ZXJmbG93WCA9IF9nZXRDb21wdXRlZFN0eWxlLm92ZXJmbG93WCxcbiAgICAgIG92ZXJmbG93WSA9IF9nZXRDb21wdXRlZFN0eWxlLm92ZXJmbG93WTtcblxuICByZXR1cm4gL2F1dG98c2Nyb2xsfG92ZXJsYXl8aGlkZGVuLy50ZXN0KG92ZXJmbG93ICsgb3ZlcmZsb3dZICsgb3ZlcmZsb3dYKTtcbn0iLCAiaW1wb3J0IGdldFBhcmVudE5vZGUgZnJvbSBcIi4vZ2V0UGFyZW50Tm9kZS5qc1wiO1xuaW1wb3J0IGlzU2Nyb2xsUGFyZW50IGZyb20gXCIuL2lzU2Nyb2xsUGFyZW50LmpzXCI7XG5pbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRTY3JvbGxQYXJlbnQobm9kZSkge1xuICBpZiAoWydodG1sJywgJ2JvZHknLCAnI2RvY3VtZW50J10uaW5kZXhPZihnZXROb2RlTmFtZShub2RlKSkgPj0gMCkge1xuICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXJldHVybl06IGFzc3VtZSBib2R5IGlzIGFsd2F5cyBhdmFpbGFibGVcbiAgICByZXR1cm4gbm9kZS5vd25lckRvY3VtZW50LmJvZHk7XG4gIH1cblxuICBpZiAoaXNIVE1MRWxlbWVudChub2RlKSAmJiBpc1Njcm9sbFBhcmVudChub2RlKSkge1xuICAgIHJldHVybiBub2RlO1xuICB9XG5cbiAgcmV0dXJuIGdldFNjcm9sbFBhcmVudChnZXRQYXJlbnROb2RlKG5vZGUpKTtcbn0iLCAiaW1wb3J0IGdldFNjcm9sbFBhcmVudCBmcm9tIFwiLi9nZXRTY3JvbGxQYXJlbnQuanNcIjtcbmltcG9ydCBnZXRQYXJlbnROb2RlIGZyb20gXCIuL2dldFBhcmVudE5vZGUuanNcIjtcbmltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgaXNTY3JvbGxQYXJlbnQgZnJvbSBcIi4vaXNTY3JvbGxQYXJlbnQuanNcIjtcbi8qXG5naXZlbiBhIERPTSBlbGVtZW50LCByZXR1cm4gdGhlIGxpc3Qgb2YgYWxsIHNjcm9sbCBwYXJlbnRzLCB1cCB0aGUgbGlzdCBvZiBhbmNlc29yc1xudW50aWwgd2UgZ2V0IHRvIHRoZSB0b3Agd2luZG93IG9iamVjdC4gVGhpcyBsaXN0IGlzIHdoYXQgd2UgYXR0YWNoIHNjcm9sbCBsaXN0ZW5lcnNcbnRvLCBiZWNhdXNlIGlmIGFueSBvZiB0aGVzZSBwYXJlbnQgZWxlbWVudHMgc2Nyb2xsLCB3ZSdsbCBuZWVkIHRvIHJlLWNhbGN1bGF0ZSB0aGVcbnJlZmVyZW5jZSBlbGVtZW50J3MgcG9zaXRpb24uXG4qL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsaXN0U2Nyb2xsUGFyZW50cyhlbGVtZW50LCBsaXN0KSB7XG4gIHZhciBfZWxlbWVudCRvd25lckRvY3VtZW47XG5cbiAgaWYgKGxpc3QgPT09IHZvaWQgMCkge1xuICAgIGxpc3QgPSBbXTtcbiAgfVxuXG4gIHZhciBzY3JvbGxQYXJlbnQgPSBnZXRTY3JvbGxQYXJlbnQoZWxlbWVudCk7XG4gIHZhciBpc0JvZHkgPSBzY3JvbGxQYXJlbnQgPT09ICgoX2VsZW1lbnQkb3duZXJEb2N1bWVuID0gZWxlbWVudC5vd25lckRvY3VtZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2VsZW1lbnQkb3duZXJEb2N1bWVuLmJvZHkpO1xuICB2YXIgd2luID0gZ2V0V2luZG93KHNjcm9sbFBhcmVudCk7XG4gIHZhciB0YXJnZXQgPSBpc0JvZHkgPyBbd2luXS5jb25jYXQod2luLnZpc3VhbFZpZXdwb3J0IHx8IFtdLCBpc1Njcm9sbFBhcmVudChzY3JvbGxQYXJlbnQpID8gc2Nyb2xsUGFyZW50IDogW10pIDogc2Nyb2xsUGFyZW50O1xuICB2YXIgdXBkYXRlZExpc3QgPSBsaXN0LmNvbmNhdCh0YXJnZXQpO1xuICByZXR1cm4gaXNCb2R5ID8gdXBkYXRlZExpc3QgOiAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYWxsXTogaXNCb2R5IHRlbGxzIHVzIHRhcmdldCB3aWxsIGJlIGFuIEhUTUxFbGVtZW50IGhlcmVcbiAgdXBkYXRlZExpc3QuY29uY2F0KGxpc3RTY3JvbGxQYXJlbnRzKGdldFBhcmVudE5vZGUodGFyZ2V0KSkpO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZWN0VG9DbGllbnRSZWN0KHJlY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHJlY3QsIHtcbiAgICBsZWZ0OiByZWN0LngsXG4gICAgdG9wOiByZWN0LnksXG4gICAgcmlnaHQ6IHJlY3QueCArIHJlY3Qud2lkdGgsXG4gICAgYm90dG9tOiByZWN0LnkgKyByZWN0LmhlaWdodFxuICB9KTtcbn0iLCAiaW1wb3J0IHsgdmlld3BvcnQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBnZXRWaWV3cG9ydFJlY3QgZnJvbSBcIi4vZ2V0Vmlld3BvcnRSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRSZWN0IGZyb20gXCIuL2dldERvY3VtZW50UmVjdC5qc1wiO1xuaW1wb3J0IGxpc3RTY3JvbGxQYXJlbnRzIGZyb20gXCIuL2xpc3RTY3JvbGxQYXJlbnRzLmpzXCI7XG5pbXBvcnQgZ2V0T2Zmc2V0UGFyZW50IGZyb20gXCIuL2dldE9mZnNldFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmltcG9ydCB7IGlzRWxlbWVudCwgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZnJvbSBcIi4vZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0UGFyZW50Tm9kZSBmcm9tIFwiLi9nZXRQYXJlbnROb2RlLmpzXCI7XG5pbXBvcnQgY29udGFpbnMgZnJvbSBcIi4vY29udGFpbnMuanNcIjtcbmltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IHJlY3RUb0NsaWVudFJlY3QgZnJvbSBcIi4uL3V0aWxzL3JlY3RUb0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCB7IG1heCwgbWluIH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjtcblxuZnVuY3Rpb24gZ2V0SW5uZXJCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudCwgc3RyYXRlZ3kpIHtcbiAgdmFyIHJlY3QgPSBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudCwgZmFsc2UsIHN0cmF0ZWd5ID09PSAnZml4ZWQnKTtcbiAgcmVjdC50b3AgPSByZWN0LnRvcCArIGVsZW1lbnQuY2xpZW50VG9wO1xuICByZWN0LmxlZnQgPSByZWN0LmxlZnQgKyBlbGVtZW50LmNsaWVudExlZnQ7XG4gIHJlY3QuYm90dG9tID0gcmVjdC50b3AgKyBlbGVtZW50LmNsaWVudEhlaWdodDtcbiAgcmVjdC5yaWdodCA9IHJlY3QubGVmdCArIGVsZW1lbnQuY2xpZW50V2lkdGg7XG4gIHJlY3Qud2lkdGggPSBlbGVtZW50LmNsaWVudFdpZHRoO1xuICByZWN0LmhlaWdodCA9IGVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICByZWN0LnggPSByZWN0LmxlZnQ7XG4gIHJlY3QueSA9IHJlY3QudG9wO1xuICByZXR1cm4gcmVjdDtcbn1cblxuZnVuY3Rpb24gZ2V0Q2xpZW50UmVjdEZyb21NaXhlZFR5cGUoZWxlbWVudCwgY2xpcHBpbmdQYXJlbnQsIHN0cmF0ZWd5KSB7XG4gIHJldHVybiBjbGlwcGluZ1BhcmVudCA9PT0gdmlld3BvcnQgPyByZWN0VG9DbGllbnRSZWN0KGdldFZpZXdwb3J0UmVjdChlbGVtZW50LCBzdHJhdGVneSkpIDogaXNFbGVtZW50KGNsaXBwaW5nUGFyZW50KSA/IGdldElubmVyQm91bmRpbmdDbGllbnRSZWN0KGNsaXBwaW5nUGFyZW50LCBzdHJhdGVneSkgOiByZWN0VG9DbGllbnRSZWN0KGdldERvY3VtZW50UmVjdChnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCkpKTtcbn0gLy8gQSBcImNsaXBwaW5nIHBhcmVudFwiIGlzIGFuIG92ZXJmbG93YWJsZSBjb250YWluZXIgd2l0aCB0aGUgY2hhcmFjdGVyaXN0aWMgb2Zcbi8vIGNsaXBwaW5nIChvciBoaWRpbmcpIG92ZXJmbG93aW5nIGVsZW1lbnRzIHdpdGggYSBwb3NpdGlvbiBkaWZmZXJlbnQgZnJvbVxuLy8gYGluaXRpYWxgXG5cblxuZnVuY3Rpb24gZ2V0Q2xpcHBpbmdQYXJlbnRzKGVsZW1lbnQpIHtcbiAgdmFyIGNsaXBwaW5nUGFyZW50cyA9IGxpc3RTY3JvbGxQYXJlbnRzKGdldFBhcmVudE5vZGUoZWxlbWVudCkpO1xuICB2YXIgY2FuRXNjYXBlQ2xpcHBpbmcgPSBbJ2Fic29sdXRlJywgJ2ZpeGVkJ10uaW5kZXhPZihnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLnBvc2l0aW9uKSA+PSAwO1xuICB2YXIgY2xpcHBlckVsZW1lbnQgPSBjYW5Fc2NhcGVDbGlwcGluZyAmJiBpc0hUTUxFbGVtZW50KGVsZW1lbnQpID8gZ2V0T2Zmc2V0UGFyZW50KGVsZW1lbnQpIDogZWxlbWVudDtcblxuICBpZiAoIWlzRWxlbWVudChjbGlwcGVyRWxlbWVudCkpIHtcbiAgICByZXR1cm4gW107XG4gIH0gLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtcmV0dXJuXTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2Zsb3cvaXNzdWVzLzE0MTRcblxuXG4gIHJldHVybiBjbGlwcGluZ1BhcmVudHMuZmlsdGVyKGZ1bmN0aW9uIChjbGlwcGluZ1BhcmVudCkge1xuICAgIHJldHVybiBpc0VsZW1lbnQoY2xpcHBpbmdQYXJlbnQpICYmIGNvbnRhaW5zKGNsaXBwaW5nUGFyZW50LCBjbGlwcGVyRWxlbWVudCkgJiYgZ2V0Tm9kZU5hbWUoY2xpcHBpbmdQYXJlbnQpICE9PSAnYm9keSc7XG4gIH0pO1xufSAvLyBHZXRzIHRoZSBtYXhpbXVtIGFyZWEgdGhhdCB0aGUgZWxlbWVudCBpcyB2aXNpYmxlIGluIGR1ZSB0byBhbnkgbnVtYmVyIG9mXG4vLyBjbGlwcGluZyBwYXJlbnRzXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Q2xpcHBpbmdSZWN0KGVsZW1lbnQsIGJvdW5kYXJ5LCByb290Qm91bmRhcnksIHN0cmF0ZWd5KSB7XG4gIHZhciBtYWluQ2xpcHBpbmdQYXJlbnRzID0gYm91bmRhcnkgPT09ICdjbGlwcGluZ1BhcmVudHMnID8gZ2V0Q2xpcHBpbmdQYXJlbnRzKGVsZW1lbnQpIDogW10uY29uY2F0KGJvdW5kYXJ5KTtcbiAgdmFyIGNsaXBwaW5nUGFyZW50cyA9IFtdLmNvbmNhdChtYWluQ2xpcHBpbmdQYXJlbnRzLCBbcm9vdEJvdW5kYXJ5XSk7XG4gIHZhciBmaXJzdENsaXBwaW5nUGFyZW50ID0gY2xpcHBpbmdQYXJlbnRzWzBdO1xuICB2YXIgY2xpcHBpbmdSZWN0ID0gY2xpcHBpbmdQYXJlbnRzLnJlZHVjZShmdW5jdGlvbiAoYWNjUmVjdCwgY2xpcHBpbmdQYXJlbnQpIHtcbiAgICB2YXIgcmVjdCA9IGdldENsaWVudFJlY3RGcm9tTWl4ZWRUeXBlKGVsZW1lbnQsIGNsaXBwaW5nUGFyZW50LCBzdHJhdGVneSk7XG4gICAgYWNjUmVjdC50b3AgPSBtYXgocmVjdC50b3AsIGFjY1JlY3QudG9wKTtcbiAgICBhY2NSZWN0LnJpZ2h0ID0gbWluKHJlY3QucmlnaHQsIGFjY1JlY3QucmlnaHQpO1xuICAgIGFjY1JlY3QuYm90dG9tID0gbWluKHJlY3QuYm90dG9tLCBhY2NSZWN0LmJvdHRvbSk7XG4gICAgYWNjUmVjdC5sZWZ0ID0gbWF4KHJlY3QubGVmdCwgYWNjUmVjdC5sZWZ0KTtcbiAgICByZXR1cm4gYWNjUmVjdDtcbiAgfSwgZ2V0Q2xpZW50UmVjdEZyb21NaXhlZFR5cGUoZWxlbWVudCwgZmlyc3RDbGlwcGluZ1BhcmVudCwgc3RyYXRlZ3kpKTtcbiAgY2xpcHBpbmdSZWN0LndpZHRoID0gY2xpcHBpbmdSZWN0LnJpZ2h0IC0gY2xpcHBpbmdSZWN0LmxlZnQ7XG4gIGNsaXBwaW5nUmVjdC5oZWlnaHQgPSBjbGlwcGluZ1JlY3QuYm90dG9tIC0gY2xpcHBpbmdSZWN0LnRvcDtcbiAgY2xpcHBpbmdSZWN0LnggPSBjbGlwcGluZ1JlY3QubGVmdDtcbiAgY2xpcHBpbmdSZWN0LnkgPSBjbGlwcGluZ1JlY3QudG9wO1xuICByZXR1cm4gY2xpcHBpbmdSZWN0O1xufSIsICJpbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0VmFyaWF0aW9uIGZyb20gXCIuL2dldFZhcmlhdGlvbi5qc1wiO1xuaW1wb3J0IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudCBmcm9tIFwiLi9nZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQuanNcIjtcbmltcG9ydCB7IHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCwgc3RhcnQsIGVuZCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29tcHV0ZU9mZnNldHMoX3JlZikge1xuICB2YXIgcmVmZXJlbmNlID0gX3JlZi5yZWZlcmVuY2UsXG4gICAgICBlbGVtZW50ID0gX3JlZi5lbGVtZW50LFxuICAgICAgcGxhY2VtZW50ID0gX3JlZi5wbGFjZW1lbnQ7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gcGxhY2VtZW50ID8gZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpIDogbnVsbDtcbiAgdmFyIHZhcmlhdGlvbiA9IHBsYWNlbWVudCA/IGdldFZhcmlhdGlvbihwbGFjZW1lbnQpIDogbnVsbDtcbiAgdmFyIGNvbW1vblggPSByZWZlcmVuY2UueCArIHJlZmVyZW5jZS53aWR0aCAvIDIgLSBlbGVtZW50LndpZHRoIC8gMjtcbiAgdmFyIGNvbW1vblkgPSByZWZlcmVuY2UueSArIHJlZmVyZW5jZS5oZWlnaHQgLyAyIC0gZWxlbWVudC5oZWlnaHQgLyAyO1xuICB2YXIgb2Zmc2V0cztcblxuICBzd2l0Y2ggKGJhc2VQbGFjZW1lbnQpIHtcbiAgICBjYXNlIHRvcDpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IGNvbW1vblgsXG4gICAgICAgIHk6IHJlZmVyZW5jZS55IC0gZWxlbWVudC5oZWlnaHRcbiAgICAgIH07XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgYm90dG9tOlxuICAgICAgb2Zmc2V0cyA9IHtcbiAgICAgICAgeDogY29tbW9uWCxcbiAgICAgICAgeTogcmVmZXJlbmNlLnkgKyByZWZlcmVuY2UuaGVpZ2h0XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIHJpZ2h0OlxuICAgICAgb2Zmc2V0cyA9IHtcbiAgICAgICAgeDogcmVmZXJlbmNlLnggKyByZWZlcmVuY2Uud2lkdGgsXG4gICAgICAgIHk6IGNvbW1vbllcbiAgICAgIH07XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgbGVmdDpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IHJlZmVyZW5jZS54IC0gZWxlbWVudC53aWR0aCxcbiAgICAgICAgeTogY29tbW9uWVxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IHJlZmVyZW5jZS54LFxuICAgICAgICB5OiByZWZlcmVuY2UueVxuICAgICAgfTtcbiAgfVxuXG4gIHZhciBtYWluQXhpcyA9IGJhc2VQbGFjZW1lbnQgPyBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQoYmFzZVBsYWNlbWVudCkgOiBudWxsO1xuXG4gIGlmIChtYWluQXhpcyAhPSBudWxsKSB7XG4gICAgdmFyIGxlbiA9IG1haW5BeGlzID09PSAneScgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG5cbiAgICBzd2l0Y2ggKHZhcmlhdGlvbikge1xuICAgICAgY2FzZSBzdGFydDpcbiAgICAgICAgb2Zmc2V0c1ttYWluQXhpc10gPSBvZmZzZXRzW21haW5BeGlzXSAtIChyZWZlcmVuY2VbbGVuXSAvIDIgLSBlbGVtZW50W2xlbl0gLyAyKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgZW5kOlxuICAgICAgICBvZmZzZXRzW21haW5BeGlzXSA9IG9mZnNldHNbbWFpbkF4aXNdICsgKHJlZmVyZW5jZVtsZW5dIC8gMiAtIGVsZW1lbnRbbGVuXSAvIDIpO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2Zmc2V0cztcbn0iLCAiaW1wb3J0IGdldENsaXBwaW5nUmVjdCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldENsaXBwaW5nUmVjdC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IGNvbXB1dGVPZmZzZXRzIGZyb20gXCIuL2NvbXB1dGVPZmZzZXRzLmpzXCI7XG5pbXBvcnQgcmVjdFRvQ2xpZW50UmVjdCBmcm9tIFwiLi9yZWN0VG9DbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgeyBjbGlwcGluZ1BhcmVudHMsIHJlZmVyZW5jZSwgcG9wcGVyLCBib3R0b20sIHRvcCwgcmlnaHQsIGJhc2VQbGFjZW1lbnRzLCB2aWV3cG9ydCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IHsgaXNFbGVtZW50IH0gZnJvbSBcIi4uL2RvbS11dGlscy9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgbWVyZ2VQYWRkaW5nT2JqZWN0IGZyb20gXCIuL21lcmdlUGFkZGluZ09iamVjdC5qc1wiO1xuaW1wb3J0IGV4cGFuZFRvSGFzaE1hcCBmcm9tIFwiLi9leHBhbmRUb0hhc2hNYXAuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwgb3B0aW9ucykge1xuICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgdmFyIF9vcHRpb25zID0gb3B0aW9ucyxcbiAgICAgIF9vcHRpb25zJHBsYWNlbWVudCA9IF9vcHRpb25zLnBsYWNlbWVudCxcbiAgICAgIHBsYWNlbWVudCA9IF9vcHRpb25zJHBsYWNlbWVudCA9PT0gdm9pZCAwID8gc3RhdGUucGxhY2VtZW50IDogX29wdGlvbnMkcGxhY2VtZW50LFxuICAgICAgX29wdGlvbnMkc3RyYXRlZ3kgPSBfb3B0aW9ucy5zdHJhdGVneSxcbiAgICAgIHN0cmF0ZWd5ID0gX29wdGlvbnMkc3RyYXRlZ3kgPT09IHZvaWQgMCA/IHN0YXRlLnN0cmF0ZWd5IDogX29wdGlvbnMkc3RyYXRlZ3ksXG4gICAgICBfb3B0aW9ucyRib3VuZGFyeSA9IF9vcHRpb25zLmJvdW5kYXJ5LFxuICAgICAgYm91bmRhcnkgPSBfb3B0aW9ucyRib3VuZGFyeSA9PT0gdm9pZCAwID8gY2xpcHBpbmdQYXJlbnRzIDogX29wdGlvbnMkYm91bmRhcnksXG4gICAgICBfb3B0aW9ucyRyb290Qm91bmRhcnkgPSBfb3B0aW9ucy5yb290Qm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnkgPSBfb3B0aW9ucyRyb290Qm91bmRhcnkgPT09IHZvaWQgMCA/IHZpZXdwb3J0IDogX29wdGlvbnMkcm9vdEJvdW5kYXJ5LFxuICAgICAgX29wdGlvbnMkZWxlbWVudENvbnRlID0gX29wdGlvbnMuZWxlbWVudENvbnRleHQsXG4gICAgICBlbGVtZW50Q29udGV4dCA9IF9vcHRpb25zJGVsZW1lbnRDb250ZSA9PT0gdm9pZCAwID8gcG9wcGVyIDogX29wdGlvbnMkZWxlbWVudENvbnRlLFxuICAgICAgX29wdGlvbnMkYWx0Qm91bmRhcnkgPSBfb3B0aW9ucy5hbHRCb3VuZGFyeSxcbiAgICAgIGFsdEJvdW5kYXJ5ID0gX29wdGlvbnMkYWx0Qm91bmRhcnkgPT09IHZvaWQgMCA/IGZhbHNlIDogX29wdGlvbnMkYWx0Qm91bmRhcnksXG4gICAgICBfb3B0aW9ucyRwYWRkaW5nID0gX29wdGlvbnMucGFkZGluZyxcbiAgICAgIHBhZGRpbmcgPSBfb3B0aW9ucyRwYWRkaW5nID09PSB2b2lkIDAgPyAwIDogX29wdGlvbnMkcGFkZGluZztcbiAgdmFyIHBhZGRpbmdPYmplY3QgPSBtZXJnZVBhZGRpbmdPYmplY3QodHlwZW9mIHBhZGRpbmcgIT09ICdudW1iZXInID8gcGFkZGluZyA6IGV4cGFuZFRvSGFzaE1hcChwYWRkaW5nLCBiYXNlUGxhY2VtZW50cykpO1xuICB2YXIgYWx0Q29udGV4dCA9IGVsZW1lbnRDb250ZXh0ID09PSBwb3BwZXIgPyByZWZlcmVuY2UgOiBwb3BwZXI7XG4gIHZhciBwb3BwZXJSZWN0ID0gc3RhdGUucmVjdHMucG9wcGVyO1xuICB2YXIgZWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzW2FsdEJvdW5kYXJ5ID8gYWx0Q29udGV4dCA6IGVsZW1lbnRDb250ZXh0XTtcbiAgdmFyIGNsaXBwaW5nQ2xpZW50UmVjdCA9IGdldENsaXBwaW5nUmVjdChpc0VsZW1lbnQoZWxlbWVudCkgPyBlbGVtZW50IDogZWxlbWVudC5jb250ZXh0RWxlbWVudCB8fCBnZXREb2N1bWVudEVsZW1lbnQoc3RhdGUuZWxlbWVudHMucG9wcGVyKSwgYm91bmRhcnksIHJvb3RCb3VuZGFyeSwgc3RyYXRlZ3kpO1xuICB2YXIgcmVmZXJlbmNlQ2xpZW50UmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChzdGF0ZS5lbGVtZW50cy5yZWZlcmVuY2UpO1xuICB2YXIgcG9wcGVyT2Zmc2V0cyA9IGNvbXB1dGVPZmZzZXRzKHtcbiAgICByZWZlcmVuY2U6IHJlZmVyZW5jZUNsaWVudFJlY3QsXG4gICAgZWxlbWVudDogcG9wcGVyUmVjdCxcbiAgICBzdHJhdGVneTogJ2Fic29sdXRlJyxcbiAgICBwbGFjZW1lbnQ6IHBsYWNlbWVudFxuICB9KTtcbiAgdmFyIHBvcHBlckNsaWVudFJlY3QgPSByZWN0VG9DbGllbnRSZWN0KE9iamVjdC5hc3NpZ24oe30sIHBvcHBlclJlY3QsIHBvcHBlck9mZnNldHMpKTtcbiAgdmFyIGVsZW1lbnRDbGllbnRSZWN0ID0gZWxlbWVudENvbnRleHQgPT09IHBvcHBlciA/IHBvcHBlckNsaWVudFJlY3QgOiByZWZlcmVuY2VDbGllbnRSZWN0OyAvLyBwb3NpdGl2ZSA9IG92ZXJmbG93aW5nIHRoZSBjbGlwcGluZyByZWN0XG4gIC8vIDAgb3IgbmVnYXRpdmUgPSB3aXRoaW4gdGhlIGNsaXBwaW5nIHJlY3RcblxuICB2YXIgb3ZlcmZsb3dPZmZzZXRzID0ge1xuICAgIHRvcDogY2xpcHBpbmdDbGllbnRSZWN0LnRvcCAtIGVsZW1lbnRDbGllbnRSZWN0LnRvcCArIHBhZGRpbmdPYmplY3QudG9wLFxuICAgIGJvdHRvbTogZWxlbWVudENsaWVudFJlY3QuYm90dG9tIC0gY2xpcHBpbmdDbGllbnRSZWN0LmJvdHRvbSArIHBhZGRpbmdPYmplY3QuYm90dG9tLFxuICAgIGxlZnQ6IGNsaXBwaW5nQ2xpZW50UmVjdC5sZWZ0IC0gZWxlbWVudENsaWVudFJlY3QubGVmdCArIHBhZGRpbmdPYmplY3QubGVmdCxcbiAgICByaWdodDogZWxlbWVudENsaWVudFJlY3QucmlnaHQgLSBjbGlwcGluZ0NsaWVudFJlY3QucmlnaHQgKyBwYWRkaW5nT2JqZWN0LnJpZ2h0XG4gIH07XG4gIHZhciBvZmZzZXREYXRhID0gc3RhdGUubW9kaWZpZXJzRGF0YS5vZmZzZXQ7IC8vIE9mZnNldHMgY2FuIGJlIGFwcGxpZWQgb25seSB0byB0aGUgcG9wcGVyIGVsZW1lbnRcblxuICBpZiAoZWxlbWVudENvbnRleHQgPT09IHBvcHBlciAmJiBvZmZzZXREYXRhKSB7XG4gICAgdmFyIG9mZnNldCA9IG9mZnNldERhdGFbcGxhY2VtZW50XTtcbiAgICBPYmplY3Qua2V5cyhvdmVyZmxvd09mZnNldHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgdmFyIG11bHRpcGx5ID0gW3JpZ2h0LCBib3R0b21dLmluZGV4T2Yoa2V5KSA+PSAwID8gMSA6IC0xO1xuICAgICAgdmFyIGF4aXMgPSBbdG9wLCBib3R0b21dLmluZGV4T2Yoa2V5KSA+PSAwID8gJ3knIDogJ3gnO1xuICAgICAgb3ZlcmZsb3dPZmZzZXRzW2tleV0gKz0gb2Zmc2V0W2F4aXNdICogbXVsdGlwbHk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gb3ZlcmZsb3dPZmZzZXRzO1xufSIsICJpbXBvcnQgZ2V0VmFyaWF0aW9uIGZyb20gXCIuL2dldFZhcmlhdGlvbi5qc1wiO1xuaW1wb3J0IHsgdmFyaWF0aW9uUGxhY2VtZW50cywgYmFzZVBsYWNlbWVudHMsIHBsYWNlbWVudHMgYXMgYWxsUGxhY2VtZW50cyB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGRldGVjdE92ZXJmbG93IGZyb20gXCIuL2RldGVjdE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb21wdXRlQXV0b1BsYWNlbWVudChzdGF0ZSwgb3B0aW9ucykge1xuICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgdmFyIF9vcHRpb25zID0gb3B0aW9ucyxcbiAgICAgIHBsYWNlbWVudCA9IF9vcHRpb25zLnBsYWNlbWVudCxcbiAgICAgIGJvdW5kYXJ5ID0gX29wdGlvbnMuYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnkgPSBfb3B0aW9ucy5yb290Qm91bmRhcnksXG4gICAgICBwYWRkaW5nID0gX29wdGlvbnMucGFkZGluZyxcbiAgICAgIGZsaXBWYXJpYXRpb25zID0gX29wdGlvbnMuZmxpcFZhcmlhdGlvbnMsXG4gICAgICBfb3B0aW9ucyRhbGxvd2VkQXV0b1AgPSBfb3B0aW9ucy5hbGxvd2VkQXV0b1BsYWNlbWVudHMsXG4gICAgICBhbGxvd2VkQXV0b1BsYWNlbWVudHMgPSBfb3B0aW9ucyRhbGxvd2VkQXV0b1AgPT09IHZvaWQgMCA/IGFsbFBsYWNlbWVudHMgOiBfb3B0aW9ucyRhbGxvd2VkQXV0b1A7XG4gIHZhciB2YXJpYXRpb24gPSBnZXRWYXJpYXRpb24ocGxhY2VtZW50KTtcbiAgdmFyIHBsYWNlbWVudHMgPSB2YXJpYXRpb24gPyBmbGlwVmFyaWF0aW9ucyA/IHZhcmlhdGlvblBsYWNlbWVudHMgOiB2YXJpYXRpb25QbGFjZW1lbnRzLmZpbHRlcihmdW5jdGlvbiAocGxhY2VtZW50KSB7XG4gICAgcmV0dXJuIGdldFZhcmlhdGlvbihwbGFjZW1lbnQpID09PSB2YXJpYXRpb247XG4gIH0pIDogYmFzZVBsYWNlbWVudHM7XG4gIHZhciBhbGxvd2VkUGxhY2VtZW50cyA9IHBsYWNlbWVudHMuZmlsdGVyKGZ1bmN0aW9uIChwbGFjZW1lbnQpIHtcbiAgICByZXR1cm4gYWxsb3dlZEF1dG9QbGFjZW1lbnRzLmluZGV4T2YocGxhY2VtZW50KSA+PSAwO1xuICB9KTtcblxuICBpZiAoYWxsb3dlZFBsYWNlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgYWxsb3dlZFBsYWNlbWVudHMgPSBwbGFjZW1lbnRzO1xuICB9IC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGVdOiBGbG93IHNlZW1zIHRvIGhhdmUgcHJvYmxlbXMgd2l0aCB0d28gYXJyYXkgdW5pb25zLi4uXG5cblxuICB2YXIgb3ZlcmZsb3dzID0gYWxsb3dlZFBsYWNlbWVudHMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICAgIGFjY1twbGFjZW1lbnRdID0gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIHtcbiAgICAgIHBsYWNlbWVudDogcGxhY2VtZW50LFxuICAgICAgYm91bmRhcnk6IGJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5OiByb290Qm91bmRhcnksXG4gICAgICBwYWRkaW5nOiBwYWRkaW5nXG4gICAgfSlbZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpXTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvdmVyZmxvd3MpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gb3ZlcmZsb3dzW2FdIC0gb3ZlcmZsb3dzW2JdO1xuICB9KTtcbn0iLCAiaW1wb3J0IGdldE9wcG9zaXRlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRPcHBvc2l0ZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRPcHBvc2l0ZVZhcmlhdGlvblBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi4vdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanNcIjtcbmltcG9ydCBjb21wdXRlQXV0b1BsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvY29tcHV0ZUF1dG9QbGFjZW1lbnQuanNcIjtcbmltcG9ydCB7IGJvdHRvbSwgdG9wLCBzdGFydCwgcmlnaHQsIGxlZnQsIGF1dG8gfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBnZXRWYXJpYXRpb24gZnJvbSBcIi4uL3V0aWxzL2dldFZhcmlhdGlvbi5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmZ1bmN0aW9uIGdldEV4cGFuZGVkRmFsbGJhY2tQbGFjZW1lbnRzKHBsYWNlbWVudCkge1xuICBpZiAoZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpID09PSBhdXRvKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgdmFyIG9wcG9zaXRlUGxhY2VtZW50ID0gZ2V0T3Bwb3NpdGVQbGFjZW1lbnQocGxhY2VtZW50KTtcbiAgcmV0dXJuIFtnZXRPcHBvc2l0ZVZhcmlhdGlvblBsYWNlbWVudChwbGFjZW1lbnQpLCBvcHBvc2l0ZVBsYWNlbWVudCwgZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQob3Bwb3NpdGVQbGFjZW1lbnQpXTtcbn1cblxuZnVuY3Rpb24gZmxpcChfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBvcHRpb25zID0gX3JlZi5vcHRpb25zLFxuICAgICAgbmFtZSA9IF9yZWYubmFtZTtcblxuICBpZiAoc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXS5fc2tpcCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBfb3B0aW9ucyRtYWluQXhpcyA9IG9wdGlvbnMubWFpbkF4aXMsXG4gICAgICBjaGVja01haW5BeGlzID0gX29wdGlvbnMkbWFpbkF4aXMgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRtYWluQXhpcyxcbiAgICAgIF9vcHRpb25zJGFsdEF4aXMgPSBvcHRpb25zLmFsdEF4aXMsXG4gICAgICBjaGVja0FsdEF4aXMgPSBfb3B0aW9ucyRhbHRBeGlzID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkYWx0QXhpcyxcbiAgICAgIHNwZWNpZmllZEZhbGxiYWNrUGxhY2VtZW50cyA9IG9wdGlvbnMuZmFsbGJhY2tQbGFjZW1lbnRzLFxuICAgICAgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyxcbiAgICAgIGJvdW5kYXJ5ID0gb3B0aW9ucy5ib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeSA9IG9wdGlvbnMucm9vdEJvdW5kYXJ5LFxuICAgICAgYWx0Qm91bmRhcnkgPSBvcHRpb25zLmFsdEJvdW5kYXJ5LFxuICAgICAgX29wdGlvbnMkZmxpcFZhcmlhdGlvID0gb3B0aW9ucy5mbGlwVmFyaWF0aW9ucyxcbiAgICAgIGZsaXBWYXJpYXRpb25zID0gX29wdGlvbnMkZmxpcFZhcmlhdGlvID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkZmxpcFZhcmlhdGlvLFxuICAgICAgYWxsb3dlZEF1dG9QbGFjZW1lbnRzID0gb3B0aW9ucy5hbGxvd2VkQXV0b1BsYWNlbWVudHM7XG4gIHZhciBwcmVmZXJyZWRQbGFjZW1lbnQgPSBzdGF0ZS5vcHRpb25zLnBsYWNlbWVudDtcbiAgdmFyIGJhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHByZWZlcnJlZFBsYWNlbWVudCk7XG4gIHZhciBpc0Jhc2VQbGFjZW1lbnQgPSBiYXNlUGxhY2VtZW50ID09PSBwcmVmZXJyZWRQbGFjZW1lbnQ7XG4gIHZhciBmYWxsYmFja1BsYWNlbWVudHMgPSBzcGVjaWZpZWRGYWxsYmFja1BsYWNlbWVudHMgfHwgKGlzQmFzZVBsYWNlbWVudCB8fCAhZmxpcFZhcmlhdGlvbnMgPyBbZ2V0T3Bwb3NpdGVQbGFjZW1lbnQocHJlZmVycmVkUGxhY2VtZW50KV0gOiBnZXRFeHBhbmRlZEZhbGxiYWNrUGxhY2VtZW50cyhwcmVmZXJyZWRQbGFjZW1lbnQpKTtcbiAgdmFyIHBsYWNlbWVudHMgPSBbcHJlZmVycmVkUGxhY2VtZW50XS5jb25jYXQoZmFsbGJhY2tQbGFjZW1lbnRzKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcGxhY2VtZW50KSB7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpID09PSBhdXRvID8gY29tcHV0ZUF1dG9QbGFjZW1lbnQoc3RhdGUsIHtcbiAgICAgIHBsYWNlbWVudDogcGxhY2VtZW50LFxuICAgICAgYm91bmRhcnk6IGJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5OiByb290Qm91bmRhcnksXG4gICAgICBwYWRkaW5nOiBwYWRkaW5nLFxuICAgICAgZmxpcFZhcmlhdGlvbnM6IGZsaXBWYXJpYXRpb25zLFxuICAgICAgYWxsb3dlZEF1dG9QbGFjZW1lbnRzOiBhbGxvd2VkQXV0b1BsYWNlbWVudHNcbiAgICB9KSA6IHBsYWNlbWVudCk7XG4gIH0sIFtdKTtcbiAgdmFyIHJlZmVyZW5jZVJlY3QgPSBzdGF0ZS5yZWN0cy5yZWZlcmVuY2U7XG4gIHZhciBwb3BwZXJSZWN0ID0gc3RhdGUucmVjdHMucG9wcGVyO1xuICB2YXIgY2hlY2tzTWFwID0gbmV3IE1hcCgpO1xuICB2YXIgbWFrZUZhbGxiYWNrQ2hlY2tzID0gdHJ1ZTtcbiAgdmFyIGZpcnN0Rml0dGluZ1BsYWNlbWVudCA9IHBsYWNlbWVudHNbMF07XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbGFjZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHBsYWNlbWVudCA9IHBsYWNlbWVudHNbaV07XG5cbiAgICB2YXIgX2Jhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCk7XG5cbiAgICB2YXIgaXNTdGFydFZhcmlhdGlvbiA9IGdldFZhcmlhdGlvbihwbGFjZW1lbnQpID09PSBzdGFydDtcbiAgICB2YXIgaXNWZXJ0aWNhbCA9IFt0b3AsIGJvdHRvbV0uaW5kZXhPZihfYmFzZVBsYWNlbWVudCkgPj0gMDtcbiAgICB2YXIgbGVuID0gaXNWZXJ0aWNhbCA/ICd3aWR0aCcgOiAnaGVpZ2h0JztcbiAgICB2YXIgb3ZlcmZsb3cgPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgICAgcGxhY2VtZW50OiBwbGFjZW1lbnQsXG4gICAgICBib3VuZGFyeTogYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnk6IHJvb3RCb3VuZGFyeSxcbiAgICAgIGFsdEJvdW5kYXJ5OiBhbHRCb3VuZGFyeSxcbiAgICAgIHBhZGRpbmc6IHBhZGRpbmdcbiAgICB9KTtcbiAgICB2YXIgbWFpblZhcmlhdGlvblNpZGUgPSBpc1ZlcnRpY2FsID8gaXNTdGFydFZhcmlhdGlvbiA/IHJpZ2h0IDogbGVmdCA6IGlzU3RhcnRWYXJpYXRpb24gPyBib3R0b20gOiB0b3A7XG5cbiAgICBpZiAocmVmZXJlbmNlUmVjdFtsZW5dID4gcG9wcGVyUmVjdFtsZW5dKSB7XG4gICAgICBtYWluVmFyaWF0aW9uU2lkZSA9IGdldE9wcG9zaXRlUGxhY2VtZW50KG1haW5WYXJpYXRpb25TaWRlKTtcbiAgICB9XG5cbiAgICB2YXIgYWx0VmFyaWF0aW9uU2lkZSA9IGdldE9wcG9zaXRlUGxhY2VtZW50KG1haW5WYXJpYXRpb25TaWRlKTtcbiAgICB2YXIgY2hlY2tzID0gW107XG5cbiAgICBpZiAoY2hlY2tNYWluQXhpcykge1xuICAgICAgY2hlY2tzLnB1c2gob3ZlcmZsb3dbX2Jhc2VQbGFjZW1lbnRdIDw9IDApO1xuICAgIH1cblxuICAgIGlmIChjaGVja0FsdEF4aXMpIHtcbiAgICAgIGNoZWNrcy5wdXNoKG92ZXJmbG93W21haW5WYXJpYXRpb25TaWRlXSA8PSAwLCBvdmVyZmxvd1thbHRWYXJpYXRpb25TaWRlXSA8PSAwKTtcbiAgICB9XG5cbiAgICBpZiAoY2hlY2tzLmV2ZXJ5KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgcmV0dXJuIGNoZWNrO1xuICAgIH0pKSB7XG4gICAgICBmaXJzdEZpdHRpbmdQbGFjZW1lbnQgPSBwbGFjZW1lbnQ7XG4gICAgICBtYWtlRmFsbGJhY2tDaGVja3MgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNoZWNrc01hcC5zZXQocGxhY2VtZW50LCBjaGVja3MpO1xuICB9XG5cbiAgaWYgKG1ha2VGYWxsYmFja0NoZWNrcykge1xuICAgIC8vIGAyYCBtYXkgYmUgZGVzaXJlZCBpbiBzb21lIGNhc2VzIFx1MjAxMyByZXNlYXJjaCBsYXRlclxuICAgIHZhciBudW1iZXJPZkNoZWNrcyA9IGZsaXBWYXJpYXRpb25zID8gMyA6IDE7XG5cbiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChfaSkge1xuICAgICAgdmFyIGZpdHRpbmdQbGFjZW1lbnQgPSBwbGFjZW1lbnRzLmZpbmQoZnVuY3Rpb24gKHBsYWNlbWVudCkge1xuICAgICAgICB2YXIgY2hlY2tzID0gY2hlY2tzTWFwLmdldChwbGFjZW1lbnQpO1xuXG4gICAgICAgIGlmIChjaGVja3MpIHtcbiAgICAgICAgICByZXR1cm4gY2hlY2tzLnNsaWNlKDAsIF9pKS5ldmVyeShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgICAgICAgIHJldHVybiBjaGVjaztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChmaXR0aW5nUGxhY2VtZW50KSB7XG4gICAgICAgIGZpcnN0Rml0dGluZ1BsYWNlbWVudCA9IGZpdHRpbmdQbGFjZW1lbnQ7XG4gICAgICAgIHJldHVybiBcImJyZWFrXCI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZvciAodmFyIF9pID0gbnVtYmVyT2ZDaGVja3M7IF9pID4gMDsgX2ktLSkge1xuICAgICAgdmFyIF9yZXQgPSBfbG9vcChfaSk7XG5cbiAgICAgIGlmIChfcmV0ID09PSBcImJyZWFrXCIpIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzdGF0ZS5wbGFjZW1lbnQgIT09IGZpcnN0Rml0dGluZ1BsYWNlbWVudCkge1xuICAgIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0uX3NraXAgPSB0cnVlO1xuICAgIHN0YXRlLnBsYWNlbWVudCA9IGZpcnN0Rml0dGluZ1BsYWNlbWVudDtcbiAgICBzdGF0ZS5yZXNldCA9IHRydWU7XG4gIH1cbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2ZsaXAnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ21haW4nLFxuICBmbjogZmxpcCxcbiAgcmVxdWlyZXNJZkV4aXN0czogWydvZmZzZXQnXSxcbiAgZGF0YToge1xuICAgIF9za2lwOiBmYWxzZVxuICB9XG59OyIsICJpbXBvcnQgeyB0b3AsIGJvdHRvbSwgbGVmdCwgcmlnaHQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi4vdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanNcIjtcblxuZnVuY3Rpb24gZ2V0U2lkZU9mZnNldHMob3ZlcmZsb3csIHJlY3QsIHByZXZlbnRlZE9mZnNldHMpIHtcbiAgaWYgKHByZXZlbnRlZE9mZnNldHMgPT09IHZvaWQgMCkge1xuICAgIHByZXZlbnRlZE9mZnNldHMgPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMFxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHRvcDogb3ZlcmZsb3cudG9wIC0gcmVjdC5oZWlnaHQgLSBwcmV2ZW50ZWRPZmZzZXRzLnksXG4gICAgcmlnaHQ6IG92ZXJmbG93LnJpZ2h0IC0gcmVjdC53aWR0aCArIHByZXZlbnRlZE9mZnNldHMueCxcbiAgICBib3R0b206IG92ZXJmbG93LmJvdHRvbSAtIHJlY3QuaGVpZ2h0ICsgcHJldmVudGVkT2Zmc2V0cy55LFxuICAgIGxlZnQ6IG92ZXJmbG93LmxlZnQgLSByZWN0LndpZHRoIC0gcHJldmVudGVkT2Zmc2V0cy54XG4gIH07XG59XG5cbmZ1bmN0aW9uIGlzQW55U2lkZUZ1bGx5Q2xpcHBlZChvdmVyZmxvdykge1xuICByZXR1cm4gW3RvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdF0uc29tZShmdW5jdGlvbiAoc2lkZSkge1xuICAgIHJldHVybiBvdmVyZmxvd1tzaWRlXSA+PSAwO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaGlkZShfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBuYW1lID0gX3JlZi5uYW1lO1xuICB2YXIgcmVmZXJlbmNlUmVjdCA9IHN0YXRlLnJlY3RzLnJlZmVyZW5jZTtcbiAgdmFyIHBvcHBlclJlY3QgPSBzdGF0ZS5yZWN0cy5wb3BwZXI7XG4gIHZhciBwcmV2ZW50ZWRPZmZzZXRzID0gc3RhdGUubW9kaWZpZXJzRGF0YS5wcmV2ZW50T3ZlcmZsb3c7XG4gIHZhciByZWZlcmVuY2VPdmVyZmxvdyA9IGRldGVjdE92ZXJmbG93KHN0YXRlLCB7XG4gICAgZWxlbWVudENvbnRleHQ6ICdyZWZlcmVuY2UnXG4gIH0pO1xuICB2YXIgcG9wcGVyQWx0T3ZlcmZsb3cgPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgIGFsdEJvdW5kYXJ5OiB0cnVlXG4gIH0pO1xuICB2YXIgcmVmZXJlbmNlQ2xpcHBpbmdPZmZzZXRzID0gZ2V0U2lkZU9mZnNldHMocmVmZXJlbmNlT3ZlcmZsb3csIHJlZmVyZW5jZVJlY3QpO1xuICB2YXIgcG9wcGVyRXNjYXBlT2Zmc2V0cyA9IGdldFNpZGVPZmZzZXRzKHBvcHBlckFsdE92ZXJmbG93LCBwb3BwZXJSZWN0LCBwcmV2ZW50ZWRPZmZzZXRzKTtcbiAgdmFyIGlzUmVmZXJlbmNlSGlkZGVuID0gaXNBbnlTaWRlRnVsbHlDbGlwcGVkKHJlZmVyZW5jZUNsaXBwaW5nT2Zmc2V0cyk7XG4gIHZhciBoYXNQb3BwZXJFc2NhcGVkID0gaXNBbnlTaWRlRnVsbHlDbGlwcGVkKHBvcHBlckVzY2FwZU9mZnNldHMpO1xuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0ge1xuICAgIHJlZmVyZW5jZUNsaXBwaW5nT2Zmc2V0czogcmVmZXJlbmNlQ2xpcHBpbmdPZmZzZXRzLFxuICAgIHBvcHBlckVzY2FwZU9mZnNldHM6IHBvcHBlckVzY2FwZU9mZnNldHMsXG4gICAgaXNSZWZlcmVuY2VIaWRkZW46IGlzUmVmZXJlbmNlSGlkZGVuLFxuICAgIGhhc1BvcHBlckVzY2FwZWQ6IGhhc1BvcHBlckVzY2FwZWRcbiAgfTtcbiAgc3RhdGUuYXR0cmlidXRlcy5wb3BwZXIgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5hdHRyaWJ1dGVzLnBvcHBlciwge1xuICAgICdkYXRhLXBvcHBlci1yZWZlcmVuY2UtaGlkZGVuJzogaXNSZWZlcmVuY2VIaWRkZW4sXG4gICAgJ2RhdGEtcG9wcGVyLWVzY2FwZWQnOiBoYXNQb3BwZXJFc2NhcGVkXG4gIH0pO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnaGlkZScsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnbWFpbicsXG4gIHJlcXVpcmVzSWZFeGlzdHM6IFsncHJldmVudE92ZXJmbG93J10sXG4gIGZuOiBoaWRlXG59OyIsICJpbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IHsgdG9wLCBsZWZ0LCByaWdodCwgcGxhY2VtZW50cyB9IGZyb20gXCIuLi9lbnVtcy5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZUFuZFNraWRkaW5nVG9YWShwbGFjZW1lbnQsIHJlY3RzLCBvZmZzZXQpIHtcbiAgdmFyIGJhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCk7XG4gIHZhciBpbnZlcnREaXN0YW5jZSA9IFtsZWZ0LCB0b3BdLmluZGV4T2YoYmFzZVBsYWNlbWVudCkgPj0gMCA/IC0xIDogMTtcblxuICB2YXIgX3JlZiA9IHR5cGVvZiBvZmZzZXQgPT09ICdmdW5jdGlvbicgPyBvZmZzZXQoT2JqZWN0LmFzc2lnbih7fSwgcmVjdHMsIHtcbiAgICBwbGFjZW1lbnQ6IHBsYWNlbWVudFxuICB9KSkgOiBvZmZzZXQsXG4gICAgICBza2lkZGluZyA9IF9yZWZbMF0sXG4gICAgICBkaXN0YW5jZSA9IF9yZWZbMV07XG5cbiAgc2tpZGRpbmcgPSBza2lkZGluZyB8fCAwO1xuICBkaXN0YW5jZSA9IChkaXN0YW5jZSB8fCAwKSAqIGludmVydERpc3RhbmNlO1xuICByZXR1cm4gW2xlZnQsIHJpZ2h0XS5pbmRleE9mKGJhc2VQbGFjZW1lbnQpID49IDAgPyB7XG4gICAgeDogZGlzdGFuY2UsXG4gICAgeTogc2tpZGRpbmdcbiAgfSA6IHtcbiAgICB4OiBza2lkZGluZyxcbiAgICB5OiBkaXN0YW5jZVxuICB9O1xufVxuXG5mdW5jdGlvbiBvZmZzZXQoX3JlZjIpIHtcbiAgdmFyIHN0YXRlID0gX3JlZjIuc3RhdGUsXG4gICAgICBvcHRpb25zID0gX3JlZjIub3B0aW9ucyxcbiAgICAgIG5hbWUgPSBfcmVmMi5uYW1lO1xuICB2YXIgX29wdGlvbnMkb2Zmc2V0ID0gb3B0aW9ucy5vZmZzZXQsXG4gICAgICBvZmZzZXQgPSBfb3B0aW9ucyRvZmZzZXQgPT09IHZvaWQgMCA/IFswLCAwXSA6IF9vcHRpb25zJG9mZnNldDtcbiAgdmFyIGRhdGEgPSBwbGFjZW1lbnRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgICBhY2NbcGxhY2VtZW50XSA9IGRpc3RhbmNlQW5kU2tpZGRpbmdUb1hZKHBsYWNlbWVudCwgc3RhdGUucmVjdHMsIG9mZnNldCk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xuICB2YXIgX2RhdGEkc3RhdGUkcGxhY2VtZW50ID0gZGF0YVtzdGF0ZS5wbGFjZW1lbnRdLFxuICAgICAgeCA9IF9kYXRhJHN0YXRlJHBsYWNlbWVudC54LFxuICAgICAgeSA9IF9kYXRhJHN0YXRlJHBsYWNlbWVudC55O1xuXG4gIGlmIChzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMgIT0gbnVsbCkge1xuICAgIHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cy54ICs9IHg7XG4gICAgc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzLnkgKz0geTtcbiAgfVxuXG4gIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0gPSBkYXRhO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnb2Zmc2V0JyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdtYWluJyxcbiAgcmVxdWlyZXM6IFsncG9wcGVyT2Zmc2V0cyddLFxuICBmbjogb2Zmc2V0XG59OyIsICJpbXBvcnQgY29tcHV0ZU9mZnNldHMgZnJvbSBcIi4uL3V0aWxzL2NvbXB1dGVPZmZzZXRzLmpzXCI7XG5cbmZ1bmN0aW9uIHBvcHBlck9mZnNldHMoX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgbmFtZSA9IF9yZWYubmFtZTtcbiAgLy8gT2Zmc2V0cyBhcmUgdGhlIGFjdHVhbCBwb3NpdGlvbiB0aGUgcG9wcGVyIG5lZWRzIHRvIGhhdmUgdG8gYmVcbiAgLy8gcHJvcGVybHkgcG9zaXRpb25lZCBuZWFyIGl0cyByZWZlcmVuY2UgZWxlbWVudFxuICAvLyBUaGlzIGlzIHRoZSBtb3N0IGJhc2ljIHBsYWNlbWVudCwgYW5kIHdpbGwgYmUgYWRqdXN0ZWQgYnlcbiAgLy8gdGhlIG1vZGlmaWVycyBpbiB0aGUgbmV4dCBzdGVwXG4gIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0gPSBjb21wdXRlT2Zmc2V0cyh7XG4gICAgcmVmZXJlbmNlOiBzdGF0ZS5yZWN0cy5yZWZlcmVuY2UsXG4gICAgZWxlbWVudDogc3RhdGUucmVjdHMucG9wcGVyLFxuICAgIHN0cmF0ZWd5OiAnYWJzb2x1dGUnLFxuICAgIHBsYWNlbWVudDogc3RhdGUucGxhY2VtZW50XG4gIH0pO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAncG9wcGVyT2Zmc2V0cycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAncmVhZCcsXG4gIGZuOiBwb3BwZXJPZmZzZXRzLFxuICBkYXRhOiB7fVxufTsiLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0QWx0QXhpcyhheGlzKSB7XG4gIHJldHVybiBheGlzID09PSAneCcgPyAneScgOiAneCc7XG59IiwgImltcG9ydCB7IHRvcCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgc3RhcnQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRBbHRBeGlzIGZyb20gXCIuLi91dGlscy9nZXRBbHRBeGlzLmpzXCI7XG5pbXBvcnQgeyB3aXRoaW4sIHdpdGhpbk1heENsYW1wIH0gZnJvbSBcIi4uL3V0aWxzL3dpdGhpbi5qc1wiO1xuaW1wb3J0IGdldExheW91dFJlY3QgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRMYXlvdXRSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0T2Zmc2V0UGFyZW50IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0T2Zmc2V0UGFyZW50LmpzXCI7XG5pbXBvcnQgZGV0ZWN0T3ZlcmZsb3cgZnJvbSBcIi4uL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgZ2V0VmFyaWF0aW9uIGZyb20gXCIuLi91dGlscy9nZXRWYXJpYXRpb24uanNcIjtcbmltcG9ydCBnZXRGcmVzaFNpZGVPYmplY3QgZnJvbSBcIi4uL3V0aWxzL2dldEZyZXNoU2lkZU9iamVjdC5qc1wiO1xuaW1wb3J0IHsgbWluIGFzIG1hdGhNaW4sIG1heCBhcyBtYXRoTWF4IH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjtcblxuZnVuY3Rpb24gcHJldmVudE92ZXJmbG93KF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnMsXG4gICAgICBuYW1lID0gX3JlZi5uYW1lO1xuICB2YXIgX29wdGlvbnMkbWFpbkF4aXMgPSBvcHRpb25zLm1haW5BeGlzLFxuICAgICAgY2hlY2tNYWluQXhpcyA9IF9vcHRpb25zJG1haW5BeGlzID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkbWFpbkF4aXMsXG4gICAgICBfb3B0aW9ucyRhbHRBeGlzID0gb3B0aW9ucy5hbHRBeGlzLFxuICAgICAgY2hlY2tBbHRBeGlzID0gX29wdGlvbnMkYWx0QXhpcyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfb3B0aW9ucyRhbHRBeGlzLFxuICAgICAgYm91bmRhcnkgPSBvcHRpb25zLmJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5ID0gb3B0aW9ucy5yb290Qm91bmRhcnksXG4gICAgICBhbHRCb3VuZGFyeSA9IG9wdGlvbnMuYWx0Qm91bmRhcnksXG4gICAgICBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nLFxuICAgICAgX29wdGlvbnMkdGV0aGVyID0gb3B0aW9ucy50ZXRoZXIsXG4gICAgICB0ZXRoZXIgPSBfb3B0aW9ucyR0ZXRoZXIgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyR0ZXRoZXIsXG4gICAgICBfb3B0aW9ucyR0ZXRoZXJPZmZzZXQgPSBvcHRpb25zLnRldGhlck9mZnNldCxcbiAgICAgIHRldGhlck9mZnNldCA9IF9vcHRpb25zJHRldGhlck9mZnNldCA9PT0gdm9pZCAwID8gMCA6IF9vcHRpb25zJHRldGhlck9mZnNldDtcbiAgdmFyIG92ZXJmbG93ID0gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIHtcbiAgICBib3VuZGFyeTogYm91bmRhcnksXG4gICAgcm9vdEJvdW5kYXJ5OiByb290Qm91bmRhcnksXG4gICAgcGFkZGluZzogcGFkZGluZyxcbiAgICBhbHRCb3VuZGFyeTogYWx0Qm91bmRhcnlcbiAgfSk7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChzdGF0ZS5wbGFjZW1lbnQpO1xuICB2YXIgdmFyaWF0aW9uID0gZ2V0VmFyaWF0aW9uKHN0YXRlLnBsYWNlbWVudCk7XG4gIHZhciBpc0Jhc2VQbGFjZW1lbnQgPSAhdmFyaWF0aW9uO1xuICB2YXIgbWFpbkF4aXMgPSBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQoYmFzZVBsYWNlbWVudCk7XG4gIHZhciBhbHRBeGlzID0gZ2V0QWx0QXhpcyhtYWluQXhpcyk7XG4gIHZhciBwb3BwZXJPZmZzZXRzID0gc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzO1xuICB2YXIgcmVmZXJlbmNlUmVjdCA9IHN0YXRlLnJlY3RzLnJlZmVyZW5jZTtcbiAgdmFyIHBvcHBlclJlY3QgPSBzdGF0ZS5yZWN0cy5wb3BwZXI7XG4gIHZhciB0ZXRoZXJPZmZzZXRWYWx1ZSA9IHR5cGVvZiB0ZXRoZXJPZmZzZXQgPT09ICdmdW5jdGlvbicgPyB0ZXRoZXJPZmZzZXQoT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUucmVjdHMsIHtcbiAgICBwbGFjZW1lbnQ6IHN0YXRlLnBsYWNlbWVudFxuICB9KSkgOiB0ZXRoZXJPZmZzZXQ7XG4gIHZhciBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUgPSB0eXBlb2YgdGV0aGVyT2Zmc2V0VmFsdWUgPT09ICdudW1iZXInID8ge1xuICAgIG1haW5BeGlzOiB0ZXRoZXJPZmZzZXRWYWx1ZSxcbiAgICBhbHRBeGlzOiB0ZXRoZXJPZmZzZXRWYWx1ZVxuICB9IDogT2JqZWN0LmFzc2lnbih7XG4gICAgbWFpbkF4aXM6IDAsXG4gICAgYWx0QXhpczogMFxuICB9LCB0ZXRoZXJPZmZzZXRWYWx1ZSk7XG4gIHZhciBvZmZzZXRNb2RpZmllclN0YXRlID0gc3RhdGUubW9kaWZpZXJzRGF0YS5vZmZzZXQgPyBzdGF0ZS5tb2RpZmllcnNEYXRhLm9mZnNldFtzdGF0ZS5wbGFjZW1lbnRdIDogbnVsbDtcbiAgdmFyIGRhdGEgPSB7XG4gICAgeDogMCxcbiAgICB5OiAwXG4gIH07XG5cbiAgaWYgKCFwb3BwZXJPZmZzZXRzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNoZWNrTWFpbkF4aXMpIHtcbiAgICB2YXIgX29mZnNldE1vZGlmaWVyU3RhdGUkO1xuXG4gICAgdmFyIG1haW5TaWRlID0gbWFpbkF4aXMgPT09ICd5JyA/IHRvcCA6IGxlZnQ7XG4gICAgdmFyIGFsdFNpZGUgPSBtYWluQXhpcyA9PT0gJ3knID8gYm90dG9tIDogcmlnaHQ7XG4gICAgdmFyIGxlbiA9IG1haW5BeGlzID09PSAneScgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG4gICAgdmFyIG9mZnNldCA9IHBvcHBlck9mZnNldHNbbWFpbkF4aXNdO1xuICAgIHZhciBtaW4gPSBvZmZzZXQgKyBvdmVyZmxvd1ttYWluU2lkZV07XG4gICAgdmFyIG1heCA9IG9mZnNldCAtIG92ZXJmbG93W2FsdFNpZGVdO1xuICAgIHZhciBhZGRpdGl2ZSA9IHRldGhlciA/IC1wb3BwZXJSZWN0W2xlbl0gLyAyIDogMDtcbiAgICB2YXIgbWluTGVuID0gdmFyaWF0aW9uID09PSBzdGFydCA/IHJlZmVyZW5jZVJlY3RbbGVuXSA6IHBvcHBlclJlY3RbbGVuXTtcbiAgICB2YXIgbWF4TGVuID0gdmFyaWF0aW9uID09PSBzdGFydCA/IC1wb3BwZXJSZWN0W2xlbl0gOiAtcmVmZXJlbmNlUmVjdFtsZW5dOyAvLyBXZSBuZWVkIHRvIGluY2x1ZGUgdGhlIGFycm93IGluIHRoZSBjYWxjdWxhdGlvbiBzbyB0aGUgYXJyb3cgZG9lc24ndCBnb1xuICAgIC8vIG91dHNpZGUgdGhlIHJlZmVyZW5jZSBib3VuZHNcblxuICAgIHZhciBhcnJvd0VsZW1lbnQgPSBzdGF0ZS5lbGVtZW50cy5hcnJvdztcbiAgICB2YXIgYXJyb3dSZWN0ID0gdGV0aGVyICYmIGFycm93RWxlbWVudCA/IGdldExheW91dFJlY3QoYXJyb3dFbGVtZW50KSA6IHtcbiAgICAgIHdpZHRoOiAwLFxuICAgICAgaGVpZ2h0OiAwXG4gICAgfTtcbiAgICB2YXIgYXJyb3dQYWRkaW5nT2JqZWN0ID0gc3RhdGUubW9kaWZpZXJzRGF0YVsnYXJyb3cjcGVyc2lzdGVudCddID8gc3RhdGUubW9kaWZpZXJzRGF0YVsnYXJyb3cjcGVyc2lzdGVudCddLnBhZGRpbmcgOiBnZXRGcmVzaFNpZGVPYmplY3QoKTtcbiAgICB2YXIgYXJyb3dQYWRkaW5nTWluID0gYXJyb3dQYWRkaW5nT2JqZWN0W21haW5TaWRlXTtcbiAgICB2YXIgYXJyb3dQYWRkaW5nTWF4ID0gYXJyb3dQYWRkaW5nT2JqZWN0W2FsdFNpZGVdOyAvLyBJZiB0aGUgcmVmZXJlbmNlIGxlbmd0aCBpcyBzbWFsbGVyIHRoYW4gdGhlIGFycm93IGxlbmd0aCwgd2UgZG9uJ3Qgd2FudFxuICAgIC8vIHRvIGluY2x1ZGUgaXRzIGZ1bGwgc2l6ZSBpbiB0aGUgY2FsY3VsYXRpb24uIElmIHRoZSByZWZlcmVuY2UgaXMgc21hbGxcbiAgICAvLyBhbmQgbmVhciB0aGUgZWRnZSBvZiBhIGJvdW5kYXJ5LCB0aGUgcG9wcGVyIGNhbiBvdmVyZmxvdyBldmVuIGlmIHRoZVxuICAgIC8vIHJlZmVyZW5jZSBpcyBub3Qgb3ZlcmZsb3dpbmcgYXMgd2VsbCAoZS5nLiB2aXJ0dWFsIGVsZW1lbnRzIHdpdGggbm9cbiAgICAvLyB3aWR0aCBvciBoZWlnaHQpXG5cbiAgICB2YXIgYXJyb3dMZW4gPSB3aXRoaW4oMCwgcmVmZXJlbmNlUmVjdFtsZW5dLCBhcnJvd1JlY3RbbGVuXSk7XG4gICAgdmFyIG1pbk9mZnNldCA9IGlzQmFzZVBsYWNlbWVudCA/IHJlZmVyZW5jZVJlY3RbbGVuXSAvIDIgLSBhZGRpdGl2ZSAtIGFycm93TGVuIC0gYXJyb3dQYWRkaW5nTWluIC0gbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLm1haW5BeGlzIDogbWluTGVuIC0gYXJyb3dMZW4gLSBhcnJvd1BhZGRpbmdNaW4gLSBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUubWFpbkF4aXM7XG4gICAgdmFyIG1heE9mZnNldCA9IGlzQmFzZVBsYWNlbWVudCA/IC1yZWZlcmVuY2VSZWN0W2xlbl0gLyAyICsgYWRkaXRpdmUgKyBhcnJvd0xlbiArIGFycm93UGFkZGluZ01heCArIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZS5tYWluQXhpcyA6IG1heExlbiArIGFycm93TGVuICsgYXJyb3dQYWRkaW5nTWF4ICsgbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLm1haW5BeGlzO1xuICAgIHZhciBhcnJvd09mZnNldFBhcmVudCA9IHN0YXRlLmVsZW1lbnRzLmFycm93ICYmIGdldE9mZnNldFBhcmVudChzdGF0ZS5lbGVtZW50cy5hcnJvdyk7XG4gICAgdmFyIGNsaWVudE9mZnNldCA9IGFycm93T2Zmc2V0UGFyZW50ID8gbWFpbkF4aXMgPT09ICd5JyA/IGFycm93T2Zmc2V0UGFyZW50LmNsaWVudFRvcCB8fCAwIDogYXJyb3dPZmZzZXRQYXJlbnQuY2xpZW50TGVmdCB8fCAwIDogMDtcbiAgICB2YXIgb2Zmc2V0TW9kaWZpZXJWYWx1ZSA9IChfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQgPSBvZmZzZXRNb2RpZmllclN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBvZmZzZXRNb2RpZmllclN0YXRlW21haW5BeGlzXSkgIT0gbnVsbCA/IF9vZmZzZXRNb2RpZmllclN0YXRlJCA6IDA7XG4gICAgdmFyIHRldGhlck1pbiA9IG9mZnNldCArIG1pbk9mZnNldCAtIG9mZnNldE1vZGlmaWVyVmFsdWUgLSBjbGllbnRPZmZzZXQ7XG4gICAgdmFyIHRldGhlck1heCA9IG9mZnNldCArIG1heE9mZnNldCAtIG9mZnNldE1vZGlmaWVyVmFsdWU7XG4gICAgdmFyIHByZXZlbnRlZE9mZnNldCA9IHdpdGhpbih0ZXRoZXIgPyBtYXRoTWluKG1pbiwgdGV0aGVyTWluKSA6IG1pbiwgb2Zmc2V0LCB0ZXRoZXIgPyBtYXRoTWF4KG1heCwgdGV0aGVyTWF4KSA6IG1heCk7XG4gICAgcG9wcGVyT2Zmc2V0c1ttYWluQXhpc10gPSBwcmV2ZW50ZWRPZmZzZXQ7XG4gICAgZGF0YVttYWluQXhpc10gPSBwcmV2ZW50ZWRPZmZzZXQgLSBvZmZzZXQ7XG4gIH1cblxuICBpZiAoY2hlY2tBbHRBeGlzKSB7XG4gICAgdmFyIF9vZmZzZXRNb2RpZmllclN0YXRlJDI7XG5cbiAgICB2YXIgX21haW5TaWRlID0gbWFpbkF4aXMgPT09ICd4JyA/IHRvcCA6IGxlZnQ7XG5cbiAgICB2YXIgX2FsdFNpZGUgPSBtYWluQXhpcyA9PT0gJ3gnID8gYm90dG9tIDogcmlnaHQ7XG5cbiAgICB2YXIgX29mZnNldCA9IHBvcHBlck9mZnNldHNbYWx0QXhpc107XG5cbiAgICB2YXIgX2xlbiA9IGFsdEF4aXMgPT09ICd5JyA/ICdoZWlnaHQnIDogJ3dpZHRoJztcblxuICAgIHZhciBfbWluID0gX29mZnNldCArIG92ZXJmbG93W19tYWluU2lkZV07XG5cbiAgICB2YXIgX21heCA9IF9vZmZzZXQgLSBvdmVyZmxvd1tfYWx0U2lkZV07XG5cbiAgICB2YXIgaXNPcmlnaW5TaWRlID0gW3RvcCwgbGVmdF0uaW5kZXhPZihiYXNlUGxhY2VtZW50KSAhPT0gLTE7XG5cbiAgICB2YXIgX29mZnNldE1vZGlmaWVyVmFsdWUgPSAoX29mZnNldE1vZGlmaWVyU3RhdGUkMiA9IG9mZnNldE1vZGlmaWVyU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IG9mZnNldE1vZGlmaWVyU3RhdGVbYWx0QXhpc10pICE9IG51bGwgPyBfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQyIDogMDtcblxuICAgIHZhciBfdGV0aGVyTWluID0gaXNPcmlnaW5TaWRlID8gX21pbiA6IF9vZmZzZXQgLSByZWZlcmVuY2VSZWN0W19sZW5dIC0gcG9wcGVyUmVjdFtfbGVuXSAtIF9vZmZzZXRNb2RpZmllclZhbHVlICsgbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLmFsdEF4aXM7XG5cbiAgICB2YXIgX3RldGhlck1heCA9IGlzT3JpZ2luU2lkZSA/IF9vZmZzZXQgKyByZWZlcmVuY2VSZWN0W19sZW5dICsgcG9wcGVyUmVjdFtfbGVuXSAtIF9vZmZzZXRNb2RpZmllclZhbHVlIC0gbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLmFsdEF4aXMgOiBfbWF4O1xuXG4gICAgdmFyIF9wcmV2ZW50ZWRPZmZzZXQgPSB0ZXRoZXIgJiYgaXNPcmlnaW5TaWRlID8gd2l0aGluTWF4Q2xhbXAoX3RldGhlck1pbiwgX29mZnNldCwgX3RldGhlck1heCkgOiB3aXRoaW4odGV0aGVyID8gX3RldGhlck1pbiA6IF9taW4sIF9vZmZzZXQsIHRldGhlciA/IF90ZXRoZXJNYXggOiBfbWF4KTtcblxuICAgIHBvcHBlck9mZnNldHNbYWx0QXhpc10gPSBfcHJldmVudGVkT2Zmc2V0O1xuICAgIGRhdGFbYWx0QXhpc10gPSBfcHJldmVudGVkT2Zmc2V0IC0gX29mZnNldDtcbiAgfVxuXG4gIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0gPSBkYXRhO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAncHJldmVudE92ZXJmbG93JyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdtYWluJyxcbiAgZm46IHByZXZlbnRPdmVyZmxvdyxcbiAgcmVxdWlyZXNJZkV4aXN0czogWydvZmZzZXQnXVxufTsiLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0SFRNTEVsZW1lbnRTY3JvbGwoZWxlbWVudCkge1xuICByZXR1cm4ge1xuICAgIHNjcm9sbExlZnQ6IGVsZW1lbnQuc2Nyb2xsTGVmdCxcbiAgICBzY3JvbGxUb3A6IGVsZW1lbnQuc2Nyb2xsVG9wXG4gIH07XG59IiwgImltcG9ydCBnZXRXaW5kb3dTY3JvbGwgZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCBnZXRIVE1MRWxlbWVudFNjcm9sbCBmcm9tIFwiLi9nZXRIVE1MRWxlbWVudFNjcm9sbC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Tm9kZVNjcm9sbChub2RlKSB7XG4gIGlmIChub2RlID09PSBnZXRXaW5kb3cobm9kZSkgfHwgIWlzSFRNTEVsZW1lbnQobm9kZSkpIHtcbiAgICByZXR1cm4gZ2V0V2luZG93U2Nyb2xsKG5vZGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBnZXRIVE1MRWxlbWVudFNjcm9sbChub2RlKTtcbiAgfVxufSIsICJpbXBvcnQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZyb20gXCIuL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IGdldE5vZGVTY3JvbGwgZnJvbSBcIi4vZ2V0Tm9kZVNjcm9sbC5qc1wiO1xuaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbEJhclggZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsQmFyWC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBpc1Njcm9sbFBhcmVudCBmcm9tIFwiLi9pc1Njcm9sbFBhcmVudC5qc1wiO1xuaW1wb3J0IHsgcm91bmQgfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiO1xuXG5mdW5jdGlvbiBpc0VsZW1lbnRTY2FsZWQoZWxlbWVudCkge1xuICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHZhciBzY2FsZVggPSByb3VuZChyZWN0LndpZHRoKSAvIGVsZW1lbnQub2Zmc2V0V2lkdGggfHwgMTtcbiAgdmFyIHNjYWxlWSA9IHJvdW5kKHJlY3QuaGVpZ2h0KSAvIGVsZW1lbnQub2Zmc2V0SGVpZ2h0IHx8IDE7XG4gIHJldHVybiBzY2FsZVggIT09IDEgfHwgc2NhbGVZICE9PSAxO1xufSAvLyBSZXR1cm5zIHRoZSBjb21wb3NpdGUgcmVjdCBvZiBhbiBlbGVtZW50IHJlbGF0aXZlIHRvIGl0cyBvZmZzZXRQYXJlbnQuXG4vLyBDb21wb3NpdGUgbWVhbnMgaXQgdGFrZXMgaW50byBhY2NvdW50IHRyYW5zZm9ybXMgYXMgd2VsbCBhcyBsYXlvdXQuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Q29tcG9zaXRlUmVjdChlbGVtZW50T3JWaXJ0dWFsRWxlbWVudCwgb2Zmc2V0UGFyZW50LCBpc0ZpeGVkKSB7XG4gIGlmIChpc0ZpeGVkID09PSB2b2lkIDApIHtcbiAgICBpc0ZpeGVkID0gZmFsc2U7XG4gIH1cblxuICB2YXIgaXNPZmZzZXRQYXJlbnRBbkVsZW1lbnQgPSBpc0hUTUxFbGVtZW50KG9mZnNldFBhcmVudCk7XG4gIHZhciBvZmZzZXRQYXJlbnRJc1NjYWxlZCA9IGlzSFRNTEVsZW1lbnQob2Zmc2V0UGFyZW50KSAmJiBpc0VsZW1lbnRTY2FsZWQob2Zmc2V0UGFyZW50KTtcbiAgdmFyIGRvY3VtZW50RWxlbWVudCA9IGdldERvY3VtZW50RWxlbWVudChvZmZzZXRQYXJlbnQpO1xuICB2YXIgcmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50T3JWaXJ0dWFsRWxlbWVudCwgb2Zmc2V0UGFyZW50SXNTY2FsZWQsIGlzRml4ZWQpO1xuICB2YXIgc2Nyb2xsID0ge1xuICAgIHNjcm9sbExlZnQ6IDAsXG4gICAgc2Nyb2xsVG9wOiAwXG4gIH07XG4gIHZhciBvZmZzZXRzID0ge1xuICAgIHg6IDAsXG4gICAgeTogMFxuICB9O1xuXG4gIGlmIChpc09mZnNldFBhcmVudEFuRWxlbWVudCB8fCAhaXNPZmZzZXRQYXJlbnRBbkVsZW1lbnQgJiYgIWlzRml4ZWQpIHtcbiAgICBpZiAoZ2V0Tm9kZU5hbWUob2Zmc2V0UGFyZW50KSAhPT0gJ2JvZHknIHx8IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wb3BwZXJqcy9wb3BwZXItY29yZS9pc3N1ZXMvMTA3OFxuICAgIGlzU2Nyb2xsUGFyZW50KGRvY3VtZW50RWxlbWVudCkpIHtcbiAgICAgIHNjcm9sbCA9IGdldE5vZGVTY3JvbGwob2Zmc2V0UGFyZW50KTtcbiAgICB9XG5cbiAgICBpZiAoaXNIVE1MRWxlbWVudChvZmZzZXRQYXJlbnQpKSB7XG4gICAgICBvZmZzZXRzID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KG9mZnNldFBhcmVudCwgdHJ1ZSk7XG4gICAgICBvZmZzZXRzLnggKz0gb2Zmc2V0UGFyZW50LmNsaWVudExlZnQ7XG4gICAgICBvZmZzZXRzLnkgKz0gb2Zmc2V0UGFyZW50LmNsaWVudFRvcDtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50RWxlbWVudCkge1xuICAgICAgb2Zmc2V0cy54ID0gZ2V0V2luZG93U2Nyb2xsQmFyWChkb2N1bWVudEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgeDogcmVjdC5sZWZ0ICsgc2Nyb2xsLnNjcm9sbExlZnQgLSBvZmZzZXRzLngsXG4gICAgeTogcmVjdC50b3AgKyBzY3JvbGwuc2Nyb2xsVG9wIC0gb2Zmc2V0cy55LFxuICAgIHdpZHRoOiByZWN0LndpZHRoLFxuICAgIGhlaWdodDogcmVjdC5oZWlnaHRcbiAgfTtcbn0iLCAiaW1wb3J0IHsgbW9kaWZpZXJQaGFzZXMgfSBmcm9tIFwiLi4vZW51bXMuanNcIjsgLy8gc291cmNlOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80OTg3NTI1NVxuXG5mdW5jdGlvbiBvcmRlcihtb2RpZmllcnMpIHtcbiAgdmFyIG1hcCA9IG5ldyBNYXAoKTtcbiAgdmFyIHZpc2l0ZWQgPSBuZXcgU2V0KCk7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgbW9kaWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKG1vZGlmaWVyKSB7XG4gICAgbWFwLnNldChtb2RpZmllci5uYW1lLCBtb2RpZmllcik7XG4gIH0pOyAvLyBPbiB2aXNpdGluZyBvYmplY3QsIGNoZWNrIGZvciBpdHMgZGVwZW5kZW5jaWVzIGFuZCB2aXNpdCB0aGVtIHJlY3Vyc2l2ZWx5XG5cbiAgZnVuY3Rpb24gc29ydChtb2RpZmllcikge1xuICAgIHZpc2l0ZWQuYWRkKG1vZGlmaWVyLm5hbWUpO1xuICAgIHZhciByZXF1aXJlcyA9IFtdLmNvbmNhdChtb2RpZmllci5yZXF1aXJlcyB8fCBbXSwgbW9kaWZpZXIucmVxdWlyZXNJZkV4aXN0cyB8fCBbXSk7XG4gICAgcmVxdWlyZXMuZm9yRWFjaChmdW5jdGlvbiAoZGVwKSB7XG4gICAgICBpZiAoIXZpc2l0ZWQuaGFzKGRlcCkpIHtcbiAgICAgICAgdmFyIGRlcE1vZGlmaWVyID0gbWFwLmdldChkZXApO1xuXG4gICAgICAgIGlmIChkZXBNb2RpZmllcikge1xuICAgICAgICAgIHNvcnQoZGVwTW9kaWZpZXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmVzdWx0LnB1c2gobW9kaWZpZXIpO1xuICB9XG5cbiAgbW9kaWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKG1vZGlmaWVyKSB7XG4gICAgaWYgKCF2aXNpdGVkLmhhcyhtb2RpZmllci5uYW1lKSkge1xuICAgICAgLy8gY2hlY2sgZm9yIHZpc2l0ZWQgb2JqZWN0XG4gICAgICBzb3J0KG1vZGlmaWVyKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBvcmRlck1vZGlmaWVycyhtb2RpZmllcnMpIHtcbiAgLy8gb3JkZXIgYmFzZWQgb24gZGVwZW5kZW5jaWVzXG4gIHZhciBvcmRlcmVkTW9kaWZpZXJzID0gb3JkZXIobW9kaWZpZXJzKTsgLy8gb3JkZXIgYmFzZWQgb24gcGhhc2VcblxuICByZXR1cm4gbW9kaWZpZXJQaGFzZXMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBoYXNlKSB7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQob3JkZXJlZE1vZGlmaWVycy5maWx0ZXIoZnVuY3Rpb24gKG1vZGlmaWVyKSB7XG4gICAgICByZXR1cm4gbW9kaWZpZXIucGhhc2UgPT09IHBoYXNlO1xuICAgIH0pKTtcbiAgfSwgW10pO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWJvdW5jZShmbikge1xuICB2YXIgcGVuZGluZztcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXBlbmRpbmcpIHtcbiAgICAgIHBlbmRpbmcgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBwZW5kaW5nID0gdW5kZWZpbmVkO1xuICAgICAgICAgIHJlc29sdmUoZm4oKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBlbmRpbmc7XG4gIH07XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1lcmdlQnlOYW1lKG1vZGlmaWVycykge1xuICB2YXIgbWVyZ2VkID0gbW9kaWZpZXJzLnJlZHVjZShmdW5jdGlvbiAobWVyZ2VkLCBjdXJyZW50KSB7XG4gICAgdmFyIGV4aXN0aW5nID0gbWVyZ2VkW2N1cnJlbnQubmFtZV07XG4gICAgbWVyZ2VkW2N1cnJlbnQubmFtZV0gPSBleGlzdGluZyA/IE9iamVjdC5hc3NpZ24oe30sIGV4aXN0aW5nLCBjdXJyZW50LCB7XG4gICAgICBvcHRpb25zOiBPYmplY3QuYXNzaWduKHt9LCBleGlzdGluZy5vcHRpb25zLCBjdXJyZW50Lm9wdGlvbnMpLFxuICAgICAgZGF0YTogT2JqZWN0LmFzc2lnbih7fSwgZXhpc3RpbmcuZGF0YSwgY3VycmVudC5kYXRhKVxuICAgIH0pIDogY3VycmVudDtcbiAgICByZXR1cm4gbWVyZ2VkO1xuICB9LCB7fSk7IC8vIElFMTEgZG9lcyBub3Qgc3VwcG9ydCBPYmplY3QudmFsdWVzXG5cbiAgcmV0dXJuIE9iamVjdC5rZXlzKG1lcmdlZCkubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gbWVyZ2VkW2tleV07XG4gIH0pO1xufSIsICJpbXBvcnQgZ2V0Q29tcG9zaXRlUmVjdCBmcm9tIFwiLi9kb20tdXRpbHMvZ2V0Q29tcG9zaXRlUmVjdC5qc1wiO1xuaW1wb3J0IGdldExheW91dFJlY3QgZnJvbSBcIi4vZG9tLXV0aWxzL2dldExheW91dFJlY3QuanNcIjtcbmltcG9ydCBsaXN0U2Nyb2xsUGFyZW50cyBmcm9tIFwiLi9kb20tdXRpbHMvbGlzdFNjcm9sbFBhcmVudHMuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4vZG9tLXV0aWxzL2dldE9mZnNldFBhcmVudC5qc1wiO1xuaW1wb3J0IG9yZGVyTW9kaWZpZXJzIGZyb20gXCIuL3V0aWxzL29yZGVyTW9kaWZpZXJzLmpzXCI7XG5pbXBvcnQgZGVib3VuY2UgZnJvbSBcIi4vdXRpbHMvZGVib3VuY2UuanNcIjtcbmltcG9ydCBtZXJnZUJ5TmFtZSBmcm9tIFwiLi91dGlscy9tZXJnZUJ5TmFtZS5qc1wiO1xuaW1wb3J0IGRldGVjdE92ZXJmbG93IGZyb20gXCIuL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgeyBpc0VsZW1lbnQgfSBmcm9tIFwiLi9kb20tdXRpbHMvaW5zdGFuY2VPZi5qc1wiO1xudmFyIERFRkFVTFRfT1BUSU9OUyA9IHtcbiAgcGxhY2VtZW50OiAnYm90dG9tJyxcbiAgbW9kaWZpZXJzOiBbXSxcbiAgc3RyYXRlZ3k6ICdhYnNvbHV0ZSdcbn07XG5cbmZ1bmN0aW9uIGFyZVZhbGlkRWxlbWVudHMoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gIWFyZ3Muc29tZShmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHJldHVybiAhKGVsZW1lbnQgJiYgdHlwZW9mIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ID09PSAnZnVuY3Rpb24nKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwb3BwZXJHZW5lcmF0b3IoZ2VuZXJhdG9yT3B0aW9ucykge1xuICBpZiAoZ2VuZXJhdG9yT3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgZ2VuZXJhdG9yT3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgdmFyIF9nZW5lcmF0b3JPcHRpb25zID0gZ2VuZXJhdG9yT3B0aW9ucyxcbiAgICAgIF9nZW5lcmF0b3JPcHRpb25zJGRlZiA9IF9nZW5lcmF0b3JPcHRpb25zLmRlZmF1bHRNb2RpZmllcnMsXG4gICAgICBkZWZhdWx0TW9kaWZpZXJzID0gX2dlbmVyYXRvck9wdGlvbnMkZGVmID09PSB2b2lkIDAgPyBbXSA6IF9nZW5lcmF0b3JPcHRpb25zJGRlZixcbiAgICAgIF9nZW5lcmF0b3JPcHRpb25zJGRlZjIgPSBfZ2VuZXJhdG9yT3B0aW9ucy5kZWZhdWx0T3B0aW9ucyxcbiAgICAgIGRlZmF1bHRPcHRpb25zID0gX2dlbmVyYXRvck9wdGlvbnMkZGVmMiA9PT0gdm9pZCAwID8gREVGQVVMVF9PUFRJT05TIDogX2dlbmVyYXRvck9wdGlvbnMkZGVmMjtcbiAgcmV0dXJuIGZ1bmN0aW9uIGNyZWF0ZVBvcHBlcihyZWZlcmVuY2UsIHBvcHBlciwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucztcbiAgICB9XG5cbiAgICB2YXIgc3RhdGUgPSB7XG4gICAgICBwbGFjZW1lbnQ6ICdib3R0b20nLFxuICAgICAgb3JkZXJlZE1vZGlmaWVyczogW10sXG4gICAgICBvcHRpb25zOiBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX09QVElPTlMsIGRlZmF1bHRPcHRpb25zKSxcbiAgICAgIG1vZGlmaWVyc0RhdGE6IHt9LFxuICAgICAgZWxlbWVudHM6IHtcbiAgICAgICAgcmVmZXJlbmNlOiByZWZlcmVuY2UsXG4gICAgICAgIHBvcHBlcjogcG9wcGVyXG4gICAgICB9LFxuICAgICAgYXR0cmlidXRlczoge30sXG4gICAgICBzdHlsZXM6IHt9XG4gICAgfTtcbiAgICB2YXIgZWZmZWN0Q2xlYW51cEZucyA9IFtdO1xuICAgIHZhciBpc0Rlc3Ryb3llZCA9IGZhbHNlO1xuICAgIHZhciBpbnN0YW5jZSA9IHtcbiAgICAgIHN0YXRlOiBzdGF0ZSxcbiAgICAgIHNldE9wdGlvbnM6IGZ1bmN0aW9uIHNldE9wdGlvbnMoc2V0T3B0aW9uc0FjdGlvbikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHR5cGVvZiBzZXRPcHRpb25zQWN0aW9uID09PSAnZnVuY3Rpb24nID8gc2V0T3B0aW9uc0FjdGlvbihzdGF0ZS5vcHRpb25zKSA6IHNldE9wdGlvbnNBY3Rpb247XG4gICAgICAgIGNsZWFudXBNb2RpZmllckVmZmVjdHMoKTtcbiAgICAgICAgc3RhdGUub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRpb25zLCBzdGF0ZS5vcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgc3RhdGUuc2Nyb2xsUGFyZW50cyA9IHtcbiAgICAgICAgICByZWZlcmVuY2U6IGlzRWxlbWVudChyZWZlcmVuY2UpID8gbGlzdFNjcm9sbFBhcmVudHMocmVmZXJlbmNlKSA6IHJlZmVyZW5jZS5jb250ZXh0RWxlbWVudCA/IGxpc3RTY3JvbGxQYXJlbnRzKHJlZmVyZW5jZS5jb250ZXh0RWxlbWVudCkgOiBbXSxcbiAgICAgICAgICBwb3BwZXI6IGxpc3RTY3JvbGxQYXJlbnRzKHBvcHBlcilcbiAgICAgICAgfTsgLy8gT3JkZXJzIHRoZSBtb2RpZmllcnMgYmFzZWQgb24gdGhlaXIgZGVwZW5kZW5jaWVzIGFuZCBgcGhhc2VgXG4gICAgICAgIC8vIHByb3BlcnRpZXNcblxuICAgICAgICB2YXIgb3JkZXJlZE1vZGlmaWVycyA9IG9yZGVyTW9kaWZpZXJzKG1lcmdlQnlOYW1lKFtdLmNvbmNhdChkZWZhdWx0TW9kaWZpZXJzLCBzdGF0ZS5vcHRpb25zLm1vZGlmaWVycykpKTsgLy8gU3RyaXAgb3V0IGRpc2FibGVkIG1vZGlmaWVyc1xuXG4gICAgICAgIHN0YXRlLm9yZGVyZWRNb2RpZmllcnMgPSBvcmRlcmVkTW9kaWZpZXJzLmZpbHRlcihmdW5jdGlvbiAobSkge1xuICAgICAgICAgIHJldHVybiBtLmVuYWJsZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICBydW5Nb2RpZmllckVmZmVjdHMoKTtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlLnVwZGF0ZSgpO1xuICAgICAgfSxcbiAgICAgIC8vIFN5bmMgdXBkYXRlIFx1MjAxMyBpdCB3aWxsIGFsd2F5cyBiZSBleGVjdXRlZCwgZXZlbiBpZiBub3QgbmVjZXNzYXJ5LiBUaGlzXG4gICAgICAvLyBpcyB1c2VmdWwgZm9yIGxvdyBmcmVxdWVuY3kgdXBkYXRlcyB3aGVyZSBzeW5jIGJlaGF2aW9yIHNpbXBsaWZpZXMgdGhlXG4gICAgICAvLyBsb2dpYy5cbiAgICAgIC8vIEZvciBoaWdoIGZyZXF1ZW5jeSB1cGRhdGVzIChlLmcuIGByZXNpemVgIGFuZCBgc2Nyb2xsYCBldmVudHMpLCBhbHdheXNcbiAgICAgIC8vIHByZWZlciB0aGUgYXN5bmMgUG9wcGVyI3VwZGF0ZSBtZXRob2RcbiAgICAgIGZvcmNlVXBkYXRlOiBmdW5jdGlvbiBmb3JjZVVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKGlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIF9zdGF0ZSRlbGVtZW50cyA9IHN0YXRlLmVsZW1lbnRzLFxuICAgICAgICAgICAgcmVmZXJlbmNlID0gX3N0YXRlJGVsZW1lbnRzLnJlZmVyZW5jZSxcbiAgICAgICAgICAgIHBvcHBlciA9IF9zdGF0ZSRlbGVtZW50cy5wb3BwZXI7IC8vIERvbid0IHByb2NlZWQgaWYgYHJlZmVyZW5jZWAgb3IgYHBvcHBlcmAgYXJlIG5vdCB2YWxpZCBlbGVtZW50c1xuICAgICAgICAvLyBhbnltb3JlXG5cbiAgICAgICAgaWYgKCFhcmVWYWxpZEVsZW1lbnRzKHJlZmVyZW5jZSwgcG9wcGVyKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBTdG9yZSB0aGUgcmVmZXJlbmNlIGFuZCBwb3BwZXIgcmVjdHMgdG8gYmUgcmVhZCBieSBtb2RpZmllcnNcblxuXG4gICAgICAgIHN0YXRlLnJlY3RzID0ge1xuICAgICAgICAgIHJlZmVyZW5jZTogZ2V0Q29tcG9zaXRlUmVjdChyZWZlcmVuY2UsIGdldE9mZnNldFBhcmVudChwb3BwZXIpLCBzdGF0ZS5vcHRpb25zLnN0cmF0ZWd5ID09PSAnZml4ZWQnKSxcbiAgICAgICAgICBwb3BwZXI6IGdldExheW91dFJlY3QocG9wcGVyKVxuICAgICAgICB9OyAvLyBNb2RpZmllcnMgaGF2ZSB0aGUgYWJpbGl0eSB0byByZXNldCB0aGUgY3VycmVudCB1cGRhdGUgY3ljbGUuIFRoZVxuICAgICAgICAvLyBtb3N0IGNvbW1vbiB1c2UgY2FzZSBmb3IgdGhpcyBpcyB0aGUgYGZsaXBgIG1vZGlmaWVyIGNoYW5naW5nIHRoZVxuICAgICAgICAvLyBwbGFjZW1lbnQsIHdoaWNoIHRoZW4gbmVlZHMgdG8gcmUtcnVuIGFsbCB0aGUgbW9kaWZpZXJzLCBiZWNhdXNlIHRoZVxuICAgICAgICAvLyBsb2dpYyB3YXMgcHJldmlvdXNseSByYW4gZm9yIHRoZSBwcmV2aW91cyBwbGFjZW1lbnQgYW5kIGlzIHRoZXJlZm9yZVxuICAgICAgICAvLyBzdGFsZS9pbmNvcnJlY3RcblxuICAgICAgICBzdGF0ZS5yZXNldCA9IGZhbHNlO1xuICAgICAgICBzdGF0ZS5wbGFjZW1lbnQgPSBzdGF0ZS5vcHRpb25zLnBsYWNlbWVudDsgLy8gT24gZWFjaCB1cGRhdGUgY3ljbGUsIHRoZSBgbW9kaWZpZXJzRGF0YWAgcHJvcGVydHkgZm9yIGVhY2ggbW9kaWZpZXJcbiAgICAgICAgLy8gaXMgZmlsbGVkIHdpdGggdGhlIGluaXRpYWwgZGF0YSBzcGVjaWZpZWQgYnkgdGhlIG1vZGlmaWVyLiBUaGlzIG1lYW5zXG4gICAgICAgIC8vIGl0IGRvZXNuJ3QgcGVyc2lzdCBhbmQgaXMgZnJlc2ggb24gZWFjaCB1cGRhdGUuXG4gICAgICAgIC8vIFRvIGVuc3VyZSBwZXJzaXN0ZW50IGRhdGEsIHVzZSBgJHtuYW1lfSNwZXJzaXN0ZW50YFxuXG4gICAgICAgIHN0YXRlLm9yZGVyZWRNb2RpZmllcnMuZm9yRWFjaChmdW5jdGlvbiAobW9kaWZpZXIpIHtcbiAgICAgICAgICByZXR1cm4gc3RhdGUubW9kaWZpZXJzRGF0YVttb2RpZmllci5uYW1lXSA9IE9iamVjdC5hc3NpZ24oe30sIG1vZGlmaWVyLmRhdGEpO1xuICAgICAgICB9KTtcblxuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgc3RhdGUub3JkZXJlZE1vZGlmaWVycy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICBpZiAoc3RhdGUucmVzZXQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHN0YXRlLnJlc2V0ID0gZmFsc2U7XG4gICAgICAgICAgICBpbmRleCA9IC0xO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIF9zdGF0ZSRvcmRlcmVkTW9kaWZpZSA9IHN0YXRlLm9yZGVyZWRNb2RpZmllcnNbaW5kZXhdLFxuICAgICAgICAgICAgICBmbiA9IF9zdGF0ZSRvcmRlcmVkTW9kaWZpZS5mbixcbiAgICAgICAgICAgICAgX3N0YXRlJG9yZGVyZWRNb2RpZmllMiA9IF9zdGF0ZSRvcmRlcmVkTW9kaWZpZS5vcHRpb25zLFxuICAgICAgICAgICAgICBfb3B0aW9ucyA9IF9zdGF0ZSRvcmRlcmVkTW9kaWZpZTIgPT09IHZvaWQgMCA/IHt9IDogX3N0YXRlJG9yZGVyZWRNb2RpZmllMixcbiAgICAgICAgICAgICAgbmFtZSA9IF9zdGF0ZSRvcmRlcmVkTW9kaWZpZS5uYW1lO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgc3RhdGUgPSBmbih7XG4gICAgICAgICAgICAgIHN0YXRlOiBzdGF0ZSxcbiAgICAgICAgICAgICAgb3B0aW9uczogX29wdGlvbnMsXG4gICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgIGluc3RhbmNlOiBpbnN0YW5jZVxuICAgICAgICAgICAgfSkgfHwgc3RhdGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLy8gQXN5bmMgYW5kIG9wdGltaXN0aWNhbGx5IG9wdGltaXplZCB1cGRhdGUgXHUyMDEzIGl0IHdpbGwgbm90IGJlIGV4ZWN1dGVkIGlmXG4gICAgICAvLyBub3QgbmVjZXNzYXJ5IChkZWJvdW5jZWQgdG8gcnVuIGF0IG1vc3Qgb25jZS1wZXItdGljaylcbiAgICAgIHVwZGF0ZTogZGVib3VuY2UoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICBpbnN0YW5jZS5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICAgIHJlc29sdmUoc3RhdGUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pLFxuICAgICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgY2xlYW51cE1vZGlmaWVyRWZmZWN0cygpO1xuICAgICAgICBpc0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmICghYXJlVmFsaWRFbGVtZW50cyhyZWZlcmVuY2UsIHBvcHBlcikpIHtcbiAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG5cbiAgICBpbnN0YW5jZS5zZXRPcHRpb25zKG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICBpZiAoIWlzRGVzdHJveWVkICYmIG9wdGlvbnMub25GaXJzdFVwZGF0ZSkge1xuICAgICAgICBvcHRpb25zLm9uRmlyc3RVcGRhdGUoc3RhdGUpO1xuICAgICAgfVxuICAgIH0pOyAvLyBNb2RpZmllcnMgaGF2ZSB0aGUgYWJpbGl0eSB0byBleGVjdXRlIGFyYml0cmFyeSBjb2RlIGJlZm9yZSB0aGUgZmlyc3RcbiAgICAvLyB1cGRhdGUgY3ljbGUgcnVucy4gVGhleSB3aWxsIGJlIGV4ZWN1dGVkIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZSB1cGRhdGVcbiAgICAvLyBjeWNsZS4gVGhpcyBpcyB1c2VmdWwgd2hlbiBhIG1vZGlmaWVyIGFkZHMgc29tZSBwZXJzaXN0ZW50IGRhdGEgdGhhdFxuICAgIC8vIG90aGVyIG1vZGlmaWVycyBuZWVkIHRvIHVzZSwgYnV0IHRoZSBtb2RpZmllciBpcyBydW4gYWZ0ZXIgdGhlIGRlcGVuZGVudFxuICAgIC8vIG9uZS5cblxuICAgIGZ1bmN0aW9uIHJ1bk1vZGlmaWVyRWZmZWN0cygpIHtcbiAgICAgIHN0YXRlLm9yZGVyZWRNb2RpZmllcnMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikge1xuICAgICAgICB2YXIgbmFtZSA9IF9yZWYubmFtZSxcbiAgICAgICAgICAgIF9yZWYkb3B0aW9ucyA9IF9yZWYub3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnMgPSBfcmVmJG9wdGlvbnMgPT09IHZvaWQgMCA/IHt9IDogX3JlZiRvcHRpb25zLFxuICAgICAgICAgICAgZWZmZWN0ID0gX3JlZi5lZmZlY3Q7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBlZmZlY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB2YXIgY2xlYW51cEZuID0gZWZmZWN0KHtcbiAgICAgICAgICAgIHN0YXRlOiBzdGF0ZSxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBpbnN0YW5jZTogaW5zdGFuY2UsXG4gICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB2YXIgbm9vcEZuID0gZnVuY3Rpb24gbm9vcEZuKCkge307XG5cbiAgICAgICAgICBlZmZlY3RDbGVhbnVwRm5zLnB1c2goY2xlYW51cEZuIHx8IG5vb3BGbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFudXBNb2RpZmllckVmZmVjdHMoKSB7XG4gICAgICBlZmZlY3RDbGVhbnVwRm5zLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgICAgfSk7XG4gICAgICBlZmZlY3RDbGVhbnVwRm5zID0gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9O1xufVxuZXhwb3J0IHZhciBjcmVhdGVQb3BwZXIgPSAvKiNfX1BVUkVfXyovcG9wcGVyR2VuZXJhdG9yKCk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZXhwb3J0IHsgZGV0ZWN0T3ZlcmZsb3cgfTsiLCAiaW1wb3J0IHsgcG9wcGVyR2VuZXJhdG9yLCBkZXRlY3RPdmVyZmxvdyB9IGZyb20gXCIuL2NyZWF0ZVBvcHBlci5qc1wiO1xuaW1wb3J0IGV2ZW50TGlzdGVuZXJzIGZyb20gXCIuL21vZGlmaWVycy9ldmVudExpc3RlbmVycy5qc1wiO1xuaW1wb3J0IHBvcHBlck9mZnNldHMgZnJvbSBcIi4vbW9kaWZpZXJzL3BvcHBlck9mZnNldHMuanNcIjtcbmltcG9ydCBjb21wdXRlU3R5bGVzIGZyb20gXCIuL21vZGlmaWVycy9jb21wdXRlU3R5bGVzLmpzXCI7XG5pbXBvcnQgYXBwbHlTdHlsZXMgZnJvbSBcIi4vbW9kaWZpZXJzL2FwcGx5U3R5bGVzLmpzXCI7XG5pbXBvcnQgb2Zmc2V0IGZyb20gXCIuL21vZGlmaWVycy9vZmZzZXQuanNcIjtcbmltcG9ydCBmbGlwIGZyb20gXCIuL21vZGlmaWVycy9mbGlwLmpzXCI7XG5pbXBvcnQgcHJldmVudE92ZXJmbG93IGZyb20gXCIuL21vZGlmaWVycy9wcmV2ZW50T3ZlcmZsb3cuanNcIjtcbmltcG9ydCBhcnJvdyBmcm9tIFwiLi9tb2RpZmllcnMvYXJyb3cuanNcIjtcbmltcG9ydCBoaWRlIGZyb20gXCIuL21vZGlmaWVycy9oaWRlLmpzXCI7XG52YXIgZGVmYXVsdE1vZGlmaWVycyA9IFtldmVudExpc3RlbmVycywgcG9wcGVyT2Zmc2V0cywgY29tcHV0ZVN0eWxlcywgYXBwbHlTdHlsZXMsIG9mZnNldCwgZmxpcCwgcHJldmVudE92ZXJmbG93LCBhcnJvdywgaGlkZV07XG52YXIgY3JlYXRlUG9wcGVyID0gLyojX19QVVJFX18qL3BvcHBlckdlbmVyYXRvcih7XG4gIGRlZmF1bHRNb2RpZmllcnM6IGRlZmF1bHRNb2RpZmllcnNcbn0pOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCB7IGNyZWF0ZVBvcHBlciwgcG9wcGVyR2VuZXJhdG9yLCBkZWZhdWx0TW9kaWZpZXJzLCBkZXRlY3RPdmVyZmxvdyB9OyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCB7IGNyZWF0ZVBvcHBlciBhcyBjcmVhdGVQb3BwZXJMaXRlIH0gZnJvbSBcIi4vcG9wcGVyLWxpdGUuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgKiBmcm9tIFwiLi9tb2RpZmllcnMvaW5kZXguanNcIjsiLCAiY29uc3QgY29uc29sZUxvZ2dlciA9IHtcbiAgdHlwZTogJ2xvZ2dlcicsXG4gIGxvZyhhcmdzKSB7XG4gICAgdGhpcy5vdXRwdXQoJ2xvZycsIGFyZ3MpO1xuICB9LFxuICB3YXJuKGFyZ3MpIHtcbiAgICB0aGlzLm91dHB1dCgnd2FybicsIGFyZ3MpO1xuICB9LFxuICBlcnJvcihhcmdzKSB7XG4gICAgdGhpcy5vdXRwdXQoJ2Vycm9yJywgYXJncyk7XG4gIH0sXG4gIG91dHB1dCh0eXBlLCBhcmdzKSB7XG4gICAgaWYgKGNvbnNvbGUgJiYgY29uc29sZVt0eXBlXSkgY29uc29sZVt0eXBlXS5hcHBseShjb25zb2xlLCBhcmdzKTtcbiAgfVxufTtcbmNsYXNzIExvZ2dlciB7XG4gIGNvbnN0cnVjdG9yKGNvbmNyZXRlTG9nZ2VyKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHRoaXMuaW5pdChjb25jcmV0ZUxvZ2dlciwgb3B0aW9ucyk7XG4gIH1cbiAgaW5pdChjb25jcmV0ZUxvZ2dlcikge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICB0aGlzLnByZWZpeCA9IG9wdGlvbnMucHJlZml4IHx8ICdpMThuZXh0Oic7XG4gICAgdGhpcy5sb2dnZXIgPSBjb25jcmV0ZUxvZ2dlciB8fCBjb25zb2xlTG9nZ2VyO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5kZWJ1ZyA9IG9wdGlvbnMuZGVidWc7XG4gIH1cbiAgbG9nKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZm9yd2FyZChhcmdzLCAnbG9nJywgJycsIHRydWUpO1xuICB9XG4gIHdhcm4oKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZvcndhcmQoYXJncywgJ3dhcm4nLCAnJywgdHJ1ZSk7XG4gIH1cbiAgZXJyb3IoKSB7XG4gICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICBhcmdzW19rZXkzXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZvcndhcmQoYXJncywgJ2Vycm9yJywgJycpO1xuICB9XG4gIGRlcHJlY2F0ZSgpIHtcbiAgICBmb3IgKHZhciBfbGVuNCA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjQpLCBfa2V5NCA9IDA7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHtcbiAgICAgIGFyZ3NbX2tleTRdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZm9yd2FyZChhcmdzLCAnd2FybicsICdXQVJOSU5HIERFUFJFQ0FURUQ6ICcsIHRydWUpO1xuICB9XG4gIGZvcndhcmQoYXJncywgbHZsLCBwcmVmaXgsIGRlYnVnT25seSkge1xuICAgIGlmIChkZWJ1Z09ubHkgJiYgIXRoaXMuZGVidWcpIHJldHVybiBudWxsO1xuICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ3N0cmluZycpIGFyZ3NbMF0gPSBgJHtwcmVmaXh9JHt0aGlzLnByZWZpeH0gJHthcmdzWzBdfWA7XG4gICAgcmV0dXJuIHRoaXMubG9nZ2VyW2x2bF0oYXJncyk7XG4gIH1cbiAgY3JlYXRlKG1vZHVsZU5hbWUpIHtcbiAgICByZXR1cm4gbmV3IExvZ2dlcih0aGlzLmxvZ2dlciwge1xuICAgICAgLi4ue1xuICAgICAgICBwcmVmaXg6IGAke3RoaXMucHJlZml4fToke21vZHVsZU5hbWV9OmBcbiAgICAgIH0sXG4gICAgICAuLi50aGlzLm9wdGlvbnNcbiAgICB9KTtcbiAgfVxuICBjbG9uZShvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgdGhpcy5vcHRpb25zO1xuICAgIG9wdGlvbnMucHJlZml4ID0gb3B0aW9ucy5wcmVmaXggfHwgdGhpcy5wcmVmaXg7XG4gICAgcmV0dXJuIG5ldyBMb2dnZXIodGhpcy5sb2dnZXIsIG9wdGlvbnMpO1xuICB9XG59XG52YXIgYmFzZUxvZ2dlciA9IG5ldyBMb2dnZXIoKTtcblxuY2xhc3MgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5vYnNlcnZlcnMgPSB7fTtcbiAgfVxuICBvbihldmVudHMsIGxpc3RlbmVyKSB7XG4gICAgZXZlbnRzLnNwbGl0KCcgJykuZm9yRWFjaChldmVudCA9PiB7XG4gICAgICBpZiAoIXRoaXMub2JzZXJ2ZXJzW2V2ZW50XSkgdGhpcy5vYnNlcnZlcnNbZXZlbnRdID0gbmV3IE1hcCgpO1xuICAgICAgY29uc3QgbnVtTGlzdGVuZXJzID0gdGhpcy5vYnNlcnZlcnNbZXZlbnRdLmdldChsaXN0ZW5lcikgfHwgMDtcbiAgICAgIHRoaXMub2JzZXJ2ZXJzW2V2ZW50XS5zZXQobGlzdGVuZXIsIG51bUxpc3RlbmVycyArIDEpO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIG9mZihldmVudCwgbGlzdGVuZXIpIHtcbiAgICBpZiAoIXRoaXMub2JzZXJ2ZXJzW2V2ZW50XSkgcmV0dXJuO1xuICAgIGlmICghbGlzdGVuZXIpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLm9ic2VydmVyc1tldmVudF07XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMub2JzZXJ2ZXJzW2V2ZW50XS5kZWxldGUobGlzdGVuZXIpO1xuICB9XG4gIGVtaXQoZXZlbnQpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG4gICAgaWYgKHRoaXMub2JzZXJ2ZXJzW2V2ZW50XSkge1xuICAgICAgY29uc3QgY2xvbmVkID0gQXJyYXkuZnJvbSh0aGlzLm9ic2VydmVyc1tldmVudF0uZW50cmllcygpKTtcbiAgICAgIGNsb25lZC5mb3JFYWNoKF9yZWYgPT4ge1xuICAgICAgICBsZXQgW29ic2VydmVyLCBudW1UaW1lc0FkZGVkXSA9IF9yZWY7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVGltZXNBZGRlZDsgaSsrKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIoLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodGhpcy5vYnNlcnZlcnNbJyonXSkge1xuICAgICAgY29uc3QgY2xvbmVkID0gQXJyYXkuZnJvbSh0aGlzLm9ic2VydmVyc1snKiddLmVudHJpZXMoKSk7XG4gICAgICBjbG9uZWQuZm9yRWFjaChfcmVmMiA9PiB7XG4gICAgICAgIGxldCBbb2JzZXJ2ZXIsIG51bVRpbWVzQWRkZWRdID0gX3JlZjI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVGltZXNBZGRlZDsgaSsrKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIuYXBwbHkob2JzZXJ2ZXIsIFtldmVudCwgLi4uYXJnc10pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgZGVmZXIgPSAoKSA9PiB7XG4gIGxldCByZXM7XG4gIGxldCByZWo7XG4gIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgcmVzID0gcmVzb2x2ZTtcbiAgICByZWogPSByZWplY3Q7XG4gIH0pO1xuICBwcm9taXNlLnJlc29sdmUgPSByZXM7XG4gIHByb21pc2UucmVqZWN0ID0gcmVqO1xuICByZXR1cm4gcHJvbWlzZTtcbn07XG5jb25zdCBtYWtlU3RyaW5nID0gb2JqZWN0ID0+IHtcbiAgaWYgKG9iamVjdCA9PSBudWxsKSByZXR1cm4gJyc7XG4gIHJldHVybiAnJyArIG9iamVjdDtcbn07XG5jb25zdCBjb3B5ID0gKGEsIHMsIHQpID0+IHtcbiAgYS5mb3JFYWNoKG0gPT4ge1xuICAgIGlmIChzW21dKSB0W21dID0gc1ttXTtcbiAgfSk7XG59O1xuY29uc3QgbGFzdE9mUGF0aFNlcGFyYXRvclJlZ0V4cCA9IC8jIyMvZztcbmNvbnN0IGNsZWFuS2V5ID0ga2V5ID0+IGtleSAmJiBrZXkuaW5kZXhPZignIyMjJykgPiAtMSA/IGtleS5yZXBsYWNlKGxhc3RPZlBhdGhTZXBhcmF0b3JSZWdFeHAsICcuJykgOiBrZXk7XG5jb25zdCBjYW5Ob3RUcmF2ZXJzZURlZXBlciA9IG9iamVjdCA9PiAhb2JqZWN0IHx8IHR5cGVvZiBvYmplY3QgPT09ICdzdHJpbmcnO1xuY29uc3QgZ2V0TGFzdE9mUGF0aCA9IChvYmplY3QsIHBhdGgsIEVtcHR5KSA9PiB7XG4gIGNvbnN0IHN0YWNrID0gdHlwZW9mIHBhdGggIT09ICdzdHJpbmcnID8gcGF0aCA6IHBhdGguc3BsaXQoJy4nKTtcbiAgbGV0IHN0YWNrSW5kZXggPSAwO1xuICB3aGlsZSAoc3RhY2tJbmRleCA8IHN0YWNrLmxlbmd0aCAtIDEpIHtcbiAgICBpZiAoY2FuTm90VHJhdmVyc2VEZWVwZXIob2JqZWN0KSkgcmV0dXJuIHt9O1xuICAgIGNvbnN0IGtleSA9IGNsZWFuS2V5KHN0YWNrW3N0YWNrSW5kZXhdKTtcbiAgICBpZiAoIW9iamVjdFtrZXldICYmIEVtcHR5KSBvYmplY3Rba2V5XSA9IG5ldyBFbXB0eSgpO1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICBvYmplY3QgPSBvYmplY3Rba2V5XTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqZWN0ID0ge307XG4gICAgfVxuICAgICsrc3RhY2tJbmRleDtcbiAgfVxuICBpZiAoY2FuTm90VHJhdmVyc2VEZWVwZXIob2JqZWN0KSkgcmV0dXJuIHt9O1xuICByZXR1cm4ge1xuICAgIG9iajogb2JqZWN0LFxuICAgIGs6IGNsZWFuS2V5KHN0YWNrW3N0YWNrSW5kZXhdKVxuICB9O1xufTtcbmNvbnN0IHNldFBhdGggPSAob2JqZWN0LCBwYXRoLCBuZXdWYWx1ZSkgPT4ge1xuICBjb25zdCB7XG4gICAgb2JqLFxuICAgIGtcbiAgfSA9IGdldExhc3RPZlBhdGgob2JqZWN0LCBwYXRoLCBPYmplY3QpO1xuICBpZiAob2JqICE9PSB1bmRlZmluZWQgfHwgcGF0aC5sZW5ndGggPT09IDEpIHtcbiAgICBvYmpba10gPSBuZXdWYWx1ZTtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IGUgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XG4gIGxldCBwID0gcGF0aC5zbGljZSgwLCBwYXRoLmxlbmd0aCAtIDEpO1xuICBsZXQgbGFzdCA9IGdldExhc3RPZlBhdGgob2JqZWN0LCBwLCBPYmplY3QpO1xuICB3aGlsZSAobGFzdC5vYmogPT09IHVuZGVmaW5lZCAmJiBwLmxlbmd0aCkge1xuICAgIGUgPSBgJHtwW3AubGVuZ3RoIC0gMV19LiR7ZX1gO1xuICAgIHAgPSBwLnNsaWNlKDAsIHAubGVuZ3RoIC0gMSk7XG4gICAgbGFzdCA9IGdldExhc3RPZlBhdGgob2JqZWN0LCBwLCBPYmplY3QpO1xuICAgIGlmIChsYXN0ICYmIGxhc3Qub2JqICYmIHR5cGVvZiBsYXN0Lm9ialtgJHtsYXN0Lmt9LiR7ZX1gXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxhc3Qub2JqID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuICBsYXN0Lm9ialtgJHtsYXN0Lmt9LiR7ZX1gXSA9IG5ld1ZhbHVlO1xufTtcbmNvbnN0IHB1c2hQYXRoID0gKG9iamVjdCwgcGF0aCwgbmV3VmFsdWUsIGNvbmNhdCkgPT4ge1xuICBjb25zdCB7XG4gICAgb2JqLFxuICAgIGtcbiAgfSA9IGdldExhc3RPZlBhdGgob2JqZWN0LCBwYXRoLCBPYmplY3QpO1xuICBvYmpba10gPSBvYmpba10gfHwgW107XG4gIG9ialtrXS5wdXNoKG5ld1ZhbHVlKTtcbn07XG5jb25zdCBnZXRQYXRoID0gKG9iamVjdCwgcGF0aCkgPT4ge1xuICBjb25zdCB7XG4gICAgb2JqLFxuICAgIGtcbiAgfSA9IGdldExhc3RPZlBhdGgob2JqZWN0LCBwYXRoKTtcbiAgaWYgKCFvYmopIHJldHVybiB1bmRlZmluZWQ7XG4gIHJldHVybiBvYmpba107XG59O1xuY29uc3QgZ2V0UGF0aFdpdGhEZWZhdWx0cyA9IChkYXRhLCBkZWZhdWx0RGF0YSwga2V5KSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gZ2V0UGF0aChkYXRhLCBrZXkpO1xuICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICByZXR1cm4gZ2V0UGF0aChkZWZhdWx0RGF0YSwga2V5KTtcbn07XG5jb25zdCBkZWVwRXh0ZW5kID0gKHRhcmdldCwgc291cmNlLCBvdmVyd3JpdGUpID0+IHtcbiAgZm9yIChjb25zdCBwcm9wIGluIHNvdXJjZSkge1xuICAgIGlmIChwcm9wICE9PSAnX19wcm90b19fJyAmJiBwcm9wICE9PSAnY29uc3RydWN0b3InKSB7XG4gICAgICBpZiAocHJvcCBpbiB0YXJnZXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXRbcHJvcF0gPT09ICdzdHJpbmcnIHx8IHRhcmdldFtwcm9wXSBpbnN0YW5jZW9mIFN0cmluZyB8fCB0eXBlb2Ygc291cmNlW3Byb3BdID09PSAnc3RyaW5nJyB8fCBzb3VyY2VbcHJvcF0gaW5zdGFuY2VvZiBTdHJpbmcpIHtcbiAgICAgICAgICBpZiAob3ZlcndyaXRlKSB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVlcEV4dGVuZCh0YXJnZXRbcHJvcF0sIHNvdXJjZVtwcm9wXSwgb3ZlcndyaXRlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufTtcbmNvbnN0IHJlZ2V4RXNjYXBlID0gc3RyID0+IHN0ci5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgJ1xcXFwkJicpO1xudmFyIF9lbnRpdHlNYXAgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7JyxcbiAgXCInXCI6ICcmIzM5OycsXG4gICcvJzogJyYjeDJGOydcbn07XG5jb25zdCBlc2NhcGUgPSBkYXRhID0+IHtcbiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBkYXRhLnJlcGxhY2UoL1smPD5cIidcXC9dL2csIHMgPT4gX2VudGl0eU1hcFtzXSk7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59O1xuY2xhc3MgUmVnRXhwQ2FjaGUge1xuICBjb25zdHJ1Y3RvcihjYXBhY2l0eSkge1xuICAgIHRoaXMuY2FwYWNpdHkgPSBjYXBhY2l0eTtcbiAgICB0aGlzLnJlZ0V4cE1hcCA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLnJlZ0V4cFF1ZXVlID0gW107XG4gIH1cbiAgZ2V0UmVnRXhwKHBhdHRlcm4pIHtcbiAgICBjb25zdCByZWdFeHBGcm9tQ2FjaGUgPSB0aGlzLnJlZ0V4cE1hcC5nZXQocGF0dGVybik7XG4gICAgaWYgKHJlZ0V4cEZyb21DYWNoZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gcmVnRXhwRnJvbUNhY2hlO1xuICAgIH1cbiAgICBjb25zdCByZWdFeHBOZXcgPSBuZXcgUmVnRXhwKHBhdHRlcm4pO1xuICAgIGlmICh0aGlzLnJlZ0V4cFF1ZXVlLmxlbmd0aCA9PT0gdGhpcy5jYXBhY2l0eSkge1xuICAgICAgdGhpcy5yZWdFeHBNYXAuZGVsZXRlKHRoaXMucmVnRXhwUXVldWUuc2hpZnQoKSk7XG4gICAgfVxuICAgIHRoaXMucmVnRXhwTWFwLnNldChwYXR0ZXJuLCByZWdFeHBOZXcpO1xuICAgIHRoaXMucmVnRXhwUXVldWUucHVzaChwYXR0ZXJuKTtcbiAgICByZXR1cm4gcmVnRXhwTmV3O1xuICB9XG59XG5jb25zdCBjaGFycyA9IFsnICcsICcsJywgJz8nLCAnIScsICc7J107XG5jb25zdCBsb29rc0xpa2VPYmplY3RQYXRoUmVnRXhwQ2FjaGUgPSBuZXcgUmVnRXhwQ2FjaGUoMjApO1xuY29uc3QgbG9va3NMaWtlT2JqZWN0UGF0aCA9IChrZXksIG5zU2VwYXJhdG9yLCBrZXlTZXBhcmF0b3IpID0+IHtcbiAgbnNTZXBhcmF0b3IgPSBuc1NlcGFyYXRvciB8fCAnJztcbiAga2V5U2VwYXJhdG9yID0ga2V5U2VwYXJhdG9yIHx8ICcnO1xuICBjb25zdCBwb3NzaWJsZUNoYXJzID0gY2hhcnMuZmlsdGVyKGMgPT4gbnNTZXBhcmF0b3IuaW5kZXhPZihjKSA8IDAgJiYga2V5U2VwYXJhdG9yLmluZGV4T2YoYykgPCAwKTtcbiAgaWYgKHBvc3NpYmxlQ2hhcnMubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcbiAgY29uc3QgciA9IGxvb2tzTGlrZU9iamVjdFBhdGhSZWdFeHBDYWNoZS5nZXRSZWdFeHAoYCgke3Bvc3NpYmxlQ2hhcnMubWFwKGMgPT4gYyA9PT0gJz8nID8gJ1xcXFw/JyA6IGMpLmpvaW4oJ3wnKX0pYCk7XG4gIGxldCBtYXRjaGVkID0gIXIudGVzdChrZXkpO1xuICBpZiAoIW1hdGNoZWQpIHtcbiAgICBjb25zdCBraSA9IGtleS5pbmRleE9mKGtleVNlcGFyYXRvcik7XG4gICAgaWYgKGtpID4gMCAmJiAhci50ZXN0KGtleS5zdWJzdHJpbmcoMCwga2kpKSkge1xuICAgICAgbWF0Y2hlZCA9IHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBtYXRjaGVkO1xufTtcbmNvbnN0IGRlZXBGaW5kID0gZnVuY3Rpb24gKG9iaiwgcGF0aCkge1xuICBsZXQga2V5U2VwYXJhdG9yID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnLic7XG4gIGlmICghb2JqKSByZXR1cm4gdW5kZWZpbmVkO1xuICBpZiAob2JqW3BhdGhdKSByZXR1cm4gb2JqW3BhdGhdO1xuICBjb25zdCB0b2tlbnMgPSBwYXRoLnNwbGl0KGtleVNlcGFyYXRvcik7XG4gIGxldCBjdXJyZW50ID0gb2JqO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7KSB7XG4gICAgaWYgKCFjdXJyZW50IHx8IHR5cGVvZiBjdXJyZW50ICE9PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgbGV0IG5leHQ7XG4gICAgbGV0IG5leHRQYXRoID0gJyc7XG4gICAgZm9yIChsZXQgaiA9IGk7IGogPCB0b2tlbnMubGVuZ3RoOyArK2opIHtcbiAgICAgIGlmIChqICE9PSBpKSB7XG4gICAgICAgIG5leHRQYXRoICs9IGtleVNlcGFyYXRvcjtcbiAgICAgIH1cbiAgICAgIG5leHRQYXRoICs9IHRva2Vuc1tqXTtcbiAgICAgIG5leHQgPSBjdXJyZW50W25leHRQYXRoXTtcbiAgICAgIGlmIChuZXh0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKFsnc3RyaW5nJywgJ251bWJlcicsICdib29sZWFuJ10uaW5kZXhPZih0eXBlb2YgbmV4dCkgPiAtMSAmJiBqIDwgdG9rZW5zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpICs9IGogLSBpICsgMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGN1cnJlbnQgPSBuZXh0O1xuICB9XG4gIHJldHVybiBjdXJyZW50O1xufTtcbmNvbnN0IGdldENsZWFuZWRDb2RlID0gY29kZSA9PiB7XG4gIGlmIChjb2RlICYmIGNvZGUuaW5kZXhPZignXycpID4gMCkgcmV0dXJuIGNvZGUucmVwbGFjZSgnXycsICctJyk7XG4gIHJldHVybiBjb2RlO1xufTtcblxuY2xhc3MgUmVzb3VyY2VTdG9yZSBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge1xuICAgICAgbnM6IFsndHJhbnNsYXRpb24nXSxcbiAgICAgIGRlZmF1bHROUzogJ3RyYW5zbGF0aW9uJ1xuICAgIH07XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmRhdGEgPSBkYXRhIHx8IHt9O1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvciA9ICcuJztcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgYWRkTmFtZXNwYWNlcyhucykge1xuICAgIGlmICh0aGlzLm9wdGlvbnMubnMuaW5kZXhPZihucykgPCAwKSB7XG4gICAgICB0aGlzLm9wdGlvbnMubnMucHVzaChucyk7XG4gICAgfVxuICB9XG4gIHJlbW92ZU5hbWVzcGFjZXMobnMpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMub3B0aW9ucy5ucy5pbmRleE9mKG5zKTtcbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgdGhpcy5vcHRpb25zLm5zLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICB9XG4gIGdldFJlc291cmNlKGxuZywgbnMsIGtleSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcbiAgICBjb25zdCBrZXlTZXBhcmF0b3IgPSBvcHRpb25zLmtleVNlcGFyYXRvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5rZXlTZXBhcmF0b3IgOiB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yO1xuICAgIGNvbnN0IGlnbm9yZUpTT05TdHJ1Y3R1cmUgPSBvcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSA6IHRoaXMub3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlO1xuICAgIGxldCBwYXRoO1xuICAgIGlmIChsbmcuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgIHBhdGggPSBsbmcuc3BsaXQoJy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGF0aCA9IFtsbmcsIG5zXTtcbiAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoa2V5KSkge1xuICAgICAgICAgIHBhdGgucHVzaCguLi5rZXkpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnICYmIGtleVNlcGFyYXRvcikge1xuICAgICAgICAgIHBhdGgucHVzaCguLi5rZXkuc3BsaXQoa2V5U2VwYXJhdG9yKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGF0aC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gZ2V0UGF0aCh0aGlzLmRhdGEsIHBhdGgpO1xuICAgIGlmICghcmVzdWx0ICYmICFucyAmJiAha2V5ICYmIGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgbG5nID0gcGF0aFswXTtcbiAgICAgIG5zID0gcGF0aFsxXTtcbiAgICAgIGtleSA9IHBhdGguc2xpY2UoMikuam9pbignLicpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0IHx8ICFpZ25vcmVKU09OU3RydWN0dXJlIHx8IHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSByZXR1cm4gcmVzdWx0O1xuICAgIHJldHVybiBkZWVwRmluZCh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhW2xuZ10gJiYgdGhpcy5kYXRhW2xuZ11bbnNdLCBrZXksIGtleVNlcGFyYXRvcik7XG4gIH1cbiAgYWRkUmVzb3VyY2UobG5nLCBucywga2V5LCB2YWx1ZSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB7XG4gICAgICBzaWxlbnQ6IGZhbHNlXG4gICAgfTtcbiAgICBjb25zdCBrZXlTZXBhcmF0b3IgPSBvcHRpb25zLmtleVNlcGFyYXRvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5rZXlTZXBhcmF0b3IgOiB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yO1xuICAgIGxldCBwYXRoID0gW2xuZywgbnNdO1xuICAgIGlmIChrZXkpIHBhdGggPSBwYXRoLmNvbmNhdChrZXlTZXBhcmF0b3IgPyBrZXkuc3BsaXQoa2V5U2VwYXJhdG9yKSA6IGtleSk7XG4gICAgaWYgKGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgcGF0aCA9IGxuZy5zcGxpdCgnLicpO1xuICAgICAgdmFsdWUgPSBucztcbiAgICAgIG5zID0gcGF0aFsxXTtcbiAgICB9XG4gICAgdGhpcy5hZGROYW1lc3BhY2VzKG5zKTtcbiAgICBzZXRQYXRoKHRoaXMuZGF0YSwgcGF0aCwgdmFsdWUpO1xuICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMuZW1pdCgnYWRkZWQnLCBsbmcsIG5zLCBrZXksIHZhbHVlKTtcbiAgfVxuICBhZGRSZXNvdXJjZXMobG5nLCBucywgcmVzb3VyY2VzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHtcbiAgICAgIHNpbGVudDogZmFsc2VcbiAgICB9O1xuICAgIGZvciAoY29uc3QgbSBpbiByZXNvdXJjZXMpIHtcbiAgICAgIGlmICh0eXBlb2YgcmVzb3VyY2VzW21dID09PSAnc3RyaW5nJyB8fCBBcnJheS5pc0FycmF5KHJlc291cmNlc1ttXSkpIHRoaXMuYWRkUmVzb3VyY2UobG5nLCBucywgbSwgcmVzb3VyY2VzW21dLCB7XG4gICAgICAgIHNpbGVudDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMuZW1pdCgnYWRkZWQnLCBsbmcsIG5zLCByZXNvdXJjZXMpO1xuICB9XG4gIGFkZFJlc291cmNlQnVuZGxlKGxuZywgbnMsIHJlc291cmNlcywgZGVlcCwgb3ZlcndyaXRlKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gNSAmJiBhcmd1bWVudHNbNV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s1XSA6IHtcbiAgICAgIHNpbGVudDogZmFsc2UsXG4gICAgICBza2lwQ29weTogZmFsc2VcbiAgICB9O1xuICAgIGxldCBwYXRoID0gW2xuZywgbnNdO1xuICAgIGlmIChsbmcuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgIHBhdGggPSBsbmcuc3BsaXQoJy4nKTtcbiAgICAgIGRlZXAgPSByZXNvdXJjZXM7XG4gICAgICByZXNvdXJjZXMgPSBucztcbiAgICAgIG5zID0gcGF0aFsxXTtcbiAgICB9XG4gICAgdGhpcy5hZGROYW1lc3BhY2VzKG5zKTtcbiAgICBsZXQgcGFjayA9IGdldFBhdGgodGhpcy5kYXRhLCBwYXRoKSB8fCB7fTtcbiAgICBpZiAoIW9wdGlvbnMuc2tpcENvcHkpIHJlc291cmNlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzb3VyY2VzKSk7XG4gICAgaWYgKGRlZXApIHtcbiAgICAgIGRlZXBFeHRlbmQocGFjaywgcmVzb3VyY2VzLCBvdmVyd3JpdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYWNrID0ge1xuICAgICAgICAuLi5wYWNrLFxuICAgICAgICAuLi5yZXNvdXJjZXNcbiAgICAgIH07XG4gICAgfVxuICAgIHNldFBhdGgodGhpcy5kYXRhLCBwYXRoLCBwYWNrKTtcbiAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLmVtaXQoJ2FkZGVkJywgbG5nLCBucywgcmVzb3VyY2VzKTtcbiAgfVxuICByZW1vdmVSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSB7XG4gICAgaWYgKHRoaXMuaGFzUmVzb3VyY2VCdW5kbGUobG5nLCBucykpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmRhdGFbbG5nXVtuc107XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlTmFtZXNwYWNlcyhucyk7XG4gICAgdGhpcy5lbWl0KCdyZW1vdmVkJywgbG5nLCBucyk7XG4gIH1cbiAgaGFzUmVzb3VyY2VCdW5kbGUobG5nLCBucykge1xuICAgIHJldHVybiB0aGlzLmdldFJlc291cmNlKGxuZywgbnMpICE9PSB1bmRlZmluZWQ7XG4gIH1cbiAgZ2V0UmVzb3VyY2VCdW5kbGUobG5nLCBucykge1xuICAgIGlmICghbnMpIG5zID0gdGhpcy5vcHRpb25zLmRlZmF1bHROUztcbiAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgPT09ICd2MScpIHJldHVybiB7XG4gICAgICAuLi57fSxcbiAgICAgIC4uLnRoaXMuZ2V0UmVzb3VyY2UobG5nLCBucylcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmdldFJlc291cmNlKGxuZywgbnMpO1xuICB9XG4gIGdldERhdGFCeUxhbmd1YWdlKGxuZykge1xuICAgIHJldHVybiB0aGlzLmRhdGFbbG5nXTtcbiAgfVxuICBoYXNMYW5ndWFnZVNvbWVUcmFuc2xhdGlvbnMobG5nKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0RGF0YUJ5TGFuZ3VhZ2UobG5nKTtcbiAgICBjb25zdCBuID0gZGF0YSAmJiBPYmplY3Qua2V5cyhkYXRhKSB8fCBbXTtcbiAgICByZXR1cm4gISFuLmZpbmQodiA9PiBkYXRhW3ZdICYmIE9iamVjdC5rZXlzKGRhdGFbdl0pLmxlbmd0aCA+IDApO1xuICB9XG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xuICB9XG59XG5cbnZhciBwb3N0UHJvY2Vzc29yID0ge1xuICBwcm9jZXNzb3JzOiB7fSxcbiAgYWRkUG9zdFByb2Nlc3Nvcihtb2R1bGUpIHtcbiAgICB0aGlzLnByb2Nlc3NvcnNbbW9kdWxlLm5hbWVdID0gbW9kdWxlO1xuICB9LFxuICBoYW5kbGUocHJvY2Vzc29ycywgdmFsdWUsIGtleSwgb3B0aW9ucywgdHJhbnNsYXRvcikge1xuICAgIHByb2Nlc3NvcnMuZm9yRWFjaChwcm9jZXNzb3IgPT4ge1xuICAgICAgaWYgKHRoaXMucHJvY2Vzc29yc1twcm9jZXNzb3JdKSB2YWx1ZSA9IHRoaXMucHJvY2Vzc29yc1twcm9jZXNzb3JdLnByb2Nlc3ModmFsdWUsIGtleSwgb3B0aW9ucywgdHJhbnNsYXRvcik7XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59O1xuXG5jb25zdCBjaGVja2VkTG9hZGVkRm9yID0ge307XG5jbGFzcyBUcmFuc2xhdG9yIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3Ioc2VydmljZXMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgc3VwZXIoKTtcbiAgICBjb3B5KFsncmVzb3VyY2VTdG9yZScsICdsYW5ndWFnZVV0aWxzJywgJ3BsdXJhbFJlc29sdmVyJywgJ2ludGVycG9sYXRvcicsICdiYWNrZW5kQ29ubmVjdG9yJywgJ2kxOG5Gb3JtYXQnLCAndXRpbHMnXSwgc2VydmljZXMsIHRoaXMpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvciA9ICcuJztcbiAgICB9XG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgndHJhbnNsYXRvcicpO1xuICB9XG4gIGNoYW5nZUxhbmd1YWdlKGxuZykge1xuICAgIGlmIChsbmcpIHRoaXMubGFuZ3VhZ2UgPSBsbmc7XG4gIH1cbiAgZXhpc3RzKGtleSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7XG4gICAgICBpbnRlcnBvbGF0aW9uOiB7fVxuICAgIH07XG4gICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkIHx8IGtleSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCByZXNvbHZlZCA9IHRoaXMucmVzb2x2ZShrZXksIG9wdGlvbnMpO1xuICAgIHJldHVybiByZXNvbHZlZCAmJiByZXNvbHZlZC5yZXMgIT09IHVuZGVmaW5lZDtcbiAgfVxuICBleHRyYWN0RnJvbUtleShrZXksIG9wdGlvbnMpIHtcbiAgICBsZXQgbnNTZXBhcmF0b3IgPSBvcHRpb25zLm5zU2VwYXJhdG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5zU2VwYXJhdG9yIDogdGhpcy5vcHRpb25zLm5zU2VwYXJhdG9yO1xuICAgIGlmIChuc1NlcGFyYXRvciA9PT0gdW5kZWZpbmVkKSBuc1NlcGFyYXRvciA9ICc6JztcbiAgICBjb25zdCBrZXlTZXBhcmF0b3IgPSBvcHRpb25zLmtleVNlcGFyYXRvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5rZXlTZXBhcmF0b3IgOiB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yO1xuICAgIGxldCBuYW1lc3BhY2VzID0gb3B0aW9ucy5ucyB8fCB0aGlzLm9wdGlvbnMuZGVmYXVsdE5TIHx8IFtdO1xuICAgIGNvbnN0IHdvdWxkQ2hlY2tGb3JOc0luS2V5ID0gbnNTZXBhcmF0b3IgJiYga2V5LmluZGV4T2YobnNTZXBhcmF0b3IpID4gLTE7XG4gICAgY29uc3Qgc2VlbXNOYXR1cmFsTGFuZ3VhZ2UgPSAhdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkS2V5U2VwYXJhdG9yICYmICFvcHRpb25zLmtleVNlcGFyYXRvciAmJiAhdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkTnNTZXBhcmF0b3IgJiYgIW9wdGlvbnMubnNTZXBhcmF0b3IgJiYgIWxvb2tzTGlrZU9iamVjdFBhdGgoa2V5LCBuc1NlcGFyYXRvciwga2V5U2VwYXJhdG9yKTtcbiAgICBpZiAod291bGRDaGVja0Zvck5zSW5LZXkgJiYgIXNlZW1zTmF0dXJhbExhbmd1YWdlKSB7XG4gICAgICBjb25zdCBtID0ga2V5Lm1hdGNoKHRoaXMuaW50ZXJwb2xhdG9yLm5lc3RpbmdSZWdleHApO1xuICAgICAgaWYgKG0gJiYgbS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAga2V5LFxuICAgICAgICAgIG5hbWVzcGFjZXNcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcnRzID0ga2V5LnNwbGl0KG5zU2VwYXJhdG9yKTtcbiAgICAgIGlmIChuc1NlcGFyYXRvciAhPT0ga2V5U2VwYXJhdG9yIHx8IG5zU2VwYXJhdG9yID09PSBrZXlTZXBhcmF0b3IgJiYgdGhpcy5vcHRpb25zLm5zLmluZGV4T2YocGFydHNbMF0pID4gLTEpIG5hbWVzcGFjZXMgPSBwYXJ0cy5zaGlmdCgpO1xuICAgICAga2V5ID0gcGFydHMuam9pbihrZXlTZXBhcmF0b3IpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZXMgPT09ICdzdHJpbmcnKSBuYW1lc3BhY2VzID0gW25hbWVzcGFjZXNdO1xuICAgIHJldHVybiB7XG4gICAgICBrZXksXG4gICAgICBuYW1lc3BhY2VzXG4gICAgfTtcbiAgfVxuICB0cmFuc2xhdGUoa2V5cywgb3B0aW9ucywgbGFzdEtleSkge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcgJiYgdGhpcy5vcHRpb25zLm92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyKSB7XG4gICAgICBvcHRpb25zID0gdGhpcy5vcHRpb25zLm92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyKGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ29iamVjdCcpIG9wdGlvbnMgPSB7XG4gICAgICAuLi5vcHRpb25zXG4gICAgfTtcbiAgICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTtcbiAgICBpZiAoa2V5cyA9PT0gdW5kZWZpbmVkIHx8IGtleXMgPT09IG51bGwpIHJldHVybiAnJztcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoa2V5cykpIGtleXMgPSBbU3RyaW5nKGtleXMpXTtcbiAgICBjb25zdCByZXR1cm5EZXRhaWxzID0gb3B0aW9ucy5yZXR1cm5EZXRhaWxzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnJldHVybkRldGFpbHMgOiB0aGlzLm9wdGlvbnMucmV0dXJuRGV0YWlscztcbiAgICBjb25zdCBrZXlTZXBhcmF0b3IgPSBvcHRpb25zLmtleVNlcGFyYXRvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5rZXlTZXBhcmF0b3IgOiB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yO1xuICAgIGNvbnN0IHtcbiAgICAgIGtleSxcbiAgICAgIG5hbWVzcGFjZXNcbiAgICB9ID0gdGhpcy5leHRyYWN0RnJvbUtleShrZXlzW2tleXMubGVuZ3RoIC0gMV0sIG9wdGlvbnMpO1xuICAgIGNvbnN0IG5hbWVzcGFjZSA9IG5hbWVzcGFjZXNbbmFtZXNwYWNlcy5sZW5ndGggLSAxXTtcbiAgICBjb25zdCBsbmcgPSBvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlO1xuICAgIGNvbnN0IGFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlID0gb3B0aW9ucy5hcHBlbmROYW1lc3BhY2VUb0NJTW9kZSB8fCB0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGU7XG4gICAgaWYgKGxuZyAmJiBsbmcudG9Mb3dlckNhc2UoKSA9PT0gJ2NpbW9kZScpIHtcbiAgICAgIGlmIChhcHBlbmROYW1lc3BhY2VUb0NJTW9kZSkge1xuICAgICAgICBjb25zdCBuc1NlcGFyYXRvciA9IG9wdGlvbnMubnNTZXBhcmF0b3IgfHwgdGhpcy5vcHRpb25zLm5zU2VwYXJhdG9yO1xuICAgICAgICBpZiAocmV0dXJuRGV0YWlscykge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXM6IGAke25hbWVzcGFjZX0ke25zU2VwYXJhdG9yfSR7a2V5fWAsXG4gICAgICAgICAgICB1c2VkS2V5OiBrZXksXG4gICAgICAgICAgICBleGFjdFVzZWRLZXk6IGtleSxcbiAgICAgICAgICAgIHVzZWRMbmc6IGxuZyxcbiAgICAgICAgICAgIHVzZWROUzogbmFtZXNwYWNlLFxuICAgICAgICAgICAgdXNlZFBhcmFtczogdGhpcy5nZXRVc2VkUGFyYW1zRGV0YWlscyhvcHRpb25zKVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke25hbWVzcGFjZX0ke25zU2VwYXJhdG9yfSR7a2V5fWA7XG4gICAgICB9XG4gICAgICBpZiAocmV0dXJuRGV0YWlscykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlczoga2V5LFxuICAgICAgICAgIHVzZWRLZXk6IGtleSxcbiAgICAgICAgICBleGFjdFVzZWRLZXk6IGtleSxcbiAgICAgICAgICB1c2VkTG5nOiBsbmcsXG4gICAgICAgICAgdXNlZE5TOiBuYW1lc3BhY2UsXG4gICAgICAgICAgdXNlZFBhcmFtczogdGhpcy5nZXRVc2VkUGFyYW1zRGV0YWlscyhvcHRpb25zKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG4gICAgY29uc3QgcmVzb2x2ZWQgPSB0aGlzLnJlc29sdmUoa2V5cywgb3B0aW9ucyk7XG4gICAgbGV0IHJlcyA9IHJlc29sdmVkICYmIHJlc29sdmVkLnJlcztcbiAgICBjb25zdCByZXNVc2VkS2V5ID0gcmVzb2x2ZWQgJiYgcmVzb2x2ZWQudXNlZEtleSB8fCBrZXk7XG4gICAgY29uc3QgcmVzRXhhY3RVc2VkS2V5ID0gcmVzb2x2ZWQgJiYgcmVzb2x2ZWQuZXhhY3RVc2VkS2V5IHx8IGtleTtcbiAgICBjb25zdCByZXNUeXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShyZXMpO1xuICAgIGNvbnN0IG5vT2JqZWN0ID0gWydbb2JqZWN0IE51bWJlcl0nLCAnW29iamVjdCBGdW5jdGlvbl0nLCAnW29iamVjdCBSZWdFeHBdJ107XG4gICAgY29uc3Qgam9pbkFycmF5cyA9IG9wdGlvbnMuam9pbkFycmF5cyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5qb2luQXJyYXlzIDogdGhpcy5vcHRpb25zLmpvaW5BcnJheXM7XG4gICAgY29uc3QgaGFuZGxlQXNPYmplY3RJbkkxOG5Gb3JtYXQgPSAhdGhpcy5pMThuRm9ybWF0IHx8IHRoaXMuaTE4bkZvcm1hdC5oYW5kbGVBc09iamVjdDtcbiAgICBjb25zdCBoYW5kbGVBc09iamVjdCA9IHR5cGVvZiByZXMgIT09ICdzdHJpbmcnICYmIHR5cGVvZiByZXMgIT09ICdib29sZWFuJyAmJiB0eXBlb2YgcmVzICE9PSAnbnVtYmVyJztcbiAgICBpZiAoaGFuZGxlQXNPYmplY3RJbkkxOG5Gb3JtYXQgJiYgcmVzICYmIGhhbmRsZUFzT2JqZWN0ICYmIG5vT2JqZWN0LmluZGV4T2YocmVzVHlwZSkgPCAwICYmICEodHlwZW9mIGpvaW5BcnJheXMgPT09ICdzdHJpbmcnICYmIEFycmF5LmlzQXJyYXkocmVzKSkpIHtcbiAgICAgIGlmICghb3B0aW9ucy5yZXR1cm5PYmplY3RzICYmICF0aGlzLm9wdGlvbnMucmV0dXJuT2JqZWN0cykge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCdhY2Nlc3NpbmcgYW4gb2JqZWN0IC0gYnV0IHJldHVybk9iamVjdHMgb3B0aW9ucyBpcyBub3QgZW5hYmxlZCEnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gdGhpcy5vcHRpb25zLnJldHVybmVkT2JqZWN0SGFuZGxlciA/IHRoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIocmVzVXNlZEtleSwgcmVzLCB7XG4gICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICBuczogbmFtZXNwYWNlc1xuICAgICAgICB9KSA6IGBrZXkgJyR7a2V5fSAoJHt0aGlzLmxhbmd1YWdlfSknIHJldHVybmVkIGFuIG9iamVjdCBpbnN0ZWFkIG9mIHN0cmluZy5gO1xuICAgICAgICBpZiAocmV0dXJuRGV0YWlscykge1xuICAgICAgICAgIHJlc29sdmVkLnJlcyA9IHI7XG4gICAgICAgICAgcmVzb2x2ZWQudXNlZFBhcmFtcyA9IHRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHMob3B0aW9ucyk7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByO1xuICAgICAgfVxuICAgICAgaWYgKGtleVNlcGFyYXRvcikge1xuICAgICAgICBjb25zdCByZXNUeXBlSXNBcnJheSA9IEFycmF5LmlzQXJyYXkocmVzKTtcbiAgICAgICAgY29uc3QgY29weSA9IHJlc1R5cGVJc0FycmF5ID8gW10gOiB7fTtcbiAgICAgICAgY29uc3QgbmV3S2V5VG9Vc2UgPSByZXNUeXBlSXNBcnJheSA/IHJlc0V4YWN0VXNlZEtleSA6IHJlc1VzZWRLZXk7XG4gICAgICAgIGZvciAoY29uc3QgbSBpbiByZXMpIHtcbiAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlcywgbSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZXBLZXkgPSBgJHtuZXdLZXlUb1VzZX0ke2tleVNlcGFyYXRvcn0ke219YDtcbiAgICAgICAgICAgIGNvcHlbbV0gPSB0aGlzLnRyYW5zbGF0ZShkZWVwS2V5LCB7XG4gICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgIC4uLntcbiAgICAgICAgICAgICAgICBqb2luQXJyYXlzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBuczogbmFtZXNwYWNlc1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjb3B5W21dID09PSBkZWVwS2V5KSBjb3B5W21dID0gcmVzW21dO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXMgPSBjb3B5O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaGFuZGxlQXNPYmplY3RJbkkxOG5Gb3JtYXQgJiYgdHlwZW9mIGpvaW5BcnJheXMgPT09ICdzdHJpbmcnICYmIEFycmF5LmlzQXJyYXkocmVzKSkge1xuICAgICAgcmVzID0gcmVzLmpvaW4oam9pbkFycmF5cyk7XG4gICAgICBpZiAocmVzKSByZXMgPSB0aGlzLmV4dGVuZFRyYW5zbGF0aW9uKHJlcywga2V5cywgb3B0aW9ucywgbGFzdEtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB1c2VkRGVmYXVsdCA9IGZhbHNlO1xuICAgICAgbGV0IHVzZWRLZXkgPSBmYWxzZTtcbiAgICAgIGNvbnN0IG5lZWRzUGx1cmFsSGFuZGxpbmcgPSBvcHRpb25zLmNvdW50ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9wdGlvbnMuY291bnQgIT09ICdzdHJpbmcnO1xuICAgICAgY29uc3QgaGFzRGVmYXVsdFZhbHVlID0gVHJhbnNsYXRvci5oYXNEZWZhdWx0VmFsdWUob3B0aW9ucyk7XG4gICAgICBjb25zdCBkZWZhdWx0VmFsdWVTdWZmaXggPSBuZWVkc1BsdXJhbEhhbmRsaW5nID8gdGhpcy5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXgobG5nLCBvcHRpb25zLmNvdW50LCBvcHRpb25zKSA6ICcnO1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlU3VmZml4T3JkaW5hbEZhbGxiYWNrID0gb3B0aW9ucy5vcmRpbmFsICYmIG5lZWRzUGx1cmFsSGFuZGxpbmcgPyB0aGlzLnBsdXJhbFJlc29sdmVyLmdldFN1ZmZpeChsbmcsIG9wdGlvbnMuY291bnQsIHtcbiAgICAgICAgb3JkaW5hbDogZmFsc2VcbiAgICAgIH0pIDogJyc7XG4gICAgICBjb25zdCBuZWVkc1plcm9TdWZmaXhMb29rdXAgPSBuZWVkc1BsdXJhbEhhbmRsaW5nICYmICFvcHRpb25zLm9yZGluYWwgJiYgb3B0aW9ucy5jb3VudCA9PT0gMCAmJiB0aGlzLnBsdXJhbFJlc29sdmVyLnNob3VsZFVzZUludGxBcGkoKTtcbiAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IG5lZWRzWmVyb1N1ZmZpeExvb2t1cCAmJiBvcHRpb25zW2BkZWZhdWx0VmFsdWUke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2BdIHx8IG9wdGlvbnNbYGRlZmF1bHRWYWx1ZSR7ZGVmYXVsdFZhbHVlU3VmZml4fWBdIHx8IG9wdGlvbnNbYGRlZmF1bHRWYWx1ZSR7ZGVmYXVsdFZhbHVlU3VmZml4T3JkaW5hbEZhbGxiYWNrfWBdIHx8IG9wdGlvbnMuZGVmYXVsdFZhbHVlO1xuICAgICAgaWYgKCF0aGlzLmlzVmFsaWRMb29rdXAocmVzKSAmJiBoYXNEZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgdXNlZERlZmF1bHQgPSB0cnVlO1xuICAgICAgICByZXMgPSBkZWZhdWx0VmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuaXNWYWxpZExvb2t1cChyZXMpKSB7XG4gICAgICAgIHVzZWRLZXkgPSB0cnVlO1xuICAgICAgICByZXMgPSBrZXk7XG4gICAgICB9XG4gICAgICBjb25zdCBtaXNzaW5nS2V5Tm9WYWx1ZUZhbGxiYWNrVG9LZXkgPSBvcHRpb25zLm1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleSB8fCB0aGlzLm9wdGlvbnMubWlzc2luZ0tleU5vVmFsdWVGYWxsYmFja1RvS2V5O1xuICAgICAgY29uc3QgcmVzRm9yTWlzc2luZyA9IG1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleSAmJiB1c2VkS2V5ID8gdW5kZWZpbmVkIDogcmVzO1xuICAgICAgY29uc3QgdXBkYXRlTWlzc2luZyA9IGhhc0RlZmF1bHRWYWx1ZSAmJiBkZWZhdWx0VmFsdWUgIT09IHJlcyAmJiB0aGlzLm9wdGlvbnMudXBkYXRlTWlzc2luZztcbiAgICAgIGlmICh1c2VkS2V5IHx8IHVzZWREZWZhdWx0IHx8IHVwZGF0ZU1pc3NpbmcpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKHVwZGF0ZU1pc3NpbmcgPyAndXBkYXRlS2V5JyA6ICdtaXNzaW5nS2V5JywgbG5nLCBuYW1lc3BhY2UsIGtleSwgdXBkYXRlTWlzc2luZyA/IGRlZmF1bHRWYWx1ZSA6IHJlcyk7XG4gICAgICAgIGlmIChrZXlTZXBhcmF0b3IpIHtcbiAgICAgICAgICBjb25zdCBmayA9IHRoaXMucmVzb2x2ZShrZXksIHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBrZXlTZXBhcmF0b3I6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKGZrICYmIGZrLnJlcykgdGhpcy5sb2dnZXIud2FybignU2VlbXMgdGhlIGxvYWRlZCB0cmFuc2xhdGlvbnMgd2VyZSBpbiBmbGF0IEpTT04gZm9ybWF0IGluc3RlYWQgb2YgbmVzdGVkLiBFaXRoZXIgc2V0IGtleVNlcGFyYXRvcjogZmFsc2Ugb24gaW5pdCBvciBtYWtlIHN1cmUgeW91ciB0cmFuc2xhdGlvbnMgYXJlIHB1Ymxpc2hlZCBpbiBuZXN0ZWQgZm9ybWF0LicpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsbmdzID0gW107XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrTG5ncyA9IHRoaXMubGFuZ3VhZ2VVdGlscy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZywgb3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbyA9PT0gJ2ZhbGxiYWNrJyAmJiBmYWxsYmFja0xuZ3MgJiYgZmFsbGJhY2tMbmdzWzBdKSB7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmYWxsYmFja0xuZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxuZ3MucHVzaChmYWxsYmFja0xuZ3NbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbyA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICBsbmdzID0gdGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsbmdzLnB1c2gob3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2VuZCA9IChsLCBrLCBzcGVjaWZpY0RlZmF1bHRWYWx1ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRlZmF1bHRGb3JNaXNzaW5nID0gaGFzRGVmYXVsdFZhbHVlICYmIHNwZWNpZmljRGVmYXVsdFZhbHVlICE9PSByZXMgPyBzcGVjaWZpY0RlZmF1bHRWYWx1ZSA6IHJlc0Zvck1pc3Npbmc7XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5taXNzaW5nS2V5SGFuZGxlcikge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm1pc3NpbmdLZXlIYW5kbGVyKGwsIG5hbWVzcGFjZSwgaywgZGVmYXVsdEZvck1pc3NpbmcsIHVwZGF0ZU1pc3NpbmcsIG9wdGlvbnMpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5iYWNrZW5kQ29ubmVjdG9yICYmIHRoaXMuYmFja2VuZENvbm5lY3Rvci5zYXZlTWlzc2luZykge1xuICAgICAgICAgICAgdGhpcy5iYWNrZW5kQ29ubmVjdG9yLnNhdmVNaXNzaW5nKGwsIG5hbWVzcGFjZSwgaywgZGVmYXVsdEZvck1pc3NpbmcsIHVwZGF0ZU1pc3NpbmcsIG9wdGlvbnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmVtaXQoJ21pc3NpbmdLZXknLCBsLCBuYW1lc3BhY2UsIGssIHJlcyk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmcpIHtcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNhdmVNaXNzaW5nUGx1cmFscyAmJiBuZWVkc1BsdXJhbEhhbmRsaW5nKSB7XG4gICAgICAgICAgICBsbmdzLmZvckVhY2gobGFuZ3VhZ2UgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBzdWZmaXhlcyA9IHRoaXMucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4ZXMobGFuZ3VhZ2UsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICBpZiAobmVlZHNaZXJvU3VmZml4TG9va3VwICYmIG9wdGlvbnNbYGRlZmF1bHRWYWx1ZSR7dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcn16ZXJvYF0gJiYgc3VmZml4ZXMuaW5kZXhPZihgJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfXplcm9gKSA8IDApIHtcbiAgICAgICAgICAgICAgICBzdWZmaXhlcy5wdXNoKGAke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2ApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHN1ZmZpeGVzLmZvckVhY2goc3VmZml4ID0+IHtcbiAgICAgICAgICAgICAgICBzZW5kKFtsYW5ndWFnZV0sIGtleSArIHN1ZmZpeCwgb3B0aW9uc1tgZGVmYXVsdFZhbHVlJHtzdWZmaXh9YF0gfHwgZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VuZChsbmdzLCBrZXksIGRlZmF1bHRWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXMgPSB0aGlzLmV4dGVuZFRyYW5zbGF0aW9uKHJlcywga2V5cywgb3B0aW9ucywgcmVzb2x2ZWQsIGxhc3RLZXkpO1xuICAgICAgaWYgKHVzZWRLZXkgJiYgcmVzID09PSBrZXkgJiYgdGhpcy5vcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvTWlzc2luZ0tleSkgcmVzID0gYCR7bmFtZXNwYWNlfToke2tleX1gO1xuICAgICAgaWYgKCh1c2VkS2V5IHx8IHVzZWREZWZhdWx0KSAmJiB0aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcikge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgIT09ICd2MScpIHtcbiAgICAgICAgICByZXMgPSB0aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcih0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5ID8gYCR7bmFtZXNwYWNlfToke2tleX1gIDoga2V5LCB1c2VkRGVmYXVsdCA/IHJlcyA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzID0gdGhpcy5vcHRpb25zLnBhcnNlTWlzc2luZ0tleUhhbmRsZXIocmVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocmV0dXJuRGV0YWlscykge1xuICAgICAgcmVzb2x2ZWQucmVzID0gcmVzO1xuICAgICAgcmVzb2x2ZWQudXNlZFBhcmFtcyA9IHRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHMob3B0aW9ucyk7XG4gICAgICByZXR1cm4gcmVzb2x2ZWQ7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbiAgZXh0ZW5kVHJhbnNsYXRpb24ocmVzLCBrZXksIG9wdGlvbnMsIHJlc29sdmVkLCBsYXN0S2V5KSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBpZiAodGhpcy5pMThuRm9ybWF0ICYmIHRoaXMuaTE4bkZvcm1hdC5wYXJzZSkge1xuICAgICAgcmVzID0gdGhpcy5pMThuRm9ybWF0LnBhcnNlKHJlcywge1xuICAgICAgICAuLi50aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzLFxuICAgICAgICAuLi5vcHRpb25zXG4gICAgICB9LCBvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlIHx8IHJlc29sdmVkLnVzZWRMbmcsIHJlc29sdmVkLnVzZWROUywgcmVzb2x2ZWQudXNlZEtleSwge1xuICAgICAgICByZXNvbHZlZFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICghb3B0aW9ucy5za2lwSW50ZXJwb2xhdGlvbikge1xuICAgICAgaWYgKG9wdGlvbnMuaW50ZXJwb2xhdGlvbikgdGhpcy5pbnRlcnBvbGF0b3IuaW5pdCh7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIC4uLntcbiAgICAgICAgICBpbnRlcnBvbGF0aW9uOiB7XG4gICAgICAgICAgICAuLi50aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbixcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuaW50ZXJwb2xhdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjb25zdCBza2lwT25WYXJpYWJsZXMgPSB0eXBlb2YgcmVzID09PSAnc3RyaW5nJyAmJiAob3B0aW9ucyAmJiBvcHRpb25zLmludGVycG9sYXRpb24gJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcyA6IHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcyk7XG4gICAgICBsZXQgbmVzdEJlZjtcbiAgICAgIGlmIChza2lwT25WYXJpYWJsZXMpIHtcbiAgICAgICAgY29uc3QgbmIgPSByZXMubWF0Y2godGhpcy5pbnRlcnBvbGF0b3IubmVzdGluZ1JlZ2V4cCk7XG4gICAgICAgIG5lc3RCZWYgPSBuYiAmJiBuYi5sZW5ndGg7XG4gICAgICB9XG4gICAgICBsZXQgZGF0YSA9IG9wdGlvbnMucmVwbGFjZSAmJiB0eXBlb2Ygb3B0aW9ucy5yZXBsYWNlICE9PSAnc3RyaW5nJyA/IG9wdGlvbnMucmVwbGFjZSA6IG9wdGlvbnM7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcykgZGF0YSA9IHtcbiAgICAgICAgLi4udGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcyxcbiAgICAgICAgLi4uZGF0YVxuICAgICAgfTtcbiAgICAgIHJlcyA9IHRoaXMuaW50ZXJwb2xhdG9yLmludGVycG9sYXRlKHJlcywgZGF0YSwgb3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSB8fCByZXNvbHZlZC51c2VkTG5nLCBvcHRpb25zKTtcbiAgICAgIGlmIChza2lwT25WYXJpYWJsZXMpIHtcbiAgICAgICAgY29uc3QgbmEgPSByZXMubWF0Y2godGhpcy5pbnRlcnBvbGF0b3IubmVzdGluZ1JlZ2V4cCk7XG4gICAgICAgIGNvbnN0IG5lc3RBZnQgPSBuYSAmJiBuYS5sZW5ndGg7XG4gICAgICAgIGlmIChuZXN0QmVmIDwgbmVzdEFmdCkgb3B0aW9ucy5uZXN0ID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoIW9wdGlvbnMubG5nICYmIHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJICE9PSAndjEnICYmIHJlc29sdmVkICYmIHJlc29sdmVkLnJlcykgb3B0aW9ucy5sbmcgPSB0aGlzLmxhbmd1YWdlIHx8IHJlc29sdmVkLnVzZWRMbmc7XG4gICAgICBpZiAob3B0aW9ucy5uZXN0ICE9PSBmYWxzZSkgcmVzID0gdGhpcy5pbnRlcnBvbGF0b3IubmVzdChyZXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGFzdEtleSAmJiBsYXN0S2V5WzBdID09PSBhcmdzWzBdICYmICFvcHRpb25zLmNvbnRleHQpIHtcbiAgICAgICAgICBfdGhpcy5sb2dnZXIud2FybihgSXQgc2VlbXMgeW91IGFyZSBuZXN0aW5nIHJlY3Vyc2l2ZWx5IGtleTogJHthcmdzWzBdfSBpbiBrZXk6ICR7a2V5WzBdfWApO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcy50cmFuc2xhdGUoLi4uYXJncywga2V5KTtcbiAgICAgIH0sIG9wdGlvbnMpO1xuICAgICAgaWYgKG9wdGlvbnMuaW50ZXJwb2xhdGlvbikgdGhpcy5pbnRlcnBvbGF0b3IucmVzZXQoKTtcbiAgICB9XG4gICAgY29uc3QgcG9zdFByb2Nlc3MgPSBvcHRpb25zLnBvc3RQcm9jZXNzIHx8IHRoaXMub3B0aW9ucy5wb3N0UHJvY2VzcztcbiAgICBjb25zdCBwb3N0UHJvY2Vzc29yTmFtZXMgPSB0eXBlb2YgcG9zdFByb2Nlc3MgPT09ICdzdHJpbmcnID8gW3Bvc3RQcm9jZXNzXSA6IHBvc3RQcm9jZXNzO1xuICAgIGlmIChyZXMgIT09IHVuZGVmaW5lZCAmJiByZXMgIT09IG51bGwgJiYgcG9zdFByb2Nlc3Nvck5hbWVzICYmIHBvc3RQcm9jZXNzb3JOYW1lcy5sZW5ndGggJiYgb3B0aW9ucy5hcHBseVBvc3RQcm9jZXNzb3IgIT09IGZhbHNlKSB7XG4gICAgICByZXMgPSBwb3N0UHJvY2Vzc29yLmhhbmRsZShwb3N0UHJvY2Vzc29yTmFtZXMsIHJlcywga2V5LCB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLnBvc3RQcm9jZXNzUGFzc1Jlc29sdmVkID8ge1xuICAgICAgICBpMThuUmVzb2x2ZWQ6IHtcbiAgICAgICAgICAuLi5yZXNvbHZlZCxcbiAgICAgICAgICB1c2VkUGFyYW1zOiB0aGlzLmdldFVzZWRQYXJhbXNEZXRhaWxzKG9wdGlvbnMpXG4gICAgICAgIH0sXG4gICAgICAgIC4uLm9wdGlvbnNcbiAgICAgIH0gOiBvcHRpb25zLCB0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuICByZXNvbHZlKGtleXMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgbGV0IGZvdW5kO1xuICAgIGxldCB1c2VkS2V5O1xuICAgIGxldCBleGFjdFVzZWRLZXk7XG4gICAgbGV0IHVzZWRMbmc7XG4gICAgbGV0IHVzZWROUztcbiAgICBpZiAodHlwZW9mIGtleXMgPT09ICdzdHJpbmcnKSBrZXlzID0gW2tleXNdO1xuICAgIGtleXMuZm9yRWFjaChrID0+IHtcbiAgICAgIGlmICh0aGlzLmlzVmFsaWRMb29rdXAoZm91bmQpKSByZXR1cm47XG4gICAgICBjb25zdCBleHRyYWN0ZWQgPSB0aGlzLmV4dHJhY3RGcm9tS2V5KGssIG9wdGlvbnMpO1xuICAgICAgY29uc3Qga2V5ID0gZXh0cmFjdGVkLmtleTtcbiAgICAgIHVzZWRLZXkgPSBrZXk7XG4gICAgICBsZXQgbmFtZXNwYWNlcyA9IGV4dHJhY3RlZC5uYW1lc3BhY2VzO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5mYWxsYmFja05TKSBuYW1lc3BhY2VzID0gbmFtZXNwYWNlcy5jb25jYXQodGhpcy5vcHRpb25zLmZhbGxiYWNrTlMpO1xuICAgICAgY29uc3QgbmVlZHNQbHVyYWxIYW5kbGluZyA9IG9wdGlvbnMuY291bnQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb3B0aW9ucy5jb3VudCAhPT0gJ3N0cmluZyc7XG4gICAgICBjb25zdCBuZWVkc1plcm9TdWZmaXhMb29rdXAgPSBuZWVkc1BsdXJhbEhhbmRsaW5nICYmICFvcHRpb25zLm9yZGluYWwgJiYgb3B0aW9ucy5jb3VudCA9PT0gMCAmJiB0aGlzLnBsdXJhbFJlc29sdmVyLnNob3VsZFVzZUludGxBcGkoKTtcbiAgICAgIGNvbnN0IG5lZWRzQ29udGV4dEhhbmRsaW5nID0gb3B0aW9ucy5jb250ZXh0ICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBvcHRpb25zLmNvbnRleHQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBvcHRpb25zLmNvbnRleHQgPT09ICdudW1iZXInKSAmJiBvcHRpb25zLmNvbnRleHQgIT09ICcnO1xuICAgICAgY29uc3QgY29kZXMgPSBvcHRpb25zLmxuZ3MgPyBvcHRpb25zLmxuZ3MgOiB0aGlzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2UsIG9wdGlvbnMuZmFsbGJhY2tMbmcpO1xuICAgICAgbmFtZXNwYWNlcy5mb3JFYWNoKG5zID0+IHtcbiAgICAgICAgaWYgKHRoaXMuaXNWYWxpZExvb2t1cChmb3VuZCkpIHJldHVybjtcbiAgICAgICAgdXNlZE5TID0gbnM7XG4gICAgICAgIGlmICghY2hlY2tlZExvYWRlZEZvcltgJHtjb2Rlc1swXX0tJHtuc31gXSAmJiB0aGlzLnV0aWxzICYmIHRoaXMudXRpbHMuaGFzTG9hZGVkTmFtZXNwYWNlICYmICF0aGlzLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZSh1c2VkTlMpKSB7XG4gICAgICAgICAgY2hlY2tlZExvYWRlZEZvcltgJHtjb2Rlc1swXX0tJHtuc31gXSA9IHRydWU7XG4gICAgICAgICAgdGhpcy5sb2dnZXIud2Fybihga2V5IFwiJHt1c2VkS2V5fVwiIGZvciBsYW5ndWFnZXMgXCIke2NvZGVzLmpvaW4oJywgJyl9XCIgd29uJ3QgZ2V0IHJlc29sdmVkIGFzIG5hbWVzcGFjZSBcIiR7dXNlZE5TfVwiIHdhcyBub3QgeWV0IGxvYWRlZGAsICdUaGlzIG1lYW5zIHNvbWV0aGluZyBJUyBXUk9ORyBpbiB5b3VyIHNldHVwLiBZb3UgYWNjZXNzIHRoZSB0IGZ1bmN0aW9uIGJlZm9yZSBpMThuZXh0LmluaXQgLyBpMThuZXh0LmxvYWROYW1lc3BhY2UgLyBpMThuZXh0LmNoYW5nZUxhbmd1YWdlIHdhcyBkb25lLiBXYWl0IGZvciB0aGUgY2FsbGJhY2sgb3IgUHJvbWlzZSB0byByZXNvbHZlIGJlZm9yZSBhY2Nlc3NpbmcgaXQhISEnKTtcbiAgICAgICAgfVxuICAgICAgICBjb2Rlcy5mb3JFYWNoKGNvZGUgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmlzVmFsaWRMb29rdXAoZm91bmQpKSByZXR1cm47XG4gICAgICAgICAgdXNlZExuZyA9IGNvZGU7XG4gICAgICAgICAgY29uc3QgZmluYWxLZXlzID0gW2tleV07XG4gICAgICAgICAgaWYgKHRoaXMuaTE4bkZvcm1hdCAmJiB0aGlzLmkxOG5Gb3JtYXQuYWRkTG9va3VwS2V5cykge1xuICAgICAgICAgICAgdGhpcy5pMThuRm9ybWF0LmFkZExvb2t1cEtleXMoZmluYWxLZXlzLCBrZXksIGNvZGUsIG5zLCBvcHRpb25zKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHBsdXJhbFN1ZmZpeDtcbiAgICAgICAgICAgIGlmIChuZWVkc1BsdXJhbEhhbmRsaW5nKSBwbHVyYWxTdWZmaXggPSB0aGlzLnBsdXJhbFJlc29sdmVyLmdldFN1ZmZpeChjb2RlLCBvcHRpb25zLmNvdW50LCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IHplcm9TdWZmaXggPSBgJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfXplcm9gO1xuICAgICAgICAgICAgY29uc3Qgb3JkaW5hbFByZWZpeCA9IGAke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9b3JkaW5hbCR7dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcn1gO1xuICAgICAgICAgICAgaWYgKG5lZWRzUGx1cmFsSGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgZmluYWxLZXlzLnB1c2goa2V5ICsgcGx1cmFsU3VmZml4KTtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub3JkaW5hbCAmJiBwbHVyYWxTdWZmaXguaW5kZXhPZihvcmRpbmFsUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGtleSArIHBsdXJhbFN1ZmZpeC5yZXBsYWNlKG9yZGluYWxQcmVmaXgsIHRoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3IpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAobmVlZHNaZXJvU3VmZml4TG9va3VwKSB7XG4gICAgICAgICAgICAgICAgZmluYWxLZXlzLnB1c2goa2V5ICsgemVyb1N1ZmZpeCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZWVkc0NvbnRleHRIYW5kbGluZykge1xuICAgICAgICAgICAgICBjb25zdCBjb250ZXh0S2V5ID0gYCR7a2V5fSR7dGhpcy5vcHRpb25zLmNvbnRleHRTZXBhcmF0b3J9JHtvcHRpb25zLmNvbnRleHR9YDtcbiAgICAgICAgICAgICAgZmluYWxLZXlzLnB1c2goY29udGV4dEtleSk7XG4gICAgICAgICAgICAgIGlmIChuZWVkc1BsdXJhbEhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgZmluYWxLZXlzLnB1c2goY29udGV4dEtleSArIHBsdXJhbFN1ZmZpeCk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub3JkaW5hbCAmJiBwbHVyYWxTdWZmaXguaW5kZXhPZihvcmRpbmFsUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgZmluYWxLZXlzLnB1c2goY29udGV4dEtleSArIHBsdXJhbFN1ZmZpeC5yZXBsYWNlKG9yZGluYWxQcmVmaXgsIHRoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3IpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5lZWRzWmVyb1N1ZmZpeExvb2t1cCkge1xuICAgICAgICAgICAgICAgICAgZmluYWxLZXlzLnB1c2goY29udGV4dEtleSArIHplcm9TdWZmaXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgcG9zc2libGVLZXk7XG4gICAgICAgICAgd2hpbGUgKHBvc3NpYmxlS2V5ID0gZmluYWxLZXlzLnBvcCgpKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZExvb2t1cChmb3VuZCkpIHtcbiAgICAgICAgICAgICAgZXhhY3RVc2VkS2V5ID0gcG9zc2libGVLZXk7XG4gICAgICAgICAgICAgIGZvdW5kID0gdGhpcy5nZXRSZXNvdXJjZShjb2RlLCBucywgcG9zc2libGVLZXksIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzOiBmb3VuZCxcbiAgICAgIHVzZWRLZXksXG4gICAgICBleGFjdFVzZWRLZXksXG4gICAgICB1c2VkTG5nLFxuICAgICAgdXNlZE5TXG4gICAgfTtcbiAgfVxuICBpc1ZhbGlkTG9va3VwKHJlcykge1xuICAgIHJldHVybiByZXMgIT09IHVuZGVmaW5lZCAmJiAhKCF0aGlzLm9wdGlvbnMucmV0dXJuTnVsbCAmJiByZXMgPT09IG51bGwpICYmICEoIXRoaXMub3B0aW9ucy5yZXR1cm5FbXB0eVN0cmluZyAmJiByZXMgPT09ICcnKTtcbiAgfVxuICBnZXRSZXNvdXJjZShjb2RlLCBucywga2V5KSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICAgIGlmICh0aGlzLmkxOG5Gb3JtYXQgJiYgdGhpcy5pMThuRm9ybWF0LmdldFJlc291cmNlKSByZXR1cm4gdGhpcy5pMThuRm9ybWF0LmdldFJlc291cmNlKGNvZGUsIG5zLCBrZXksIG9wdGlvbnMpO1xuICAgIHJldHVybiB0aGlzLnJlc291cmNlU3RvcmUuZ2V0UmVzb3VyY2UoY29kZSwgbnMsIGtleSwgb3B0aW9ucyk7XG4gIH1cbiAgZ2V0VXNlZFBhcmFtc0RldGFpbHMoKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIGNvbnN0IG9wdGlvbnNLZXlzID0gWydkZWZhdWx0VmFsdWUnLCAnb3JkaW5hbCcsICdjb250ZXh0JywgJ3JlcGxhY2UnLCAnbG5nJywgJ2xuZ3MnLCAnZmFsbGJhY2tMbmcnLCAnbnMnLCAna2V5U2VwYXJhdG9yJywgJ25zU2VwYXJhdG9yJywgJ3JldHVybk9iamVjdHMnLCAncmV0dXJuRGV0YWlscycsICdqb2luQXJyYXlzJywgJ3Bvc3RQcm9jZXNzJywgJ2ludGVycG9sYXRpb24nXTtcbiAgICBjb25zdCB1c2VPcHRpb25zUmVwbGFjZUZvckRhdGEgPSBvcHRpb25zLnJlcGxhY2UgJiYgdHlwZW9mIG9wdGlvbnMucmVwbGFjZSAhPT0gJ3N0cmluZyc7XG4gICAgbGV0IGRhdGEgPSB1c2VPcHRpb25zUmVwbGFjZUZvckRhdGEgPyBvcHRpb25zLnJlcGxhY2UgOiBvcHRpb25zO1xuICAgIGlmICh1c2VPcHRpb25zUmVwbGFjZUZvckRhdGEgJiYgdHlwZW9mIG9wdGlvbnMuY291bnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmNvdW50ID0gb3B0aW9ucy5jb3VudDtcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMpIHtcbiAgICAgIGRhdGEgPSB7XG4gICAgICAgIC4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMsXG4gICAgICAgIC4uLmRhdGFcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghdXNlT3B0aW9uc1JlcGxhY2VGb3JEYXRhKSB7XG4gICAgICBkYXRhID0ge1xuICAgICAgICAuLi5kYXRhXG4gICAgICB9O1xuICAgICAgZm9yIChjb25zdCBrZXkgb2Ygb3B0aW9uc0tleXMpIHtcbiAgICAgICAgZGVsZXRlIGRhdGFba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgc3RhdGljIGhhc0RlZmF1bHRWYWx1ZShvcHRpb25zKSB7XG4gICAgY29uc3QgcHJlZml4ID0gJ2RlZmF1bHRWYWx1ZSc7XG4gICAgZm9yIChjb25zdCBvcHRpb24gaW4gb3B0aW9ucykge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvcHRpb25zLCBvcHRpb24pICYmIHByZWZpeCA9PT0gb3B0aW9uLnN1YnN0cmluZygwLCBwcmVmaXgubGVuZ3RoKSAmJiB1bmRlZmluZWQgIT09IG9wdGlvbnNbb3B0aW9uXSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmNvbnN0IGNhcGl0YWxpemUgPSBzdHJpbmcgPT4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xuY2xhc3MgTGFuZ3VhZ2VVdGlsIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5zdXBwb3J0ZWRMbmdzID0gdGhpcy5vcHRpb25zLnN1cHBvcnRlZExuZ3MgfHwgZmFsc2U7XG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgnbGFuZ3VhZ2VVdGlscycpO1xuICB9XG4gIGdldFNjcmlwdFBhcnRGcm9tQ29kZShjb2RlKSB7XG4gICAgY29kZSA9IGdldENsZWFuZWRDb2RlKGNvZGUpO1xuICAgIGlmICghY29kZSB8fCBjb2RlLmluZGV4T2YoJy0nKSA8IDApIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHAgPSBjb2RlLnNwbGl0KCctJyk7XG4gICAgaWYgKHAubGVuZ3RoID09PSAyKSByZXR1cm4gbnVsbDtcbiAgICBwLnBvcCgpO1xuICAgIGlmIChwW3AubGVuZ3RoIC0gMV0udG9Mb3dlckNhc2UoKSA9PT0gJ3gnKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUocC5qb2luKCctJykpO1xuICB9XG4gIGdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpIHtcbiAgICBjb2RlID0gZ2V0Q2xlYW5lZENvZGUoY29kZSk7XG4gICAgaWYgKCFjb2RlIHx8IGNvZGUuaW5kZXhPZignLScpIDwgMCkgcmV0dXJuIGNvZGU7XG4gICAgY29uc3QgcCA9IGNvZGUuc3BsaXQoJy0nKTtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUocFswXSk7XG4gIH1cbiAgZm9ybWF0TGFuZ3VhZ2VDb2RlKGNvZGUpIHtcbiAgICBpZiAodHlwZW9mIGNvZGUgPT09ICdzdHJpbmcnICYmIGNvZGUuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAgIGNvbnN0IHNwZWNpYWxDYXNlcyA9IFsnaGFucycsICdoYW50JywgJ2xhdG4nLCAnY3lybCcsICdjYW5zJywgJ21vbmcnLCAnYXJhYiddO1xuICAgICAgbGV0IHAgPSBjb2RlLnNwbGl0KCctJyk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxvd2VyQ2FzZUxuZykge1xuICAgICAgICBwID0gcC5tYXAocGFydCA9PiBwYXJ0LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgfSBlbHNlIGlmIChwLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBwWzBdID0gcFswXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBwWzFdID0gcFsxXS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBpZiAoc3BlY2lhbENhc2VzLmluZGV4T2YocFsxXS50b0xvd2VyQ2FzZSgpKSA+IC0xKSBwWzFdID0gY2FwaXRhbGl6ZShwWzFdLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgfSBlbHNlIGlmIChwLmxlbmd0aCA9PT0gMykge1xuICAgICAgICBwWzBdID0gcFswXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAocFsxXS5sZW5ndGggPT09IDIpIHBbMV0gPSBwWzFdLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGlmIChwWzBdICE9PSAnc2duJyAmJiBwWzJdLmxlbmd0aCA9PT0gMikgcFsyXSA9IHBbMl0udG9VcHBlckNhc2UoKTtcbiAgICAgICAgaWYgKHNwZWNpYWxDYXNlcy5pbmRleE9mKHBbMV0udG9Mb3dlckNhc2UoKSkgPiAtMSkgcFsxXSA9IGNhcGl0YWxpemUocFsxXS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgaWYgKHNwZWNpYWxDYXNlcy5pbmRleE9mKHBbMl0udG9Mb3dlckNhc2UoKSkgPiAtMSkgcFsyXSA9IGNhcGl0YWxpemUocFsyXS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwLmpvaW4oJy0nKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGVhbkNvZGUgfHwgdGhpcy5vcHRpb25zLmxvd2VyQ2FzZUxuZyA/IGNvZGUudG9Mb3dlckNhc2UoKSA6IGNvZGU7XG4gIH1cbiAgaXNTdXBwb3J0ZWRDb2RlKGNvZGUpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLmxvYWQgPT09ICdsYW5ndWFnZU9ubHknIHx8IHRoaXMub3B0aW9ucy5ub25FeHBsaWNpdFN1cHBvcnRlZExuZ3MpIHtcbiAgICAgIGNvZGUgPSB0aGlzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpO1xuICAgIH1cbiAgICByZXR1cm4gIXRoaXMuc3VwcG9ydGVkTG5ncyB8fCAhdGhpcy5zdXBwb3J0ZWRMbmdzLmxlbmd0aCB8fCB0aGlzLnN1cHBvcnRlZExuZ3MuaW5kZXhPZihjb2RlKSA+IC0xO1xuICB9XG4gIGdldEJlc3RNYXRjaEZyb21Db2Rlcyhjb2Rlcykge1xuICAgIGlmICghY29kZXMpIHJldHVybiBudWxsO1xuICAgIGxldCBmb3VuZDtcbiAgICBjb2Rlcy5mb3JFYWNoKGNvZGUgPT4ge1xuICAgICAgaWYgKGZvdW5kKSByZXR1cm47XG4gICAgICBjb25zdCBjbGVhbmVkTG5nID0gdGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoY29kZSk7XG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy5zdXBwb3J0ZWRMbmdzIHx8IHRoaXMuaXNTdXBwb3J0ZWRDb2RlKGNsZWFuZWRMbmcpKSBmb3VuZCA9IGNsZWFuZWRMbmc7XG4gICAgfSk7XG4gICAgaWYgKCFmb3VuZCAmJiB0aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5ncykge1xuICAgICAgY29kZXMuZm9yRWFjaChjb2RlID0+IHtcbiAgICAgICAgaWYgKGZvdW5kKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGxuZ09ubHkgPSB0aGlzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpO1xuICAgICAgICBpZiAodGhpcy5pc1N1cHBvcnRlZENvZGUobG5nT25seSkpIHJldHVybiBmb3VuZCA9IGxuZ09ubHk7XG4gICAgICAgIGZvdW5kID0gdGhpcy5vcHRpb25zLnN1cHBvcnRlZExuZ3MuZmluZChzdXBwb3J0ZWRMbmcgPT4ge1xuICAgICAgICAgIGlmIChzdXBwb3J0ZWRMbmcgPT09IGxuZ09ubHkpIHJldHVybiBzdXBwb3J0ZWRMbmc7XG4gICAgICAgICAgaWYgKHN1cHBvcnRlZExuZy5pbmRleE9mKCctJykgPCAwICYmIGxuZ09ubHkuaW5kZXhPZignLScpIDwgMCkgcmV0dXJuO1xuICAgICAgICAgIGlmIChzdXBwb3J0ZWRMbmcuaW5kZXhPZignLScpID4gMCAmJiBsbmdPbmx5LmluZGV4T2YoJy0nKSA8IDAgJiYgc3VwcG9ydGVkTG5nLnN1YnN0cmluZygwLCBzdXBwb3J0ZWRMbmcuaW5kZXhPZignLScpKSA9PT0gbG5nT25seSkgcmV0dXJuIHN1cHBvcnRlZExuZztcbiAgICAgICAgICBpZiAoc3VwcG9ydGVkTG5nLmluZGV4T2YobG5nT25seSkgPT09IDAgJiYgbG5nT25seS5sZW5ndGggPiAxKSByZXR1cm4gc3VwcG9ydGVkTG5nO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIWZvdW5kKSBmb3VuZCA9IHRoaXMuZ2V0RmFsbGJhY2tDb2Rlcyh0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcpWzBdO1xuICAgIHJldHVybiBmb3VuZDtcbiAgfVxuICBnZXRGYWxsYmFja0NvZGVzKGZhbGxiYWNrcywgY29kZSkge1xuICAgIGlmICghZmFsbGJhY2tzKSByZXR1cm4gW107XG4gICAgaWYgKHR5cGVvZiBmYWxsYmFja3MgPT09ICdmdW5jdGlvbicpIGZhbGxiYWNrcyA9IGZhbGxiYWNrcyhjb2RlKTtcbiAgICBpZiAodHlwZW9mIGZhbGxiYWNrcyA9PT0gJ3N0cmluZycpIGZhbGxiYWNrcyA9IFtmYWxsYmFja3NdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZhbGxiYWNrcykpIHJldHVybiBmYWxsYmFja3M7XG4gICAgaWYgKCFjb2RlKSByZXR1cm4gZmFsbGJhY2tzLmRlZmF1bHQgfHwgW107XG4gICAgbGV0IGZvdW5kID0gZmFsbGJhY2tzW2NvZGVdO1xuICAgIGlmICghZm91bmQpIGZvdW5kID0gZmFsbGJhY2tzW3RoaXMuZ2V0U2NyaXB0UGFydEZyb21Db2RlKGNvZGUpXTtcbiAgICBpZiAoIWZvdW5kKSBmb3VuZCA9IGZhbGxiYWNrc1t0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShjb2RlKV07XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSBmYWxsYmFja3NbdGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKV07XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSBmYWxsYmFja3MuZGVmYXVsdDtcbiAgICByZXR1cm4gZm91bmQgfHwgW107XG4gIH1cbiAgdG9SZXNvbHZlSGllcmFyY2h5KGNvZGUsIGZhbGxiYWNrQ29kZSkge1xuICAgIGNvbnN0IGZhbGxiYWNrQ29kZXMgPSB0aGlzLmdldEZhbGxiYWNrQ29kZXMoZmFsbGJhY2tDb2RlIHx8IHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyB8fCBbXSwgY29kZSk7XG4gICAgY29uc3QgY29kZXMgPSBbXTtcbiAgICBjb25zdCBhZGRDb2RlID0gYyA9PiB7XG4gICAgICBpZiAoIWMpIHJldHVybjtcbiAgICAgIGlmICh0aGlzLmlzU3VwcG9ydGVkQ29kZShjKSkge1xuICAgICAgICBjb2Rlcy5wdXNoKGMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihgcmVqZWN0aW5nIGxhbmd1YWdlIGNvZGUgbm90IGZvdW5kIGluIHN1cHBvcnRlZExuZ3M6ICR7Y31gKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmICh0eXBlb2YgY29kZSA9PT0gJ3N0cmluZycgJiYgKGNvZGUuaW5kZXhPZignLScpID4gLTEgfHwgY29kZS5pbmRleE9mKCdfJykgPiAtMSkpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9hZCAhPT0gJ2xhbmd1YWdlT25seScpIGFkZENvZGUodGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoY29kZSkpO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkICE9PSAnbGFuZ3VhZ2VPbmx5JyAmJiB0aGlzLm9wdGlvbnMubG9hZCAhPT0gJ2N1cnJlbnRPbmx5JykgYWRkQ29kZSh0aGlzLmdldFNjcmlwdFBhcnRGcm9tQ29kZShjb2RlKSk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxvYWQgIT09ICdjdXJyZW50T25seScpIGFkZENvZGUodGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGFkZENvZGUodGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoY29kZSkpO1xuICAgIH1cbiAgICBmYWxsYmFja0NvZGVzLmZvckVhY2goZmMgPT4ge1xuICAgICAgaWYgKGNvZGVzLmluZGV4T2YoZmMpIDwgMCkgYWRkQ29kZSh0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShmYykpO1xuICAgIH0pO1xuICAgIHJldHVybiBjb2RlcztcbiAgfVxufVxuXG5sZXQgc2V0cyA9IFt7XG4gIGxuZ3M6IFsnYWNoJywgJ2FrJywgJ2FtJywgJ2FybicsICdicicsICdmaWwnLCAnZ3VuJywgJ2xuJywgJ21mZScsICdtZycsICdtaScsICdvYycsICdwdCcsICdwdC1CUicsICd0ZycsICd0bCcsICd0aScsICd0cicsICd1eicsICd3YSddLFxuICBucjogWzEsIDJdLFxuICBmYzogMVxufSwge1xuICBsbmdzOiBbJ2FmJywgJ2FuJywgJ2FzdCcsICdheicsICdiZycsICdibicsICdjYScsICdkYScsICdkZScsICdkZXYnLCAnZWwnLCAnZW4nLCAnZW8nLCAnZXMnLCAnZXQnLCAnZXUnLCAnZmknLCAnZm8nLCAnZnVyJywgJ2Z5JywgJ2dsJywgJ2d1JywgJ2hhJywgJ2hpJywgJ2h1JywgJ2h5JywgJ2lhJywgJ2l0JywgJ2trJywgJ2tuJywgJ2t1JywgJ2xiJywgJ21haScsICdtbCcsICdtbicsICdtcicsICduYWgnLCAnbmFwJywgJ25iJywgJ25lJywgJ25sJywgJ25uJywgJ25vJywgJ25zbycsICdwYScsICdwYXAnLCAncG1zJywgJ3BzJywgJ3B0LVBUJywgJ3JtJywgJ3NjbycsICdzZScsICdzaScsICdzbycsICdzb24nLCAnc3EnLCAnc3YnLCAnc3cnLCAndGEnLCAndGUnLCAndGsnLCAndXInLCAneW8nXSxcbiAgbnI6IFsxLCAyXSxcbiAgZmM6IDJcbn0sIHtcbiAgbG5nczogWydheScsICdibycsICdjZ2cnLCAnZmEnLCAnaHQnLCAnaWQnLCAnamEnLCAnamJvJywgJ2thJywgJ2ttJywgJ2tvJywgJ2t5JywgJ2xvJywgJ21zJywgJ3NhaCcsICdzdScsICd0aCcsICd0dCcsICd1ZycsICd2aScsICd3bycsICd6aCddLFxuICBucjogWzFdLFxuICBmYzogM1xufSwge1xuICBsbmdzOiBbJ2JlJywgJ2JzJywgJ2NucicsICdkeicsICdocicsICdydScsICdzcicsICd1ayddLFxuICBucjogWzEsIDIsIDVdLFxuICBmYzogNFxufSwge1xuICBsbmdzOiBbJ2FyJ10sXG4gIG5yOiBbMCwgMSwgMiwgMywgMTEsIDEwMF0sXG4gIGZjOiA1XG59LCB7XG4gIGxuZ3M6IFsnY3MnLCAnc2snXSxcbiAgbnI6IFsxLCAyLCA1XSxcbiAgZmM6IDZcbn0sIHtcbiAgbG5nczogWydjc2InLCAncGwnXSxcbiAgbnI6IFsxLCAyLCA1XSxcbiAgZmM6IDdcbn0sIHtcbiAgbG5nczogWydjeSddLFxuICBucjogWzEsIDIsIDMsIDhdLFxuICBmYzogOFxufSwge1xuICBsbmdzOiBbJ2ZyJ10sXG4gIG5yOiBbMSwgMl0sXG4gIGZjOiA5XG59LCB7XG4gIGxuZ3M6IFsnZ2EnXSxcbiAgbnI6IFsxLCAyLCAzLCA3LCAxMV0sXG4gIGZjOiAxMFxufSwge1xuICBsbmdzOiBbJ2dkJ10sXG4gIG5yOiBbMSwgMiwgMywgMjBdLFxuICBmYzogMTFcbn0sIHtcbiAgbG5nczogWydpcyddLFxuICBucjogWzEsIDJdLFxuICBmYzogMTJcbn0sIHtcbiAgbG5nczogWydqdiddLFxuICBucjogWzAsIDFdLFxuICBmYzogMTNcbn0sIHtcbiAgbG5nczogWydrdyddLFxuICBucjogWzEsIDIsIDMsIDRdLFxuICBmYzogMTRcbn0sIHtcbiAgbG5nczogWydsdCddLFxuICBucjogWzEsIDIsIDEwXSxcbiAgZmM6IDE1XG59LCB7XG4gIGxuZ3M6IFsnbHYnXSxcbiAgbnI6IFsxLCAyLCAwXSxcbiAgZmM6IDE2XG59LCB7XG4gIGxuZ3M6IFsnbWsnXSxcbiAgbnI6IFsxLCAyXSxcbiAgZmM6IDE3XG59LCB7XG4gIGxuZ3M6IFsnbW5rJ10sXG4gIG5yOiBbMCwgMSwgMl0sXG4gIGZjOiAxOFxufSwge1xuICBsbmdzOiBbJ210J10sXG4gIG5yOiBbMSwgMiwgMTEsIDIwXSxcbiAgZmM6IDE5XG59LCB7XG4gIGxuZ3M6IFsnb3InXSxcbiAgbnI6IFsyLCAxXSxcbiAgZmM6IDJcbn0sIHtcbiAgbG5nczogWydybyddLFxuICBucjogWzEsIDIsIDIwXSxcbiAgZmM6IDIwXG59LCB7XG4gIGxuZ3M6IFsnc2wnXSxcbiAgbnI6IFs1LCAxLCAyLCAzXSxcbiAgZmM6IDIxXG59LCB7XG4gIGxuZ3M6IFsnaGUnLCAnaXcnXSxcbiAgbnI6IFsxLCAyLCAyMCwgMjFdLFxuICBmYzogMjJcbn1dO1xubGV0IF9ydWxlc1BsdXJhbHNUeXBlcyA9IHtcbiAgMTogbiA9PiBOdW1iZXIobiA+IDEpLFxuICAyOiBuID0+IE51bWJlcihuICE9IDEpLFxuICAzOiBuID0+IDAsXG4gIDQ6IG4gPT4gTnVtYmVyKG4gJSAxMCA9PSAxICYmIG4gJSAxMDAgIT0gMTEgPyAwIDogbiAlIDEwID49IDIgJiYgbiAlIDEwIDw9IDQgJiYgKG4gJSAxMDAgPCAxMCB8fCBuICUgMTAwID49IDIwKSA/IDEgOiAyKSxcbiAgNTogbiA9PiBOdW1iZXIobiA9PSAwID8gMCA6IG4gPT0gMSA/IDEgOiBuID09IDIgPyAyIDogbiAlIDEwMCA+PSAzICYmIG4gJSAxMDAgPD0gMTAgPyAzIDogbiAlIDEwMCA+PSAxMSA/IDQgOiA1KSxcbiAgNjogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPj0gMiAmJiBuIDw9IDQgPyAxIDogMiksXG4gIDc6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuICUgMTAgPj0gMiAmJiBuICUgMTAgPD0gNCAmJiAobiAlIDEwMCA8IDEwIHx8IG4gJSAxMDAgPj0gMjApID8gMSA6IDIpLFxuICA4OiBuID0+IE51bWJlcihuID09IDEgPyAwIDogbiA9PSAyID8gMSA6IG4gIT0gOCAmJiBuICE9IDExID8gMiA6IDMpLFxuICA5OiBuID0+IE51bWJlcihuID49IDIpLFxuICAxMDogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMiA/IDEgOiBuIDwgNyA/IDIgOiBuIDwgMTEgPyAzIDogNCksXG4gIDExOiBuID0+IE51bWJlcihuID09IDEgfHwgbiA9PSAxMSA/IDAgOiBuID09IDIgfHwgbiA9PSAxMiA/IDEgOiBuID4gMiAmJiBuIDwgMjAgPyAyIDogMyksXG4gIDEyOiBuID0+IE51bWJlcihuICUgMTAgIT0gMSB8fCBuICUgMTAwID09IDExKSxcbiAgMTM6IG4gPT4gTnVtYmVyKG4gIT09IDApLFxuICAxNDogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMiA/IDEgOiBuID09IDMgPyAyIDogMyksXG4gIDE1OiBuID0+IE51bWJlcihuICUgMTAgPT0gMSAmJiBuICUgMTAwICE9IDExID8gMCA6IG4gJSAxMCA+PSAyICYmIChuICUgMTAwIDwgMTAgfHwgbiAlIDEwMCA+PSAyMCkgPyAxIDogMiksXG4gIDE2OiBuID0+IE51bWJlcihuICUgMTAgPT0gMSAmJiBuICUgMTAwICE9IDExID8gMCA6IG4gIT09IDAgPyAxIDogMiksXG4gIDE3OiBuID0+IE51bWJlcihuID09IDEgfHwgbiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSA/IDAgOiAxKSxcbiAgMTg6IG4gPT4gTnVtYmVyKG4gPT0gMCA/IDAgOiBuID09IDEgPyAxIDogMiksXG4gIDE5OiBuID0+IE51bWJlcihuID09IDEgPyAwIDogbiA9PSAwIHx8IG4gJSAxMDAgPiAxICYmIG4gJSAxMDAgPCAxMSA/IDEgOiBuICUgMTAwID4gMTAgJiYgbiAlIDEwMCA8IDIwID8gMiA6IDMpLFxuICAyMDogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMCB8fCBuICUgMTAwID4gMCAmJiBuICUgMTAwIDwgMjAgPyAxIDogMiksXG4gIDIxOiBuID0+IE51bWJlcihuICUgMTAwID09IDEgPyAxIDogbiAlIDEwMCA9PSAyID8gMiA6IG4gJSAxMDAgPT0gMyB8fCBuICUgMTAwID09IDQgPyAzIDogMCksXG4gIDIyOiBuID0+IE51bWJlcihuID09IDEgPyAwIDogbiA9PSAyID8gMSA6IChuIDwgMCB8fCBuID4gMTApICYmIG4gJSAxMCA9PSAwID8gMiA6IDMpXG59O1xuY29uc3Qgbm9uSW50bFZlcnNpb25zID0gWyd2MScsICd2MicsICd2MyddO1xuY29uc3QgaW50bFZlcnNpb25zID0gWyd2NCddO1xuY29uc3Qgc3VmZml4ZXNPcmRlciA9IHtcbiAgemVybzogMCxcbiAgb25lOiAxLFxuICB0d286IDIsXG4gIGZldzogMyxcbiAgbWFueTogNCxcbiAgb3RoZXI6IDVcbn07XG5jb25zdCBjcmVhdGVSdWxlcyA9ICgpID0+IHtcbiAgY29uc3QgcnVsZXMgPSB7fTtcbiAgc2V0cy5mb3JFYWNoKHNldCA9PiB7XG4gICAgc2V0LmxuZ3MuZm9yRWFjaChsID0+IHtcbiAgICAgIHJ1bGVzW2xdID0ge1xuICAgICAgICBudW1iZXJzOiBzZXQubnIsXG4gICAgICAgIHBsdXJhbHM6IF9ydWxlc1BsdXJhbHNUeXBlc1tzZXQuZmNdXG4gICAgICB9O1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHJ1bGVzO1xufTtcbmNsYXNzIFBsdXJhbFJlc29sdmVyIHtcbiAgY29uc3RydWN0b3IobGFuZ3VhZ2VVdGlscykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICB0aGlzLmxhbmd1YWdlVXRpbHMgPSBsYW5ndWFnZVV0aWxzO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgncGx1cmFsUmVzb2x2ZXInKTtcbiAgICBpZiAoKCF0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04gfHwgaW50bFZlcnNpb25zLmluY2x1ZGVzKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTikpICYmICh0eXBlb2YgSW50bCA9PT0gJ3VuZGVmaW5lZCcgfHwgIUludGwuUGx1cmFsUnVsZXMpKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04gPSAndjMnO1xuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoJ1lvdXIgZW52aXJvbm1lbnQgc2VlbXMgbm90IHRvIGJlIEludGwgQVBJIGNvbXBhdGlibGUsIHVzZSBhbiBJbnRsLlBsdXJhbFJ1bGVzIHBvbHlmaWxsLiBXaWxsIGZhbGxiYWNrIHRvIHRoZSBjb21wYXRpYmlsaXR5SlNPTiB2MyBmb3JtYXQgaGFuZGxpbmcuJyk7XG4gICAgfVxuICAgIHRoaXMucnVsZXMgPSBjcmVhdGVSdWxlcygpO1xuICAgIHRoaXMucGx1cmFsUnVsZXNDYWNoZSA9IHt9O1xuICB9XG4gIGFkZFJ1bGUobG5nLCBvYmopIHtcbiAgICB0aGlzLnJ1bGVzW2xuZ10gPSBvYmo7XG4gIH1cbiAgY2xlYXJDYWNoZSgpIHtcbiAgICB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGUgPSB7fTtcbiAgfVxuICBnZXRSdWxlKGNvZGUpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgaWYgKHRoaXMuc2hvdWxkVXNlSW50bEFwaSgpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjbGVhbmVkQ29kZSA9IGdldENsZWFuZWRDb2RlKGNvZGUgPT09ICdkZXYnID8gJ2VuJyA6IGNvZGUpO1xuICAgICAgICBjb25zdCB0eXBlID0gb3B0aW9ucy5vcmRpbmFsID8gJ29yZGluYWwnIDogJ2NhcmRpbmFsJztcbiAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgY2xlYW5lZENvZGUsXG4gICAgICAgICAgdHlwZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNhY2hlS2V5IGluIHRoaXMucGx1cmFsUnVsZXNDYWNoZSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGVbY2FjaGVLZXldO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJ1bGUgPSBuZXcgSW50bC5QbHVyYWxSdWxlcyhjbGVhbmVkQ29kZSwge1xuICAgICAgICAgIHR5cGVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGx1cmFsUnVsZXNDYWNoZVtjYWNoZUtleV0gPSBydWxlO1xuICAgICAgICByZXR1cm4gcnVsZTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJ1bGVzW2NvZGVdIHx8IHRoaXMucnVsZXNbdGhpcy5sYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpXTtcbiAgfVxuICBuZWVkc1BsdXJhbChjb2RlKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGNvbnN0IHJ1bGUgPSB0aGlzLmdldFJ1bGUoY29kZSwgb3B0aW9ucyk7XG4gICAgaWYgKHRoaXMuc2hvdWxkVXNlSW50bEFwaSgpKSB7XG4gICAgICByZXR1cm4gcnVsZSAmJiBydWxlLnJlc29sdmVkT3B0aW9ucygpLnBsdXJhbENhdGVnb3JpZXMubGVuZ3RoID4gMTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bGUgJiYgcnVsZS5udW1iZXJzLmxlbmd0aCA+IDE7XG4gIH1cbiAgZ2V0UGx1cmFsRm9ybXNPZktleShjb2RlLCBrZXkpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3VmZml4ZXMoY29kZSwgb3B0aW9ucykubWFwKHN1ZmZpeCA9PiBgJHtrZXl9JHtzdWZmaXh9YCk7XG4gIH1cbiAgZ2V0U3VmZml4ZXMoY29kZSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICBjb25zdCBydWxlID0gdGhpcy5nZXRSdWxlKGNvZGUsIG9wdGlvbnMpO1xuICAgIGlmICghcnVsZSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBpZiAodGhpcy5zaG91bGRVc2VJbnRsQXBpKCkpIHtcbiAgICAgIHJldHVybiBydWxlLnJlc29sdmVkT3B0aW9ucygpLnBsdXJhbENhdGVnb3JpZXMuc29ydCgocGx1cmFsQ2F0ZWdvcnkxLCBwbHVyYWxDYXRlZ29yeTIpID0+IHN1ZmZpeGVzT3JkZXJbcGx1cmFsQ2F0ZWdvcnkxXSAtIHN1ZmZpeGVzT3JkZXJbcGx1cmFsQ2F0ZWdvcnkyXSkubWFwKHBsdXJhbENhdGVnb3J5ID0+IGAke3RoaXMub3B0aW9ucy5wcmVwZW5kfSR7b3B0aW9ucy5vcmRpbmFsID8gYG9yZGluYWwke3RoaXMub3B0aW9ucy5wcmVwZW5kfWAgOiAnJ30ke3BsdXJhbENhdGVnb3J5fWApO1xuICAgIH1cbiAgICByZXR1cm4gcnVsZS5udW1iZXJzLm1hcChudW1iZXIgPT4gdGhpcy5nZXRTdWZmaXgoY29kZSwgbnVtYmVyLCBvcHRpb25zKSk7XG4gIH1cbiAgZ2V0U3VmZml4KGNvZGUsIGNvdW50KSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIGNvbnN0IHJ1bGUgPSB0aGlzLmdldFJ1bGUoY29kZSwgb3B0aW9ucyk7XG4gICAgaWYgKHJ1bGUpIHtcbiAgICAgIGlmICh0aGlzLnNob3VsZFVzZUludGxBcGkoKSkge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5vcHRpb25zLnByZXBlbmR9JHtvcHRpb25zLm9yZGluYWwgPyBgb3JkaW5hbCR7dGhpcy5vcHRpb25zLnByZXBlbmR9YCA6ICcnfSR7cnVsZS5zZWxlY3QoY291bnQpfWA7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5nZXRTdWZmaXhSZXRyb0NvbXBhdGlibGUocnVsZSwgY291bnQpO1xuICAgIH1cbiAgICB0aGlzLmxvZ2dlci53YXJuKGBubyBwbHVyYWwgcnVsZSBmb3VuZCBmb3I6ICR7Y29kZX1gKTtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgZ2V0U3VmZml4UmV0cm9Db21wYXRpYmxlKHJ1bGUsIGNvdW50KSB7XG4gICAgY29uc3QgaWR4ID0gcnVsZS5ub0FicyA/IHJ1bGUucGx1cmFscyhjb3VudCkgOiBydWxlLnBsdXJhbHMoTWF0aC5hYnMoY291bnQpKTtcbiAgICBsZXQgc3VmZml4ID0gcnVsZS5udW1iZXJzW2lkeF07XG4gICAgaWYgKHRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeCAmJiBydWxlLm51bWJlcnMubGVuZ3RoID09PSAyICYmIHJ1bGUubnVtYmVyc1swXSA9PT0gMSkge1xuICAgICAgaWYgKHN1ZmZpeCA9PT0gMikge1xuICAgICAgICBzdWZmaXggPSAncGx1cmFsJztcbiAgICAgIH0gZWxzZSBpZiAoc3VmZml4ID09PSAxKSB7XG4gICAgICAgIHN1ZmZpeCA9ICcnO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXR1cm5TdWZmaXggPSAoKSA9PiB0aGlzLm9wdGlvbnMucHJlcGVuZCAmJiBzdWZmaXgudG9TdHJpbmcoKSA/IHRoaXMub3B0aW9ucy5wcmVwZW5kICsgc3VmZml4LnRvU3RyaW5nKCkgOiBzdWZmaXgudG9TdHJpbmcoKTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OID09PSAndjEnKSB7XG4gICAgICBpZiAoc3VmZml4ID09PSAxKSByZXR1cm4gJyc7XG4gICAgICBpZiAodHlwZW9mIHN1ZmZpeCA9PT0gJ251bWJlcicpIHJldHVybiBgX3BsdXJhbF8ke3N1ZmZpeC50b1N0cmluZygpfWA7XG4gICAgICByZXR1cm4gcmV0dXJuU3VmZml4KCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04gPT09ICd2MicpIHtcbiAgICAgIHJldHVybiByZXR1cm5TdWZmaXgoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeCAmJiBydWxlLm51bWJlcnMubGVuZ3RoID09PSAyICYmIHJ1bGUubnVtYmVyc1swXSA9PT0gMSkge1xuICAgICAgcmV0dXJuIHJldHVyblN1ZmZpeCgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnByZXBlbmQgJiYgaWR4LnRvU3RyaW5nKCkgPyB0aGlzLm9wdGlvbnMucHJlcGVuZCArIGlkeC50b1N0cmluZygpIDogaWR4LnRvU3RyaW5nKCk7XG4gIH1cbiAgc2hvdWxkVXNlSW50bEFwaSgpIHtcbiAgICByZXR1cm4gIW5vbkludGxWZXJzaW9ucy5pbmNsdWRlcyh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04pO1xuICB9XG59XG5cbmNvbnN0IGRlZXBGaW5kV2l0aERlZmF1bHRzID0gZnVuY3Rpb24gKGRhdGEsIGRlZmF1bHREYXRhLCBrZXkpIHtcbiAgbGV0IGtleVNlcGFyYXRvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogJy4nO1xuICBsZXQgaWdub3JlSlNPTlN0cnVjdHVyZSA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogdHJ1ZTtcbiAgbGV0IHBhdGggPSBnZXRQYXRoV2l0aERlZmF1bHRzKGRhdGEsIGRlZmF1bHREYXRhLCBrZXkpO1xuICBpZiAoIXBhdGggJiYgaWdub3JlSlNPTlN0cnVjdHVyZSAmJiB0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xuICAgIHBhdGggPSBkZWVwRmluZChkYXRhLCBrZXksIGtleVNlcGFyYXRvcik7XG4gICAgaWYgKHBhdGggPT09IHVuZGVmaW5lZCkgcGF0aCA9IGRlZXBGaW5kKGRlZmF1bHREYXRhLCBrZXksIGtleVNlcGFyYXRvcik7XG4gIH1cbiAgcmV0dXJuIHBhdGg7XG59O1xuY29uc3QgcmVnZXhTYWZlID0gdmFsID0+IHZhbC5yZXBsYWNlKC9cXCQvZywgJyQkJCQnKTtcbmNsYXNzIEludGVycG9sYXRvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICB0aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXIuY3JlYXRlKCdpbnRlcnBvbGF0b3InKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuZm9ybWF0ID0gb3B0aW9ucy5pbnRlcnBvbGF0aW9uICYmIG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQgfHwgKHZhbHVlID0+IHZhbHVlKTtcbiAgICB0aGlzLmluaXQob3B0aW9ucyk7XG4gIH1cbiAgaW5pdCgpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgaWYgKCFvcHRpb25zLmludGVycG9sYXRpb24pIG9wdGlvbnMuaW50ZXJwb2xhdGlvbiA9IHtcbiAgICAgIGVzY2FwZVZhbHVlOiB0cnVlXG4gICAgfTtcbiAgICBjb25zdCB7XG4gICAgICBlc2NhcGU6IGVzY2FwZSQxLFxuICAgICAgZXNjYXBlVmFsdWUsXG4gICAgICB1c2VSYXdWYWx1ZVRvRXNjYXBlLFxuICAgICAgcHJlZml4LFxuICAgICAgcHJlZml4RXNjYXBlZCxcbiAgICAgIHN1ZmZpeCxcbiAgICAgIHN1ZmZpeEVzY2FwZWQsXG4gICAgICBmb3JtYXRTZXBhcmF0b3IsXG4gICAgICB1bmVzY2FwZVN1ZmZpeCxcbiAgICAgIHVuZXNjYXBlUHJlZml4LFxuICAgICAgbmVzdGluZ1ByZWZpeCxcbiAgICAgIG5lc3RpbmdQcmVmaXhFc2NhcGVkLFxuICAgICAgbmVzdGluZ1N1ZmZpeCxcbiAgICAgIG5lc3RpbmdTdWZmaXhFc2NhcGVkLFxuICAgICAgbmVzdGluZ09wdGlvbnNTZXBhcmF0b3IsXG4gICAgICBtYXhSZXBsYWNlcyxcbiAgICAgIGFsd2F5c0Zvcm1hdFxuICAgIH0gPSBvcHRpb25zLmludGVycG9sYXRpb247XG4gICAgdGhpcy5lc2NhcGUgPSBlc2NhcGUkMSAhPT0gdW5kZWZpbmVkID8gZXNjYXBlJDEgOiBlc2NhcGU7XG4gICAgdGhpcy5lc2NhcGVWYWx1ZSA9IGVzY2FwZVZhbHVlICE9PSB1bmRlZmluZWQgPyBlc2NhcGVWYWx1ZSA6IHRydWU7XG4gICAgdGhpcy51c2VSYXdWYWx1ZVRvRXNjYXBlID0gdXNlUmF3VmFsdWVUb0VzY2FwZSAhPT0gdW5kZWZpbmVkID8gdXNlUmF3VmFsdWVUb0VzY2FwZSA6IGZhbHNlO1xuICAgIHRoaXMucHJlZml4ID0gcHJlZml4ID8gcmVnZXhFc2NhcGUocHJlZml4KSA6IHByZWZpeEVzY2FwZWQgfHwgJ3t7JztcbiAgICB0aGlzLnN1ZmZpeCA9IHN1ZmZpeCA/IHJlZ2V4RXNjYXBlKHN1ZmZpeCkgOiBzdWZmaXhFc2NhcGVkIHx8ICd9fSc7XG4gICAgdGhpcy5mb3JtYXRTZXBhcmF0b3IgPSBmb3JtYXRTZXBhcmF0b3IgfHwgJywnO1xuICAgIHRoaXMudW5lc2NhcGVQcmVmaXggPSB1bmVzY2FwZVN1ZmZpeCA/ICcnIDogdW5lc2NhcGVQcmVmaXggfHwgJy0nO1xuICAgIHRoaXMudW5lc2NhcGVTdWZmaXggPSB0aGlzLnVuZXNjYXBlUHJlZml4ID8gJycgOiB1bmVzY2FwZVN1ZmZpeCB8fCAnJztcbiAgICB0aGlzLm5lc3RpbmdQcmVmaXggPSBuZXN0aW5nUHJlZml4ID8gcmVnZXhFc2NhcGUobmVzdGluZ1ByZWZpeCkgOiBuZXN0aW5nUHJlZml4RXNjYXBlZCB8fCByZWdleEVzY2FwZSgnJHQoJyk7XG4gICAgdGhpcy5uZXN0aW5nU3VmZml4ID0gbmVzdGluZ1N1ZmZpeCA/IHJlZ2V4RXNjYXBlKG5lc3RpbmdTdWZmaXgpIDogbmVzdGluZ1N1ZmZpeEVzY2FwZWQgfHwgcmVnZXhFc2NhcGUoJyknKTtcbiAgICB0aGlzLm5lc3RpbmdPcHRpb25zU2VwYXJhdG9yID0gbmVzdGluZ09wdGlvbnNTZXBhcmF0b3IgfHwgJywnO1xuICAgIHRoaXMubWF4UmVwbGFjZXMgPSBtYXhSZXBsYWNlcyB8fCAxMDAwO1xuICAgIHRoaXMuYWx3YXlzRm9ybWF0ID0gYWx3YXlzRm9ybWF0ICE9PSB1bmRlZmluZWQgPyBhbHdheXNGb3JtYXQgOiBmYWxzZTtcbiAgICB0aGlzLnJlc2V0UmVnRXhwKCk7XG4gIH1cbiAgcmVzZXQoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucykgdGhpcy5pbml0KHRoaXMub3B0aW9ucyk7XG4gIH1cbiAgcmVzZXRSZWdFeHAoKSB7XG4gICAgY29uc3QgZ2V0T3JSZXNldFJlZ0V4cCA9IChleGlzdGluZ1JlZ0V4cCwgcGF0dGVybikgPT4ge1xuICAgICAgaWYgKGV4aXN0aW5nUmVnRXhwICYmIGV4aXN0aW5nUmVnRXhwLnNvdXJjZSA9PT0gcGF0dGVybikge1xuICAgICAgICBleGlzdGluZ1JlZ0V4cC5sYXN0SW5kZXggPSAwO1xuICAgICAgICByZXR1cm4gZXhpc3RpbmdSZWdFeHA7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cChwYXR0ZXJuLCAnZycpO1xuICAgIH07XG4gICAgdGhpcy5yZWdleHAgPSBnZXRPclJlc2V0UmVnRXhwKHRoaXMucmVnZXhwLCBgJHt0aGlzLnByZWZpeH0oLis/KSR7dGhpcy5zdWZmaXh9YCk7XG4gICAgdGhpcy5yZWdleHBVbmVzY2FwZSA9IGdldE9yUmVzZXRSZWdFeHAodGhpcy5yZWdleHBVbmVzY2FwZSwgYCR7dGhpcy5wcmVmaXh9JHt0aGlzLnVuZXNjYXBlUHJlZml4fSguKz8pJHt0aGlzLnVuZXNjYXBlU3VmZml4fSR7dGhpcy5zdWZmaXh9YCk7XG4gICAgdGhpcy5uZXN0aW5nUmVnZXhwID0gZ2V0T3JSZXNldFJlZ0V4cCh0aGlzLm5lc3RpbmdSZWdleHAsIGAke3RoaXMubmVzdGluZ1ByZWZpeH0oLis/KSR7dGhpcy5uZXN0aW5nU3VmZml4fWApO1xuICB9XG4gIGludGVycG9sYXRlKHN0ciwgZGF0YSwgbG5nLCBvcHRpb25zKSB7XG4gICAgbGV0IG1hdGNoO1xuICAgIGxldCB2YWx1ZTtcbiAgICBsZXQgcmVwbGFjZXM7XG4gICAgY29uc3QgZGVmYXVsdERhdGEgPSB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24gJiYgdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcyB8fCB7fTtcbiAgICBjb25zdCBoYW5kbGVGb3JtYXQgPSBrZXkgPT4ge1xuICAgICAgaWYgKGtleS5pbmRleE9mKHRoaXMuZm9ybWF0U2VwYXJhdG9yKSA8IDApIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IGRlZXBGaW5kV2l0aERlZmF1bHRzKGRhdGEsIGRlZmF1bHREYXRhLCBrZXksIHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IsIHRoaXMub3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWx3YXlzRm9ybWF0ID8gdGhpcy5mb3JtYXQocGF0aCwgdW5kZWZpbmVkLCBsbmcsIHtcbiAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgaW50ZXJwb2xhdGlvbmtleToga2V5XG4gICAgICAgIH0pIDogcGF0aDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHAgPSBrZXkuc3BsaXQodGhpcy5mb3JtYXRTZXBhcmF0b3IpO1xuICAgICAgY29uc3QgayA9IHAuc2hpZnQoKS50cmltKCk7XG4gICAgICBjb25zdCBmID0gcC5qb2luKHRoaXMuZm9ybWF0U2VwYXJhdG9yKS50cmltKCk7XG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXQoZGVlcEZpbmRXaXRoRGVmYXVsdHMoZGF0YSwgZGVmYXVsdERhdGEsIGssIHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IsIHRoaXMub3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlKSwgZiwgbG5nLCB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIGludGVycG9sYXRpb25rZXk6IGtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgdGhpcy5yZXNldFJlZ0V4cCgpO1xuICAgIGNvbnN0IG1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlciA9IG9wdGlvbnMgJiYgb3B0aW9ucy5taXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXIgfHwgdGhpcy5vcHRpb25zLm1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlcjtcbiAgICBjb25zdCBza2lwT25WYXJpYWJsZXMgPSBvcHRpb25zICYmIG9wdGlvbnMuaW50ZXJwb2xhdGlvbiAmJiBvcHRpb25zLmludGVycG9sYXRpb24uc2tpcE9uVmFyaWFibGVzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmludGVycG9sYXRpb24uc2tpcE9uVmFyaWFibGVzIDogdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uc2tpcE9uVmFyaWFibGVzO1xuICAgIGNvbnN0IHRvZG9zID0gW3tcbiAgICAgIHJlZ2V4OiB0aGlzLnJlZ2V4cFVuZXNjYXBlLFxuICAgICAgc2FmZVZhbHVlOiB2YWwgPT4gcmVnZXhTYWZlKHZhbClcbiAgICB9LCB7XG4gICAgICByZWdleDogdGhpcy5yZWdleHAsXG4gICAgICBzYWZlVmFsdWU6IHZhbCA9PiB0aGlzLmVzY2FwZVZhbHVlID8gcmVnZXhTYWZlKHRoaXMuZXNjYXBlKHZhbCkpIDogcmVnZXhTYWZlKHZhbClcbiAgICB9XTtcbiAgICB0b2Rvcy5mb3JFYWNoKHRvZG8gPT4ge1xuICAgICAgcmVwbGFjZXMgPSAwO1xuICAgICAgd2hpbGUgKG1hdGNoID0gdG9kby5yZWdleC5leGVjKHN0cikpIHtcbiAgICAgICAgY29uc3QgbWF0Y2hlZFZhciA9IG1hdGNoWzFdLnRyaW0oKTtcbiAgICAgICAgdmFsdWUgPSBoYW5kbGVGb3JtYXQobWF0Y2hlZFZhcik7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBtaXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBtaXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXIoc3RyLCBtYXRjaCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB2YWx1ZSA9IHR5cGVvZiB0ZW1wID09PSAnc3RyaW5nJyA/IHRlbXAgOiAnJztcbiAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdGlvbnMsIG1hdGNoZWRWYXIpKSB7XG4gICAgICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc2tpcE9uVmFyaWFibGVzKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IG1hdGNoWzBdO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYG1pc3NlZCB0byBwYXNzIGluIHZhcmlhYmxlICR7bWF0Y2hlZFZhcn0gZm9yIGludGVycG9sYXRpbmcgJHtzdHJ9YCk7XG4gICAgICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnICYmICF0aGlzLnVzZVJhd1ZhbHVlVG9Fc2NhcGUpIHtcbiAgICAgICAgICB2YWx1ZSA9IG1ha2VTdHJpbmcodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNhZmVWYWx1ZSA9IHRvZG8uc2FmZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UobWF0Y2hbMF0sIHNhZmVWYWx1ZSk7XG4gICAgICAgIGlmIChza2lwT25WYXJpYWJsZXMpIHtcbiAgICAgICAgICB0b2RvLnJlZ2V4Lmxhc3RJbmRleCArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgdG9kby5yZWdleC5sYXN0SW5kZXggLT0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvZG8ucmVnZXgubGFzdEluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXBsYWNlcysrO1xuICAgICAgICBpZiAocmVwbGFjZXMgPj0gdGhpcy5tYXhSZXBsYWNlcykge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuICBuZXN0KHN0ciwgZmMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gICAgbGV0IG1hdGNoO1xuICAgIGxldCB2YWx1ZTtcbiAgICBsZXQgY2xvbmVkT3B0aW9ucztcbiAgICBjb25zdCBoYW5kbGVIYXNPcHRpb25zID0gKGtleSwgaW5oZXJpdGVkT3B0aW9ucykgPT4ge1xuICAgICAgY29uc3Qgc2VwID0gdGhpcy5uZXN0aW5nT3B0aW9uc1NlcGFyYXRvcjtcbiAgICAgIGlmIChrZXkuaW5kZXhPZihzZXApIDwgMCkgcmV0dXJuIGtleTtcbiAgICAgIGNvbnN0IGMgPSBrZXkuc3BsaXQobmV3IFJlZ0V4cChgJHtzZXB9WyBdKntgKSk7XG4gICAgICBsZXQgb3B0aW9uc1N0cmluZyA9IGB7JHtjWzFdfWA7XG4gICAgICBrZXkgPSBjWzBdO1xuICAgICAgb3B0aW9uc1N0cmluZyA9IHRoaXMuaW50ZXJwb2xhdGUob3B0aW9uc1N0cmluZywgY2xvbmVkT3B0aW9ucyk7XG4gICAgICBjb25zdCBtYXRjaGVkU2luZ2xlUXVvdGVzID0gb3B0aW9uc1N0cmluZy5tYXRjaCgvJy9nKTtcbiAgICAgIGNvbnN0IG1hdGNoZWREb3VibGVRdW90ZXMgPSBvcHRpb25zU3RyaW5nLm1hdGNoKC9cIi9nKTtcbiAgICAgIGlmIChtYXRjaGVkU2luZ2xlUXVvdGVzICYmIG1hdGNoZWRTaW5nbGVRdW90ZXMubGVuZ3RoICUgMiA9PT0gMCAmJiAhbWF0Y2hlZERvdWJsZVF1b3RlcyB8fCBtYXRjaGVkRG91YmxlUXVvdGVzLmxlbmd0aCAlIDIgIT09IDApIHtcbiAgICAgICAgb3B0aW9uc1N0cmluZyA9IG9wdGlvbnNTdHJpbmcucmVwbGFjZSgvJy9nLCAnXCInKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNsb25lZE9wdGlvbnMgPSBKU09OLnBhcnNlKG9wdGlvbnNTdHJpbmcpO1xuICAgICAgICBpZiAoaW5oZXJpdGVkT3B0aW9ucykgY2xvbmVkT3B0aW9ucyA9IHtcbiAgICAgICAgICAuLi5pbmhlcml0ZWRPcHRpb25zLFxuICAgICAgICAgIC4uLmNsb25lZE9wdGlvbnNcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihgZmFpbGVkIHBhcnNpbmcgb3B0aW9ucyBzdHJpbmcgaW4gbmVzdGluZyBmb3Iga2V5ICR7a2V5fWAsIGUpO1xuICAgICAgICByZXR1cm4gYCR7a2V5fSR7c2VwfSR7b3B0aW9uc1N0cmluZ31gO1xuICAgICAgfVxuICAgICAgaWYgKGNsb25lZE9wdGlvbnMuZGVmYXVsdFZhbHVlICYmIGNsb25lZE9wdGlvbnMuZGVmYXVsdFZhbHVlLmluZGV4T2YodGhpcy5wcmVmaXgpID4gLTEpIGRlbGV0ZSBjbG9uZWRPcHRpb25zLmRlZmF1bHRWYWx1ZTtcbiAgICAgIHJldHVybiBrZXk7XG4gICAgfTtcbiAgICB3aGlsZSAobWF0Y2ggPSB0aGlzLm5lc3RpbmdSZWdleHAuZXhlYyhzdHIpKSB7XG4gICAgICBsZXQgZm9ybWF0dGVycyA9IFtdO1xuICAgICAgY2xvbmVkT3B0aW9ucyA9IHtcbiAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgfTtcbiAgICAgIGNsb25lZE9wdGlvbnMgPSBjbG9uZWRPcHRpb25zLnJlcGxhY2UgJiYgdHlwZW9mIGNsb25lZE9wdGlvbnMucmVwbGFjZSAhPT0gJ3N0cmluZycgPyBjbG9uZWRPcHRpb25zLnJlcGxhY2UgOiBjbG9uZWRPcHRpb25zO1xuICAgICAgY2xvbmVkT3B0aW9ucy5hcHBseVBvc3RQcm9jZXNzb3IgPSBmYWxzZTtcbiAgICAgIGRlbGV0ZSBjbG9uZWRPcHRpb25zLmRlZmF1bHRWYWx1ZTtcbiAgICAgIGxldCBkb1JlZHVjZSA9IGZhbHNlO1xuICAgICAgaWYgKG1hdGNoWzBdLmluZGV4T2YodGhpcy5mb3JtYXRTZXBhcmF0b3IpICE9PSAtMSAmJiAhL3suKn0vLnRlc3QobWF0Y2hbMV0pKSB7XG4gICAgICAgIGNvbnN0IHIgPSBtYXRjaFsxXS5zcGxpdCh0aGlzLmZvcm1hdFNlcGFyYXRvcikubWFwKGVsZW0gPT4gZWxlbS50cmltKCkpO1xuICAgICAgICBtYXRjaFsxXSA9IHIuc2hpZnQoKTtcbiAgICAgICAgZm9ybWF0dGVycyA9IHI7XG4gICAgICAgIGRvUmVkdWNlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gZmMoaGFuZGxlSGFzT3B0aW9ucy5jYWxsKHRoaXMsIG1hdGNoWzFdLnRyaW0oKSwgY2xvbmVkT3B0aW9ucyksIGNsb25lZE9wdGlvbnMpO1xuICAgICAgaWYgKHZhbHVlICYmIG1hdGNoWzBdID09PSBzdHIgJiYgdHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykgcmV0dXJuIHZhbHVlO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHZhbHVlID0gbWFrZVN0cmluZyh2YWx1ZSk7XG4gICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYG1pc3NlZCB0byByZXNvbHZlICR7bWF0Y2hbMV19IGZvciBuZXN0aW5nICR7c3RyfWApO1xuICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgfVxuICAgICAgaWYgKGRvUmVkdWNlKSB7XG4gICAgICAgIHZhbHVlID0gZm9ybWF0dGVycy5yZWR1Y2UoKHYsIGYpID0+IHRoaXMuZm9ybWF0KHYsIGYsIG9wdGlvbnMubG5nLCB7XG4gICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICBpbnRlcnBvbGF0aW9ua2V5OiBtYXRjaFsxXS50cmltKClcbiAgICAgICAgfSksIHZhbHVlLnRyaW0oKSk7XG4gICAgICB9XG4gICAgICBzdHIgPSBzdHIucmVwbGFjZShtYXRjaFswXSwgdmFsdWUpO1xuICAgICAgdGhpcy5yZWdleHAubGFzdEluZGV4ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxufVxuXG5jb25zdCBwYXJzZUZvcm1hdFN0ciA9IGZvcm1hdFN0ciA9PiB7XG4gIGxldCBmb3JtYXROYW1lID0gZm9ybWF0U3RyLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICBjb25zdCBmb3JtYXRPcHRpb25zID0ge307XG4gIGlmIChmb3JtYXRTdHIuaW5kZXhPZignKCcpID4gLTEpIHtcbiAgICBjb25zdCBwID0gZm9ybWF0U3RyLnNwbGl0KCcoJyk7XG4gICAgZm9ybWF0TmFtZSA9IHBbMF0udG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgY29uc3Qgb3B0U3RyID0gcFsxXS5zdWJzdHJpbmcoMCwgcFsxXS5sZW5ndGggLSAxKTtcbiAgICBpZiAoZm9ybWF0TmFtZSA9PT0gJ2N1cnJlbmN5JyAmJiBvcHRTdHIuaW5kZXhPZignOicpIDwgMCkge1xuICAgICAgaWYgKCFmb3JtYXRPcHRpb25zLmN1cnJlbmN5KSBmb3JtYXRPcHRpb25zLmN1cnJlbmN5ID0gb3B0U3RyLnRyaW0oKTtcbiAgICB9IGVsc2UgaWYgKGZvcm1hdE5hbWUgPT09ICdyZWxhdGl2ZXRpbWUnICYmIG9wdFN0ci5pbmRleE9mKCc6JykgPCAwKSB7XG4gICAgICBpZiAoIWZvcm1hdE9wdGlvbnMucmFuZ2UpIGZvcm1hdE9wdGlvbnMucmFuZ2UgPSBvcHRTdHIudHJpbSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBvcHRzID0gb3B0U3RyLnNwbGl0KCc7Jyk7XG4gICAgICBvcHRzLmZvckVhY2gob3B0ID0+IHtcbiAgICAgICAgaWYgKG9wdCkge1xuICAgICAgICAgIGNvbnN0IFtrZXksIC4uLnJlc3RdID0gb3B0LnNwbGl0KCc6Jyk7XG4gICAgICAgICAgY29uc3QgdmFsID0gcmVzdC5qb2luKCc6JykudHJpbSgpLnJlcGxhY2UoL14nK3wnKyQvZywgJycpO1xuICAgICAgICAgIGNvbnN0IHRyaW1tZWRLZXkgPSBrZXkudHJpbSgpO1xuICAgICAgICAgIGlmICghZm9ybWF0T3B0aW9uc1t0cmltbWVkS2V5XSkgZm9ybWF0T3B0aW9uc1t0cmltbWVkS2V5XSA9IHZhbDtcbiAgICAgICAgICBpZiAodmFsID09PSAnZmFsc2UnKSBmb3JtYXRPcHRpb25zW3RyaW1tZWRLZXldID0gZmFsc2U7XG4gICAgICAgICAgaWYgKHZhbCA9PT0gJ3RydWUnKSBmb3JtYXRPcHRpb25zW3RyaW1tZWRLZXldID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoIWlzTmFOKHZhbCkpIGZvcm1hdE9wdGlvbnNbdHJpbW1lZEtleV0gPSBwYXJzZUludCh2YWwsIDEwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgZm9ybWF0TmFtZSxcbiAgICBmb3JtYXRPcHRpb25zXG4gIH07XG59O1xuY29uc3QgY3JlYXRlQ2FjaGVkRm9ybWF0dGVyID0gZm4gPT4ge1xuICBjb25zdCBjYWNoZSA9IHt9O1xuICByZXR1cm4gKHZhbCwgbG5nLCBvcHRpb25zKSA9PiB7XG4gICAgbGV0IG9wdEZvckNhY2hlID0gb3B0aW9ucztcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmludGVycG9sYXRpb25rZXkgJiYgb3B0aW9ucy5mb3JtYXRQYXJhbXMgJiYgb3B0aW9ucy5mb3JtYXRQYXJhbXNbb3B0aW9ucy5pbnRlcnBvbGF0aW9ua2V5XSAmJiBvcHRpb25zW29wdGlvbnMuaW50ZXJwb2xhdGlvbmtleV0pIHtcbiAgICAgIG9wdEZvckNhY2hlID0ge1xuICAgICAgICAuLi5vcHRGb3JDYWNoZSxcbiAgICAgICAgW29wdGlvbnMuaW50ZXJwb2xhdGlvbmtleV06IHVuZGVmaW5lZFxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3Qga2V5ID0gbG5nICsgSlNPTi5zdHJpbmdpZnkob3B0Rm9yQ2FjaGUpO1xuICAgIGxldCBmb3JtYXR0ZXIgPSBjYWNoZVtrZXldO1xuICAgIGlmICghZm9ybWF0dGVyKSB7XG4gICAgICBmb3JtYXR0ZXIgPSBmbihnZXRDbGVhbmVkQ29kZShsbmcpLCBvcHRpb25zKTtcbiAgICAgIGNhY2hlW2tleV0gPSBmb3JtYXR0ZXI7XG4gICAgfVxuICAgIHJldHVybiBmb3JtYXR0ZXIodmFsKTtcbiAgfTtcbn07XG5jbGFzcyBGb3JtYXR0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgnZm9ybWF0dGVyJyk7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmZvcm1hdHMgPSB7XG4gICAgICBudW1iZXI6IGNyZWF0ZUNhY2hlZEZvcm1hdHRlcigobG5nLCBvcHQpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxuZywge1xuICAgICAgICAgIC4uLm9wdFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZhbCA9PiBmb3JtYXR0ZXIuZm9ybWF0KHZhbCk7XG4gICAgICB9KSxcbiAgICAgIGN1cnJlbmN5OiBjcmVhdGVDYWNoZWRGb3JtYXR0ZXIoKGxuZywgb3B0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHQsXG4gICAgICAgICAgc3R5bGU6ICdjdXJyZW5jeSdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwpO1xuICAgICAgfSksXG4gICAgICBkYXRldGltZTogY3JlYXRlQ2FjaGVkRm9ybWF0dGVyKChsbmcsIG9wdCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZXIgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwpO1xuICAgICAgfSksXG4gICAgICByZWxhdGl2ZXRpbWU6IGNyZWF0ZUNhY2hlZEZvcm1hdHRlcigobG5nLCBvcHQpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuUmVsYXRpdmVUaW1lRm9ybWF0KGxuZywge1xuICAgICAgICAgIC4uLm9wdFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZhbCA9PiBmb3JtYXR0ZXIuZm9ybWF0KHZhbCwgb3B0LnJhbmdlIHx8ICdkYXknKTtcbiAgICAgIH0pLFxuICAgICAgbGlzdDogY3JlYXRlQ2FjaGVkRm9ybWF0dGVyKChsbmcsIG9wdCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZXIgPSBuZXcgSW50bC5MaXN0Rm9ybWF0KGxuZywge1xuICAgICAgICAgIC4uLm9wdFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZhbCA9PiBmb3JtYXR0ZXIuZm9ybWF0KHZhbCk7XG4gICAgICB9KVxuICAgIH07XG4gICAgdGhpcy5pbml0KG9wdGlvbnMpO1xuICB9XG4gIGluaXQoc2VydmljZXMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge1xuICAgICAgaW50ZXJwb2xhdGlvbjoge31cbiAgICB9O1xuICAgIGNvbnN0IGlPcHRzID0gb3B0aW9ucy5pbnRlcnBvbGF0aW9uO1xuICAgIHRoaXMuZm9ybWF0U2VwYXJhdG9yID0gaU9wdHMuZm9ybWF0U2VwYXJhdG9yID8gaU9wdHMuZm9ybWF0U2VwYXJhdG9yIDogaU9wdHMuZm9ybWF0U2VwYXJhdG9yIHx8ICcsJztcbiAgfVxuICBhZGQobmFtZSwgZmMpIHtcbiAgICB0aGlzLmZvcm1hdHNbbmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKV0gPSBmYztcbiAgfVxuICBhZGRDYWNoZWQobmFtZSwgZmMpIHtcbiAgICB0aGlzLmZvcm1hdHNbbmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKV0gPSBjcmVhdGVDYWNoZWRGb3JtYXR0ZXIoZmMpO1xuICB9XG4gIGZvcm1hdCh2YWx1ZSwgZm9ybWF0LCBsbmcpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG4gICAgY29uc3QgZm9ybWF0cyA9IGZvcm1hdC5zcGxpdCh0aGlzLmZvcm1hdFNlcGFyYXRvcik7XG4gICAgaWYgKGZvcm1hdHMubGVuZ3RoID4gMSAmJiBmb3JtYXRzWzBdLmluZGV4T2YoJygnKSA+IDEgJiYgZm9ybWF0c1swXS5pbmRleE9mKCcpJykgPCAwICYmIGZvcm1hdHMuZmluZChmID0+IGYuaW5kZXhPZignKScpID4gLTEpKSB7XG4gICAgICBjb25zdCBsYXN0SW5kZXggPSBmb3JtYXRzLmZpbmRJbmRleChmID0+IGYuaW5kZXhPZignKScpID4gLTEpO1xuICAgICAgZm9ybWF0c1swXSA9IFtmb3JtYXRzWzBdLCAuLi5mb3JtYXRzLnNwbGljZSgxLCBsYXN0SW5kZXgpXS5qb2luKHRoaXMuZm9ybWF0U2VwYXJhdG9yKTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gZm9ybWF0cy5yZWR1Y2UoKG1lbSwgZikgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBmb3JtYXROYW1lLFxuICAgICAgICBmb3JtYXRPcHRpb25zXG4gICAgICB9ID0gcGFyc2VGb3JtYXRTdHIoZik7XG4gICAgICBpZiAodGhpcy5mb3JtYXRzW2Zvcm1hdE5hbWVdKSB7XG4gICAgICAgIGxldCBmb3JtYXR0ZWQgPSBtZW07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdmFsT3B0aW9ucyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5mb3JtYXRQYXJhbXMgJiYgb3B0aW9ucy5mb3JtYXRQYXJhbXNbb3B0aW9ucy5pbnRlcnBvbGF0aW9ua2V5XSB8fCB7fTtcbiAgICAgICAgICBjb25zdCBsID0gdmFsT3B0aW9ucy5sb2NhbGUgfHwgdmFsT3B0aW9ucy5sbmcgfHwgb3B0aW9ucy5sb2NhbGUgfHwgb3B0aW9ucy5sbmcgfHwgbG5nO1xuICAgICAgICAgIGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0c1tmb3JtYXROYW1lXShtZW0sIGwsIHtcbiAgICAgICAgICAgIC4uLmZvcm1hdE9wdGlvbnMsXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgLi4udmFsT3B0aW9uc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGB0aGVyZSB3YXMgbm8gZm9ybWF0IGZ1bmN0aW9uIGZvciAke2Zvcm1hdE5hbWV9YCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVtO1xuICAgIH0sIHZhbHVlKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbmNvbnN0IHJlbW92ZVBlbmRpbmcgPSAocSwgbmFtZSkgPT4ge1xuICBpZiAocS5wZW5kaW5nW25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICBkZWxldGUgcS5wZW5kaW5nW25hbWVdO1xuICAgIHEucGVuZGluZ0NvdW50LS07XG4gIH1cbn07XG5jbGFzcyBDb25uZWN0b3IgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcihiYWNrZW5kLCBzdG9yZSwgc2VydmljZXMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmJhY2tlbmQgPSBiYWNrZW5kO1xuICAgIHRoaXMuc3RvcmUgPSBzdG9yZTtcbiAgICB0aGlzLnNlcnZpY2VzID0gc2VydmljZXM7XG4gICAgdGhpcy5sYW5ndWFnZVV0aWxzID0gc2VydmljZXMubGFuZ3VhZ2VVdGlscztcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2JhY2tlbmRDb25uZWN0b3InKTtcbiAgICB0aGlzLndhaXRpbmdSZWFkcyA9IFtdO1xuICAgIHRoaXMubWF4UGFyYWxsZWxSZWFkcyA9IG9wdGlvbnMubWF4UGFyYWxsZWxSZWFkcyB8fCAxMDtcbiAgICB0aGlzLnJlYWRpbmdDYWxscyA9IDA7XG4gICAgdGhpcy5tYXhSZXRyaWVzID0gb3B0aW9ucy5tYXhSZXRyaWVzID49IDAgPyBvcHRpb25zLm1heFJldHJpZXMgOiA1O1xuICAgIHRoaXMucmV0cnlUaW1lb3V0ID0gb3B0aW9ucy5yZXRyeVRpbWVvdXQgPj0gMSA/IG9wdGlvbnMucmV0cnlUaW1lb3V0IDogMzUwO1xuICAgIHRoaXMuc3RhdGUgPSB7fTtcbiAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgaWYgKHRoaXMuYmFja2VuZCAmJiB0aGlzLmJhY2tlbmQuaW5pdCkge1xuICAgICAgdGhpcy5iYWNrZW5kLmluaXQoc2VydmljZXMsIG9wdGlvbnMuYmFja2VuZCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG4gIHF1ZXVlTG9hZChsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgdG9Mb2FkID0ge307XG4gICAgY29uc3QgcGVuZGluZyA9IHt9O1xuICAgIGNvbnN0IHRvTG9hZExhbmd1YWdlcyA9IHt9O1xuICAgIGNvbnN0IHRvTG9hZE5hbWVzcGFjZXMgPSB7fTtcbiAgICBsYW5ndWFnZXMuZm9yRWFjaChsbmcgPT4ge1xuICAgICAgbGV0IGhhc0FsbE5hbWVzcGFjZXMgPSB0cnVlO1xuICAgICAgbmFtZXNwYWNlcy5mb3JFYWNoKG5zID0+IHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGAke2xuZ318JHtuc31gO1xuICAgICAgICBpZiAoIW9wdGlvbnMucmVsb2FkICYmIHRoaXMuc3RvcmUuaGFzUmVzb3VyY2VCdW5kbGUobG5nLCBucykpIHtcbiAgICAgICAgICB0aGlzLnN0YXRlW25hbWVdID0gMjtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlW25hbWVdIDwgMCkgOyBlbHNlIGlmICh0aGlzLnN0YXRlW25hbWVdID09PSAxKSB7XG4gICAgICAgICAgaWYgKHBlbmRpbmdbbmFtZV0gPT09IHVuZGVmaW5lZCkgcGVuZGluZ1tuYW1lXSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZVtuYW1lXSA9IDE7XG4gICAgICAgICAgaGFzQWxsTmFtZXNwYWNlcyA9IGZhbHNlO1xuICAgICAgICAgIGlmIChwZW5kaW5nW25hbWVdID09PSB1bmRlZmluZWQpIHBlbmRpbmdbbmFtZV0gPSB0cnVlO1xuICAgICAgICAgIGlmICh0b0xvYWRbbmFtZV0gPT09IHVuZGVmaW5lZCkgdG9Mb2FkW25hbWVdID0gdHJ1ZTtcbiAgICAgICAgICBpZiAodG9Mb2FkTmFtZXNwYWNlc1tuc10gPT09IHVuZGVmaW5lZCkgdG9Mb2FkTmFtZXNwYWNlc1tuc10gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmICghaGFzQWxsTmFtZXNwYWNlcykgdG9Mb2FkTGFuZ3VhZ2VzW2xuZ10gPSB0cnVlO1xuICAgIH0pO1xuICAgIGlmIChPYmplY3Qua2V5cyh0b0xvYWQpLmxlbmd0aCB8fCBPYmplY3Qua2V5cyhwZW5kaW5nKS5sZW5ndGgpIHtcbiAgICAgIHRoaXMucXVldWUucHVzaCh7XG4gICAgICAgIHBlbmRpbmcsXG4gICAgICAgIHBlbmRpbmdDb3VudDogT2JqZWN0LmtleXMocGVuZGluZykubGVuZ3RoLFxuICAgICAgICBsb2FkZWQ6IHt9LFxuICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICBjYWxsYmFja1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB0b0xvYWQ6IE9iamVjdC5rZXlzKHRvTG9hZCksXG4gICAgICBwZW5kaW5nOiBPYmplY3Qua2V5cyhwZW5kaW5nKSxcbiAgICAgIHRvTG9hZExhbmd1YWdlczogT2JqZWN0LmtleXModG9Mb2FkTGFuZ3VhZ2VzKSxcbiAgICAgIHRvTG9hZE5hbWVzcGFjZXM6IE9iamVjdC5rZXlzKHRvTG9hZE5hbWVzcGFjZXMpXG4gICAgfTtcbiAgfVxuICBsb2FkZWQobmFtZSwgZXJyLCBkYXRhKSB7XG4gICAgY29uc3QgcyA9IG5hbWUuc3BsaXQoJ3wnKTtcbiAgICBjb25zdCBsbmcgPSBzWzBdO1xuICAgIGNvbnN0IG5zID0gc1sxXTtcbiAgICBpZiAoZXJyKSB0aGlzLmVtaXQoJ2ZhaWxlZExvYWRpbmcnLCBsbmcsIG5zLCBlcnIpO1xuICAgIGlmICghZXJyICYmIGRhdGEpIHtcbiAgICAgIHRoaXMuc3RvcmUuYWRkUmVzb3VyY2VCdW5kbGUobG5nLCBucywgZGF0YSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtcbiAgICAgICAgc2tpcENvcHk6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLnN0YXRlW25hbWVdID0gZXJyID8gLTEgOiAyO1xuICAgIGlmIChlcnIgJiYgZGF0YSkgdGhpcy5zdGF0ZVtuYW1lXSA9IDA7XG4gICAgY29uc3QgbG9hZGVkID0ge307XG4gICAgdGhpcy5xdWV1ZS5mb3JFYWNoKHEgPT4ge1xuICAgICAgcHVzaFBhdGgocS5sb2FkZWQsIFtsbmddLCBucyk7XG4gICAgICByZW1vdmVQZW5kaW5nKHEsIG5hbWUpO1xuICAgICAgaWYgKGVycikgcS5lcnJvcnMucHVzaChlcnIpO1xuICAgICAgaWYgKHEucGVuZGluZ0NvdW50ID09PSAwICYmICFxLmRvbmUpIHtcbiAgICAgICAgT2JqZWN0LmtleXMocS5sb2FkZWQpLmZvckVhY2gobCA9PiB7XG4gICAgICAgICAgaWYgKCFsb2FkZWRbbF0pIGxvYWRlZFtsXSA9IHt9O1xuICAgICAgICAgIGNvbnN0IGxvYWRlZEtleXMgPSBxLmxvYWRlZFtsXTtcbiAgICAgICAgICBpZiAobG9hZGVkS2V5cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxvYWRlZEtleXMuZm9yRWFjaChuID0+IHtcbiAgICAgICAgICAgICAgaWYgKGxvYWRlZFtsXVtuXSA9PT0gdW5kZWZpbmVkKSBsb2FkZWRbbF1bbl0gPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcS5kb25lID0gdHJ1ZTtcbiAgICAgICAgaWYgKHEuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgIHEuY2FsbGJhY2socS5lcnJvcnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHEuY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuZW1pdCgnbG9hZGVkJywgbG9hZGVkKTtcbiAgICB0aGlzLnF1ZXVlID0gdGhpcy5xdWV1ZS5maWx0ZXIocSA9PiAhcS5kb25lKTtcbiAgfVxuICByZWFkKGxuZywgbnMsIGZjTmFtZSkge1xuICAgIGxldCB0cmllZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogMDtcbiAgICBsZXQgd2FpdCA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogdGhpcy5yZXRyeVRpbWVvdXQ7XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgPyBhcmd1bWVudHNbNV0gOiB1bmRlZmluZWQ7XG4gICAgaWYgKCFsbmcubGVuZ3RoKSByZXR1cm4gY2FsbGJhY2sobnVsbCwge30pO1xuICAgIGlmICh0aGlzLnJlYWRpbmdDYWxscyA+PSB0aGlzLm1heFBhcmFsbGVsUmVhZHMpIHtcbiAgICAgIHRoaXMud2FpdGluZ1JlYWRzLnB1c2goe1xuICAgICAgICBsbmcsXG4gICAgICAgIG5zLFxuICAgICAgICBmY05hbWUsXG4gICAgICAgIHRyaWVkLFxuICAgICAgICB3YWl0LFxuICAgICAgICBjYWxsYmFja1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVhZGluZ0NhbGxzKys7XG4gICAgY29uc3QgcmVzb2x2ZXIgPSAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICB0aGlzLnJlYWRpbmdDYWxscy0tO1xuICAgICAgaWYgKHRoaXMud2FpdGluZ1JlYWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMud2FpdGluZ1JlYWRzLnNoaWZ0KCk7XG4gICAgICAgIHRoaXMucmVhZChuZXh0LmxuZywgbmV4dC5ucywgbmV4dC5mY05hbWUsIG5leHQudHJpZWQsIG5leHQud2FpdCwgbmV4dC5jYWxsYmFjayk7XG4gICAgICB9XG4gICAgICBpZiAoZXJyICYmIGRhdGEgJiYgdHJpZWQgPCB0aGlzLm1heFJldHJpZXMpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5yZWFkLmNhbGwodGhpcywgbG5nLCBucywgZmNOYW1lLCB0cmllZCArIDEsIHdhaXQgKiAyLCBjYWxsYmFjayk7XG4gICAgICAgIH0sIHdhaXQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjYWxsYmFjayhlcnIsIGRhdGEpO1xuICAgIH07XG4gICAgY29uc3QgZmMgPSB0aGlzLmJhY2tlbmRbZmNOYW1lXS5iaW5kKHRoaXMuYmFja2VuZCk7XG4gICAgaWYgKGZjLmxlbmd0aCA9PT0gMikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgciA9IGZjKGxuZywgbnMpO1xuICAgICAgICBpZiAociAmJiB0eXBlb2Ygci50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgci50aGVuKGRhdGEgPT4gcmVzb2x2ZXIobnVsbCwgZGF0YSkpLmNhdGNoKHJlc29sdmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlcihudWxsLCByKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJlc29sdmVyKGVycik7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBmYyhsbmcsIG5zLCByZXNvbHZlcik7XG4gIH1cbiAgcHJlcGFyZUxvYWRpbmcobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIGxldCBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAzID8gYXJndW1lbnRzWzNdIDogdW5kZWZpbmVkO1xuICAgIGlmICghdGhpcy5iYWNrZW5kKSB7XG4gICAgICB0aGlzLmxvZ2dlci53YXJuKCdObyBiYWNrZW5kIHdhcyBhZGRlZCB2aWEgaTE4bmV4dC51c2UuIFdpbGwgbm90IGxvYWQgcmVzb3VyY2VzLicpO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbGFuZ3VhZ2VzID09PSAnc3RyaW5nJykgbGFuZ3VhZ2VzID0gdGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShsYW5ndWFnZXMpO1xuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycpIG5hbWVzcGFjZXMgPSBbbmFtZXNwYWNlc107XG4gICAgY29uc3QgdG9Mb2FkID0gdGhpcy5xdWV1ZUxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgaWYgKCF0b0xvYWQudG9Mb2FkLmxlbmd0aCkge1xuICAgICAgaWYgKCF0b0xvYWQucGVuZGluZy5sZW5ndGgpIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdG9Mb2FkLnRvTG9hZC5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgdGhpcy5sb2FkT25lKG5hbWUpO1xuICAgIH0pO1xuICB9XG4gIGxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBjYWxsYmFjaykge1xuICAgIHRoaXMucHJlcGFyZUxvYWRpbmcobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCB7fSwgY2FsbGJhY2spO1xuICB9XG4gIHJlbG9hZChsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5wcmVwYXJlTG9hZGluZyhsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIHtcbiAgICAgIHJlbG9hZDogdHJ1ZVxuICAgIH0sIGNhbGxiYWNrKTtcbiAgfVxuICBsb2FkT25lKG5hbWUpIHtcbiAgICBsZXQgcHJlZml4ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcbiAgICBjb25zdCBzID0gbmFtZS5zcGxpdCgnfCcpO1xuICAgIGNvbnN0IGxuZyA9IHNbMF07XG4gICAgY29uc3QgbnMgPSBzWzFdO1xuICAgIHRoaXMucmVhZChsbmcsIG5zLCAncmVhZCcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICBpZiAoZXJyKSB0aGlzLmxvZ2dlci53YXJuKGAke3ByZWZpeH1sb2FkaW5nIG5hbWVzcGFjZSAke25zfSBmb3IgbGFuZ3VhZ2UgJHtsbmd9IGZhaWxlZGAsIGVycik7XG4gICAgICBpZiAoIWVyciAmJiBkYXRhKSB0aGlzLmxvZ2dlci5sb2coYCR7cHJlZml4fWxvYWRlZCBuYW1lc3BhY2UgJHtuc30gZm9yIGxhbmd1YWdlICR7bG5nfWAsIGRhdGEpO1xuICAgICAgdGhpcy5sb2FkZWQobmFtZSwgZXJyLCBkYXRhKTtcbiAgICB9KTtcbiAgfVxuICBzYXZlTWlzc2luZyhsYW5ndWFnZXMsIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlLCBpc1VwZGF0ZSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgJiYgYXJndW1lbnRzWzVdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNV0gOiB7fTtcbiAgICBsZXQgY2xiID0gYXJndW1lbnRzLmxlbmd0aCA+IDYgJiYgYXJndW1lbnRzWzZdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNl0gOiAoKSA9PiB7fTtcbiAgICBpZiAodGhpcy5zZXJ2aWNlcy51dGlscyAmJiB0aGlzLnNlcnZpY2VzLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZSAmJiAhdGhpcy5zZXJ2aWNlcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UobmFtZXNwYWNlKSkge1xuICAgICAgdGhpcy5sb2dnZXIud2FybihgZGlkIG5vdCBzYXZlIGtleSBcIiR7a2V5fVwiIGFzIHRoZSBuYW1lc3BhY2UgXCIke25hbWVzcGFjZX1cIiB3YXMgbm90IHlldCBsb2FkZWRgLCAnVGhpcyBtZWFucyBzb21ldGhpbmcgSVMgV1JPTkcgaW4geW91ciBzZXR1cC4gWW91IGFjY2VzcyB0aGUgdCBmdW5jdGlvbiBiZWZvcmUgaTE4bmV4dC5pbml0IC8gaTE4bmV4dC5sb2FkTmFtZXNwYWNlIC8gaTE4bmV4dC5jaGFuZ2VMYW5ndWFnZSB3YXMgZG9uZS4gV2FpdCBmb3IgdGhlIGNhbGxiYWNrIG9yIFByb21pc2UgdG8gcmVzb2x2ZSBiZWZvcmUgYWNjZXNzaW5nIGl0ISEhJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCB8fCBrZXkgPT09IG51bGwgfHwga2V5ID09PSAnJykgcmV0dXJuO1xuICAgIGlmICh0aGlzLmJhY2tlbmQgJiYgdGhpcy5iYWNrZW5kLmNyZWF0ZSkge1xuICAgICAgY29uc3Qgb3B0cyA9IHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgaXNVcGRhdGVcbiAgICAgIH07XG4gICAgICBjb25zdCBmYyA9IHRoaXMuYmFja2VuZC5jcmVhdGUuYmluZCh0aGlzLmJhY2tlbmQpO1xuICAgICAgaWYgKGZjLmxlbmd0aCA8IDYpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICBpZiAoZmMubGVuZ3RoID09PSA1KSB7XG4gICAgICAgICAgICByID0gZmMobGFuZ3VhZ2VzLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSwgb3B0cyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHIgPSBmYyhsYW5ndWFnZXMsIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHIgJiYgdHlwZW9mIHIudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgci50aGVuKGRhdGEgPT4gY2xiKG51bGwsIGRhdGEpKS5jYXRjaChjbGIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbGIobnVsbCwgcik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjbGIoZXJyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmMobGFuZ3VhZ2VzLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSwgY2xiLCBvcHRzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFsYW5ndWFnZXMgfHwgIWxhbmd1YWdlc1swXSkgcmV0dXJuO1xuICAgIHRoaXMuc3RvcmUuYWRkUmVzb3VyY2UobGFuZ3VhZ2VzWzBdLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSk7XG4gIH1cbn1cblxuY29uc3QgZ2V0ID0gKCkgPT4gKHtcbiAgZGVidWc6IGZhbHNlLFxuICBpbml0SW1tZWRpYXRlOiB0cnVlLFxuICBuczogWyd0cmFuc2xhdGlvbiddLFxuICBkZWZhdWx0TlM6IFsndHJhbnNsYXRpb24nXSxcbiAgZmFsbGJhY2tMbmc6IFsnZGV2J10sXG4gIGZhbGxiYWNrTlM6IGZhbHNlLFxuICBzdXBwb3J0ZWRMbmdzOiBmYWxzZSxcbiAgbm9uRXhwbGljaXRTdXBwb3J0ZWRMbmdzOiBmYWxzZSxcbiAgbG9hZDogJ2FsbCcsXG4gIHByZWxvYWQ6IGZhbHNlLFxuICBzaW1wbGlmeVBsdXJhbFN1ZmZpeDogdHJ1ZSxcbiAga2V5U2VwYXJhdG9yOiAnLicsXG4gIG5zU2VwYXJhdG9yOiAnOicsXG4gIHBsdXJhbFNlcGFyYXRvcjogJ18nLFxuICBjb250ZXh0U2VwYXJhdG9yOiAnXycsXG4gIHBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzOiBmYWxzZSxcbiAgc2F2ZU1pc3Npbmc6IGZhbHNlLFxuICB1cGRhdGVNaXNzaW5nOiBmYWxzZSxcbiAgc2F2ZU1pc3NpbmdUbzogJ2ZhbGxiYWNrJyxcbiAgc2F2ZU1pc3NpbmdQbHVyYWxzOiB0cnVlLFxuICBtaXNzaW5nS2V5SGFuZGxlcjogZmFsc2UsXG4gIG1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlcjogZmFsc2UsXG4gIHBvc3RQcm9jZXNzOiBmYWxzZSxcbiAgcG9zdFByb2Nlc3NQYXNzUmVzb2x2ZWQ6IGZhbHNlLFxuICByZXR1cm5OdWxsOiBmYWxzZSxcbiAgcmV0dXJuRW1wdHlTdHJpbmc6IHRydWUsXG4gIHJldHVybk9iamVjdHM6IGZhbHNlLFxuICBqb2luQXJyYXlzOiBmYWxzZSxcbiAgcmV0dXJuZWRPYmplY3RIYW5kbGVyOiBmYWxzZSxcbiAgcGFyc2VNaXNzaW5nS2V5SGFuZGxlcjogZmFsc2UsXG4gIGFwcGVuZE5hbWVzcGFjZVRvTWlzc2luZ0tleTogZmFsc2UsXG4gIGFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlOiBmYWxzZSxcbiAgb3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXI6IGFyZ3MgPT4ge1xuICAgIGxldCByZXQgPSB7fTtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMV0gPT09ICdvYmplY3QnKSByZXQgPSBhcmdzWzFdO1xuICAgIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gJ3N0cmluZycpIHJldC5kZWZhdWx0VmFsdWUgPSBhcmdzWzFdO1xuICAgIGlmICh0eXBlb2YgYXJnc1syXSA9PT0gJ3N0cmluZycpIHJldC50RGVzY3JpcHRpb24gPSBhcmdzWzJdO1xuICAgIGlmICh0eXBlb2YgYXJnc1syXSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIGFyZ3NbM10gPT09ICdvYmplY3QnKSB7XG4gICAgICBjb25zdCBvcHRpb25zID0gYXJnc1szXSB8fCBhcmdzWzJdO1xuICAgICAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICByZXRba2V5XSA9IG9wdGlvbnNba2V5XTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9LFxuICBpbnRlcnBvbGF0aW9uOiB7XG4gICAgZXNjYXBlVmFsdWU6IHRydWUsXG4gICAgZm9ybWF0OiB2YWx1ZSA9PiB2YWx1ZSxcbiAgICBwcmVmaXg6ICd7eycsXG4gICAgc3VmZml4OiAnfX0nLFxuICAgIGZvcm1hdFNlcGFyYXRvcjogJywnLFxuICAgIHVuZXNjYXBlUHJlZml4OiAnLScsXG4gICAgbmVzdGluZ1ByZWZpeDogJyR0KCcsXG4gICAgbmVzdGluZ1N1ZmZpeDogJyknLFxuICAgIG5lc3RpbmdPcHRpb25zU2VwYXJhdG9yOiAnLCcsXG4gICAgbWF4UmVwbGFjZXM6IDEwMDAsXG4gICAgc2tpcE9uVmFyaWFibGVzOiB0cnVlXG4gIH1cbn0pO1xuY29uc3QgdHJhbnNmb3JtT3B0aW9ucyA9IG9wdGlvbnMgPT4ge1xuICBpZiAodHlwZW9mIG9wdGlvbnMubnMgPT09ICdzdHJpbmcnKSBvcHRpb25zLm5zID0gW29wdGlvbnMubnNdO1xuICBpZiAodHlwZW9mIG9wdGlvbnMuZmFsbGJhY2tMbmcgPT09ICdzdHJpbmcnKSBvcHRpb25zLmZhbGxiYWNrTG5nID0gW29wdGlvbnMuZmFsbGJhY2tMbmddO1xuICBpZiAodHlwZW9mIG9wdGlvbnMuZmFsbGJhY2tOUyA9PT0gJ3N0cmluZycpIG9wdGlvbnMuZmFsbGJhY2tOUyA9IFtvcHRpb25zLmZhbGxiYWNrTlNdO1xuICBpZiAob3B0aW9ucy5zdXBwb3J0ZWRMbmdzICYmIG9wdGlvbnMuc3VwcG9ydGVkTG5ncy5pbmRleE9mKCdjaW1vZGUnKSA8IDApIHtcbiAgICBvcHRpb25zLnN1cHBvcnRlZExuZ3MgPSBvcHRpb25zLnN1cHBvcnRlZExuZ3MuY29uY2F0KFsnY2ltb2RlJ10pO1xuICB9XG4gIHJldHVybiBvcHRpb25zO1xufTtcblxuY29uc3Qgbm9vcCA9ICgpID0+IHt9O1xuY29uc3QgYmluZE1lbWJlckZ1bmN0aW9ucyA9IGluc3QgPT4ge1xuICBjb25zdCBtZW1zID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoT2JqZWN0LmdldFByb3RvdHlwZU9mKGluc3QpKTtcbiAgbWVtcy5mb3JFYWNoKG1lbSA9PiB7XG4gICAgaWYgKHR5cGVvZiBpbnN0W21lbV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGluc3RbbWVtXSA9IGluc3RbbWVtXS5iaW5kKGluc3QpO1xuICAgIH1cbiAgfSk7XG59O1xuY2xhc3MgSTE4biBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBsZXQgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMub3B0aW9ucyA9IHRyYW5zZm9ybU9wdGlvbnMob3B0aW9ucyk7XG4gICAgdGhpcy5zZXJ2aWNlcyA9IHt9O1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlcjtcbiAgICB0aGlzLm1vZHVsZXMgPSB7XG4gICAgICBleHRlcm5hbDogW11cbiAgICB9O1xuICAgIGJpbmRNZW1iZXJGdW5jdGlvbnModGhpcyk7XG4gICAgaWYgKGNhbGxiYWNrICYmICF0aGlzLmlzSW5pdGlhbGl6ZWQgJiYgIW9wdGlvbnMuaXNDbG9uZSkge1xuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaW5pdEltbWVkaWF0ZSkge1xuICAgICAgICB0aGlzLmluaXQob3B0aW9ucywgY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmluaXQob3B0aW9ucywgY2FsbGJhY2spO1xuICAgICAgfSwgMCk7XG4gICAgfVxuICB9XG4gIGluaXQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5pc0luaXRpYWxpemluZyA9IHRydWU7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5kZWZhdWx0TlMgJiYgb3B0aW9ucy5kZWZhdWx0TlMgIT09IGZhbHNlICYmIG9wdGlvbnMubnMpIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5ucyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgb3B0aW9ucy5kZWZhdWx0TlMgPSBvcHRpb25zLm5zO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLm5zLmluZGV4T2YoJ3RyYW5zbGF0aW9uJykgPCAwKSB7XG4gICAgICAgIG9wdGlvbnMuZGVmYXVsdE5TID0gb3B0aW9ucy5uc1swXTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZGVmT3B0cyA9IGdldCgpO1xuICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgIC4uLmRlZk9wdHMsXG4gICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICAuLi50cmFuc2Zvcm1PcHRpb25zKG9wdGlvbnMpXG4gICAgfTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgIT09ICd2MScpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uID0ge1xuICAgICAgICAuLi5kZWZPcHRzLmludGVycG9sYXRpb24sXG4gICAgICAgIC4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5rZXlTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkS2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlTZXBhcmF0b3I7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLm5zU2VwYXJhdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMub3B0aW9ucy51c2VyRGVmaW5lZE5zU2VwYXJhdG9yID0gb3B0aW9ucy5uc1NlcGFyYXRvcjtcbiAgICB9XG4gICAgY29uc3QgY3JlYXRlQ2xhc3NPbkRlbWFuZCA9IENsYXNzT3JPYmplY3QgPT4ge1xuICAgICAgaWYgKCFDbGFzc09yT2JqZWN0KSByZXR1cm4gbnVsbDtcbiAgICAgIGlmICh0eXBlb2YgQ2xhc3NPck9iamVjdCA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIG5ldyBDbGFzc09yT2JqZWN0KCk7XG4gICAgICByZXR1cm4gQ2xhc3NPck9iamVjdDtcbiAgICB9O1xuICAgIGlmICghdGhpcy5vcHRpb25zLmlzQ2xvbmUpIHtcbiAgICAgIGlmICh0aGlzLm1vZHVsZXMubG9nZ2VyKSB7XG4gICAgICAgIGJhc2VMb2dnZXIuaW5pdChjcmVhdGVDbGFzc09uRGVtYW5kKHRoaXMubW9kdWxlcy5sb2dnZXIpLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmFzZUxvZ2dlci5pbml0KG51bGwsIHRoaXMub3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBsZXQgZm9ybWF0dGVyO1xuICAgICAgaWYgKHRoaXMubW9kdWxlcy5mb3JtYXR0ZXIpIHtcbiAgICAgICAgZm9ybWF0dGVyID0gdGhpcy5tb2R1bGVzLmZvcm1hdHRlcjtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIEludGwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGZvcm1hdHRlciA9IEZvcm1hdHRlcjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGx1ID0gbmV3IExhbmd1YWdlVXRpbCh0aGlzLm9wdGlvbnMpO1xuICAgICAgdGhpcy5zdG9yZSA9IG5ldyBSZXNvdXJjZVN0b3JlKHRoaXMub3B0aW9ucy5yZXNvdXJjZXMsIHRoaXMub3B0aW9ucyk7XG4gICAgICBjb25zdCBzID0gdGhpcy5zZXJ2aWNlcztcbiAgICAgIHMubG9nZ2VyID0gYmFzZUxvZ2dlcjtcbiAgICAgIHMucmVzb3VyY2VTdG9yZSA9IHRoaXMuc3RvcmU7XG4gICAgICBzLmxhbmd1YWdlVXRpbHMgPSBsdTtcbiAgICAgIHMucGx1cmFsUmVzb2x2ZXIgPSBuZXcgUGx1cmFsUmVzb2x2ZXIobHUsIHtcbiAgICAgICAgcHJlcGVuZDogdGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcixcbiAgICAgICAgY29tcGF0aWJpbGl0eUpTT046IHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTixcbiAgICAgICAgc2ltcGxpZnlQbHVyYWxTdWZmaXg6IHRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeFxuICAgICAgfSk7XG4gICAgICBpZiAoZm9ybWF0dGVyICYmICghdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0IHx8IHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdCA9PT0gZGVmT3B0cy5pbnRlcnBvbGF0aW9uLmZvcm1hdCkpIHtcbiAgICAgICAgcy5mb3JtYXR0ZXIgPSBjcmVhdGVDbGFzc09uRGVtYW5kKGZvcm1hdHRlcik7XG4gICAgICAgIHMuZm9ybWF0dGVyLmluaXQocywgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0ID0gcy5mb3JtYXR0ZXIuZm9ybWF0LmJpbmQocy5mb3JtYXR0ZXIpO1xuICAgICAgfVxuICAgICAgcy5pbnRlcnBvbGF0b3IgPSBuZXcgSW50ZXJwb2xhdG9yKHRoaXMub3B0aW9ucyk7XG4gICAgICBzLnV0aWxzID0ge1xuICAgICAgICBoYXNMb2FkZWROYW1lc3BhY2U6IHRoaXMuaGFzTG9hZGVkTmFtZXNwYWNlLmJpbmQodGhpcylcbiAgICAgIH07XG4gICAgICBzLmJhY2tlbmRDb25uZWN0b3IgPSBuZXcgQ29ubmVjdG9yKGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmJhY2tlbmQpLCBzLnJlc291cmNlU3RvcmUsIHMsIHRoaXMub3B0aW9ucyk7XG4gICAgICBzLmJhY2tlbmRDb25uZWN0b3Iub24oJyonLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgICAgfSk7XG4gICAgICBpZiAodGhpcy5tb2R1bGVzLmxhbmd1YWdlRGV0ZWN0b3IpIHtcbiAgICAgICAgcy5sYW5ndWFnZURldGVjdG9yID0gY3JlYXRlQ2xhc3NPbkRlbWFuZCh0aGlzLm1vZHVsZXMubGFuZ3VhZ2VEZXRlY3Rvcik7XG4gICAgICAgIGlmIChzLmxhbmd1YWdlRGV0ZWN0b3IuaW5pdCkgcy5sYW5ndWFnZURldGVjdG9yLmluaXQocywgdGhpcy5vcHRpb25zLmRldGVjdGlvbiwgdGhpcy5vcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZHVsZXMuaTE4bkZvcm1hdCkge1xuICAgICAgICBzLmkxOG5Gb3JtYXQgPSBjcmVhdGVDbGFzc09uRGVtYW5kKHRoaXMubW9kdWxlcy5pMThuRm9ybWF0KTtcbiAgICAgICAgaWYgKHMuaTE4bkZvcm1hdC5pbml0KSBzLmkxOG5Gb3JtYXQuaW5pdCh0aGlzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudHJhbnNsYXRvciA9IG5ldyBUcmFuc2xhdG9yKHRoaXMuc2VydmljZXMsIHRoaXMub3B0aW9ucyk7XG4gICAgICB0aGlzLnRyYW5zbGF0b3Iub24oJyonLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgICBhcmdzW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm1vZHVsZXMuZXh0ZXJuYWwuZm9yRWFjaChtID0+IHtcbiAgICAgICAgaWYgKG0uaW5pdCkgbS5pbml0KHRoaXMpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuZm9ybWF0ID0gdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0O1xuICAgIGlmICghY2FsbGJhY2spIGNhbGxiYWNrID0gbm9vcDtcbiAgICBpZiAodGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nICYmICF0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IgJiYgIXRoaXMub3B0aW9ucy5sbmcpIHtcbiAgICAgIGNvbnN0IGNvZGVzID0gdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKTtcbiAgICAgIGlmIChjb2Rlcy5sZW5ndGggPiAwICYmIGNvZGVzWzBdICE9PSAnZGV2JykgdGhpcy5vcHRpb25zLmxuZyA9IGNvZGVzWzBdO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciAmJiAhdGhpcy5vcHRpb25zLmxuZykge1xuICAgICAgdGhpcy5sb2dnZXIud2FybignaW5pdDogbm8gbGFuZ3VhZ2VEZXRlY3RvciBpcyB1c2VkIGFuZCBubyBsbmcgaXMgZGVmaW5lZCcpO1xuICAgIH1cbiAgICBjb25zdCBzdG9yZUFwaSA9IFsnZ2V0UmVzb3VyY2UnLCAnaGFzUmVzb3VyY2VCdW5kbGUnLCAnZ2V0UmVzb3VyY2VCdW5kbGUnLCAnZ2V0RGF0YUJ5TGFuZ3VhZ2UnXTtcbiAgICBzdG9yZUFwaS5mb3JFYWNoKGZjTmFtZSA9PiB7XG4gICAgICB0aGlzW2ZjTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5zdG9yZVtmY05hbWVdKC4uLmFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICAgIGNvbnN0IHN0b3JlQXBpQ2hhaW5lZCA9IFsnYWRkUmVzb3VyY2UnLCAnYWRkUmVzb3VyY2VzJywgJ2FkZFJlc291cmNlQnVuZGxlJywgJ3JlbW92ZVJlc291cmNlQnVuZGxlJ107XG4gICAgc3RvcmVBcGlDaGFpbmVkLmZvckVhY2goZmNOYW1lID0+IHtcbiAgICAgIHRoaXNbZmNOYW1lXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuc3RvcmVbZmNOYW1lXSguLi5hcmd1bWVudHMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICB9O1xuICAgIH0pO1xuICAgIGNvbnN0IGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBjb25zdCBsb2FkID0gKCkgPT4ge1xuICAgICAgY29uc3QgZmluaXNoID0gKGVyciwgdCkgPT4ge1xuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6aW5nID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQgJiYgIXRoaXMuaW5pdGlhbGl6ZWRTdG9yZU9uY2UpIHRoaXMubG9nZ2VyLndhcm4oJ2luaXQ6IGkxOG5leHQgaXMgYWxyZWFkeSBpbml0aWFsaXplZC4gWW91IHNob3VsZCBjYWxsIGluaXQganVzdCBvbmNlIScpO1xuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pc0Nsb25lKSB0aGlzLmxvZ2dlci5sb2coJ2luaXRpYWxpemVkJywgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgdGhpcy5lbWl0KCdpbml0aWFsaXplZCcsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUodCk7XG4gICAgICAgIGNhbGxiYWNrKGVyciwgdCk7XG4gICAgICB9O1xuICAgICAgaWYgKHRoaXMubGFuZ3VhZ2VzICYmIHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJICE9PSAndjEnICYmICF0aGlzLmlzSW5pdGlhbGl6ZWQpIHJldHVybiBmaW5pc2gobnVsbCwgdGhpcy50LmJpbmQodGhpcykpO1xuICAgICAgdGhpcy5jaGFuZ2VMYW5ndWFnZSh0aGlzLm9wdGlvbnMubG5nLCBmaW5pc2gpO1xuICAgIH07XG4gICAgaWYgKHRoaXMub3B0aW9ucy5yZXNvdXJjZXMgfHwgIXRoaXMub3B0aW9ucy5pbml0SW1tZWRpYXRlKSB7XG4gICAgICBsb2FkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFRpbWVvdXQobG9hZCwgMCk7XG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZDtcbiAgfVxuICBsb2FkUmVzb3VyY2VzKGxhbmd1YWdlKSB7XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBub29wO1xuICAgIGxldCB1c2VkQ2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICBjb25zdCB1c2VkTG5nID0gdHlwZW9mIGxhbmd1YWdlID09PSAnc3RyaW5nJyA/IGxhbmd1YWdlIDogdGhpcy5sYW5ndWFnZTtcbiAgICBpZiAodHlwZW9mIGxhbmd1YWdlID09PSAnZnVuY3Rpb24nKSB1c2VkQ2FsbGJhY2sgPSBsYW5ndWFnZTtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5yZXNvdXJjZXMgfHwgdGhpcy5vcHRpb25zLnBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzKSB7XG4gICAgICBpZiAodXNlZExuZyAmJiB1c2VkTG5nLnRvTG93ZXJDYXNlKCkgPT09ICdjaW1vZGUnICYmICghdGhpcy5vcHRpb25zLnByZWxvYWQgfHwgdGhpcy5vcHRpb25zLnByZWxvYWQubGVuZ3RoID09PSAwKSkgcmV0dXJuIHVzZWRDYWxsYmFjaygpO1xuICAgICAgY29uc3QgdG9Mb2FkID0gW107XG4gICAgICBjb25zdCBhcHBlbmQgPSBsbmcgPT4ge1xuICAgICAgICBpZiAoIWxuZykgcmV0dXJuO1xuICAgICAgICBpZiAobG5nID09PSAnY2ltb2RlJykgcmV0dXJuO1xuICAgICAgICBjb25zdCBsbmdzID0gdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShsbmcpO1xuICAgICAgICBsbmdzLmZvckVhY2gobCA9PiB7XG4gICAgICAgICAgaWYgKGwgPT09ICdjaW1vZGUnKSByZXR1cm47XG4gICAgICAgICAgaWYgKHRvTG9hZC5pbmRleE9mKGwpIDwgMCkgdG9Mb2FkLnB1c2gobCk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIGlmICghdXNlZExuZykge1xuICAgICAgICBjb25zdCBmYWxsYmFja3MgPSB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZ2V0RmFsbGJhY2tDb2Rlcyh0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcpO1xuICAgICAgICBmYWxsYmFja3MuZm9yRWFjaChsID0+IGFwcGVuZChsKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcHBlbmQodXNlZExuZyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnByZWxvYWQpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnByZWxvYWQuZm9yRWFjaChsID0+IGFwcGVuZChsKSk7XG4gICAgICB9XG4gICAgICB0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IubG9hZCh0b0xvYWQsIHRoaXMub3B0aW9ucy5ucywgZSA9PiB7XG4gICAgICAgIGlmICghZSAmJiAhdGhpcy5yZXNvbHZlZExhbmd1YWdlICYmIHRoaXMubGFuZ3VhZ2UpIHRoaXMuc2V0UmVzb2x2ZWRMYW5ndWFnZSh0aGlzLmxhbmd1YWdlKTtcbiAgICAgICAgdXNlZENhbGxiYWNrKGUpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVzZWRDYWxsYmFjayhudWxsKTtcbiAgICB9XG4gIH1cbiAgcmVsb2FkUmVzb3VyY2VzKGxuZ3MsIG5zLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBpZiAodHlwZW9mIGxuZ3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrID0gbG5ncztcbiAgICAgIGxuZ3MgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrID0gbnM7XG4gICAgICBucyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCFsbmdzKSBsbmdzID0gdGhpcy5sYW5ndWFnZXM7XG4gICAgaWYgKCFucykgbnMgPSB0aGlzLm9wdGlvbnMubnM7XG4gICAgaWYgKCFjYWxsYmFjaykgY2FsbGJhY2sgPSBub29wO1xuICAgIHRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5yZWxvYWQobG5ncywgbnMsIGVyciA9PiB7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICBjYWxsYmFjayhlcnIpO1xuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZDtcbiAgfVxuICB1c2UobW9kdWxlKSB7XG4gICAgaWYgKCFtb2R1bGUpIHRocm93IG5ldyBFcnJvcignWW91IGFyZSBwYXNzaW5nIGFuIHVuZGVmaW5lZCBtb2R1bGUhIFBsZWFzZSBjaGVjayB0aGUgb2JqZWN0IHlvdSBhcmUgcGFzc2luZyB0byBpMThuZXh0LnVzZSgpJyk7XG4gICAgaWYgKCFtb2R1bGUudHlwZSkgdGhyb3cgbmV3IEVycm9yKCdZb3UgYXJlIHBhc3NpbmcgYSB3cm9uZyBtb2R1bGUhIFBsZWFzZSBjaGVjayB0aGUgb2JqZWN0IHlvdSBhcmUgcGFzc2luZyB0byBpMThuZXh0LnVzZSgpJyk7XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnYmFja2VuZCcpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5iYWNrZW5kID0gbW9kdWxlO1xuICAgIH1cbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICdsb2dnZXInIHx8IG1vZHVsZS5sb2cgJiYgbW9kdWxlLndhcm4gJiYgbW9kdWxlLmVycm9yKSB7XG4gICAgICB0aGlzLm1vZHVsZXMubG9nZ2VyID0gbW9kdWxlO1xuICAgIH1cbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICdsYW5ndWFnZURldGVjdG9yJykge1xuICAgICAgdGhpcy5tb2R1bGVzLmxhbmd1YWdlRGV0ZWN0b3IgPSBtb2R1bGU7XG4gICAgfVxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ2kxOG5Gb3JtYXQnKSB7XG4gICAgICB0aGlzLm1vZHVsZXMuaTE4bkZvcm1hdCA9IG1vZHVsZTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAncG9zdFByb2Nlc3NvcicpIHtcbiAgICAgIHBvc3RQcm9jZXNzb3IuYWRkUG9zdFByb2Nlc3Nvcihtb2R1bGUpO1xuICAgIH1cbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICdmb3JtYXR0ZXInKSB7XG4gICAgICB0aGlzLm1vZHVsZXMuZm9ybWF0dGVyID0gbW9kdWxlO1xuICAgIH1cbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICczcmRQYXJ0eScpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5leHRlcm5hbC5wdXNoKG1vZHVsZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHNldFJlc29sdmVkTGFuZ3VhZ2UobCkge1xuICAgIGlmICghbCB8fCAhdGhpcy5sYW5ndWFnZXMpIHJldHVybjtcbiAgICBpZiAoWydjaW1vZGUnLCAnZGV2J10uaW5kZXhPZihsKSA+IC0xKSByZXR1cm47XG4gICAgZm9yIChsZXQgbGkgPSAwOyBsaSA8IHRoaXMubGFuZ3VhZ2VzLmxlbmd0aDsgbGkrKykge1xuICAgICAgY29uc3QgbG5nSW5MbmdzID0gdGhpcy5sYW5ndWFnZXNbbGldO1xuICAgICAgaWYgKFsnY2ltb2RlJywgJ2RldiddLmluZGV4T2YobG5nSW5MbmdzKSA+IC0xKSBjb250aW51ZTtcbiAgICAgIGlmICh0aGlzLnN0b3JlLmhhc0xhbmd1YWdlU29tZVRyYW5zbGF0aW9ucyhsbmdJbkxuZ3MpKSB7XG4gICAgICAgIHRoaXMucmVzb2x2ZWRMYW5ndWFnZSA9IGxuZ0luTG5ncztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNoYW5nZUxhbmd1YWdlKGxuZywgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcbiAgICB0aGlzLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvID0gbG5nO1xuICAgIGNvbnN0IGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICB0aGlzLmVtaXQoJ2xhbmd1YWdlQ2hhbmdpbmcnLCBsbmcpO1xuICAgIGNvbnN0IHNldExuZ1Byb3BzID0gbCA9PiB7XG4gICAgICB0aGlzLmxhbmd1YWdlID0gbDtcbiAgICAgIHRoaXMubGFuZ3VhZ2VzID0gdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShsKTtcbiAgICAgIHRoaXMucmVzb2x2ZWRMYW5ndWFnZSA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuc2V0UmVzb2x2ZWRMYW5ndWFnZShsKTtcbiAgICB9O1xuICAgIGNvbnN0IGRvbmUgPSAoZXJyLCBsKSA9PiB7XG4gICAgICBpZiAobCkge1xuICAgICAgICBzZXRMbmdQcm9wcyhsKTtcbiAgICAgICAgdGhpcy50cmFuc2xhdG9yLmNoYW5nZUxhbmd1YWdlKGwpO1xuICAgICAgICB0aGlzLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmVtaXQoJ2xhbmd1YWdlQ2hhbmdlZCcsIGwpO1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coJ2xhbmd1YWdlQ2hhbmdlZCcsIGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pc0xhbmd1YWdlQ2hhbmdpbmdUbyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGRlZmVycmVkLnJlc29sdmUoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMyLnQoLi4uYXJndW1lbnRzKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhlcnIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi50KC4uLmFyZ3VtZW50cyk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHNldExuZyA9IGxuZ3MgPT4ge1xuICAgICAgaWYgKCFsbmcgJiYgIWxuZ3MgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yKSBsbmdzID0gW107XG4gICAgICBjb25zdCBsID0gdHlwZW9mIGxuZ3MgPT09ICdzdHJpbmcnID8gbG5ncyA6IHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRCZXN0TWF0Y2hGcm9tQ29kZXMobG5ncyk7XG4gICAgICBpZiAobCkge1xuICAgICAgICBpZiAoIXRoaXMubGFuZ3VhZ2UpIHtcbiAgICAgICAgICBzZXRMbmdQcm9wcyhsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMudHJhbnNsYXRvci5sYW5ndWFnZSkgdGhpcy50cmFuc2xhdG9yLmNoYW5nZUxhbmd1YWdlKGwpO1xuICAgICAgICBpZiAodGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5jYWNoZVVzZXJMYW5ndWFnZSkgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmNhY2hlVXNlckxhbmd1YWdlKGwpO1xuICAgICAgfVxuICAgICAgdGhpcy5sb2FkUmVzb3VyY2VzKGwsIGVyciA9PiB7XG4gICAgICAgIGRvbmUoZXJyLCBsKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgaWYgKCFsbmcgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yICYmICF0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuYXN5bmMpIHtcbiAgICAgIHNldExuZyh0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuZGV0ZWN0KCkpO1xuICAgIH0gZWxzZSBpZiAoIWxuZyAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmFzeW5jKSB7XG4gICAgICBpZiAodGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdCgpLnRoZW4oc2V0TG5nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3Qoc2V0TG5nKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2V0TG5nKGxuZyk7XG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZDtcbiAgfVxuICBnZXRGaXhlZFQobG5nLCBucywga2V5UHJlZml4KSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG4gICAgY29uc3QgZml4ZWRUID0gZnVuY3Rpb24gKGtleSwgb3B0cykge1xuICAgICAgbGV0IG9wdGlvbnM7XG4gICAgICBpZiAodHlwZW9mIG9wdHMgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgcmVzdCA9IG5ldyBBcnJheShfbGVuMyA+IDIgPyBfbGVuMyAtIDIgOiAwKSwgX2tleTMgPSAyOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICAgICAgcmVzdFtfa2V5MyAtIDJdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gX3RoaXMzLm9wdGlvbnMub3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIoW2tleSwgb3B0c10uY29uY2F0KHJlc3QpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgLi4ub3B0c1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgb3B0aW9ucy5sbmcgPSBvcHRpb25zLmxuZyB8fCBmaXhlZFQubG5nO1xuICAgICAgb3B0aW9ucy5sbmdzID0gb3B0aW9ucy5sbmdzIHx8IGZpeGVkVC5sbmdzO1xuICAgICAgb3B0aW9ucy5ucyA9IG9wdGlvbnMubnMgfHwgZml4ZWRULm5zO1xuICAgICAgaWYgKG9wdGlvbnMua2V5UHJlZml4ICE9PSAnJykgb3B0aW9ucy5rZXlQcmVmaXggPSBvcHRpb25zLmtleVByZWZpeCB8fCBrZXlQcmVmaXggfHwgZml4ZWRULmtleVByZWZpeDtcbiAgICAgIGNvbnN0IGtleVNlcGFyYXRvciA9IF90aGlzMy5vcHRpb25zLmtleVNlcGFyYXRvciB8fCAnLic7XG4gICAgICBsZXQgcmVzdWx0S2V5O1xuICAgICAgaWYgKG9wdGlvbnMua2V5UHJlZml4ICYmIEFycmF5LmlzQXJyYXkoa2V5KSkge1xuICAgICAgICByZXN1bHRLZXkgPSBrZXkubWFwKGsgPT4gYCR7b3B0aW9ucy5rZXlQcmVmaXh9JHtrZXlTZXBhcmF0b3J9JHtrfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0S2V5ID0gb3B0aW9ucy5rZXlQcmVmaXggPyBgJHtvcHRpb25zLmtleVByZWZpeH0ke2tleVNlcGFyYXRvcn0ke2tleX1gIDoga2V5O1xuICAgICAgfVxuICAgICAgcmV0dXJuIF90aGlzMy50KHJlc3VsdEtleSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBpZiAodHlwZW9mIGxuZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGZpeGVkVC5sbmcgPSBsbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpeGVkVC5sbmdzID0gbG5nO1xuICAgIH1cbiAgICBmaXhlZFQubnMgPSBucztcbiAgICBmaXhlZFQua2V5UHJlZml4ID0ga2V5UHJlZml4O1xuICAgIHJldHVybiBmaXhlZFQ7XG4gIH1cbiAgdCgpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdG9yICYmIHRoaXMudHJhbnNsYXRvci50cmFuc2xhdGUoLi4uYXJndW1lbnRzKTtcbiAgfVxuICBleGlzdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRvciAmJiB0aGlzLnRyYW5zbGF0b3IuZXhpc3RzKC4uLmFyZ3VtZW50cyk7XG4gIH1cbiAgc2V0RGVmYXVsdE5hbWVzcGFjZShucykge1xuICAgIHRoaXMub3B0aW9ucy5kZWZhdWx0TlMgPSBucztcbiAgfVxuICBoYXNMb2FkZWROYW1lc3BhY2UobnMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ2hhc0xvYWRlZE5hbWVzcGFjZTogaTE4bmV4dCB3YXMgbm90IGluaXRpYWxpemVkJywgdGhpcy5sYW5ndWFnZXMpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMubGFuZ3VhZ2VzIHx8ICF0aGlzLmxhbmd1YWdlcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ2hhc0xvYWRlZE5hbWVzcGFjZTogaTE4bi5sYW5ndWFnZXMgd2VyZSB1bmRlZmluZWQgb3IgZW1wdHknLCB0aGlzLmxhbmd1YWdlcyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGxuZyA9IG9wdGlvbnMubG5nIHx8IHRoaXMucmVzb2x2ZWRMYW5ndWFnZSB8fCB0aGlzLmxhbmd1YWdlc1swXTtcbiAgICBjb25zdCBmYWxsYmFja0xuZyA9IHRoaXMub3B0aW9ucyA/IHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyA6IGZhbHNlO1xuICAgIGNvbnN0IGxhc3RMbmcgPSB0aGlzLmxhbmd1YWdlc1t0aGlzLmxhbmd1YWdlcy5sZW5ndGggLSAxXTtcbiAgICBpZiAobG5nLnRvTG93ZXJDYXNlKCkgPT09ICdjaW1vZGUnKSByZXR1cm4gdHJ1ZTtcbiAgICBjb25zdCBsb2FkTm90UGVuZGluZyA9IChsLCBuKSA9PiB7XG4gICAgICBjb25zdCBsb2FkU3RhdGUgPSB0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3Iuc3RhdGVbYCR7bH18JHtufWBdO1xuICAgICAgcmV0dXJuIGxvYWRTdGF0ZSA9PT0gLTEgfHwgbG9hZFN0YXRlID09PSAwIHx8IGxvYWRTdGF0ZSA9PT0gMjtcbiAgICB9O1xuICAgIGlmIChvcHRpb25zLnByZWNoZWNrKSB7XG4gICAgICBjb25zdCBwcmVSZXN1bHQgPSBvcHRpb25zLnByZWNoZWNrKHRoaXMsIGxvYWROb3RQZW5kaW5nKTtcbiAgICAgIGlmIChwcmVSZXN1bHQgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHByZVJlc3VsdDtcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzUmVzb3VyY2VCdW5kbGUobG5nLCBucykpIHJldHVybiB0cnVlO1xuICAgIGlmICghdGhpcy5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLmJhY2tlbmQgfHwgdGhpcy5vcHRpb25zLnJlc291cmNlcyAmJiAhdGhpcy5vcHRpb25zLnBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAobG9hZE5vdFBlbmRpbmcobG5nLCBucykgJiYgKCFmYWxsYmFja0xuZyB8fCBsb2FkTm90UGVuZGluZyhsYXN0TG5nLCBucykpKSByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgbG9hZE5hbWVzcGFjZXMobnMsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIGlmICghdGhpcy5vcHRpb25zLm5zKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbnMgPT09ICdzdHJpbmcnKSBucyA9IFtuc107XG4gICAgbnMuZm9yRWFjaChuID0+IHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubnMuaW5kZXhPZihuKSA8IDApIHRoaXMub3B0aW9ucy5ucy5wdXNoKG4pO1xuICAgIH0pO1xuICAgIHRoaXMubG9hZFJlc291cmNlcyhlcnIgPT4ge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhlcnIpO1xuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZDtcbiAgfVxuICBsb2FkTGFuZ3VhZ2VzKGxuZ3MsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIGlmICh0eXBlb2YgbG5ncyA9PT0gJ3N0cmluZycpIGxuZ3MgPSBbbG5nc107XG4gICAgY29uc3QgcHJlbG9hZGVkID0gdGhpcy5vcHRpb25zLnByZWxvYWQgfHwgW107XG4gICAgY29uc3QgbmV3TG5ncyA9IGxuZ3MuZmlsdGVyKGxuZyA9PiBwcmVsb2FkZWQuaW5kZXhPZihsbmcpIDwgMCAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuaXNTdXBwb3J0ZWRDb2RlKGxuZykpO1xuICAgIGlmICghbmV3TG5ncy5sZW5ndGgpIHtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdGhpcy5vcHRpb25zLnByZWxvYWQgPSBwcmVsb2FkZWQuY29uY2F0KG5ld0xuZ3MpO1xuICAgIHRoaXMubG9hZFJlc291cmNlcyhlcnIgPT4ge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhlcnIpO1xuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZDtcbiAgfVxuICBkaXIobG5nKSB7XG4gICAgaWYgKCFsbmcpIGxuZyA9IHRoaXMucmVzb2x2ZWRMYW5ndWFnZSB8fCAodGhpcy5sYW5ndWFnZXMgJiYgdGhpcy5sYW5ndWFnZXMubGVuZ3RoID4gMCA/IHRoaXMubGFuZ3VhZ2VzWzBdIDogdGhpcy5sYW5ndWFnZSk7XG4gICAgaWYgKCFsbmcpIHJldHVybiAncnRsJztcbiAgICBjb25zdCBydGxMbmdzID0gWydhcicsICdzaHUnLCAnc3FyJywgJ3NzaCcsICd4YWEnLCAneWhkJywgJ3l1ZCcsICdhYW8nLCAnYWJoJywgJ2FidicsICdhY20nLCAnYWNxJywgJ2FjdycsICdhY3gnLCAnYWN5JywgJ2FkZicsICdhZHMnLCAnYWViJywgJ2FlYycsICdhZmInLCAnYWpwJywgJ2FwYycsICdhcGQnLCAnYXJiJywgJ2FycScsICdhcnMnLCAnYXJ5JywgJ2FyeicsICdhdXonLCAnYXZsJywgJ2F5aCcsICdheWwnLCAnYXluJywgJ2F5cCcsICdiYnonLCAncGdhJywgJ2hlJywgJ2l3JywgJ3BzJywgJ3BidCcsICdwYnUnLCAncHN0JywgJ3BycCcsICdwcmQnLCAndWcnLCAndXInLCAneWRkJywgJ3lkcycsICd5aWgnLCAnamknLCAneWknLCAnaGJvJywgJ21lbicsICd4bW4nLCAnZmEnLCAnanByJywgJ3BlbycsICdwZXMnLCAncHJzJywgJ2R2JywgJ3NhbScsICdja2InXTtcbiAgICBjb25zdCBsYW5ndWFnZVV0aWxzID0gdGhpcy5zZXJ2aWNlcyAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMgfHwgbmV3IExhbmd1YWdlVXRpbChnZXQoKSk7XG4gICAgcmV0dXJuIHJ0bExuZ3MuaW5kZXhPZihsYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGxuZykpID4gLTEgfHwgbG5nLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignLWFyYWInKSA+IDEgPyAncnRsJyA6ICdsdHInO1xuICB9XG4gIHN0YXRpYyBjcmVhdGVJbnN0YW5jZSgpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIG5ldyBJMThuKG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgfVxuICBjbG9uZUluc3RhbmNlKCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBsZXQgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG5vb3A7XG4gICAgY29uc3QgZm9ya1Jlc291cmNlU3RvcmUgPSBvcHRpb25zLmZvcmtSZXNvdXJjZVN0b3JlO1xuICAgIGlmIChmb3JrUmVzb3VyY2VTdG9yZSkgZGVsZXRlIG9wdGlvbnMuZm9ya1Jlc291cmNlU3RvcmU7XG4gICAgY29uc3QgbWVyZ2VkT3B0aW9ucyA9IHtcbiAgICAgIC4uLnRoaXMub3B0aW9ucyxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAuLi57XG4gICAgICAgIGlzQ2xvbmU6IHRydWVcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGNsb25lID0gbmV3IEkxOG4obWVyZ2VkT3B0aW9ucyk7XG4gICAgaWYgKG9wdGlvbnMuZGVidWcgIT09IHVuZGVmaW5lZCB8fCBvcHRpb25zLnByZWZpeCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjbG9uZS5sb2dnZXIgPSBjbG9uZS5sb2dnZXIuY2xvbmUob3B0aW9ucyk7XG4gICAgfVxuICAgIGNvbnN0IG1lbWJlcnNUb0NvcHkgPSBbJ3N0b3JlJywgJ3NlcnZpY2VzJywgJ2xhbmd1YWdlJ107XG4gICAgbWVtYmVyc1RvQ29weS5mb3JFYWNoKG0gPT4ge1xuICAgICAgY2xvbmVbbV0gPSB0aGlzW21dO1xuICAgIH0pO1xuICAgIGNsb25lLnNlcnZpY2VzID0ge1xuICAgICAgLi4udGhpcy5zZXJ2aWNlc1xuICAgIH07XG4gICAgY2xvbmUuc2VydmljZXMudXRpbHMgPSB7XG4gICAgICBoYXNMb2FkZWROYW1lc3BhY2U6IGNsb25lLmhhc0xvYWRlZE5hbWVzcGFjZS5iaW5kKGNsb25lKVxuICAgIH07XG4gICAgaWYgKGZvcmtSZXNvdXJjZVN0b3JlKSB7XG4gICAgICBjbG9uZS5zdG9yZSA9IG5ldyBSZXNvdXJjZVN0b3JlKHRoaXMuc3RvcmUuZGF0YSwgbWVyZ2VkT3B0aW9ucyk7XG4gICAgICBjbG9uZS5zZXJ2aWNlcy5yZXNvdXJjZVN0b3JlID0gY2xvbmUuc3RvcmU7XG4gICAgfVxuICAgIGNsb25lLnRyYW5zbGF0b3IgPSBuZXcgVHJhbnNsYXRvcihjbG9uZS5zZXJ2aWNlcywgbWVyZ2VkT3B0aW9ucyk7XG4gICAgY2xvbmUudHJhbnNsYXRvci5vbignKicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZm9yICh2YXIgX2xlbjQgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW40ID4gMSA/IF9sZW40IC0gMSA6IDApLCBfa2V5NCA9IDE7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHtcbiAgICAgICAgYXJnc1tfa2V5NCAtIDFdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgICAgIH1cbiAgICAgIGNsb25lLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgIH0pO1xuICAgIGNsb25lLmluaXQobWVyZ2VkT3B0aW9ucywgY2FsbGJhY2spO1xuICAgIGNsb25lLnRyYW5zbGF0b3Iub3B0aW9ucyA9IG1lcmdlZE9wdGlvbnM7XG4gICAgY2xvbmUudHJhbnNsYXRvci5iYWNrZW5kQ29ubmVjdG9yLnNlcnZpY2VzLnV0aWxzID0ge1xuICAgICAgaGFzTG9hZGVkTmFtZXNwYWNlOiBjbG9uZS5oYXNMb2FkZWROYW1lc3BhY2UuYmluZChjbG9uZSlcbiAgICB9O1xuICAgIHJldHVybiBjbG9uZTtcbiAgfVxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgIHN0b3JlOiB0aGlzLnN0b3JlLFxuICAgICAgbGFuZ3VhZ2U6IHRoaXMubGFuZ3VhZ2UsXG4gICAgICBsYW5ndWFnZXM6IHRoaXMubGFuZ3VhZ2VzLFxuICAgICAgcmVzb2x2ZWRMYW5ndWFnZTogdGhpcy5yZXNvbHZlZExhbmd1YWdlXG4gICAgfTtcbiAgfVxufVxuY29uc3QgaW5zdGFuY2UgPSBJMThuLmNyZWF0ZUluc3RhbmNlKCk7XG5pbnN0YW5jZS5jcmVhdGVJbnN0YW5jZSA9IEkxOG4uY3JlYXRlSW5zdGFuY2U7XG5cbmNvbnN0IGNyZWF0ZUluc3RhbmNlID0gaW5zdGFuY2UuY3JlYXRlSW5zdGFuY2U7XG5jb25zdCBkaXIgPSBpbnN0YW5jZS5kaXI7XG5jb25zdCBpbml0ID0gaW5zdGFuY2UuaW5pdDtcbmNvbnN0IGxvYWRSZXNvdXJjZXMgPSBpbnN0YW5jZS5sb2FkUmVzb3VyY2VzO1xuY29uc3QgcmVsb2FkUmVzb3VyY2VzID0gaW5zdGFuY2UucmVsb2FkUmVzb3VyY2VzO1xuY29uc3QgdXNlID0gaW5zdGFuY2UudXNlO1xuY29uc3QgY2hhbmdlTGFuZ3VhZ2UgPSBpbnN0YW5jZS5jaGFuZ2VMYW5ndWFnZTtcbmNvbnN0IGdldEZpeGVkVCA9IGluc3RhbmNlLmdldEZpeGVkVDtcbmNvbnN0IHQgPSBpbnN0YW5jZS50O1xuY29uc3QgZXhpc3RzID0gaW5zdGFuY2UuZXhpc3RzO1xuY29uc3Qgc2V0RGVmYXVsdE5hbWVzcGFjZSA9IGluc3RhbmNlLnNldERlZmF1bHROYW1lc3BhY2U7XG5jb25zdCBoYXNMb2FkZWROYW1lc3BhY2UgPSBpbnN0YW5jZS5oYXNMb2FkZWROYW1lc3BhY2U7XG5jb25zdCBsb2FkTmFtZXNwYWNlcyA9IGluc3RhbmNlLmxvYWROYW1lc3BhY2VzO1xuY29uc3QgbG9hZExhbmd1YWdlcyA9IGluc3RhbmNlLmxvYWRMYW5ndWFnZXM7XG5cbmV4cG9ydCB7IGNoYW5nZUxhbmd1YWdlLCBjcmVhdGVJbnN0YW5jZSwgaW5zdGFuY2UgYXMgZGVmYXVsdCwgZGlyLCBleGlzdHMsIGdldEZpeGVkVCwgaGFzTG9hZGVkTmFtZXNwYWNlLCBpbml0LCBsb2FkTGFuZ3VhZ2VzLCBsb2FkTmFtZXNwYWNlcywgbG9hZFJlc291cmNlcywgcmVsb2FkUmVzb3VyY2VzLCBzZXREZWZhdWx0TmFtZXNwYWNlLCB0LCB1c2UgfTtcbiIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHQgfSBmcm9tICdpMThuZXh0JztcblxuLy8gRGVmaW5lIHRoZSBzdHJ1Y3R1cmUgb2YgYSBDYXJkIG9iamVjdFxuZXhwb3J0IGludGVyZmFjZSBDYXJkIHtcbiAgICBmaWxlOiBURmlsZTtcbiAgICBmaWxlTmFtZT86IHN0cmluZztcbiAgICBmaXJzdEhlYWRlcj86IHN0cmluZztcbiAgICBib2R5Pzogc3RyaW5nO1xufVxuXG4vLyBEZWZpbmUgdGhlIHN0cnVjdHVyZSBvZiBhIHByZXNldFxuZXhwb3J0IGludGVyZmFjZSBQcmVzZXQge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBzZXR0aW5nczogUGFydGlhbDxDYXJkTmF2aWdhdG9yU2V0dGluZ3M+O1xuICAgIGlzRGVmYXVsdDogYm9vbGVhbjtcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGb2xkZXJQcmVzZXRzIHtcbiAgICBbZm9sZGVyUGF0aDogc3RyaW5nXTogc3RyaW5nW107XG59XG5cbi8vIERlZmluZSB0aGUgc3RydWN0dXJlIG9mIENhcmROYXZpZ2F0b3Igc2V0dGluZ3NcbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZE5hdmlnYXRvclNldHRpbmdzIHtcbiAgICB1c2VTZWxlY3RlZEZvbGRlcjogYm9vbGVhbjtcbiAgICBzZWxlY3RlZEZvbGRlcjogc3RyaW5nIHwgbnVsbDtcbiAgICBzb3J0Q3JpdGVyaW9uOiBTb3J0Q3JpdGVyaW9uO1xuICAgIHNvcnRPcmRlcjogU29ydE9yZGVyO1xuICAgIHJlbmRlckNvbnRlbnRBc0h0bWw6IGJvb2xlYW47XG4gICAgZHJhZ0Ryb3BDb250ZW50OiBib29sZWFuO1xuICAgIGNlbnRlckFjdGl2ZUNhcmRPbk9wZW46IGJvb2xlYW47XG4gICAgZGVmYXVsdExheW91dDogZGVmYXVsdExheW91dDtcbiAgICBjYXJkV2lkdGhUaHJlc2hvbGQ6IG51bWJlcjtcbiAgICBhbGlnbkNhcmRIZWlnaHQ6IGJvb2xlYW47XG4gICAgY2FyZHNQZXJWaWV3OiBudW1iZXI7XG4gICAgZ3JpZENvbHVtbnM6IG51bWJlcjtcbiAgICBncmlkQ2FyZEhlaWdodDogbnVtYmVyO1xuICAgIG1hc29ucnlDb2x1bW5zOiBudW1iZXI7XG4gICAgc2hvd0ZpbGVOYW1lOiBib29sZWFuO1xuICAgIHNob3dGaXJzdEhlYWRlcjogYm9vbGVhbjtcbiAgICBzaG93Qm9keTogYm9vbGVhbjtcbiAgICBib2R5TGVuZ3RoTGltaXQ6IGJvb2xlYW47XG4gICAgYm9keUxlbmd0aDogbnVtYmVyO1xuICAgIGZpbGVOYW1lRm9udFNpemU6IG51bWJlcjtcbiAgICBmaXJzdEhlYWRlckZvbnRTaXplOiBudW1iZXI7XG4gICAgYm9keUZvbnRTaXplOiBudW1iZXI7XG4gICAgcHJlc2V0Rm9sZGVyUGF0aDogc3RyaW5nO1xuICAgIEdsb2JhbFByZXNldDogc3RyaW5nO1xuICAgIGxhc3RBY3RpdmVQcmVzZXQ6IHN0cmluZztcblx0YXV0b0FwcGx5UHJlc2V0czogYm9vbGVhbjtcbiAgICBhdXRvQXBwbHlGb2xkZXJQcmVzZXRzOiBib29sZWFuO1xuICAgIGZvbGRlclByZXNldHM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gfCBudWxsO1xuICAgIGFjdGl2ZUZvbGRlclByZXNldHM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHwgbnVsbDtcbn1cblxuZXhwb3J0IGNvbnN0IGdsb2JhbFNldHRpbmdzS2V5czogKGtleW9mIENhcmROYXZpZ2F0b3JTZXR0aW5ncylbXSA9IFtcbiAgICAncHJlc2V0Rm9sZGVyUGF0aCcsXG4gICAgJ0dsb2JhbFByZXNldCcsXG4gICAgJ2xhc3RBY3RpdmVQcmVzZXQnLFxuXHQnYXV0b0FwcGx5UHJlc2V0cycsXG4gICAgJ2F1dG9BcHBseUZvbGRlclByZXNldHMnLFxuICAgICdmb2xkZXJQcmVzZXRzJyxcbiAgICAnYWN0aXZlRm9sZGVyUHJlc2V0cycsXG5cdCd1c2VTZWxlY3RlZEZvbGRlcicsXG5cdCdzZWxlY3RlZEZvbGRlcidcbl0gYXMgY29uc3Q7XG5cbi8vIERlZmluZSBkZWZhdWx0IHNldHRpbmdzIGZvciB0aGUgQ2FyZE5hdmlnYXRvclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IENhcmROYXZpZ2F0b3JTZXR0aW5ncyA9IHtcbiAgICB1c2VTZWxlY3RlZEZvbGRlcjogZmFsc2UsXG4gICAgc2VsZWN0ZWRGb2xkZXI6IG51bGwsXG4gICAgc29ydENyaXRlcmlvbjogJ2ZpbGVOYW1lJyxcbiAgICBzb3J0T3JkZXI6ICdhc2MnLFxuICAgIHJlbmRlckNvbnRlbnRBc0h0bWw6IGZhbHNlLFxuICAgIGRyYWdEcm9wQ29udGVudDogZmFsc2UsXG4gICAgY2VudGVyQWN0aXZlQ2FyZE9uT3BlbjogdHJ1ZSxcbiAgICBkZWZhdWx0TGF5b3V0OiAnYXV0bycsXG4gICAgY2FyZFdpZHRoVGhyZXNob2xkOiAyNTAsXG4gICAgYWxpZ25DYXJkSGVpZ2h0OiB0cnVlLFxuICAgIGNhcmRzUGVyVmlldzogNCxcbiAgICBncmlkQ29sdW1uczogNCxcbiAgICBncmlkQ2FyZEhlaWdodDogMjAwLFxuICAgIG1hc29ucnlDb2x1bW5zOiA0LFxuICAgIHNob3dGaWxlTmFtZTogdHJ1ZSxcbiAgICBzaG93Rmlyc3RIZWFkZXI6IHRydWUsXG4gICAgc2hvd0JvZHk6IHRydWUsXG4gICAgYm9keUxlbmd0aExpbWl0OiB0cnVlLFxuICAgIGJvZHlMZW5ndGg6IDUwMSxcbiAgICBmaWxlTmFtZUZvbnRTaXplOiAxNyxcbiAgICBmaXJzdEhlYWRlckZvbnRTaXplOiAxNyxcbiAgICBib2R5Rm9udFNpemU6IDE1LFxuICAgIHByZXNldEZvbGRlclBhdGg6ICdDYXJkTmF2aWdhdG9yUHJlc2V0cycsXG4gICAgR2xvYmFsUHJlc2V0OiAnZGVmYXVsdCcsXG4gICAgbGFzdEFjdGl2ZVByZXNldDogJ2RlZmF1bHQnLFxuXHRhdXRvQXBwbHlQcmVzZXRzOiBmYWxzZSxcbiAgICBhdXRvQXBwbHlGb2xkZXJQcmVzZXRzOiBmYWxzZSxcbiAgICBmb2xkZXJQcmVzZXRzOiB7fSxcbiAgICBhY3RpdmVGb2xkZXJQcmVzZXRzOiB7fVxufTtcblxuXG4vLyBEZWZpbmUgYSB0eXBlIGZvciBudW1lcmljIHNldHRpbmcga2V5c1xuZXhwb3J0IHR5cGUgTnVtYmVyU2V0dGluZ0tleSA9IEV4dHJhY3Q8a2V5b2YgQ2FyZE5hdmlnYXRvclNldHRpbmdzLCB7XG4gICAgW0sgaW4ga2V5b2YgQ2FyZE5hdmlnYXRvclNldHRpbmdzXTogQ2FyZE5hdmlnYXRvclNldHRpbmdzW0tdIGV4dGVuZHMgbnVtYmVyID8gSyA6IG5ldmVyXG59W2tleW9mIENhcmROYXZpZ2F0b3JTZXR0aW5nc10+O1xuXG4vLyBEZWZpbmUgdGhlIHN0cnVjdHVyZSBmb3IgcmFuZ2Ugc2V0dGluZyBjb25maWd1cmF0aW9uc1xuZXhwb3J0IGludGVyZmFjZSBSYW5nZVNldHRpbmdDb25maWcge1xuICAgIG1pbjogbnVtYmVyO1xuICAgIG1heDogbnVtYmVyO1xuICAgIHN0ZXA6IG51bWJlcjtcbn1cblxuLy8gRGVmaW5lIHJhbmdlIHNldHRpbmcgY29uZmlndXJhdGlvbnMgZm9yIG51bWVyaWMgc2V0dGluZ3NcbmV4cG9ydCBjb25zdCByYW5nZVNldHRpbmdDb25maWdzOiBSZWNvcmQ8TnVtYmVyU2V0dGluZ0tleSwgUmFuZ2VTZXR0aW5nQ29uZmlnPiA9IHtcbiAgICBjYXJkV2lkdGhUaHJlc2hvbGQ6IHsgbWluOiAxNTAsIG1heDogNjAwLCBzdGVwOiAxMCB9LFxuICAgIGdyaWRDb2x1bW5zOiB7IG1pbjogMSwgbWF4OiAxMCwgc3RlcDogMSB9LFxuXHRncmlkQ2FyZEhlaWdodDogeyBtaW46IDEwMCwgbWF4OiA1MDAsIHN0ZXA6IDEwIH0sXG4gICAgbWFzb25yeUNvbHVtbnM6IHsgbWluOiAxLCBtYXg6IDEwLCBzdGVwOiAxIH0sXG4gICAgY2FyZHNQZXJWaWV3OiB7IG1pbjogMSwgbWF4OiAxMCwgc3RlcDogMSB9LFxuICAgIGZpbGVOYW1lRm9udFNpemU6IHsgbWluOiAxMCwgbWF4OiAyNSwgc3RlcDogMSB9LFxuICAgIGZpcnN0SGVhZGVyRm9udFNpemU6IHsgbWluOiAxMCwgbWF4OiAyNSwgc3RlcDogMSB9LFxuICAgIGJvZHlGb250U2l6ZTogeyBtaW46IDEwLCBtYXg6IDI1LCBzdGVwOiAxIH0sXG4gICAgYm9keUxlbmd0aDogeyBtaW46IDEsIG1heDogMTAwMSwgc3RlcDogNTAgfSxcbn07XG5cbi8vIERlZmluZSBjb21tb24gdHlwZXMgdXNlZCB0aHJvdWdob3V0IHRoZSBhcHBsaWNhdGlvblxuZXhwb3J0IHR5cGUgRXZlbnRIYW5kbGVyID0gKCkgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIEljb25OYW1lID0gJ2ZvbGRlcicgfCAnYXJyb3ctdXAtbmFycm93LXdpZGUnIHwgJ3NldHRpbmdzJztcbmV4cG9ydCB0eXBlIFNjcm9sbERpcmVjdGlvbiA9ICd1cCcgfCAnZG93bicgfCAnbGVmdCcgfCAncmlnaHQnO1xuZXhwb3J0IHR5cGUgU29ydENyaXRlcmlvbiA9ICdmaWxlTmFtZScgfCAnbGFzdE1vZGlmaWVkJyB8ICdjcmVhdGVkJztcbmV4cG9ydCB0eXBlIFNvcnRPcmRlciA9ICdhc2MnIHwgJ2Rlc2MnO1xuZXhwb3J0IHR5cGUgZGVmYXVsdExheW91dCA9ICdhdXRvJyB8ICdsaXN0JyB8ICdncmlkJyB8ICdtYXNvbnJ5JztcbmV4cG9ydCB0eXBlIFRvb2xiYXJNZW51ID0gJ3NvcnQnIHwgJ3NldHRpbmdzJztcblxuLy8gRGVmaW5lIHNvcnRpbmcgb3B0aW9ucyBmb3IgdGhlIGFwcGxpY2F0aW9uXG5leHBvcnQgY29uc3Qgc29ydE9wdGlvbnM6IEFycmF5PHsgdmFsdWU6IHN0cmluZywgbGFiZWw6IHN0cmluZyB9PiA9IFtcbiAgICB7IHZhbHVlOiAnZmlsZU5hbWVfYXNjJywgbGFiZWw6ICdTT1JUX0ZJTEVfTkFNRV9BU0MnIH0sXG4gICAgeyB2YWx1ZTogJ2ZpbGVOYW1lX2Rlc2MnLCBsYWJlbDogJ1NPUlRfRklMRV9OQU1FX0RFU0MnIH0sXG4gICAgeyB2YWx1ZTogJ2xhc3RNb2RpZmllZF9kZXNjJywgbGFiZWw6ICdTT1JUX0xBU1RfTU9ESUZJRURfREVTQycgfSxcbiAgICB7IHZhbHVlOiAnbGFzdE1vZGlmaWVkX2FzYycsIGxhYmVsOiAnU09SVF9MQVNUX01PRElGSUVEX0FTQycgfSxcbiAgICB7IHZhbHVlOiAnY3JlYXRlZF9kZXNjJywgbGFiZWw6ICdTT1JUX0NSRUFURURfREVTQycgfSxcbiAgICB7IHZhbHVlOiAnY3JlYXRlZF9hc2MnLCBsYWJlbDogJ1NPUlRfQ1JFQVRFRF9BU0MnIH0sXG5dO1xuXG4vLyBEZWZpbmUgY29udGVudCBzZXR0aW5ncyBmb3IgdGhlIFVJXG5leHBvcnQgY29uc3QgY29udGVudFNldHRpbmdzOiBBcnJheTx7IG5hbWU6IHN0cmluZywga2V5OiBrZXlvZiBDYXJkTmF2aWdhdG9yU2V0dGluZ3MsIGRlc2NyaXB0aW9uOiBzdHJpbmcgfT4gPSBbXG4gICAgeyBuYW1lOiAnU0hPV19GSUxFX05BTUUnLCBrZXk6ICdzaG93RmlsZU5hbWUnLCBkZXNjcmlwdGlvbjogJ1RPR0dMRV9GSUxFX05BTUVfRElTUExBWScgfSxcbiAgICB7IG5hbWU6ICdTSE9XX0ZJUlNUX0hFQURFUicsIGtleTogJ3Nob3dGaXJzdEhlYWRlcicsIGRlc2NyaXB0aW9uOiAnVE9HR0xFX0ZJUlNUX0hFQURFUl9ESVNQTEFZJyB9LFxuICAgIHsgbmFtZTogJ1NIT1dfQk9EWScsIGtleTogJ3Nob3dCb2R5JywgZGVzY3JpcHRpb246ICdUT0dHTEVfQk9EWV9ESVNQTEFZJyB9LFxuXTtcblxuLy8gRGVmaW5lIGZvbnQgc2l6ZSBzZXR0aW5ncyBmb3IgdGhlIFVJXG5leHBvcnQgY29uc3QgZm9udFNpemVTZXR0aW5nczogQXJyYXk8eyBuYW1lOiBzdHJpbmcsIGtleToga2V5b2YgQ2FyZE5hdmlnYXRvclNldHRpbmdzLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0+ID0gW1xuICAgIHsgbmFtZTogJ0ZJTEVfTkFNRV9GT05UX1NJWkUnLCBrZXk6ICdmaWxlTmFtZUZvbnRTaXplJywgZGVzY3JpcHRpb246ICdTRVRfRklMRV9OQU1FX0ZPTlRfU0laRScgfSxcbiAgICB7IG5hbWU6ICdGSVJTVF9IRUFERVJfRk9OVF9TSVpFJywga2V5OiAnZmlyc3RIZWFkZXJGb250U2l6ZScsIGRlc2NyaXB0aW9uOiAnU0VUX0ZJUlNUX0hFQURFUl9GT05UX1NJWkUnIH0sXG4gICAgeyBuYW1lOiAnQk9EWV9GT05UX1NJWkUnLCBrZXk6ICdib2R5Rm9udFNpemUnLCBkZXNjcmlwdGlvbjogJ1NFVF9CT0RZX0ZPTlRfU0laRScgfSxcbl07XG5cbi8vIERlZmluZSBrZXlib2FyZCBzaG9ydGN1dHMgZm9yIHRoZSBhcHBsaWNhdGlvblxuZXhwb3J0IGNvbnN0IGtleWJvYXJkU2hvcnRjdXRzOiBBcnJheTx7IG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZyB9PiA9IFtcbiAgICB7IG5hbWU6ICdTQ1JPTExfVVBfT05FX0NBUkQnLCBkZXNjcmlwdGlvbjogJ01PVkVfVVBfT05FX0NBUkQnIH0sXG4gICAgeyBuYW1lOiAnU0NST0xMX0RPV05fT05FX0NBUkQnLCBkZXNjcmlwdGlvbjogJ01PVkVfRE9XTl9PTkVfQ0FSRCcgfSxcbiAgICB7IG5hbWU6ICdTQ1JPTExfTEVGVF9PTkVfQ0FSRCcsIGRlc2NyaXB0aW9uOiAnTU9WRV9MRUZUX09ORV9DQVJEJyB9LFxuICAgIHsgbmFtZTogJ1NDUk9MTF9SSUdIVF9PTkVfQ0FSRCcsIGRlc2NyaXB0aW9uOiAnTU9WRV9SSUdIVF9PTkVfQ0FSRCcgfSxcbiAgICB7IG5hbWU6ICdTQ1JPTExfVVBfTEVGVF9PTkVfUEFHRScsIGRlc2NyaXB0aW9uOiAnTU9WRV9VUF9MRUZUX09ORV9QQUdFJyB9LFxuICAgIHsgbmFtZTogJ1NDUk9MTF9ET1dOX1JJR0hUX09ORV9QQUdFJywgZGVzY3JpcHRpb246ICdNT1ZFX0RPV05fUklHSFRfT05FX1BBR0UnIH0sXG4gICAgeyBuYW1lOiAnQ0VOVEVSX0FDVElWRV9DQVJEJywgZGVzY3JpcHRpb246ICdDRU5URVJfQ1VSUkVOVExZX0FDVElWRV9DQVJEJyB9LFxuICAgIHsgbmFtZTogJ01PVkVfRk9DVVNfVE9fQ0FSRF9OQVZJR0FUT1InLCBkZXNjcmlwdGlvbjogJ1NFVF9GT0NVU19UT19DQVJEX05BVklHQVRPUicgfSxcbiAgICB7IG5hbWU6ICdPUEVOX0NBUkRfQ09OVEVYVF9NRU5VJywgZGVzY3JpcHRpb246ICdPUEVOX0NPTlRFWFRfTUVOVV9GT1JfRk9DVVNFRF9DQVJEJyB9XG5dO1xuXG4vLyBGdW5jdGlvbiB0byB0cmFuc2xhdGUga2V5Ym9hcmQgc2hvcnRjdXRzXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNsYXRlZEtleWJvYXJkU2hvcnRjdXRzKCkge1xuICAgIHJldHVybiBrZXlib2FyZFNob3J0Y3V0cy5tYXAoc2hvcnRjdXQgPT4gKHtcbiAgICAgICAgbmFtZTogdChzaG9ydGN1dC5uYW1lKSxcbiAgICAgICAgZGVzY3JpcHRpb246IHQoc2hvcnRjdXQuZGVzY3JpcHRpb24pXG4gICAgfSkpO1xufVxuXG4vLyBGdW5jdGlvbiB0byB0cmFuc2xhdGUgc29ydCBvcHRpb25zXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNsYXRlZFNvcnRPcHRpb25zKCkge1xuICAgIHJldHVybiBzb3J0T3B0aW9ucy5tYXAob3B0aW9uID0+ICh7XG4gICAgICAgIC4uLm9wdGlvbixcbiAgICAgICAgbGFiZWw6IHQob3B0aW9uLmxhYmVsKVxuICAgIH0pKTtcbn1cblxuLy8gRnVuY3Rpb24gdG8gdHJhbnNsYXRlIGRpc3BsYXkgc2V0dGluZ3NcbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2xhdGVkRGlzcGxheVNldHRpbmdzKCkge1xuICAgIHJldHVybiBjb250ZW50U2V0dGluZ3MubWFwKHNldHRpbmcgPT4gKHtcbiAgICAgICAgLi4uc2V0dGluZyxcbiAgICAgICAgbmFtZTogdChzZXR0aW5nLm5hbWUpXG4gICAgfSkpO1xufVxuXG4vLyBGdW5jdGlvbiB0byB0cmFuc2xhdGUgZm9udCBzaXplIHNldHRpbmdzXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNsYXRlZEZvbnRTaXplU2V0dGluZ3MoKSB7XG4gICAgcmV0dXJuIGZvbnRTaXplU2V0dGluZ3MubWFwKHNldHRpbmcgPT4gKHtcbiAgICAgICAgLi4uc2V0dGluZyxcbiAgICAgICAgbmFtZTogdChzZXR0aW5nLm5hbWUpXG4gICAgfSkpO1xufVxuIiwgImltcG9ydCB7IFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBURm9sZGVyLCBOb3RpY2UsIGRlYm91bmNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgQ2FyZE5hdmlnYXRvclBsdWdpbiBmcm9tICdtYWluJztcbmltcG9ydCB7IENhcmRNYWtlciB9IGZyb20gJy4vY2FyZE1ha2VyJztcbmltcG9ydCB7IExheW91dFN0cmF0ZWd5IH0gZnJvbSAnLi4vbGF5b3V0cy9sYXlvdXRTdHJhdGVneSc7XG5pbXBvcnQgeyBMaXN0TGF5b3V0IH0gZnJvbSAnLi4vbGF5b3V0cy9saXN0TGF5b3V0JztcbmltcG9ydCB7IEdyaWRMYXlvdXQgfSBmcm9tICcuLi9sYXlvdXRzL2dyaWRMYXlvdXQnO1xuaW1wb3J0IHsgTWFzb25yeUxheW91dCB9IGZyb20gJy4uL2xheW91dHMvbWFzb25yeUxheW91dCc7XG5pbXBvcnQgeyBLZXlib2FyZE5hdmlnYXRvciB9IGZyb20gJy4uLy4uL2NvbW1vbi9rZXlib2FyZE5hdmlnYXRvcic7XG5pbXBvcnQgeyBDYXJkTmF2aWdhdG9yU2V0dGluZ3MgfSBmcm9tIFwiY29tbW9uL3R5cGVzXCI7XG5pbXBvcnQgeyBzb3J0RmlsZXMsIHNlcGFyYXRlRnJvbnRtYXR0ZXJBbmRCb2R5IH0gZnJvbSAnY29tbW9uL3V0aWxzJztcbmltcG9ydCB7IENhcmQsIFNvcnRDcml0ZXJpb24sIFNvcnRPcmRlciB9IGZyb20gJ2NvbW1vbi90eXBlcyc7XG5pbXBvcnQgeyB0IH0gZnJvbSBcImkxOG5leHRcIjtcblxuLy8gTWFpbiBjbGFzcyBmb3IgbWFuYWdpbmcgdGhlIGNhcmQgY29udGFpbmVyIGFuZCBpdHMgbGF5b3V0XG5leHBvcnQgY2xhc3MgQ2FyZENvbnRhaW5lciB7XG4gICAgcHJpdmF0ZSBjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBjYXJkTWFrZXI6IENhcmRNYWtlcjtcbiAgICBwcml2YXRlIGxheW91dFN0cmF0ZWd5OiBMYXlvdXRTdHJhdGVneTtcblx0cHJpdmF0ZSBjdXJyZW50TGF5b3V0OiBDYXJkTmF2aWdhdG9yU2V0dGluZ3NbJ2RlZmF1bHRMYXlvdXQnXTtcbiAgICBwdWJsaWMgaXNWZXJ0aWNhbDogYm9vbGVhbjtcbiAgICBwcml2YXRlIGNhcmRHYXA6IG51bWJlcjtcbiAgICBwcml2YXRlIGtleWJvYXJkTmF2aWdhdG9yOiBLZXlib2FyZE5hdmlnYXRvciB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgY2FyZHM6IENhcmRbXSA9IFtdO1xuICAgIHByaXZhdGUgcmVzaXplT2JzZXJ2ZXI6IFJlc2l6ZU9ic2VydmVyO1xuXHRwcml2YXRlIGZvY3VzZWRDYXJkSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4sIHByaXZhdGUgbGVhZjogV29ya3NwYWNlTGVhZikge1xuXHRcdC8vIGxlYWZcdUM3NTggdmlld1x1Qjk3QyBcdUQxQjVcdUQ1NzQgXHVDRUU4XHVEMTRDXHVDNzc0XHVCMTA4IFx1QzY5NFx1QzE4Q1x1QzVEMCBcdUM4MTFcdUFERkNcblx0XHRjb25zdCBsZWFmVmlldyA9IHRoaXMubGVhZi52aWV3O1xuXHRcdGlmICghbGVhZlZpZXcgfHwgIWxlYWZWaWV3LmNvbnRhaW5lckVsKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbGVhZiB2aWV3IG9yIGNvbnRhaW5lcicpO1xuXHRcdH1cblx0XG5cdFx0Ly8gXHVDMEM4XHVCODVDXHVDNkI0IGRpdiBcdUM2OTRcdUMxOENcdUI5N0MgXHVDMEREXHVDMTMxXHVENTU4XHVBQ0UwIGxlYWZcdUM3NTggXHVDRUU4XHVEMTRDXHVDNzc0XHVCMTA4XHVDNUQwIFx1Q0Q5NFx1QUMwMFxuXHRcdHRoaXMuY29udGFpbmVyRWwgPSBsZWFmVmlldy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ2NhcmQtbmF2aWdhdG9yLWNvbnRhaW5lcicpO1xuXHRcdFxuXHRcdGlmICghdGhpcy5jb250YWluZXJFbCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGNvbnRhaW5lciBlbGVtZW50Jyk7XG5cdFx0fVxuXHRcbiAgICAgICAgdGhpcy5jYXJkTWFrZXIgPSBuZXcgQ2FyZE1ha2VyKFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4sXG4gICAgICAgICAgICAoZmlsZTogVEZpbGUpID0+IHRoaXMuY29weUxpbmsoZmlsZSksXG4gICAgICAgICAgICAoZmlsZTogVEZpbGUpID0+IHRoaXMuY29weUNhcmRDb250ZW50KGZpbGUpXG4gICAgICAgICk7XG5cdFxuXHRcdHRoaXMuaXNWZXJ0aWNhbCA9IHRoaXMuY2FsY3VsYXRlSXNWZXJ0aWNhbCgpO1xuXHRcdHRoaXMuY2FyZEdhcCA9IHRoaXMuZ2V0Q1NTVmFyaWFibGUoJy0tY2FyZC1uYXZpZ2F0b3ItZ2FwJywgMTApO1xuXHRcdFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5sYXlvdXRTdHJhdGVneSA9IHRoaXMuZGV0ZXJtaW5lQXV0b0xheW91dCgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGRldGVybWluZSBsYXlvdXQgc3RyYXRlZ3k6JywgZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5sYXlvdXRTdHJhdGVneSA9IG5ldyBMaXN0TGF5b3V0KHRoaXMuaXNWZXJ0aWNhbCwgdGhpcy5jYXJkR2FwLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbGlnbkNhcmRIZWlnaHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubGF5b3V0U3RyYXRlZ3kgaW5zdGFuY2VvZiBNYXNvbnJ5TGF5b3V0ICYmIHRoaXMuY29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgIHRoaXMubGF5b3V0U3RyYXRlZ3kuc2V0Q29udGFpbmVyKHRoaXMuY29udGFpbmVyRWwpO1xuICAgICAgICB9XG5cdFxuXHRcdHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoZGVib3VuY2UoKCkgPT4ge1xuXHRcdFx0dGhpcy5oYW5kbGVSZXNpemUoKTtcblx0XHR9LCAxMDApKTtcblx0XG5cdFx0Ly8gUmVzaXplT2JzZXJ2ZXIgXHVDMTI0XHVDODE1XG5cdFx0dGhpcy5zZXR1cFJlc2l6ZU9ic2VydmVyKCk7XG5cdFxuXHRcdC8vIFx1RDBBNFx1QkNGNFx1QjREQyBcdUIxMjRcdUJFNDRcdUFDOENcdUM3NzRcdUQxMzAgXHVDRDA4XHVBRTMwXHVENjU0XG5cdFx0dGhpcy5pbml0aWFsaXplS2V5Ym9hcmROYXZpZ2F0b3IoKTtcblxuICAgICAgICB0aGlzLmN1cnJlbnRMYXlvdXQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TGF5b3V0OyAvLyBcdUNEMDhcdUFFMzAgXHVCODA4XHVDNzc0XHVDNTQ0XHVDNkMzIFx1QzEyNFx1QzgxNVxuXHR9XG5cdFxuXHRwcml2YXRlIHNldHVwUmVzaXplT2JzZXJ2ZXIoKSB7XG5cdFx0dGhpcy5yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PiB7XG5cdFx0XHR0aGlzLnVwZGF0ZUxheW91dCgpO1xuXHRcdH0pO1xuXHRcdHRoaXMucmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmNvbnRhaW5lckVsKTtcblx0XHR0aGlzLnVwZGF0ZUxheW91dCgpOyAvLyBcdUM5ODlcdUMyREMgXHVENTVDIFx1QkM4OCBcdUMyRTRcdUQ1ODlcblx0fVxuXHRcblx0cHJpdmF0ZSBpbml0aWFsaXplS2V5Ym9hcmROYXZpZ2F0b3IoKSB7XG5cdFx0aWYgKHRoaXMuY29udGFpbmVyRWwpIHtcblx0XHRcdHRoaXMua2V5Ym9hcmROYXZpZ2F0b3IgPSBuZXcgS2V5Ym9hcmROYXZpZ2F0b3IodGhpcy5wbHVnaW4sIHRoaXMsIHRoaXMuY29udGFpbmVyRWwpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLndhcm4oJ0NvbnRhaW5lciBlbGVtZW50IG5vdCBhdmFpbGFibGUgZm9yIEtleWJvYXJkTmF2aWdhdG9yJyk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBjb250YWluZXIgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdmVydGljYWxcblx0cHJpdmF0ZSBjYWxjdWxhdGVJc1ZlcnRpY2FsKCk6IGJvb2xlYW4ge1xuXHRcdGlmICghdGhpcy5jb250YWluZXJFbCkgcmV0dXJuIHRydWU7XG5cdFx0Y29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLmNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdHJldHVybiBoZWlnaHQgPiB3aWR0aDtcblx0fVxuXG4gICAgLy8gUmV0cmlldmVzIHRoZSB2YWx1ZSBvZiBhIENTUyB2YXJpYWJsZSwgb3IgcmV0dXJucyBhIGRlZmF1bHQgdmFsdWUgaWYgbm90IGZvdW5kXG5cdHByaXZhdGUgZ2V0Q1NTVmFyaWFibGUodmFyaWFibGVOYW1lOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogbnVtYmVyKTogbnVtYmVyIHtcblx0XHRpZiAoIXRoaXMuY29udGFpbmVyRWwpIHJldHVybiBkZWZhdWx0VmFsdWU7XG5cdFx0Y29uc3QgdmFsdWVTdHIgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMuY29udGFpbmVyRWwpLmdldFByb3BlcnR5VmFsdWUodmFyaWFibGVOYW1lKS50cmltKCk7XG5cdFx0cmV0dXJuIHBhcnNlSW50KHZhbHVlU3RyKSB8fCBkZWZhdWx0VmFsdWU7XG5cdH1cblxuICAgIC8vIEluaXRpYWxpemVzIHRoZSBjYXJkIGNvbnRhaW5lciB3aXRoIG5lY2Vzc2FyeSBzZXR0aW5ncyBhbmQgcHJlcGFyZXMgaXQgZm9yIHVzZVxuXHRhc3luYyBpbml0aWFsaXplKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xuXHRcdHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcblx0XHRhd2FpdCB0aGlzLndhaXRGb3JDb250YWluZXJTaXplKCk7XG5cdFx0dGhpcy51cGRhdGVDb250YWluZXJTdHlsZSgpO1xuXHRcdHRoaXMua2V5Ym9hcmROYXZpZ2F0b3IgPSBuZXcgS2V5Ym9hcmROYXZpZ2F0b3IodGhpcy5wbHVnaW4sIHRoaXMsIHRoaXMuY29udGFpbmVyRWwpO1xuXHRcdHRoaXMuc2V0dXBSZXNpemVPYnNlcnZlcigpO1xuXHRcdHRoaXMubGF5b3V0U3RyYXRlZ3kgPSB0aGlzLmRldGVybWluZUF1dG9MYXlvdXQoKTtcblx0XHRhd2FpdCB0aGlzLnJlZnJlc2goKTtcblx0fVxuXHRcblx0cHJpdmF0ZSB3YWl0Rm9yQ29udGFpbmVyU2l6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdGNvbnN0IGNoZWNrU2l6ZSA9ICgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuY29udGFpbmVyRWwgJiYgdGhpcy5jb250YWluZXJFbC5vZmZzZXRXaWR0aCA+IDAgJiYgdGhpcy5jb250YWluZXJFbC5vZmZzZXRIZWlnaHQgPiAwKSB7XG5cdFx0XHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShjaGVja1NpemUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0Y2hlY2tTaXplKCk7XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBVcGRhdGVzIHRoZSBjb250YWluZXIncyBzdHlsZXMgYmFzZWQgb24gdGhlIGN1cnJlbnQgcGx1Z2luIHNldHRpbmdzXG5cdHByaXZhdGUgdXBkYXRlQ29udGFpbmVyU3R5bGUoKSB7XG5cdFx0aWYgKHRoaXMuY29udGFpbmVyRWwpIHtcblx0XHRcdHRoaXMuY29udGFpbmVyRWwuY2xhc3NMaXN0LmFkZCgnY2FyZC1uYXZpZ2F0b3ItY29udGFpbmVyJyk7XG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLmNsYXNzTGlzdC50b2dnbGUoJ3ZlcnRpY2FsJywgdGhpcy5pc1ZlcnRpY2FsKTtcblx0XHRcdHRoaXMuY29udGFpbmVyRWwuY2xhc3NMaXN0LnRvZ2dsZSgnaG9yaXpvbnRhbCcsICF0aGlzLmlzVmVydGljYWwpO1xuXHRcdFx0dGhpcy5jb250YWluZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCdhbGlnbi1oZWlnaHQnLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbGlnbkNhcmRIZWlnaHQpO1xuXHRcdFx0dGhpcy5jb250YWluZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCdmbGV4aWJsZS1oZWlnaHQnLCAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuYWxpZ25DYXJkSGVpZ2h0KTtcblxuXHRcdFx0dGhpcy5jb250YWluZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYXJkcy1wZXItdmlldycsIHRoaXMucGx1Z2luLnNldHRpbmdzLmNhcmRzUGVyVmlldy50b1N0cmluZygpKTtcblx0XHR9XG5cdH1cblx0XG5cdC8vIFJlZnJlc2hlcyB0aGUgY2FyZCBjb250YWluZXIgYnkgZmV0Y2hpbmcgdGhlIGN1cnJlbnQgZm9sZGVyLCBzb3J0aW5nIGZpbGVzLCBhbmQgcmVuZGVyaW5nIHRoZSBjYXJkc1xuXHRwdWJsaWMgYXN5bmMgcmVmcmVzaCgpIHtcblx0XHRjb25zdCBmb2xkZXIgPSBhd2FpdCB0aGlzLmdldEN1cnJlbnRGb2xkZXIoKTtcblx0XHRpZiAoIWZvbGRlciB8fCAhdGhpcy5jb250YWluZXJFbCkgcmV0dXJuO1xuXG5cdFx0dGhpcy51cGRhdGVDb250YWluZXJTdHlsZSgpO1xuXG5cdFx0Y29uc3QgZmlsZXMgPSBmb2xkZXIuY2hpbGRyZW4uZmlsdGVyKChmaWxlKTogZmlsZSBpcyBURmlsZSA9PiBmaWxlIGluc3RhbmNlb2YgVEZpbGUpO1xuXHRcdGNvbnN0IHNvcnRlZEZpbGVzID0gdGhpcy5zb3J0RmlsZXMoZmlsZXMpO1xuXHRcdGNvbnN0IGNhcmRzRGF0YSA9IGF3YWl0IHRoaXMuY3JlYXRlQ2FyZHNEYXRhKHNvcnRlZEZpbGVzKTtcblxuXHRcdGF3YWl0IHRoaXMucmVuZGVyQ2FyZHMoY2FyZHNEYXRhKTtcblx0fVxuXG4gICAgLy8gVXBkYXRlcyB0aGUgY29udGFpbmVyIHNldHRpbmdzIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBwYXJ0aWFsIHNldHRpbmdzXG5cdHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBQYXJ0aWFsPENhcmROYXZpZ2F0b3JTZXR0aW5ncz4pIHtcbiAgICAgICAgaWYgKHNldHRpbmdzLmFsaWduQ2FyZEhlaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbGlnbkNhcmRIZWlnaHQgPSBzZXR0aW5ncy5hbGlnbkNhcmRIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNldHRpbmdzLmJvZHlMZW5ndGhMaW1pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib2R5TGVuZ3RoTGltaXQgPSBzZXR0aW5ncy5ib2R5TGVuZ3RoTGltaXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNldHRpbmdzLmJvZHlMZW5ndGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYm9keUxlbmd0aCA9IHNldHRpbmdzLmJvZHlMZW5ndGg7XG4gICAgICAgIH1cbiAgICB9XG5cblx0Ly8gRGV0ZXJtaW5lcyB0aGUgYXBwcm9wcmlhdGUgbGF5b3V0IHN0cmF0ZWd5IGJhc2VkIG9uIHRoZSBjb250YWluZXIgc2l6ZSBhbmQgcGx1Z2luIHNldHRpbmdzXG4gICAgcHJpdmF0ZSBkZXRlcm1pbmVBdXRvTGF5b3V0KCk6IExheW91dFN0cmF0ZWd5IHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lckVsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbnRhaW5lciBlbGVtZW50IGlzIG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29udGFpbmVyU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNvbnRhaW5lckVsKTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyV2lkdGggPSB0aGlzLmNvbnRhaW5lckVsLm9mZnNldFdpZHRoO1xuICAgICAgICBjb25zdCBwYWRkaW5nTGVmdCA9IHBhcnNlRmxvYXQoY29udGFpbmVyU3R5bGUucGFkZGluZ0xlZnQpIHx8IDA7XG4gICAgICAgIGNvbnN0IHBhZGRpbmdSaWdodCA9IHBhcnNlRmxvYXQoY29udGFpbmVyU3R5bGUucGFkZGluZ1JpZ2h0KSB8fCAwO1xuICAgICAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IGNvbnRhaW5lcldpZHRoIC0gcGFkZGluZ0xlZnQgLSBwYWRkaW5nUmlnaHQ7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBhbGlnbkNhcmRIZWlnaHQsXG4gICAgICAgICAgICBjYXJkV2lkdGhUaHJlc2hvbGQsXG4gICAgICAgICAgICBkZWZhdWx0TGF5b3V0XG4gICAgICAgIH0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcblxuICAgICAgICBpZiAoZGVmYXVsdExheW91dCAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGRlZmF1bHRMYXlvdXQpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdsaXN0JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0TGF5b3V0KHRoaXMuaXNWZXJ0aWNhbCwgdGhpcy5jYXJkR2FwLCBhbGlnbkNhcmRIZWlnaHQpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2dyaWQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEdyaWRMYXlvdXQodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ3JpZENvbHVtbnMsIHRoaXMuY2FyZEdhcCwgdGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21hc29ucnknOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hc29ucnlMYXlvdXQgPSBuZXcgTWFzb25yeUxheW91dChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1hc29ucnlDb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkR2FwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmRNYWtlclxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBtYXNvbnJ5TGF5b3V0LnNldENvbnRhaW5lcih0aGlzLmNvbnRhaW5lckVsKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hc29ucnlMYXlvdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgY29sdW1uc1xuICAgICAgICBsZXQgY29sdW1ucyA9IE1hdGguZmxvb3IoKGF2YWlsYWJsZVdpZHRoICsgdGhpcy5jYXJkR2FwKSAvIChjYXJkV2lkdGhUaHJlc2hvbGQgKyB0aGlzLmNhcmRHYXApKTtcbiAgICAgICAgY29sdW1ucyA9IE1hdGgubWF4KDEsIGNvbHVtbnMpOyAvLyBFbnN1cmUgYXQgbGVhc3Qgb25lIGNvbHVtblxuXG4gICAgICAgIC8vIEFkanVzdCBnYXAgZm9yIHNpbmdsZSBjb2x1bW4gbGF5b3V0XG4gICAgICAgIGNvbnN0IGFkanVzdGVkR2FwID0gY29sdW1ucyA9PT0gMSA/IE1hdGgubWluKHRoaXMuY2FyZEdhcCwgMTApIDogdGhpcy5jYXJkR2FwO1xuXG4gICAgICAgIGlmIChjb2x1bW5zID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IExpc3RMYXlvdXQodGhpcy5pc1ZlcnRpY2FsLCBhZGp1c3RlZEdhcCwgYWxpZ25DYXJkSGVpZ2h0KTtcbiAgICAgICAgfSBlbHNlIGlmIChhbGlnbkNhcmRIZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JpZExheW91dChjb2x1bW5zLCB0aGlzLmNhcmRHYXAsIHRoaXMucGx1Z2luLnNldHRpbmdzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG1hc29ucnlMYXlvdXQgPSBuZXcgTWFzb25yeUxheW91dChjb2x1bW5zLCB0aGlzLmNhcmRHYXAsIHRoaXMucGx1Z2luLnNldHRpbmdzLCB0aGlzLmNhcmRNYWtlcik7XG4gICAgICAgICAgICBtYXNvbnJ5TGF5b3V0LnNldENvbnRhaW5lcih0aGlzLmNvbnRhaW5lckVsKTtcbiAgICAgICAgICAgIHJldHVybiBtYXNvbnJ5TGF5b3V0O1xuICAgICAgICB9XG4gICAgfVxuXG5cdHByaXZhdGUgdXBkYXRlTGF5b3V0KCkge1xuXHRcdGlmICghdGhpcy5jb250YWluZXJFbCkgcmV0dXJuO1xuXHRcdGNvbnN0IG5ld0lzVmVydGljYWwgPSB0aGlzLmNhbGN1bGF0ZUlzVmVydGljYWwoKTtcblx0XHRjb25zdCBwcmV2aW91c0lzVmVydGljYWwgPSB0aGlzLmlzVmVydGljYWw7XG5cdFx0dGhpcy5pc1ZlcnRpY2FsID0gbmV3SXNWZXJ0aWNhbDtcblx0XG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRMYXlvdXQgPT09ICdhdXRvJyB8fCBcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRMYXlvdXQgPT09ICdsaXN0JyB8fCBcblx0XHRcdHByZXZpb3VzSXNWZXJ0aWNhbCAhPT0gdGhpcy5pc1ZlcnRpY2FsKSB7XG5cdFx0XHR0aGlzLmxheW91dFN0cmF0ZWd5ID0gdGhpcy5kZXRlcm1pbmVBdXRvTGF5b3V0KCk7XG5cdFx0fVxuXHRcblx0XHR0aGlzLmtleWJvYXJkTmF2aWdhdG9yPy51cGRhdGVMYXlvdXQodGhpcy5sYXlvdXRTdHJhdGVneSk7XG5cdFx0dGhpcy5yZWZyZXNoKCk7XG5cdH1cblx0XG5cdHB1YmxpYyBoYW5kbGVSZXNpemUoKSB7XG5cdFx0dGhpcy51cGRhdGVMYXlvdXQoKTtcblx0fVxuXG4gICAgLy8gUmV0dXJucyB0aGUgY3VycmVudCBsYXlvdXQgc3RyYXRlZ3lcblx0cHVibGljIGdldExheW91dFN0cmF0ZWd5KCk6IExheW91dFN0cmF0ZWd5IHtcblx0XHRyZXR1cm4gdGhpcy5sYXlvdXRTdHJhdGVneTtcblx0fVxuXG5cdC8vIFNldHMgdGhlIGxheW91dCBzdHJhdGVneSBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgbGF5b3V0IHR5cGVcbiAgICBzZXRMYXlvdXQobGF5b3V0OiBDYXJkTmF2aWdhdG9yU2V0dGluZ3NbJ2RlZmF1bHRMYXlvdXQnXSkge1xuICAgICAgICBjb25zdCB7IGdyaWRDb2x1bW5zLCBhbGlnbkNhcmRIZWlnaHQgfSA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuXG4gICAgICAgIC8vIFx1RDYwNFx1QzdBQyBcdUI4MDhcdUM3NzRcdUM1NDRcdUM2QzNcdUM3NDQgXHVDNUM1XHVCMzcwXHVDNzc0XHVEMkI4XG4gICAgICAgIHRoaXMuY3VycmVudExheW91dCA9IGxheW91dDtcblxuICAgICAgICBpZiAobGF5b3V0ID09PSAnYXV0bycpIHtcbiAgICAgICAgICAgIHRoaXMubGF5b3V0U3RyYXRlZ3kgPSB0aGlzLmRldGVybWluZUF1dG9MYXlvdXQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN3aXRjaCAobGF5b3V0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbGlzdCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGF5b3V0U3RyYXRlZ3kgPSBuZXcgTGlzdExheW91dCh0aGlzLmlzVmVydGljYWwsIHRoaXMuY2FyZEdhcCwgYWxpZ25DYXJkSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZ3JpZCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGF5b3V0U3RyYXRlZ3kgPSBuZXcgR3JpZExheW91dChncmlkQ29sdW1ucywgdGhpcy5jYXJkR2FwLCB0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHRcdFx0XHRjYXNlICdtYXNvbnJ5Jzpcblx0XHRcdFx0XHR0aGlzLmxheW91dFN0cmF0ZWd5ID0gbmV3IE1hc29ucnlMYXlvdXQoXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXNvbnJ5Q29sdW1ucyxcblx0XHRcdFx0XHRcdHRoaXMuY2FyZEdhcCxcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLFxuXHRcdFx0XHRcdFx0dGhpcy5jYXJkTWFrZXJcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGlmICh0aGlzLmNvbnRhaW5lckVsKSB7XG5cdFx0XHRcdFx0XHQodGhpcy5sYXlvdXRTdHJhdGVneSBhcyBNYXNvbnJ5TGF5b3V0KS5zZXRDb250YWluZXIodGhpcy5jb250YWluZXJFbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHQvLyBcdUQwQTRcdUJDRjRcdUI0REMgXHVCMEI0XHVCRTQ0XHVBQzhDXHVDNzc0XHVEMTMwIFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuXHRcdHRoaXMua2V5Ym9hcmROYXZpZ2F0b3I/LnVwZGF0ZUxheW91dCh0aGlzLmxheW91dFN0cmF0ZWd5KTtcblx0XHRcblx0XHQvLyBcdUNFNzRcdUI0REMgXHVDMEM4XHVCODVDIFx1QUNFMFx1Q0U2OFxuXHRcdHRoaXMucmVmcmVzaCgpO1xuXHR9XG5cblxuICAgIC8vIENoZWNrcyBpZiB0aGUgY3VycmVudCBsYXlvdXQgaXMgYSBncmlkIGxheW91dFxuICAgIHB1YmxpYyBpc0dyaWRMYXlvdXQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dFN0cmF0ZWd5IGluc3RhbmNlb2YgR3JpZExheW91dDtcbiAgICB9XG5cbiAgICAvLyBTZXRzIHRoZSBsYXlvdXQgb3JpZW50YXRpb24gb2YgdGhlIGNhcmRzICh2ZXJ0aWNhbCBvciBob3Jpem9udGFsKVxuICAgIHNldE9yaWVudGF0aW9uKGlzVmVydGljYWw6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5pc1ZlcnRpY2FsID0gaXNWZXJ0aWNhbDtcbiAgICAgICAgdGhpcy51cGRhdGVDb250YWluZXJTdHlsZSgpO1xuICAgIH1cblxuICAgIC8vIFJldHJpZXZlcyB0aGUgY3VycmVudCBmb2xkZXIgZnJvbSB3aGljaCB0byBkaXNwbGF5IGNhcmRzLCBlaXRoZXIgc2VsZWN0ZWQgb3IgYWN0aXZlXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRDdXJyZW50Rm9sZGVyKCk6IFByb21pc2U8VEZvbGRlciB8IG51bGw+IHtcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZVNlbGVjdGVkRm9sZGVyICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdGVkRm9sZGVyKSB7XG4gICAgICAgICAgICBjb25zdCBhYnN0cmFjdEZpbGUgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdGVkRm9sZGVyKTtcbiAgICAgICAgICAgIHJldHVybiBhYnN0cmFjdEZpbGUgaW5zdGFuY2VvZiBURm9sZGVyID8gYWJzdHJhY3RGaWxlIDogbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgIHJldHVybiBhY3RpdmVGaWxlPy5wYXJlbnQgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNvcnRzIHRoZSBmaWxlcyBiYXNlZCBvbiB0aGUgcGx1Z2luJ3MgY3VycmVudCBzb3J0IGNyaXRlcmlhXG4gICAgcHJpdmF0ZSBzb3J0RmlsZXMoZmlsZXM6IFRGaWxlW10pOiBURmlsZVtdIHtcbiAgICAgICAgY29uc3QgbWRGaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKTtcbiAgICAgICAgcmV0dXJuIHNvcnRGaWxlcyhtZEZpbGVzLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zb3J0Q3JpdGVyaW9uLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zb3J0T3JkZXIpO1xuICAgIH1cblxuICAgIC8vIFJldHJpZXZlcyB0aGUgZmlsZSBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiBjYXJkIGVsZW1lbnRcbiAgICBwdWJsaWMgZ2V0RmlsZUZyb21DYXJkKGNhcmRFbGVtZW50OiBIVE1MRWxlbWVudCk6IFRGaWxlIHwgbnVsbCB7XG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXJFbCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IGNhcmRJbmRleCA9IEFycmF5LmZyb20odGhpcy5jb250YWluZXJFbC5jaGlsZHJlbikuaW5kZXhPZihjYXJkRWxlbWVudCk7XG4gICAgICAgIGlmIChjYXJkSW5kZXggIT09IC0xICYmIGNhcmRJbmRleCA8IHRoaXMuY2FyZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJkc1tjYXJkSW5kZXhdLmZpbGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gRm9jdXNlcyBvbiB0aGUga2V5Ym9hcmQgbmF2aWdhdG9yIHRvIGFsbG93IGtleWJvYXJkLWJhc2VkIG5hdmlnYXRpb25cbiAgICBwdWJsaWMgZm9jdXNOYXZpZ2F0b3IoKSB7XG4gICAgICAgIHRoaXMua2V5Ym9hcmROYXZpZ2F0b3I/LmZvY3VzTmF2aWdhdG9yKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlbW92ZXMgZm9jdXMgZnJvbSB0aGUga2V5Ym9hcmQgbmF2aWdhdG9yXG4gICAgcHVibGljIGJsdXJOYXZpZ2F0b3IoKSB7XG4gICAgICAgIHRoaXMua2V5Ym9hcmROYXZpZ2F0b3I/LmJsdXJOYXZpZ2F0b3IoKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGVzIGNhcmQgZGF0YSBvYmplY3RzIGZvciBhIGxpc3Qgb2YgZmlsZXNcblx0cHJpdmF0ZSBhc3luYyBjcmVhdGVDYXJkc0RhdGEoZmlsZXM6IFRGaWxlW10pOiBQcm9taXNlPENhcmRbXT4ge1xuXHRcdGNvbnN0IG1kRmlsZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJyk7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBhd2FpdCBQcm9taXNlLmFsbChtZEZpbGVzLm1hcChmaWxlID0+IHRoaXMuY2FyZE1ha2VyLmNyZWF0ZUNhcmQoZmlsZSkpKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcignXHVDRTc0XHVCNERDIFx1QjM3MFx1Qzc3NFx1RDEzMCBcdUMwRERcdUMxMzEgXHVDOTExIFx1QzYyNFx1Qjk1OCBcdUJDMUNcdUMwREQ6JywgZXJyb3IpO1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblx0fVxuXG4gICAgLy8gUmVuZGVycyB0aGUgY2FyZCBlbGVtZW50cyBpbnNpZGUgdGhlIGNvbnRhaW5lclxuXHRwcml2YXRlIGFzeW5jIHJlbmRlckNhcmRzKGNhcmRzRGF0YTogQ2FyZFtdKSB7XG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXJFbCkgcmV0dXJuO1xuICAgIFxuICAgICAgICBpZiAoIWNhcmRzRGF0YSB8fCBjYXJkc0RhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RoZSBjYXJkIGRhdGEgaXMgZW1wdHkuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMubGF5b3V0U3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoZSBsYXlvdXQgc3RyYXRlZ3kgaGFzIG5vdCBiZWVuIHNldC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250YWluZXJFbDtcbiAgICAgICAgY29uc3QgY3VycmVudFNjcm9sbFRvcCA9IGNvbnRhaW5lckVsLnNjcm9sbFRvcDtcbiAgICAgICAgY29uc3QgY3VycmVudFNjcm9sbExlZnQgPSBjb250YWluZXJFbC5zY3JvbGxMZWZ0O1xuICAgIFxuICAgICAgICAvLyBTdG9yZSB0aGUgZm9jdXNlZCBjYXJkIGluZGV4IGJlZm9yZSBjbGVhcmluZyB0aGUgY29udGFpbmVyXG4gICAgICAgIGNvbnN0IGZvY3VzZWRDYXJkSW5kZXggPSBBcnJheS5mcm9tKGNvbnRhaW5lckVsLmNoaWxkcmVuKS5maW5kSW5kZXgoXG4gICAgICAgICAgICBjaGlsZCA9PiBjaGlsZC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmQtbmF2aWdhdG9yLWZvY3VzZWQnKVxuICAgICAgICApO1xuICAgIFxuICAgICAgICBjb25zdCBjb250YWluZXJSZWN0ID0gY29udGFpbmVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lclN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5jb250YWluZXJFbCk7XG4gICAgICAgIGNvbnN0IHBhZGRpbmdMZWZ0ID0gcGFyc2VGbG9hdChjb250YWluZXJTdHlsZS5wYWRkaW5nTGVmdCk7XG4gICAgICAgIGNvbnN0IHBhZGRpbmdSaWdodCA9IHBhcnNlRmxvYXQoY29udGFpbmVyU3R5bGUucGFkZGluZ1JpZ2h0KTtcbiAgICAgICAgY29uc3QgcGFkZGluZ1RvcCA9IHBhcnNlRmxvYXQoY29udGFpbmVyU3R5bGUucGFkZGluZ1RvcCk7XG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gY29udGFpbmVyUmVjdC53aWR0aCAtIHBhZGRpbmdMZWZ0IC0gcGFkZGluZ1JpZ2h0O1xuXG4gICAgICAgIC8vIEFwcGx5IGNvbnRhaW5lciBzdHlsZXMgZm9yIExpc3QgbGF5b3V0XG4gICAgICAgIGlmICh0aGlzLmxheW91dFN0cmF0ZWd5IGluc3RhbmNlb2YgTGlzdExheW91dCkge1xuICAgICAgICAgICAgY29uc3QgbGlzdENvbnRhaW5lclN0eWxlID0gdGhpcy5sYXlvdXRTdHJhdGVneS5nZXRDb250YWluZXJTdHlsZSgpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihjb250YWluZXJFbC5zdHlsZSwgbGlzdENvbnRhaW5lclN0eWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFJlc2V0IHN0eWxlcyBmb3Igb3RoZXIgbGF5b3V0c1xuICAgICAgICAgICAgY29udGFpbmVyRWwuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgY29udGFpbmVyRWwuc3R5bGUuZmxleERpcmVjdGlvbiA9ICcnO1xuICAgICAgICAgICAgY29udGFpbmVyRWwuc3R5bGUuZ2FwID0gJyc7XG4gICAgICAgICAgICBjb250YWluZXJFbC5zdHlsZS5hbGlnbkl0ZW1zID0gJyc7XG4gICAgICAgICAgICBjb250YWluZXJFbC5zdHlsZS5vdmVyZmxvd1kgPSAnJztcbiAgICAgICAgICAgIGNvbnRhaW5lckVsLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhcmRQb3NpdGlvbnMgPSB0aGlzLmxheW91dFN0cmF0ZWd5LmFycmFuZ2UoXG4gICAgICAgICAgICBjYXJkc0RhdGEsXG4gICAgICAgICAgICBhdmFpbGFibGVXaWR0aCxcbiAgICAgICAgICAgIGNvbnRhaW5lclJlY3QuaGVpZ2h0LFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FyZHNQZXJWaWV3XG4gICAgICAgICk7XG5cdFxuXHRcdGlmIChjYXJkUG9zaXRpb25zLmxlbmd0aCAhPT0gY2FyZHNEYXRhLmxlbmd0aCkge1xuXHRcdFx0Y29uc29sZS53YXJuKCdDYXJkIHBvc2l0aW9ucyBhbmQgY2FyZCBkYXRhIGxlbmd0aCBtaXNtYXRjaC4gQWRqdXN0aW5nLi4uJyk7XG5cdFx0XHRjb25zdCBtaW5MZW5ndGggPSBNYXRoLm1pbihjYXJkUG9zaXRpb25zLmxlbmd0aCwgY2FyZHNEYXRhLmxlbmd0aCk7XG5cdFx0XHRjYXJkc0RhdGEgPSBjYXJkc0RhdGEuc2xpY2UoMCwgbWluTGVuZ3RoKTtcblx0XHRcdGNhcmRQb3NpdGlvbnMubGVuZ3RoID0gbWluTGVuZ3RoO1xuXHRcdH1cblxuXHRcdHRoaXMuZm9jdXNlZENhcmRJZCA9IHRoaXMuZ2V0Rm9jdXNlZENhcmRJZCgpO1xuXHRcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICAgICAgdGhpcy5jYXJkcyA9IGNhcmRzRGF0YTtcbiAgICBcbiAgICAgICAgY2FyZFBvc2l0aW9ucy5mb3JFYWNoKChwb3NpdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBjYXJkc0RhdGFbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgY2FyZEVsID0gdGhpcy5jYXJkTWFrZXIuY3JlYXRlQ2FyZEVsZW1lbnQoY2FyZCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmxheW91dFN0cmF0ZWd5IGluc3RhbmNlb2YgTGlzdExheW91dCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhcmRTdHlsZSA9IHRoaXMubGF5b3V0U3RyYXRlZ3kuZ2V0Q2FyZFN0eWxlKCk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihjYXJkRWwuc3R5bGUsIGNhcmRTdHlsZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gY2FyZFBvc2l0aW9uc1tpbmRleF07XG4gICAgICAgICAgICAgICAgY2FyZEVsLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgICBjYXJkRWwuc3R5bGUubGVmdCA9IGAke3Bvc2l0aW9uLnggKyBwYWRkaW5nTGVmdH1weGA7XG4gICAgICAgICAgICAgICAgY2FyZEVsLnN0eWxlLnRvcCA9IGAke3Bvc2l0aW9uLnkgKyBwYWRkaW5nVG9wfXB4YDtcbiAgICAgICAgICAgICAgICBjYXJkRWwuc3R5bGUud2lkdGggPSBgJHtwb3NpdGlvbi53aWR0aH1weGA7XG4gICAgICAgICAgICAgICAgY2FyZEVsLnN0eWxlLmhlaWdodCA9IHR5cGVvZiBwb3NpdGlvbi5oZWlnaHQgPT09ICdudW1iZXInID8gYCR7cG9zaXRpb24uaGVpZ2h0fXB4YCA6IHBvc2l0aW9uLmhlaWdodDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoY2FyZEVsKTtcblxuICAgICAgICAgICAgY2FyZEVsLmNsYXNzTGlzdC5hZGQodGhpcy5sYXlvdXRTdHJhdGVneS5nZXRTY3JvbGxEaXJlY3Rpb24oKSA9PT0gJ3ZlcnRpY2FsJyA/ICd2ZXJ0aWNhbCcgOiAnaG9yaXpvbnRhbCcpO1xuICAgICAgICAgICAgY2FyZEVsLmNsYXNzTGlzdC50b2dnbGUoJ2FsaWduLWhlaWdodCcsIHRoaXMucGx1Z2luLnNldHRpbmdzLmFsaWduQ2FyZEhlaWdodCk7XG4gICAgICAgICAgICBjYXJkRWwuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZC1uYXZpZ2F0b3ItYWN0aXZlJywgY2FyZC5maWxlID09PSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlc3RvcmUgdGhlIGZvY3VzZWQgc3RhdGVcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gZm9jdXNlZENhcmRJbmRleCkge1xuICAgICAgICAgICAgICAgIGNhcmRFbC5jbGFzc0xpc3QuYWRkKCdjYXJkLW5hdmlnYXRvci1mb2N1c2VkJyk7XG4gICAgICAgICAgICB9XG5cblx0XHRcdGlmIChjYXJkLmZpbGUucGF0aCA9PT0gdGhpcy5mb2N1c2VkQ2FyZElkKSB7XG4gICAgICAgICAgICAgICAgY2FyZEVsLmNsYXNzTGlzdC5hZGQoJ2NhcmQtbmF2aWdhdG9yLWZvY3VzZWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoY2FyZEVsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuc2Nyb2xsVG9wID0gY3VycmVudFNjcm9sbFRvcDtcbiAgICAgICAgY29udGFpbmVyRWwuc2Nyb2xsTGVmdCA9IGN1cnJlbnRTY3JvbGxMZWZ0O1xuXG4gICAgICAgIGNvbnN0IG5ld0FjdGl2ZUNhcmRJbmRleCA9IEFycmF5LmZyb20oY29udGFpbmVyRWwuY2hpbGRyZW4pLmZpbmRJbmRleChcbiAgICAgICAgICAgIGNoaWxkID0+IGNoaWxkLmNsYXNzTGlzdC5jb250YWlucygnY2FyZC1uYXZpZ2F0b3ItYWN0aXZlJylcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAobmV3QWN0aXZlQ2FyZEluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0FjdGl2ZUNhcmQoZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxEaXJlY3Rpb24oKTtcbiAgICAgICAgdm9pZCB0aGlzLmVuc3VyZUNhcmRTaXplc0FyZVNldCgpO1xuICAgIH1cblxuXHRwcml2YXRlIGdldEZvY3VzZWRDYXJkSWQoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXJFbCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IGZvY3VzZWRDYXJkID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1uYXZpZ2F0b3ItZm9jdXNlZCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICByZXR1cm4gZm9jdXNlZENhcmQgPyBmb2N1c2VkQ2FyZC5kYXRhc2V0LmNhcmRJZCB8fCBudWxsIDogbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZm9jdXNDYXJkKGNhcmRJZDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuZm9jdXNlZENhcmRJZCA9IGNhcmRJZDtcbiAgICAgICAgdGhpcy51cGRhdGVGb2N1c2VkQ2FyZCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlRm9jdXNlZENhcmQoKSB7XG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXJFbCB8fCAhdGhpcy5mb2N1c2VkQ2FyZElkKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjYXJkcyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLmNhcmQtbmF2aWdhdG9yLWNhcmQnKTtcbiAgICAgICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgICAgICAgIGlmIChjYXJkIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FyZC5kYXRhc2V0LmNhcmRJZCA9PT0gdGhpcy5mb2N1c2VkQ2FyZElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnY2FyZC1uYXZpZ2F0b3ItZm9jdXNlZCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnY2FyZC1uYXZpZ2F0b3ItZm9jdXNlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG5cdC8vIFVwZGF0ZXMgdGhlIHNjcm9sbCBkaXJlY3Rpb24gb2YgdGhlIGNvbnRhaW5lciBlbGVtZW50IGJhc2VkIG9uIHRoZSBsYXlvdXQgc3RyYXRlZ3lcblx0cHJpdmF0ZSB1cGRhdGVTY3JvbGxEaXJlY3Rpb24oKSB7XG5cdFx0aWYgKCF0aGlzLmNvbnRhaW5lckVsKSByZXR1cm47XG5cdFx0Y29uc3Qgc2Nyb2xsRGlyZWN0aW9uID0gdGhpcy5sYXlvdXRTdHJhdGVneS5nZXRTY3JvbGxEaXJlY3Rpb24oKTtcblx0XHR0aGlzLmNvbnRhaW5lckVsLnN0eWxlLm92ZXJmbG93WSA9IHNjcm9sbERpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJyA/ICdhdXRvJyA6ICdoaWRkZW4nO1xuXHRcdHRoaXMuY29udGFpbmVyRWwuc3R5bGUub3ZlcmZsb3dYID0gc2Nyb2xsRGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgPyAnYXV0bycgOiAnaGlkZGVuJztcblx0fVxuXG5cdC8vIENsZWFycyB0aGUgJ2ZvY3VzZWQnIHN0YXR1cyBmcm9tIGFsbCBjYXJkIGVsZW1lbnRzXG5cdHB1YmxpYyBjbGVhckZvY3VzZWRDYXJkcygpIHtcblx0XHRpZiAoIXRoaXMuY29udGFpbmVyRWwpIHJldHVybjtcblx0XHRBcnJheS5mcm9tKHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW4pLmZvckVhY2goKGNhcmQpID0+IHtcblx0XHRcdGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnY2FyZC1uYXZpZ2F0b3ItZm9jdXNlZCcpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gRW5zdXJlcyB0aGUgc2l6ZSBvZiB0aGUgY2FyZHMgaXMgcHJvcGVybHkgc2V0IGFmdGVyIHJlbmRlcmluZ1xuXHRwcml2YXRlIGFzeW5jIGVuc3VyZUNhcmRTaXplc0FyZVNldCgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdGNvbnN0IGNoZWNrU2l6ZXMgPSAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGZpcnN0Q2FyZCA9IHRoaXMuY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLW5hdmlnYXRvci1jYXJkJykgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdGlmIChmaXJzdENhcmQgJiYgZmlyc3RDYXJkLm9mZnNldFdpZHRoID4gMCAmJiBmaXJzdENhcmQub2Zmc2V0SGVpZ2h0ID4gMCkge1xuXHRcdFx0XHRcdHJlc29sdmUoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2hlY2tTaXplcyk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRjaGVja1NpemVzKCk7XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBTY3JvbGxzIHRvIHRoZSBjdXJyZW50bHkgYWN0aXZlIGNhcmQsIGNlbnRlcmluZyBpdCB3aXRoaW4gdGhlIGNvbnRhaW5lclxuXHRwcml2YXRlIHNjcm9sbFRvQWN0aXZlQ2FyZChhbmltYXRlID0gdHJ1ZSkge1xuXHRcdGlmICghdGhpcy5jb250YWluZXJFbCkgcmV0dXJuO1xuXHRcdGNvbnN0IGFjdGl2ZUNhcmQgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLW5hdmlnYXRvci1hY3RpdmUnKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XG5cdFx0aWYgKCFhY3RpdmVDYXJkKSByZXR1cm47XG5cblx0XHR0aGlzLmNlbnRlckNhcmQoYWN0aXZlQ2FyZCwgYW5pbWF0ZSk7XG5cdH1cblxuXHQvLyBDZW50ZXJzIGEgc3BlY2lmaWMgY2FyZCB3aXRoaW4gdGhlIGNvbnRhaW5lciwgZWl0aGVyIGhvcml6b250YWxseSBvciB2ZXJ0aWNhbGx5XG5cdHB1YmxpYyBjZW50ZXJDYXJkKGNhcmQ6IEhUTUxFbGVtZW50LCBhbmltYXRlID0gdHJ1ZSkge1xuXHRcdGlmICghdGhpcy5jb250YWluZXJFbCkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgY29udGFpbmVyUmVjdCA9IHRoaXMuY29udGFpbmVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0Y29uc3QgY2FyZFJlY3QgPSBjYXJkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG5cdFx0bGV0IG9mZnNldCA9IDA7XG5cdFx0bGV0IHNjcm9sbFByb3BlcnR5OiAnc2Nyb2xsVG9wJyB8ICdzY3JvbGxMZWZ0JztcblxuXHRcdGlmICh0aGlzLmlzVmVydGljYWwpIHtcblx0XHRcdGNvbnN0IGNvbnRhaW5lclZpc2libGVIZWlnaHQgPSBjb250YWluZXJSZWN0LmhlaWdodDtcblx0XHRcdG9mZnNldCA9IGNhcmRSZWN0LnRvcCAtIGNvbnRhaW5lclJlY3QudG9wIC0gKGNvbnRhaW5lclZpc2libGVIZWlnaHQgLSBjYXJkUmVjdC5oZWlnaHQpIC8gMjtcblx0XHRcdHNjcm9sbFByb3BlcnR5ID0gJ3Njcm9sbFRvcCc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGNvbnRhaW5lclZpc2libGVXaWR0aCA9IGNvbnRhaW5lclJlY3Qud2lkdGg7XG5cdFx0XHRvZmZzZXQgPSBjYXJkUmVjdC5sZWZ0IC0gY29udGFpbmVyUmVjdC5sZWZ0IC0gKGNvbnRhaW5lclZpc2libGVXaWR0aCAtIGNhcmRSZWN0LndpZHRoKSAvIDI7XG5cdFx0XHRzY3JvbGxQcm9wZXJ0eSA9ICdzY3JvbGxMZWZ0Jztcblx0XHR9XG5cblx0XHRjb25zdCBuZXdTY3JvbGxQb3NpdGlvbiA9IHRoaXMuY29udGFpbmVyRWxbc2Nyb2xsUHJvcGVydHldICsgb2Zmc2V0O1xuXG5cdFx0aWYgKGFuaW1hdGUpIHtcblx0XHRcdHRoaXMuc21vb3RoU2Nyb2xsKHNjcm9sbFByb3BlcnR5LCBuZXdTY3JvbGxQb3NpdGlvbik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuY29udGFpbmVyRWxbc2Nyb2xsUHJvcGVydHldID0gbmV3U2Nyb2xsUG9zaXRpb247XG5cdFx0fVxuXHR9XG5cblx0Ly8gU21vb3RobHkgc2Nyb2xscyB0byBhIHRhcmdldCBwb3NpdGlvbiBpbiB0aGUgY29udGFpbmVyXG5cdHByaXZhdGUgc21vb3RoU2Nyb2xsKHNjcm9sbFByb3BlcnR5OiAnc2Nyb2xsVG9wJyB8ICdzY3JvbGxMZWZ0JywgdGFyZ2V0UG9zaXRpb246IG51bWJlcikge1xuXHRcdGlmICghdGhpcy5jb250YWluZXJFbCkgcmV0dXJuO1xuXG5cdFx0Y29uc3Qgc3RhcnRQb3NpdGlvbiA9IHRoaXMuY29udGFpbmVyRWxbc2Nyb2xsUHJvcGVydHldO1xuXHRcdGNvbnN0IGRpc3RhbmNlID0gdGFyZ2V0UG9zaXRpb24gLSBzdGFydFBvc2l0aW9uO1xuXHRcdGNvbnN0IGR1cmF0aW9uID0gMzAwOyAvLyBtc1xuXHRcdGxldCBzdGFydFRpbWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG5cdFx0Y29uc3QgYW5pbWF0aW9uID0gKGN1cnJlbnRUaW1lOiBudW1iZXIpID0+IHtcblx0XHRcdGlmIChzdGFydFRpbWUgPT09IG51bGwpIHN0YXJ0VGltZSA9IGN1cnJlbnRUaW1lO1xuXHRcdFx0Y29uc3QgdGltZUVsYXBzZWQgPSBjdXJyZW50VGltZSAtIHN0YXJ0VGltZTtcblx0XHRcdGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4odGltZUVsYXBzZWQgLyBkdXJhdGlvbiwgMSk7XG5cdFx0XHRjb25zdCBlYXNlUHJvZ3Jlc3MgPSAwLjUgLSBNYXRoLmNvcyhwcm9ncmVzcyAqIE1hdGguUEkpIC8gMjtcblxuXHRcdFx0aWYgKHRoaXMuY29udGFpbmVyRWwpIHtcblx0XHRcdFx0dGhpcy5jb250YWluZXJFbFtzY3JvbGxQcm9wZXJ0eV0gPSBzdGFydFBvc2l0aW9uICsgZGlzdGFuY2UgKiBlYXNlUHJvZ3Jlc3M7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aW1lRWxhcHNlZCA8IGR1cmF0aW9uICYmIHRoaXMuY29udGFpbmVyRWwpIHtcblx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbik7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRpb24pO1xuXHR9XG5cblx0Ly8gQ2VudGVycyB0aGUgY3VycmVudGx5IGFjdGl2ZSBjYXJkXG5cdHB1YmxpYyBjZW50ZXJBY3RpdmVDYXJkKCkge1xuXHRcdHRoaXMuc2Nyb2xsVG9BY3RpdmVDYXJkKHRydWUpO1xuXHR9XG5cblx0Ly8gUmV0cmlldmVzIHRoZSBzaXplIG9mIHRoZSBjYXJkIGVsZW1lbnRzLCBpbmNsdWRpbmcgdGhlIGdhcCBiZXR3ZWVuIHRoZW1cblx0cHJpdmF0ZSBnZXRDYXJkU2l6ZSgpOiB7IHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyIH0ge1xuXHRcdGlmICghdGhpcy5jb250YWluZXJFbCkgcmV0dXJuIHsgd2lkdGg6IDAsIGhlaWdodDogMCB9O1xuXHRcdGNvbnN0IGZpcnN0Q2FyZCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLmNhcmQtbmF2aWdhdG9yLWNhcmQnKSBhcyBIVE1MRWxlbWVudDtcblx0XHRpZiAoIWZpcnN0Q2FyZCkgcmV0dXJuIHsgd2lkdGg6IDAsIGhlaWdodDogMCB9O1xuXG5cdFx0Y29uc3QgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGhpcy5jb250YWluZXJFbCk7XG5cdFx0Y29uc3QgZ2FwID0gcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCctLWNhcmQtbmF2aWdhdG9yLWdhcCcpIHx8ICcwJywgMTApO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHdpZHRoOiBmaXJzdENhcmQub2Zmc2V0V2lkdGggKyBnYXAsXG5cdFx0XHRoZWlnaHQ6IGZpcnN0Q2FyZC5vZmZzZXRIZWlnaHQgKyBnYXBcblx0XHR9O1xuXHR9XG5cblx0Ly8gU2Nyb2xscyB0aGUgY29udGFpbmVyIGluIHRoZSBzcGVjaWZpZWQgZGlyZWN0aW9uIGJ5IGEgZ2l2ZW4gbnVtYmVyIG9mIGNhcmRzXG5cdHByaXZhdGUgc2Nyb2xsSW5EaXJlY3Rpb24oZGlyZWN0aW9uOiAndXAnIHwgJ2Rvd24nIHwgJ2xlZnQnIHwgJ3JpZ2h0JywgY291bnQgPSAxKSB7XG5cdFx0aWYgKCF0aGlzLmNvbnRhaW5lckVsKSByZXR1cm47XG5cdFx0Y29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLmdldENhcmRTaXplKCk7XG5cdFx0Y29uc3QgY2FyZHNQZXJWaWV3ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FyZHNQZXJWaWV3O1xuXHRcdGNvbnN0IHRvdGFsQ2FyZHMgPSB0aGlzLmNhcmRzLmxlbmd0aDtcblx0XHRjb25zdCBpc1ZlcnRpY2FsID0gdGhpcy5sYXlvdXRTdHJhdGVneS5nZXRTY3JvbGxEaXJlY3Rpb24oKSA9PT0gJ3ZlcnRpY2FsJztcblx0XHRcblx0XHRjb25zdCBjYXJkU2l6ZSA9IGlzVmVydGljYWwgPyBoZWlnaHQgOiB3aWR0aDtcblx0XHRjb25zdCBjdXJyZW50U2Nyb2xsID0gaXNWZXJ0aWNhbCA/IHRoaXMuY29udGFpbmVyRWwuc2Nyb2xsVG9wIDogdGhpcy5jb250YWluZXJFbC5zY3JvbGxMZWZ0O1xuXHRcdGNvbnN0IHRvdGFsU2l6ZSA9IHRvdGFsQ2FyZHMgKiBjYXJkU2l6ZTtcblx0XHRjb25zdCBjb250YWluZXJTaXplID0gaXNWZXJ0aWNhbCA/IHRoaXMuY29udGFpbmVyRWwuY2xpZW50SGVpZ2h0IDogdGhpcy5jb250YWluZXJFbC5jbGllbnRXaWR0aDtcblx0XHRcblx0XHRsZXQgdGFyZ2V0U2Nyb2xsO1xuXHRcdGlmIChjb3VudCA9PT0gY2FyZHNQZXJWaWV3KSB7IC8vIFBhZ2UgVXAvTGVmdCBvciBQYWdlIERvd24vUmlnaHRcblx0XHRcdGNvbnN0IGN1cnJlbnRFZGdlQ2FyZCA9IE1hdGguZmxvb3IoKGN1cnJlbnRTY3JvbGwgKyAoZGlyZWN0aW9uID09PSAnZG93bicgfHwgZGlyZWN0aW9uID09PSAncmlnaHQnID8gY29udGFpbmVyU2l6ZSA6IDApKSAvIGNhcmRTaXplKTtcblx0XHRcdGlmIChkaXJlY3Rpb24gPT09ICd1cCcgfHwgZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcblx0XHRcdFx0aWYgKGN1cnJlbnRFZGdlQ2FyZCA8IGNhcmRzUGVyVmlldykge1xuXHRcdFx0XHRcdHRhcmdldFNjcm9sbCA9IDA7IC8vIFNjcm9sbCB0byB0aGUgdmVyeSBzdGFydFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRhcmdldFNjcm9sbCA9IE1hdGgubWF4KDAsIChjdXJyZW50RWRnZUNhcmQgLSBjYXJkc1BlclZpZXcpICogY2FyZFNpemUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgeyAvLyBkb3duIG9yIHJpZ2h0XG5cdFx0XHRcdGlmICh0b3RhbENhcmRzIC0gY3VycmVudEVkZ2VDYXJkIDwgY2FyZHNQZXJWaWV3KSB7XG5cdFx0XHRcdFx0dGFyZ2V0U2Nyb2xsID0gdG90YWxTaXplIC0gY29udGFpbmVyU2l6ZTsgLy8gU2Nyb2xsIHRvIHRoZSB2ZXJ5IGVuZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRhcmdldFNjcm9sbCA9IE1hdGgubWluKHRvdGFsU2l6ZSAtIGNvbnRhaW5lclNpemUsIChjdXJyZW50RWRnZUNhcmQgKyAxKSAqIGNhcmRTaXplKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBzY3JvbGxBbW91bnQgPSBjYXJkU2l6ZSAqIGNvdW50O1xuXHRcdFx0aWYgKGRpcmVjdGlvbiA9PT0gJ3VwJyB8fCBkaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuXHRcdFx0XHR0YXJnZXRTY3JvbGwgPSBNYXRoLm1heCgwLCBjdXJyZW50U2Nyb2xsIC0gc2Nyb2xsQW1vdW50KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRhcmdldFNjcm9sbCA9IE1hdGgubWluKHRvdGFsU2l6ZSAtIGNvbnRhaW5lclNpemUsIGN1cnJlbnRTY3JvbGwgKyBzY3JvbGxBbW91bnQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMuY29udGFpbmVyRWwuc2Nyb2xsVG8oe1xuXHRcdFx0W2lzVmVydGljYWwgPyAndG9wJyA6ICdsZWZ0J106IHRhcmdldFNjcm9sbCxcblx0XHRcdGJlaGF2aW9yOiAnc21vb3RoJ1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gU2Nyb2xscyB0aGUgY29udGFpbmVyIHVwd2FyZHMgYnkgYSBzcGVjaWZpZWQgbnVtYmVyIG9mIGNhcmRzXG5cdHNjcm9sbFVwKGNvdW50ID0gMSkge1xuXHRcdHRoaXMuc2Nyb2xsSW5EaXJlY3Rpb24oJ3VwJywgY291bnQpO1xuXHR9XG5cblx0Ly8gU2Nyb2xscyB0aGUgY29udGFpbmVyIGRvd253YXJkcyBieSBhIHNwZWNpZmllZCBudW1iZXIgb2YgY2FyZHNcblx0c2Nyb2xsRG93bihjb3VudCA9IDEpIHtcblx0XHR0aGlzLnNjcm9sbEluRGlyZWN0aW9uKCdkb3duJywgY291bnQpO1xuXHR9XG5cblx0Ly8gU2Nyb2xscyB0aGUgY29udGFpbmVyIHRvIHRoZSBsZWZ0IGJ5IGEgc3BlY2lmaWVkIG51bWJlciBvZiBjYXJkc1xuXHRzY3JvbGxMZWZ0KGNvdW50ID0gMSkge1xuXHRcdHRoaXMuc2Nyb2xsSW5EaXJlY3Rpb24oJ2xlZnQnLCBjb3VudCk7XG5cdH1cblxuXHQvLyBTY3JvbGxzIHRoZSBjb250YWluZXIgdG8gdGhlIHJpZ2h0IGJ5IGEgc3BlY2lmaWVkIG51bWJlciBvZiBjYXJkc1xuXHRzY3JvbGxSaWdodChjb3VudCA9IDEpIHtcblx0XHR0aGlzLnNjcm9sbEluRGlyZWN0aW9uKCdyaWdodCcsIGNvdW50KTtcblx0fVxuXG5cdC8vIERpc3BsYXlzIHRoZSBjYXJkcyBiYXNlZCBvbiB0aGUgZmlsdGVyZWQgZmlsZXNcblx0cHVibGljIGFzeW5jIGRpc3BsYXlDYXJkcyhmaWx0ZXJlZEZpbGVzOiBURmlsZVtdKSB7XG5cdFx0Y29uc3Qgc29ydGVkRmlsZXMgPSB0aGlzLnNvcnRGaWxlcyhmaWx0ZXJlZEZpbGVzKTtcblx0XHRjb25zdCBjYXJkc0RhdGEgPSBhd2FpdCB0aGlzLmNyZWF0ZUNhcmRzRGF0YShzb3J0ZWRGaWxlcyk7XG5cdFx0YXdhaXQgdGhpcy5yZW5kZXJDYXJkcyhjYXJkc0RhdGEpO1xuXHR9XG5cblx0Ly8gU2VhcmNoZXMgZm9yIGNhcmRzIGJ5IGZpbGUgYm9keSBvciBmaWxlIG5hbWUgYW5kIGRpc3BsYXlzIHRoZW1cblx0cHVibGljIGFzeW5jIHNlYXJjaENhcmRzKHNlYXJjaFRlcm06IHN0cmluZykge1xuXHRcdGNvbnN0IGZvbGRlciA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudEZvbGRlcigpO1xuXHRcdGlmICghZm9sZGVyKSByZXR1cm47XG5cblx0XHRjb25zdCBmaWxlcyA9IGZvbGRlci5jaGlsZHJlbi5maWx0ZXIoKGZpbGUpOiBmaWxlIGlzIFRGaWxlID0+IGZpbGUgaW5zdGFuY2VvZiBURmlsZSk7XG5cdFx0Y29uc3QgZmlsdGVyZWRGaWxlcyA9IGF3YWl0IHRoaXMuZmlsdGVyRmlsZXNCeUNvbnRlbnQoZmlsZXMsIHNlYXJjaFRlcm0pO1xuXG5cdFx0YXdhaXQgdGhpcy5kaXNwbGF5Q2FyZHMoZmlsdGVyZWRGaWxlcyk7XG5cdH1cblxuXHQvLyBGaWx0ZXJzIGZpbGVzIGJhc2VkIG9uIHRoZWlyIGJvZHkgb3IgbmFtZVxuXHRwcml2YXRlIGFzeW5jIGZpbHRlckZpbGVzQnlDb250ZW50KGZpbGVzOiBURmlsZVtdLCBzZWFyY2hUZXJtOiBzdHJpbmcpOiBQcm9taXNlPFRGaWxlW10+IHtcblx0XHRjb25zdCBsb3dlcmNhc2VTZWFyY2hUZXJtID0gc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpO1xuXHRcdGNvbnN0IGZpbHRlcmVkRmlsZXMgPSBbXTtcblx0XHRmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcblx0XHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcblx0XHRcdGlmIChmaWxlLmJhc2VuYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJjYXNlU2VhcmNoVGVybSkgfHxcblx0XHRcdFx0Y29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyY2FzZVNlYXJjaFRlcm0pKSB7XG5cdFx0XHRcdGZpbHRlcmVkRmlsZXMucHVzaChmaWxlKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGZpbHRlcmVkRmlsZXM7XG5cdH1cblxuXHQvLyBEaXNwbGF5cyBjYXJkcyBmb3IgYSBzcGVjaWZpYyBmb2xkZXJcblx0cHVibGljIGFzeW5jIGRpc3BsYXlDYXJkc0ZvckZvbGRlcihmb2xkZXI6IFRGb2xkZXIpIHtcblx0XHRjb25zdCBmaWxlcyA9IGZvbGRlci5jaGlsZHJlbi5maWx0ZXIoKGZpbGUpOiBmaWxlIGlzIFRGaWxlID0+IGZpbGUgaW5zdGFuY2VvZiBURmlsZSk7XG5cdFx0YXdhaXQgdGhpcy5kaXNwbGF5Q2FyZHMoZmlsZXMpO1xuXHR9XG5cblx0Ly8gU29ydHMgdGhlIGNhcmRzIGJhc2VkIG9uIGEgZ2l2ZW4gY3JpdGVyaW9uIGFuZCBvcmRlclxuXHRwdWJsaWMgYXN5bmMgc29ydENhcmRzKGNyaXRlcmlvbjogU29ydENyaXRlcmlvbiwgb3JkZXI6IFNvcnRPcmRlcikge1xuXHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNvcnRDcml0ZXJpb24gPSBjcml0ZXJpb247XG5cdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc29ydE9yZGVyID0gb3JkZXI7XG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0YXdhaXQgdGhpcy5yZWZyZXNoKCk7XG5cdH1cblxuXHQvLyBDb3BpZXMgdGhlIGxpbmsgdG8gYSBmaWxlIHRvIHRoZSBjbGlwYm9hcmRcblx0cHVibGljIGNvcHlMaW5rKGZpbGU6IFRGaWxlKSB7XG5cdFx0Y29uc3QgbGluayA9IHRoaXMucGx1Z2luLmFwcC5maWxlTWFuYWdlci5nZW5lcmF0ZU1hcmtkb3duTGluayhmaWxlLCAnJyk7XG5cdFx0bmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQobGluaykudGhlbigoKSA9PiB7XG5cdFx0XHRuZXcgTm90aWNlKHQoJ0xJTktfQ09QSUVEX1RPX0NMSVBCT0FSRCcpKTtcblx0XHR9KS5jYXRjaChlcnIgPT4ge1xuXHRcdFx0Y29uc29sZS5lcnJvcih0KCdGQUlMRURfVE9fQ09QWV9MSU5LJyksIGVycik7XG5cdFx0XHRuZXcgTm90aWNlKHQoJ0ZBSUxFRF9UT19DT1BZX0xJTksnKSk7XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBDb3BpZXMgdGhlIGNvbnRlbnQgb2YgYSBjYXJkIHRvIHRoZSBjbGlwYm9hcmRcblx0cHVibGljIGFzeW5jIGNvcHlDYXJkQ29udGVudChmaWxlOiBURmlsZSkge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cdFx0XHRjb25zdCB7IGNsZWFuQm9keSB9ID0gc2VwYXJhdGVGcm9udG1hdHRlckFuZEJvZHkoY29udGVudCk7XG5cdFx0XHRjb25zdCB0cnVuY2F0ZWRCb2R5ID0gdGhpcy50cnVuY2F0ZUJvZHkoY2xlYW5Cb2R5KTtcblx0XHRcdGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRydW5jYXRlZEJvZHkpO1xuXHRcdFx0bmV3IE5vdGljZSh0KCdDQVJEX0NPTlRFTlRfQ09QSUVEX1RPX0NMSVBCT0FSRCcpKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IodCgnRkFJTEVEX1RPX0NPUFlfQ0FSRF9DT05URU5UJyksIGVycik7XG5cdFx0XHRuZXcgTm90aWNlKHQoJ0ZBSUxFRF9UT19DT1BZX0NBUkRfQ09OVEVOVCcpKTtcblx0XHR9XG5cdH1cblxuXHQvLyBUcnVuY2F0ZXMgY2FyZCBib2R5IGlmIGl0J3MgbG9uZ2VyIHRoYW4gdGhlIGFsbG93ZWQgbWF4aW11bSBsZW5ndGhcblx0cHJpdmF0ZSB0cnVuY2F0ZUJvZHkoYm9keTogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmJvZHlMZW5ndGhMaW1pdCkge1xuXHRcdFx0cmV0dXJuIGJvZHk7XG5cdFx0fVxuXHRcdGNvbnN0IG1heExlbmd0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJvZHlMZW5ndGg7XG5cdFx0cmV0dXJuIGJvZHkubGVuZ3RoIDw9IG1heExlbmd0aCA/IGJvZHkgOiBgJHtib2R5LnNsaWNlKDAsIG1heExlbmd0aCl9Li4uYDtcblx0fVxuXG5cdC8vIENsZWFucyB1cCBldmVudCBsaXN0ZW5lcnMgd2hlbiB0aGUgY2FyZCBjb250YWluZXIgaXMgY2xvc2VkXG5cdG9uQ2xvc2UoKSB7XG5cdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vZmYoJ2FjdGl2ZS1sZWFmLWNoYW5nZScsIHRoaXMucGx1Z2luLnRyaWdnZXJSZWZyZXNoKTtcblx0XHR0aGlzLnBsdWdpbi5hcHAudmF1bHQub2ZmKCdtb2RpZnknLCB0aGlzLnBsdWdpbi50cmlnZ2VyUmVmcmVzaCk7XG5cdFx0aWYgKHRoaXMucmVzaXplT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMucmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHRcdH1cblx0fVxufVxuIiwgImltcG9ydCB7IE1lbnUsIFRGaWxlLCBNYXJrZG93blJlbmRlcmVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IENhcmROYXZpZ2F0b3JQbHVnaW4gZnJvbSAnbWFpbic7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnY29tbW9uL3R5cGVzJztcbmltcG9ydCB7IHNvcnRGaWxlcywgc2VwYXJhdGVGcm9udG1hdHRlckFuZEJvZHkgfSBmcm9tICdjb21tb24vdXRpbHMnO1xuaW1wb3J0IHsgdCB9IGZyb20gJ2kxOG5leHQnO1xuXG5leHBvcnQgY2xhc3MgQ2FyZE1ha2VyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4sXG4gICAgICAgIHByaXZhdGUgY29weUxpbmtDYWxsYmFjazogKGZpbGU6IFRGaWxlKSA9PiB2b2lkLFxuICAgICAgICBwcml2YXRlIGNvcHlDb250ZW50Q2FsbGJhY2s6IChmaWxlOiBURmlsZSkgPT4gdm9pZFxuICAgICkge31cblxuICAgIGFzeW5jIGdldENhcmRzRm9yQWN0aXZlRmlsZShhY3RpdmVGaWxlOiBURmlsZSk6IFByb21pc2U8Q2FyZFtdPiB7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGFjdGl2ZUZpbGUucGFyZW50O1xuICAgICAgICBpZiAoIWZvbGRlcikgcmV0dXJuIFtdO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZmlsZXMgPSBmb2xkZXIuY2hpbGRyZW4uZmlsdGVyKChmaWxlKTogZmlsZSBpcyBURmlsZSA9PiBmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZCcpO1xuICAgICAgICBjb25zdCBzb3J0ZWRGaWxlcyA9IHNvcnRGaWxlcyhcbiAgICAgICAgICAgIGZpbGVzLCBcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNvcnRDcml0ZXJpb24sIFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc29ydE9yZGVyXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChzb3J0ZWRGaWxlcy5tYXAoZmlsZSA9PiB0aGlzLmNyZWF0ZUNhcmQoZmlsZSkpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgY3JlYXRlQ2FyZChmaWxlOiBURmlsZSk6IFByb21pc2U8Q2FyZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xuICAgICAgICAgICAgY29uc3QgeyBjbGVhbkJvZHkgfSA9IHNlcGFyYXRlRnJvbnRtYXR0ZXJBbmRCb2R5KGNvbnRlbnQpO1xuICAgICAgICAgICAgY29uc3QgYm9keVdpdGhvdXRIZWFkZXIgPSB0aGlzLnJlbW92ZUZpcnN0SGVhZGVyKGNsZWFuQm9keSk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpbGUsXG4gICAgICAgICAgICAgICAgZmlsZU5hbWU6IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dGaWxlTmFtZSA/IGZpbGUuYmFzZW5hbWUgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgZmlyc3RIZWFkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dGaXJzdEhlYWRlciA/IHRoaXMuZmluZEZpcnN0SGVhZGVyKGNsZWFuQm9keSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgYm9keTogdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0JvZHkgPyB0aGlzLnRydW5jYXRlQm9keShib2R5V2l0aG91dEhlYWRlcikgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBjYXJkIGZvciBmaWxlICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVtb3ZlRmlyc3RIZWFkZXIoYm9keTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGJvZHkucmVwbGFjZSgvXiMrXFxzKyguKykkL20sICcnKS50cmltKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaW5kRmlyc3RIZWFkZXIoYm9keTogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBib2R5Lm1hdGNoKC9eIytcXHMrKC4rKSQvbSk7XG4gICAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdLnRyaW0oKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRydW5jYXRlQm9keShib2R5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmJvZHlMZW5ndGhMaW1pdCkgcmV0dXJuIGJvZHk7XG4gICAgICAgIGNvbnN0IG1heExlbmd0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJvZHlMZW5ndGg7XG4gICAgICAgIHJldHVybiBib2R5Lmxlbmd0aCA8PSBtYXhMZW5ndGggPyBib2R5IDogYCR7Ym9keS5zbGljZSgwLCBtYXhMZW5ndGgpfS4uLmA7XG4gICAgfVxuXG4gICAgY3JlYXRlQ2FyZEVsZW1lbnQoY2FyZDogQ2FyZCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NOYW1lID0gJ2NhcmQtbmF2aWdhdG9yLWNhcmQnO1xuICAgICAgICBjYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRJZCA9IGNhcmQuZmlsZS5wYXRoOyAvLyBBZGQgdW5pcXVlIGlkZW50aWZpZXJcblxuICAgICAgICB0aGlzLmFkZENhcmRDb250ZW50KGNhcmRFbGVtZW50LCBjYXJkKTtcbiAgICAgICAgdGhpcy5hZGRDYXJkSW50ZXJhY3Rpb25zKGNhcmRFbGVtZW50LCBjYXJkKTtcblxuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gICAgfVxuXG5cdHByaXZhdGUgYWRkQ2FyZENvbnRlbnQoY2FyZEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjYXJkOiBDYXJkKSB7XG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dGaWxlTmFtZSAmJiBjYXJkLmZpbGVOYW1lKSB7XG5cdFx0XHR0aGlzLmFkZEVsZW1lbnQoY2FyZEVsZW1lbnQsICdoMycsIGNhcmQuZmlsZU5hbWUsICdjYXJkLW5hdmlnYXRvci1maWxlbmFtZScsIHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVOYW1lRm9udFNpemUpO1xuXHRcdH1cblx0XG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dGaXJzdEhlYWRlciAmJiBjYXJkLmZpcnN0SGVhZGVyKSB7XG5cdFx0XHR0aGlzLmFkZEVsZW1lbnQoY2FyZEVsZW1lbnQsICdoNCcsIGNhcmQuZmlyc3RIZWFkZXIsICdjYXJkLW5hdmlnYXRvci1maXJzdC1oZWFkZXInLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maXJzdEhlYWRlckZvbnRTaXplKTtcblx0XHR9XG5cdFxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Qm9keSAmJiBjYXJkLmJvZHkpIHtcblx0XHRcdGNvbnN0IGNvbnRlbnRFbCA9IHRoaXMuYWRkRWxlbWVudChjYXJkRWxlbWVudCwgJ2RpdicsICcnLCAnY2FyZC1uYXZpZ2F0b3ItYm9keScsIHRoaXMucGx1Z2luLnNldHRpbmdzLmJvZHlGb250U2l6ZSk7XG5cdFx0XHRcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW5kZXJDb250ZW50QXNIdG1sKSB7XG5cdFx0XHRcdE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKFxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLmFwcCxcblx0XHRcdFx0XHRjYXJkLmJvZHksXG5cdFx0XHRcdFx0Y29udGVudEVsLFxuXHRcdFx0XHRcdGNhcmQuZmlsZS5wYXRoLFxuXHRcdFx0XHRcdHRoaXMucGx1Z2luXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb250ZW50RWwudGV4dENvbnRlbnQgPSBjYXJkLmJvZHk7XG5cdFx0XHRcdGNvbnRlbnRFbC5hZGRDbGFzcygnZWxsaXBzaXMnKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFkZEVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCwgdGFnOiAnZGl2JyB8ICdoMycgfCAnaDQnLCB0ZXh0OiBzdHJpbmcsIGNsYXNzTmFtZTogc3RyaW5nLCBmb250U2l6ZTogbnVtYmVyKTogSFRNTEVsZW1lbnQge1xuXHRcdGNvbnN0IGVsZW1lbnQgPSBwYXJlbnQuY3JlYXRlRWwodGFnLCB7IHRleHQsIGNsczogY2xhc3NOYW1lIH0pO1xuXHRcdGVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBgJHtmb250U2l6ZX1weGA7XG5cdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdH1cblxuICAgIHByaXZhdGUgYWRkQ2FyZEludGVyYWN0aW9ucyhjYXJkRWxlbWVudDogSFRNTEVsZW1lbnQsIGNhcmQ6IENhcmQpIHtcbiAgICAgICAgY2FyZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLm9wZW5GaWxlKGNhcmQuZmlsZSkpO1xuICAgICAgICB0aGlzLnNldHVwRHJhZ0FuZERyb3AoY2FyZEVsZW1lbnQsIGNhcmQpO1xuICAgICAgICB0aGlzLnNldHVwQ29udGV4dE1lbnUoY2FyZEVsZW1lbnQsIGNhcmQuZmlsZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXR1cERyYWdBbmREcm9wKGNhcmRFbGVtZW50OiBIVE1MRWxlbWVudCwgY2FyZDogQ2FyZCkge1xuICAgICAgICBjYXJkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScsICd0cnVlJyk7XG4gICAgICAgIGNhcmRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIChldmVudDogRHJhZ0V2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZGF0YVRyYW5zZmVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZHJhZ0NvbnRlbnQgPSB0aGlzLmdldERyYWdDb250ZW50KGNhcmQpO1xuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgZHJhZ0NvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoY2FyZEVsZW1lbnQsIDAsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldERyYWdDb250ZW50KGNhcmQ6IENhcmQpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHJhZ0Ryb3BDb250ZW50KSB7XG4gICAgICAgICAgICBsZXQgY29udGVudCA9ICcnO1xuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dGaWxlTmFtZSAmJiBjYXJkLmZpbGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgY29udGVudCArPSBgIyMgJHtjYXJkLmZpbGVOYW1lfVxcblxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ZpcnN0SGVhZGVyICYmIGNhcmQuZmlyc3RIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IGAjICR7Y2FyZC5maXJzdEhlYWRlcn1cXG5cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dCb2R5ICYmIGNhcmQuYm9keSkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYCR7Y2FyZC5ib2R5fVxcblxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29udGVudC50cmltKCkgfHwgdGhpcy5wbHVnaW4uYXBwLmZpbGVNYW5hZ2VyLmdlbmVyYXRlTWFya2Rvd25MaW5rKGNhcmQuZmlsZSwgJycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnBsdWdpbi5hcHAuZmlsZU1hbmFnZXIuZ2VuZXJhdGVNYXJrZG93bkxpbmsoY2FyZC5maWxlLCAnJyk7XG4gICAgfVxuXG5cdHByaXZhdGUgc2V0dXBDb250ZXh0TWVudShjYXJkRWxlbWVudDogSFRNTEVsZW1lbnQsIGZpbGU6IFRGaWxlKSB7XG5cdFx0Y2FyZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZTogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0Y29uc3QgbWVudSA9IG5ldyBNZW51KCk7XG5cdFxuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdmaWxlLW1lbnUnLCBtZW51LCBmaWxlLCAnbW9yZS1vcHRpb25zJyk7XG5cdFxuXHRcdFx0bWVudS5hZGRTZXBhcmF0b3IoKTtcblx0XG5cdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0aXRlbVxuXHRcdFx0XHRcdC5zZXRUaXRsZSh0KCdDT1BZX0FTX0xJTksnKSlcblx0XHRcdFx0XHQuc2V0SWNvbignbGluaycpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4gdGhpcy5jb3B5TGlua0NhbGxiYWNrKGZpbGUpKTtcblx0XHRcdH0pO1xuXHRcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0XHRpdGVtXG5cdFx0XHRcdFx0LnNldFRpdGxlKHQoJ0NPUFlfQ0FSRF9DT05URU5UJykpXG5cdFx0XHRcdFx0LnNldEljb24oJ2ZpbGUtdGV4dCcpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4gdGhpcy5jb3B5Q29udGVudENhbGxiYWNrKGZpbGUpKTtcblx0XHRcdH0pO1xuXHRcblx0XHRcdG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9KTtcblx0XHR9KTtcblx0fVxuXG4gICAgcHJpdmF0ZSBvcGVuRmlsZShmaWxlOiBURmlsZSkge1xuICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShmaWxlKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtpbXBvcnQgeyBTb3J0Q3JpdGVyaW9uLCBTb3J0T3JkZXIgfSBmcm9tICcuL3R5cGVzJztcblxuLyoqXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdXRpbGl0eSBmdW5jdGlvbnMgZm9yIGZpbGUgaGFuZGxpbmcsIHNvcnRpbmcsIGFuZCBudW1lcmljYWwgb3BlcmF0aW9ucy5cbiAqIFRoZXNlIGZ1bmN0aW9ucyBhcmUgdXNlZCB0aHJvdWdob3V0IHRoZSBDYXJkIE5hdmlnYXRvciBwbHVnaW4gdG8gcHJvY2VzcyBhbmQgbWFuaXB1bGF0ZSBkYXRhLlxuICovXG5cbi8qKlxuICogU2VwYXJhdGVzIHRoZSBmcm9udG1hdHRlciBmcm9tIHRoZSBib2R5IG9mIGEgZmlsZS5cbiAqIEZyb250bWF0dGVyIGlzIHRoZSBtZXRhZGF0YSBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgTWFya2Rvd24gZmlsZSwgZW5jbG9zZWQgaW4gJy0tLScuXG4gKiBAcGFyYW0gYm9keSAtIFRoZSBmdWxsIGJvZHkgb2YgYSBmaWxlLCBpbmNsdWRpbmcgZnJvbnRtYXR0ZXIuXG4gKiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgZnJvbnRtYXR0ZXIgKGlmIGFueSkgYW5kIHRoZSBjbGVhbiBib2R5LlxuICovXG5jb25zdCBmcm9udG1hdHRlclJlZ2V4ID0gL14tLS1cXHMqXFxuKFtcXHNcXFNdKj8pXFxuLS0tXFxzKlxcbi87XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXBhcmF0ZUZyb250bWF0dGVyQW5kQm9keShib2R5OiBzdHJpbmcpOiB7IGZyb250bWF0dGVyOiBzdHJpbmcgfCBudWxsLCBjbGVhbkJvZHk6IHN0cmluZyB9IHtcbiAgICBjb25zdCBtYXRjaCA9IGJvZHkubWF0Y2goZnJvbnRtYXR0ZXJSZWdleCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmcm9udG1hdHRlcjogbWF0Y2hbMV0sXG4gICAgICAgICAgICBjbGVhbkJvZHk6IGJvZHkuc2xpY2UobWF0Y2hbMF0ubGVuZ3RoKS50cmltKClcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgZnJvbnRtYXR0ZXI6IG51bGwsIGNsZWFuQm9keTogYm9keS50cmltKCkgfTtcbn1cblxuLyoqXG4gKiBTb3J0cyBhbiBhcnJheSBvZiBmaWxlcyBiYXNlZCBvbiB0aGUgc3BlY2lmaWVkIGNyaXRlcmlvbiBhbmQgb3JkZXIuXG4gKiBUaGlzIGZ1bmN0aW9uIGNyZWF0ZXMgYSBuZXcgc29ydGVkIGFycmF5IGFuZCBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsLlxuICogQHBhcmFtIGZpbGVzIC0gVGhlIGFycmF5IG9mIGZpbGVzIHRvIHNvcnQuXG4gKiBAcGFyYW0gY3JpdGVyaW9uIC0gVGhlIGNyaXRlcmlvbiB0byBzb3J0IGJ5ICgnZmlsZU5hbWUnLCAnbGFzdE1vZGlmaWVkJywgb3IgJ2NyZWF0ZWQnKS5cbiAqIEBwYXJhbSBvcmRlciAtIFRoZSBzb3J0IG9yZGVyICgnYXNjJyBmb3IgYXNjZW5kaW5nLCAnZGVzYycgZm9yIGRlc2NlbmRpbmcpLlxuICogQHJldHVybnMgVGhlIHNvcnRlZCBhcnJheSBvZiBmaWxlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvcnRGaWxlcyhmaWxlczogVEZpbGVbXSwgY3JpdGVyaW9uOiBTb3J0Q3JpdGVyaW9uLCBvcmRlcjogU29ydE9yZGVyKTogVEZpbGVbXSB7XG4gICAgcmV0dXJuIFsuLi5maWxlc10uc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBsZXQgY29tcGFyaXNvbiA9IDA7XG4gICAgICAgIHN3aXRjaCAoY3JpdGVyaW9uKSB7XG4gICAgICAgICAgICBjYXNlICdmaWxlTmFtZSc6XG4gICAgICAgICAgICAgICAgLy8gVXNlIGxvY2FsZUNvbXBhcmUgZm9yIG5hdHVyYWwgc29ydCBvcmRlciBvZiBmaWxlIG5hbWVzXG4gICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IGEuYmFzZW5hbWUubG9jYWxlQ29tcGFyZShiLmJhc2VuYW1lLCB1bmRlZmluZWQsIHsgbnVtZXJpYzogdHJ1ZSwgc2Vuc2l0aXZpdHk6ICdiYXNlJyB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2xhc3RNb2RpZmllZCc6XG4gICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IGEuc3RhdC5tdGltZSAtIGIuc3RhdC5tdGltZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2NyZWF0ZWQnOlxuICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSBhLnN0YXQuY3RpbWUgLSBiLnN0YXQuY3RpbWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9yZGVyID09PSAnYXNjJyA/IGNvbXBhcmlzb24gOiAtY29tcGFyaXNvbjtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBTYWZlbHkgcGFyc2VzIGEgc3RyaW5nIGludG8gYSBmbG9hdCBudW1iZXIsIHdpdGggYSBmYWxsYmFjayB2YWx1ZSBpbiBjYXNlIG9mIGZhaWx1cmUuXG4gKiBUaGlzIGlzIHVzZWZ1bCBmb3IgaGFuZGxpbmcgcG90ZW50aWFsbHkgaW52YWxpZCB1c2VyIGlucHV0IG9yIGRhdGEuXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgc3RyaW5nIHRvIHBhcnNlLlxuICogQHBhcmFtIGZhbGxiYWNrIC0gVGhlIGZhbGxiYWNrIHZhbHVlIHRvIHJldHVybiBpZiBwYXJzaW5nIGZhaWxzIChkZWZhdWx0IGlzIDApLlxuICogQHJldHVybnMgVGhlIHBhcnNlZCBmbG9hdCB2YWx1ZSwgb3IgdGhlIGZhbGxiYWNrIGlmIHBhcnNpbmcgZmFpbHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYWZlbHlQYXJzZUZsb2F0KHZhbHVlOiBzdHJpbmcsIGZhbGxiYWNrID0gMCk6IG51bWJlciB7XG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgcmV0dXJuIGlzTmFOKHBhcnNlZCkgPyBmYWxsYmFjayA6IHBhcnNlZDtcbn1cblxuLyoqXG4gKiBDbGFtcHMgYSBudW1iZXIgYmV0d2VlbiBhIG1pbmltdW0gYW5kIG1heGltdW0gdmFsdWUuXG4gKiBUaGlzIGlzIHVzZWZ1bCBmb3IgZW5zdXJpbmcgYSB2YWx1ZSBzdGF5cyB3aXRoaW4gYSBzcGVjaWZpYyByYW5nZS5cbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBudW1iZXIgdG8gY2xhbXAuXG4gKiBAcGFyYW0gbWluIC0gVGhlIG1pbmltdW0gYWxsb3dhYmxlIHZhbHVlLlxuICogQHBhcmFtIG1heCAtIFRoZSBtYXhpbXVtIGFsbG93YWJsZSB2YWx1ZS5cbiAqIEByZXR1cm5zIFRoZSBjbGFtcGVkIG51bWJlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbHVlLCBtaW4pLCBtYXgpO1xufVxuIiwgImltcG9ydCB7IExheW91dFN0cmF0ZWd5LCBDYXJkUG9zaXRpb24gfSBmcm9tICcuL2xheW91dFN0cmF0ZWd5JztcbmltcG9ydCB7IENhcmQgfSBmcm9tICcuLi8uLi9jb21tb24vdHlwZXMnO1xuXG4vLyBDbGFzcyBpbXBsZW1lbnRpbmcgdGhlIExpc3QgbGF5b3V0IHN0cmF0ZWd5IGZvciBjYXJkIGFycmFuZ2VtZW50XG5leHBvcnQgY2xhc3MgTGlzdExheW91dCBpbXBsZW1lbnRzIExheW91dFN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGlzVmVydGljYWw6IGJvb2xlYW4sIHByaXZhdGUgY2FyZEdhcDogbnVtYmVyLCBwcml2YXRlIGFsaWduQ2FyZEhlaWdodDogYm9vbGVhbikge31cblxuICAgIC8vIEFycmFuZ2UgY2FyZHMgaW4gYSBsaXN0IGxheW91dCAoZWl0aGVyIHZlcnRpY2FsIG9yIGhvcml6b250YWwpXG4gICAgYXJyYW5nZShjYXJkczogQ2FyZFtdLCBjb250YWluZXJXaWR0aDogbnVtYmVyLCBjb250YWluZXJIZWlnaHQ6IG51bWJlciwgY2FyZHNQZXJWaWV3OiBudW1iZXIpOiBDYXJkUG9zaXRpb25bXSB7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uczogQ2FyZFBvc2l0aW9uW10gPSBbXTtcbiAgICAgICAgbGV0IGN1cnJlbnRQb3NpdGlvbiA9IDA7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIGNhcmQgc2l6ZSBiYXNlZCBvbiBjb250YWluZXIgZGltZW5zaW9ucyBhbmQgbnVtYmVyIG9mIGNhcmRzIHBlciB2aWV3XG4gICAgICAgIGNvbnN0IGNhcmRTaXplID0gdGhpcy5pc1ZlcnRpY2FsXG4gICAgICAgICAgICA/IChjb250YWluZXJIZWlnaHQgLSAoY2FyZHNQZXJWaWV3IC0gMSkgKiB0aGlzLmNhcmRHYXApIC8gY2FyZHNQZXJWaWV3XG4gICAgICAgICAgICA6IChjb250YWluZXJXaWR0aCAtIChjYXJkc1BlclZpZXcgLSAxKSAqIHRoaXMuY2FyZEdhcCkgLyBjYXJkc1BlclZpZXc7XG5cbiAgICAgICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcG9zaXRpb246IENhcmRQb3NpdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBjYXJkLFxuICAgICAgICAgICAgICAgIHg6IHRoaXMuaXNWZXJ0aWNhbCA/IDAgOiBjdXJyZW50UG9zaXRpb24sXG4gICAgICAgICAgICAgICAgeTogdGhpcy5pc1ZlcnRpY2FsID8gY3VycmVudFBvc2l0aW9uIDogMCxcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5pc1ZlcnRpY2FsID8gY29udGFpbmVyV2lkdGggOiBjYXJkU2l6ZSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaXNWZXJ0aWNhbCA/IGNhcmRTaXplIDogY29udGFpbmVySGVpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcG9zaXRpb25zLnB1c2gocG9zaXRpb24pO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgcG9zaXRpb24gZm9yIHRoZSBuZXh0IGNhcmRcbiAgICAgICAgICAgIGN1cnJlbnRQb3NpdGlvbiArPSBjYXJkU2l6ZSArIHRoaXMuY2FyZEdhcDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHBvc2l0aW9ucztcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIG51bWJlciBvZiBjb2x1bW5zIGluIHRoZSBsYXlvdXQgKGFsd2F5cyAxIGZvciBsaXN0IGxheW91dClcblx0Z2V0Q29sdW1uc0NvdW50KCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIDE7XG5cdH1cblxuICAgIC8vIEdldCB0aGUgc2Nyb2xsIGRpcmVjdGlvbiBiYXNlZCBvbiBsYXlvdXQgb3JpZW50YXRpb25cbiAgICBnZXRTY3JvbGxEaXJlY3Rpb24oKTogJ3ZlcnRpY2FsJyB8ICdob3Jpem9udGFsJyB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzVmVydGljYWwgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnO1xuICAgIH1cblxuICAgIC8vIEdldCB0aGUgY29udGFpbmVyIHN0eWxlIGZvciB0aGUgbGlzdCBsYXlvdXRcbiAgICBnZXRDb250YWluZXJTdHlsZSgpOiBQYXJ0aWFsPENTU1N0eWxlRGVjbGFyYXRpb24+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgIGZsZXhEaXJlY3Rpb246IHRoaXMuaXNWZXJ0aWNhbCA/ICdjb2x1bW4nIDogJ3JvdycsXG4gICAgICAgICAgICBnYXA6IGAke3RoaXMuY2FyZEdhcH1weGAsXG4gICAgICAgICAgICBhbGlnbkl0ZW1zOiAnc3RyZXRjaCcsXG4gICAgICAgICAgICBvdmVyZmxvdzogdGhpcy5pc1ZlcnRpY2FsID8gJ2F1dG8gaGlkZGVuJyA6ICdoaWRkZW4gYXV0bycsXG4gICAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgICAgIHdpZHRoOiAnY2FsYygxMDAlICsgdmFyKC0tc2l6ZS00LTMpKScsXG5cdFx0XHRwYWRkaW5nUmlnaHQ6ICd2YXIoLS1zaXplLTQtMyknXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBjYXJkIHN0eWxlIGZvciB0aGUgbGlzdCBsYXlvdXRcbiAgICBnZXRDYXJkU3R5bGUoKTogUGFydGlhbDxDU1NTdHlsZURlY2xhcmF0aW9uPiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmbGV4OiB0aGlzLmFsaWduQ2FyZEhlaWdodCA/ICcwIDAgYXV0bycgOiAnMSAwIGF1dG8nLFxuICAgICAgICAgICAgbWluSGVpZ2h0OiB0aGlzLmlzVmVydGljYWwgPyAnMCcgOiAnMTAwJScsXG4gICAgICAgICAgICBtaW5XaWR0aDogdGhpcy5pc1ZlcnRpY2FsID8gJzEwMCUnIDogJzAnXG4gICAgICAgIH07XG4gICAgfVxufVxuIiwgImltcG9ydCB7IExheW91dFN0cmF0ZWd5LCBDYXJkUG9zaXRpb24gfSBmcm9tICcuL2xheW91dFN0cmF0ZWd5JztcbmltcG9ydCB7IENhcmQsIENhcmROYXZpZ2F0b3JTZXR0aW5ncyB9IGZyb20gJy4uLy4uL2NvbW1vbi90eXBlcyc7XG5cbi8vIENsYXNzIGltcGxlbWVudGluZyB0aGUgR3JpZCBsYXlvdXQgc3RyYXRlZ3kgZm9yIGNhcmQgYXJyYW5nZW1lbnRcbmV4cG9ydCBjbGFzcyBHcmlkTGF5b3V0IGltcGxlbWVudHMgTGF5b3V0U3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY29sdW1uczogbnVtYmVyLCBwcml2YXRlIGNhcmRHYXA6IG51bWJlciwgcHJpdmF0ZSBzZXR0aW5nczogQ2FyZE5hdmlnYXRvclNldHRpbmdzKSB7fVxuXG4gICAgLy8gQXJyYW5nZSBjYXJkcyBpbiBhIGdyaWQgbGF5b3V0XG5cdGFycmFuZ2UoY2FyZHM6IENhcmRbXSwgY29udGFpbmVyV2lkdGg6IG51bWJlciwgX2NvbnRhaW5lckhlaWdodDogbnVtYmVyLCBfY2FyZHNQZXJWaWV3OiBudW1iZXIpOiBDYXJkUG9zaXRpb25bXSB7XG5cdFx0Y29uc3QgcG9zaXRpb25zOiBDYXJkUG9zaXRpb25bXSA9IFtdO1xuXHRcdGNvbnN0IHRvdGFsR2FwV2lkdGggPSB0aGlzLmNhcmRHYXAgKiAodGhpcy5jb2x1bW5zIC0gMSk7XG5cdFx0Y29uc3QgY2FyZFdpZHRoID0gKGNvbnRhaW5lcldpZHRoIC0gdG90YWxHYXBXaWR0aCkgLyB0aGlzLmNvbHVtbnM7XG5cdFx0Y29uc3QgY2FyZEhlaWdodCA9IHRoaXMuc2V0dGluZ3MuZ3JpZENhcmRIZWlnaHQ7XG5cbiAgICAgICAgY2FyZHMuZm9yRWFjaCgoY2FyZCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbiA9IGluZGV4ICUgdGhpcy5jb2x1bW5zO1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gTWF0aC5mbG9vcihpbmRleCAvIHRoaXMuY29sdW1ucyk7XG5cbiAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICBjYXJkLFxuICAgICAgICAgICAgICAgIHg6IGNvbHVtbiAqIChjYXJkV2lkdGggKyB0aGlzLmNhcmRHYXApLFxuICAgICAgICAgICAgICAgIHk6IHJvdyAqIChjYXJkSGVpZ2h0ICsgdGhpcy5jYXJkR2FwKSxcbiAgICAgICAgICAgICAgICB3aWR0aDogY2FyZFdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogY2FyZEhlaWdodFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwb3NpdGlvbnM7XG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBudW1iZXIgb2YgY29sdW1ucyBpbiB0aGUgZ3JpZFxuICAgIGdldENvbHVtbnNDb3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2x1bW5zO1xuICAgIH1cblxuICAgIC8vIEdldCB0aGUgc2Nyb2xsIGRpcmVjdGlvbiBmb3IgdGhlIGdyaWQgbGF5b3V0IChhbHdheXMgdmVydGljYWwpXG4gICAgZ2V0U2Nyb2xsRGlyZWN0aW9uKCk6ICd2ZXJ0aWNhbCcgfCAnaG9yaXpvbnRhbCcge1xuICAgICAgICByZXR1cm4gJ3ZlcnRpY2FsJztcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgTGF5b3V0U3RyYXRlZ3ksIENhcmRQb3NpdGlvbiB9IGZyb20gJy4vbGF5b3V0U3RyYXRlZ3knO1xuaW1wb3J0IHsgQ2FyZCwgQ2FyZE5hdmlnYXRvclNldHRpbmdzIH0gZnJvbSAnLi4vLi4vY29tbW9uL3R5cGVzJztcbmltcG9ydCB7IENhcmRNYWtlciB9IGZyb20gJy4uL2NhcmRDb250YWluZXIvY2FyZE1ha2VyJztcblxuZXhwb3J0IGNsYXNzIE1hc29ucnlMYXlvdXQgaW1wbGVtZW50cyBMYXlvdXRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBjb2x1bW5FbGVtZW50czogSFRNTEVsZW1lbnRbXSA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29sdW1uczogbnVtYmVyLFxuICAgICAgICBwcml2YXRlIGNhcmRHYXA6IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSBzZXR0aW5nczogQ2FyZE5hdmlnYXRvclNldHRpbmdzLFxuICAgICAgICBwcml2YXRlIGNhcmRNYWtlcjogQ2FyZE1ha2VyXG4gICAgKSB7XG4gICAgICAgIGlmIChjb2x1bW5zIDw9IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIG51bWJlciBvZiBjb2x1bW5zIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldENvbnRhaW5lcihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLnNldHVwQ29udGFpbmVyKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXR1cENvbnRhaW5lcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc05hbWUgPSAnbWFzb25yeS1sYXlvdXQnO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jb2x1bW4tY291bnQnLCB0aGlzLmNvbHVtbnMudG9TdHJpbmcoKSk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KCctLWNhcmQtZ2FwJywgYCR7dGhpcy5jYXJkR2FwfXB4YCk7XG5cbiAgICAgICAgdGhpcy5jb2x1bW5FbGVtZW50cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1uczsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNvbHVtbi5jbGFzc05hbWUgPSAnbWFzb25yeS1jb2x1bW4nO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoY29sdW1uKTtcbiAgICAgICAgICAgIHRoaXMuY29sdW1uRWxlbWVudHMucHVzaChjb2x1bW4pO1xuICAgICAgICB9XG4gICAgfVxuXG5cdGFycmFuZ2UoY2FyZHM6IENhcmRbXSwgX2NvbnRhaW5lcldpZHRoOiBudW1iZXIsIF9jb250YWluZXJIZWlnaHQ6IG51bWJlciwgX2NhcmRzUGVyVmlldzogbnVtYmVyKTogQ2FyZFBvc2l0aW9uW10ge1xuXHRcdGlmICghdGhpcy5jb250YWluZXIpIHtcblx0XHRcdGNvbnNvbGUud2FybignQ29udGFpbmVyIGlzIG5vdCBzZXQuIFBsZWFzZSBjYWxsIHNldENvbnRhaW5lciBiZWZvcmUgYXJyYW5nZS4nKTtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cbiAgICAgICAgdGhpcy5zZXR1cENvbnRhaW5lcigpOyAvLyBFbnN1cmUgY29udGFpbmVyIGlzIHNldCB1cCBjb3JyZWN0bHlcblxuICAgICAgICBjb25zdCBjYXJkUG9zaXRpb25zOiBDYXJkUG9zaXRpb25bXSA9IFtdO1xuICAgICAgICBjb25zdCBjb250YWluZXJSZWN0ID0gdGhpcy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgLy8gU3RvcmUgZm9jdXNlZCBjYXJkcyBiZWZvcmUgY2xlYXJpbmcgdGhlIGNvbnRhaW5lclxuICAgICAgICBjb25zdCBmb2N1c2VkQ2FyZHMgPSBuZXcgU2V0KEFycmF5LmZyb20odGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmNhcmQtbmF2aWdhdG9yLWZvY3VzZWQnKSlcbiAgICAgICAgICAgIC5tYXAoZWwgPT4gKGVsIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LmNhcmRJZCkpO1xuXG4gICAgICAgIC8vIENsZWFyIGV4aXN0aW5nIGNhcmRzXG4gICAgICAgIHRoaXMuY29sdW1uRWxlbWVudHMuZm9yRWFjaChjb2x1bW4gPT4gY29sdW1uLmlubmVySFRNTCA9ICcnKTtcblxuICAgICAgICBjYXJkcy5mb3JFYWNoKChjYXJkLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29sdW1uSW5kZXggPSBpbmRleCAlIHRoaXMuY29sdW1ucztcbiAgICAgICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gdGhpcy5jYXJkTWFrZXIuY3JlYXRlQ2FyZEVsZW1lbnQoY2FyZCk7XG4gICAgICAgICAgICBjYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtYXNvbnJ5LWNhcmQnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVzdG9yZSB0aGUgZm9jdXNlZCBzdGF0ZSBpZiBpdCBleGlzdGVkXG4gICAgICAgICAgICBpZiAoZm9jdXNlZENhcmRzLmhhcyhjYXJkLmZpbGUucGF0aCkpIHtcbiAgICAgICAgICAgICAgICBjYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjYXJkLW5hdmlnYXRvci1mb2N1c2VkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuY29sdW1uRWxlbWVudHNbY29sdW1uSW5kZXhdLmFwcGVuZENoaWxkKGNhcmRFbGVtZW50KTtcblxuICAgICAgICAgICAgY29uc3QgcmVjdCA9IGNhcmRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgY2FyZFBvc2l0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICBjYXJkLFxuICAgICAgICAgICAgICAgIHg6IHJlY3QubGVmdCAtIGNvbnRhaW5lclJlY3QubGVmdCxcbiAgICAgICAgICAgICAgICB5OiByZWN0LnRvcCAtIGNvbnRhaW5lclJlY3QudG9wLFxuICAgICAgICAgICAgICAgIHdpZHRoOiByZWN0LndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogcmVjdC5oZWlnaHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY2FyZFBvc2l0aW9ucztcbiAgICB9XG5cbiAgICBnZXRDb2x1bW5zQ291bnQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1ucztcbiAgICB9XG5cbiAgICBnZXRTY3JvbGxEaXJlY3Rpb24oKTogJ3ZlcnRpY2FsJyB8ICdob3Jpem9udGFsJyB7XG4gICAgICAgIHJldHVybiAndmVydGljYWwnO1xuICAgIH1cblxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIC8vIENsZWFuIHVwIGlmIG5lY2Vzc2FyeVxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG51bGw7XG4gICAgICAgIHRoaXMuY29sdW1uRWxlbWVudHMgPSBbXTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgTWVudSwgTWVudUl0ZW0sIGRlYm91bmNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IENhcmROYXZpZ2F0b3JQbHVnaW4gZnJvbSAnbWFpbic7XG5pbXBvcnQgeyBDYXJkQ29udGFpbmVyIH0gZnJvbSAnLi4vdWkvY2FyZENvbnRhaW5lci9jYXJkQ29udGFpbmVyJztcbmltcG9ydCB7IExheW91dFN0cmF0ZWd5IH0gZnJvbSAndWkvbGF5b3V0cy9sYXlvdXRTdHJhdGVneSc7XG5pbXBvcnQgeyBHcmlkTGF5b3V0IH0gZnJvbSAndWkvbGF5b3V0cy9ncmlkTGF5b3V0JztcbmltcG9ydCB7IE1hc29ucnlMYXlvdXQgfSBmcm9tICd1aS9sYXlvdXRzL21hc29ucnlMYXlvdXQnO1xuaW1wb3J0IHsgdCB9IGZyb20gJ2kxOG5leHQnO1xuXG4vLyBLZXlib2FyZE5hdmlnYXRvciBjbGFzcyB0byBoYW5kbGUga2V5Ym9hcmQgbmF2aWdhdGlvbiBmb3IgdGhlIGNhcmQgY29udGFpbmVyXG5leHBvcnQgY2xhc3MgS2V5Ym9hcmROYXZpZ2F0b3Ige1xuICAgIHByaXZhdGUgZm9jdXNlZENhcmRJbmRleDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBwcmV2aW91c0ZvY3VzZWRDYXJkSW5kZXg6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgaXNGb2N1c2VkID0gZmFsc2U7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4sXG5cdFx0cHJpdmF0ZSBjYXJkQ29udGFpbmVyOiBDYXJkQ29udGFpbmVyLFxuXHRcdHByaXZhdGUgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50XG5cdCkge1xuXHRcdHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcblx0XHR0aGlzLnNldHVwS2V5Ym9hcmRFdmVudHMoKTtcblx0fVxuXG4gICAgLy8gU2V0IHVwIGtleWJvYXJkIGV2ZW50IGxpc3RlbmVyc1xuICAgIHByaXZhdGUgc2V0dXBLZXlib2FyZEV2ZW50cygpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlEb3duKTtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5oYW5kbGVCbHVyKTtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUga2V5Ym9hcmQgZXZlbnQgbGlzdGVuZXJzXG5cdHB1YmxpYyBjbGVhbnVwKCkge1xuXHRcdHRoaXMuY29udGFpbmVyRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bik7XG5cdFx0dGhpcy5jb250YWluZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5oYW5kbGVCbHVyKTtcblx0XHR0aGlzLnVwZGF0ZUZvY3VzZWRDYXJkLmNhbmNlbCgpO1xuXHR9XG5cbiAgICAvLyBIYW5kbGUga2V5ZG93biBldmVudHMgZm9yIG5hdmlnYXRpb25cbiAgICBwcml2YXRlIGhhbmRsZUtleURvd24gPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuaXNGb2N1c2VkKSByZXR1cm47XG5cbiAgICAgICAgY29uc3Qga2V5SGFuZGxlcnM6IFJlY29yZDxzdHJpbmcsICgpID0+IHZvaWQ+ID0ge1xuICAgICAgICAgICAgQXJyb3dMZWZ0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUZvY3VzKDAsIC0xKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBBcnJvd1JpZ2h0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUZvY3VzKDAsIDEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEFycm93VXA6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlRm9jdXMoLTEsIDApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEFycm93RG93bjogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVGb2N1cygxLCAwKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBQYWdlVXA6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlRm9jdXNQYWdlKC0xKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBQYWdlRG93bjogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVGb2N1c1BhZ2UoMSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgSG9tZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVGb2N1c1RvU3RhcnQoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBFbmQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlRm9jdXNUb0VuZCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIEVudGVyOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMub3BlbkZvY3VzZWRDYXJkKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgQ29udGV4dE1lbnU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuQ29udGV4dE1lbnUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGUubWV0YUtleSAmJiBlLmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5Db250ZXh0TWVudSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaGFuZGxlciA9IGtleUhhbmRsZXJzW2Uua2V5XTtcbiAgICAgICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgICAgICAgIGhhbmRsZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgYmx1ciBldmVudFxuICAgIHByaXZhdGUgaGFuZGxlQmx1ciA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy51cGRhdGVGb2N1c2VkQ2FyZCgpO1xuICAgIH07XG5cbiAgICAvLyBGb2N1cyB0aGUgbmF2aWdhdG9yXG5cdHB1YmxpYyBmb2N1c05hdmlnYXRvcigpIHtcblx0XHRpZiAoIXRoaXMuY29udGFpbmVyRWwpIHJldHVybjtcblx0XG5cdFx0dGhpcy5jb250YWluZXJFbC50YWJJbmRleCA9IC0xO1xuXHRcdHRoaXMuY29udGFpbmVyRWwuZm9jdXMoKTtcblx0XHR0aGlzLmlzRm9jdXNlZCA9IHRydWU7XG5cdFxuXHRcdC8vIFx1RDU2RFx1QzBDMSBcdUQ2NUNcdUMxMzEgXHVDRTc0XHVCNERDXHVCOTdDIFx1Q0MzRVx1QjNDNFx1Qjg1RCBcdUMyMThcdUM4MTVcblx0XHRjb25zdCBhY3RpdmVDYXJkSW5kZXggPSB0aGlzLmZpbmRBY3RpdmVDYXJkSW5kZXgoKTtcblx0XHRpZiAoYWN0aXZlQ2FyZEluZGV4ICE9PSAtMSkge1xuXHRcdFx0dGhpcy5mb2N1c2VkQ2FyZEluZGV4ID0gdGhpcy5lbnN1cmVWYWxpZEluZGV4KGFjdGl2ZUNhcmRJbmRleCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGZpcnN0VmlzaWJsZUNhcmRJbmRleCA9IHRoaXMuZmluZEZpcnN0VmlzaWJsZUNhcmRJbmRleCgpO1xuXHRcdFx0aWYgKGZpcnN0VmlzaWJsZUNhcmRJbmRleCAhPT0gbnVsbCkge1xuXHRcdFx0XHR0aGlzLmZvY3VzZWRDYXJkSW5kZXggPSB0aGlzLmVuc3VyZVZhbGlkSW5kZXgoZmlyc3RWaXNpYmxlQ2FyZEluZGV4KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuZm9jdXNlZENhcmRJbmRleCA9IHRoaXMuZW5zdXJlVmFsaWRJbmRleCgwKTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdHRoaXMudXBkYXRlRm9jdXNlZENhcmQoKTtcblx0XHR0aGlzLnNjcm9sbFRvRm9jdXNlZENhcmQodHJ1ZSk7IC8vIFx1RDNFQ1x1Q0VFNFx1QzJBNFx1QjQxQyBcdUNFNzRcdUI0RENcdUI4NUMgXHVDMkE0XHVEMDZDXHVCODY0XG5cdH1cblxuICAgIC8vIEJsdXIgdGhlIG5hdmlnYXRvclxuICAgIHB1YmxpYyBibHVyTmF2aWdhdG9yKCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmJsdXIoKTtcbiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mb2N1c2VkQ2FyZEluZGV4ID0gbnVsbDtcbiAgICAgICAgdGhpcy51cGRhdGVGb2N1c2VkQ2FyZCgpO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSBuZXcgaW5kZXggZm9yIGdyaWQgbGF5b3V0XG5cdHByaXZhdGUgY2FsY3VsYXRlR3JpZEluZGV4KHJvd0RlbHRhOiBudW1iZXIsIGNvbERlbHRhOiBudW1iZXIsIHRvdGFsQ2FyZHM6IG51bWJlcik6IG51bWJlciB7XG5cdFx0Y29uc3QgbGF5b3V0U3RyYXRlZ3kgPSB0aGlzLmNhcmRDb250YWluZXIuZ2V0TGF5b3V0U3RyYXRlZ3koKTtcblx0XHRpZiAoIShsYXlvdXRTdHJhdGVneSBpbnN0YW5jZW9mIEdyaWRMYXlvdXQgfHwgbGF5b3V0U3RyYXRlZ3kgaW5zdGFuY2VvZiBNYXNvbnJ5TGF5b3V0KSkge1xuXHRcdFx0Y29uc29sZS53YXJuKCdUaGUgbGF5b3V0IHN0cmF0ZWd5IGlzIHVuZXhwZWN0ZWQuJyk7XG5cdFx0XHRyZXR1cm4gdGhpcy5mb2N1c2VkQ2FyZEluZGV4ID8/IDA7XG5cdFx0fVxuICAgICAgICBjb25zdCBjb2x1bW5zID0gbGF5b3V0U3RyYXRlZ3kuZ2V0Q29sdW1uc0NvdW50KCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRSb3cgPSBNYXRoLmZsb29yKCh0aGlzLmZvY3VzZWRDYXJkSW5kZXggPz8gMCkgLyBjb2x1bW5zKTtcbiAgICAgICAgY29uc3QgY3VycmVudENvbCA9ICh0aGlzLmZvY3VzZWRDYXJkSW5kZXggPz8gMCkgJSBjb2x1bW5zO1xuXG4gICAgICAgIGxldCBuZXdSb3cgPSBjdXJyZW50Um93ICsgcm93RGVsdGE7XG4gICAgICAgIGxldCBuZXdDb2wgPSBjdXJyZW50Q29sICsgY29sRGVsdGE7XG5cbiAgICAgICAgaWYgKG5ld0NvbCA8IDApIHtcbiAgICAgICAgICAgIG5ld1Jvdy0tO1xuICAgICAgICAgICAgbmV3Q29sID0gY29sdW1ucyAtIDE7XG4gICAgICAgIH0gZWxzZSBpZiAobmV3Q29sID49IGNvbHVtbnMpIHtcbiAgICAgICAgICAgIG5ld1JvdysrO1xuICAgICAgICAgICAgbmV3Q29sID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5ld0luZGV4ID0gbmV3Um93ICogY29sdW1ucyArIG5ld0NvbDtcbiAgICAgICAgcmV0dXJuIG5ld0luZGV4ID49IDAgJiYgbmV3SW5kZXggPCB0b3RhbENhcmRzID8gbmV3SW5kZXggOiB0aGlzLmZvY3VzZWRDYXJkSW5kZXggPz8gMDtcbiAgICB9XG5cbiAgICAvLyBDYWxjdWxhdGUgbmV3IGluZGV4IGZvciBsaXN0IGxheW91dFxuICAgIHByaXZhdGUgY2FsY3VsYXRlTGlzdEluZGV4KHJvd0RlbHRhOiBudW1iZXIsIGNvbERlbHRhOiBudW1iZXIsIHRvdGFsQ2FyZHM6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IG5ld0luZGV4ID0gKHRoaXMuZm9jdXNlZENhcmRJbmRleCA/PyAwKSArIHJvd0RlbHRhICsgY29sRGVsdGE7XG4gICAgICAgIHJldHVybiBuZXdJbmRleCA+PSAwICYmIG5ld0luZGV4IDwgdG90YWxDYXJkcyA/IG5ld0luZGV4IDogdGhpcy5mb2N1c2VkQ2FyZEluZGV4ID8/IDA7XG4gICAgfVxuXG5cdHByaXZhdGUgZW5zdXJlVmFsaWRJbmRleChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcblx0XHRjb25zdCB0b3RhbENhcmRzID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlbi5sZW5ndGg7XG5cdFx0cmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKGluZGV4LCB0b3RhbENhcmRzIC0gMSkpO1xuXHR9XG5cblx0Ly8gTW92ZSBmb2N1cyBiYXNlZCBvbiByb3cgYW5kIGNvbHVtbiBkZWx0YXNcblx0cHJpdmF0ZSBtb3ZlRm9jdXMocm93RGVsdGE6IG51bWJlciwgY29sRGVsdGE6IG51bWJlcikge1xuXHRcdGlmICh0aGlzLmZvY3VzZWRDYXJkSW5kZXggPT09IG51bGwpIHtcblx0XHRcdHRoaXMuZm9jdXNlZENhcmRJbmRleCA9IDA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IHRvdGFsQ2FyZHMgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuLmxlbmd0aDtcblx0XHRcdGNvbnN0IGxheW91dFN0cmF0ZWd5ID0gdGhpcy5jYXJkQ29udGFpbmVyLmdldExheW91dFN0cmF0ZWd5KCk7XG5cdFxuXHRcdFx0aWYgKGxheW91dFN0cmF0ZWd5IGluc3RhbmNlb2YgR3JpZExheW91dCB8fCBsYXlvdXRTdHJhdGVneSBpbnN0YW5jZW9mIE1hc29ucnlMYXlvdXQpIHtcblx0XHRcdFx0dGhpcy5mb2N1c2VkQ2FyZEluZGV4ID0gdGhpcy5lbnN1cmVWYWxpZEluZGV4KHRoaXMuY2FsY3VsYXRlR3JpZEluZGV4KHJvd0RlbHRhLCBjb2xEZWx0YSwgdG90YWxDYXJkcykpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5mb2N1c2VkQ2FyZEluZGV4ID0gdGhpcy5lbnN1cmVWYWxpZEluZGV4KHRoaXMuY2FsY3VsYXRlTGlzdEluZGV4KHJvd0RlbHRhLCBjb2xEZWx0YSwgdG90YWxDYXJkcykpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aGlzLnVwZGF0ZUZvY3VzZWRDYXJkKCk7XG5cdFx0dGhpcy5zY3JvbGxUb0ZvY3VzZWRDYXJkKCk7XG5cdH1cblxuICAgIC8vIE1vdmUgZm9jdXMgYnkgYSBwYWdlIChtdWx0aXBsZSBjYXJkcyBhdCBvbmNlKVxuXHRwcml2YXRlIG1vdmVGb2N1c1BhZ2UoZGlyZWN0aW9uOiBudW1iZXIpIHtcblx0XHRpZiAodGhpcy5mb2N1c2VkQ2FyZEluZGV4ID09PSBudWxsKSByZXR1cm47XG5cdFxuXHRcdGNvbnN0IHRvdGFsQ2FyZHMgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuLmxlbmd0aDtcblx0XHRjb25zdCBjYXJkc1BlclZpZXcgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYXJkc1BlclZpZXc7XG5cdFxuXHRcdGxldCBuZXdJbmRleDogbnVtYmVyO1xuXHRcblx0XHRpZiAoZGlyZWN0aW9uID4gMCkge1xuXHRcdFx0Ly8gUGFnZURvd25cblx0XHRcdG5ld0luZGV4ID0gTWF0aC5taW4odG90YWxDYXJkcyAtIDEsIHRoaXMuZm9jdXNlZENhcmRJbmRleCArIGNhcmRzUGVyVmlldyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFBhZ2VVcFxuXHRcdFx0bmV3SW5kZXggPSBNYXRoLm1heCgwLCB0aGlzLmZvY3VzZWRDYXJkSW5kZXggLSBjYXJkc1BlclZpZXcpO1xuXHRcdH1cblx0XG5cdFx0dGhpcy5mb2N1c2VkQ2FyZEluZGV4ID0gdGhpcy5lbnN1cmVWYWxpZEluZGV4KG5ld0luZGV4KTtcblx0XHR0aGlzLnVwZGF0ZUZvY3VzZWRDYXJkKCk7XG5cdFx0dGhpcy5zY3JvbGxUb0ZvY3VzZWRDYXJkKCk7XG5cdH1cblxuICAgIC8vIE1vdmUgZm9jdXMgdG8gdGhlIGZpcnN0IGNhcmRcblx0cHJpdmF0ZSBtb3ZlRm9jdXNUb1N0YXJ0KCkge1xuXHRcdHRoaXMuZm9jdXNlZENhcmRJbmRleCA9IHRoaXMuZW5zdXJlVmFsaWRJbmRleCgwKTtcblx0XHR0aGlzLnVwZGF0ZUZvY3VzZWRDYXJkKCk7XG5cdFx0dGhpcy5zY3JvbGxUb0ZvY3VzZWRDYXJkKCk7XG5cdH1cblxuICAgIC8vIE1vdmUgZm9jdXMgdG8gdGhlIGxhc3QgY2FyZFxuXHRwcml2YXRlIG1vdmVGb2N1c1RvRW5kKCkge1xuXHRcdHRoaXMuZm9jdXNlZENhcmRJbmRleCA9IHRoaXMuZW5zdXJlVmFsaWRJbmRleCh0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuLmxlbmd0aCAtIDEpO1xuXHRcdHRoaXMudXBkYXRlRm9jdXNlZENhcmQoKTtcblx0XHR0aGlzLnNjcm9sbFRvRm9jdXNlZENhcmQoKTtcblx0fVxuXG4gICAgLy8gVXBkYXRlIHRoZSBmb2N1c2VkIGNhcmQncyB2aXN1YWwgc3RhdGVcbiAgICBwcml2YXRlIHVwZGF0ZUZvY3VzZWRDYXJkID0gZGVib3VuY2UoKCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyRWwpIHJldHVybjtcblxuICAgICAgICAvLyBSZW1vdmUgZm9jdXMgZnJvbSBwcmV2aW91cyBjYXJkXG4gICAgICAgIGlmICh0aGlzLnByZXZpb3VzRm9jdXNlZENhcmRJbmRleCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgcHJldkNhcmQgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuW3RoaXMucHJldmlvdXNGb2N1c2VkQ2FyZEluZGV4XSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIHByZXZDYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmQtbmF2aWdhdG9yLWZvY3VzZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBmb2N1cyB0byBjdXJyZW50IGNhcmRcbiAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkICYmIHRoaXMuZm9jdXNlZENhcmRJbmRleCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudENhcmQgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuW3RoaXMuZm9jdXNlZENhcmRJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBjdXJyZW50Q2FyZC5jbGFzc0xpc3QuYWRkKCdjYXJkLW5hdmlnYXRvci1mb2N1c2VkJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnByZXZpb3VzRm9jdXNlZENhcmRJbmRleCA9IHRoaXMuZm9jdXNlZENhcmRJbmRleDtcbiAgICB9LCA1MCk7XG5cbiAgICAvLyBTY3JvbGwgdG8gZW5zdXJlIHRoZSBmb2N1c2VkIGNhcmQgaXMgdmlzaWJsZVxuICAgIHByaXZhdGUgc2Nyb2xsVG9Gb2N1c2VkQ2FyZChpbW1lZGlhdGUgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5mb2N1c2VkQ2FyZEluZGV4ID09PSBudWxsIHx8ICF0aGlzLmNvbnRhaW5lckVsKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgZm9jdXNlZENhcmQgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuW3RoaXMuZm9jdXNlZENhcmRJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuY2FyZENvbnRhaW5lci5jZW50ZXJDYXJkKGZvY3VzZWRDYXJkLCAhaW1tZWRpYXRlKTtcbiAgICB9XG5cbiAgICAvLyBPcGVuIHRoZSBmb2N1c2VkIGNhcmRcblx0cHJpdmF0ZSBvcGVuRm9jdXNlZENhcmQoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICh0aGlzLmZvY3VzZWRDYXJkSW5kZXggPT09IG51bGwpIHJldHVybjtcblx0XHRcdGNvbnN0IGZvY3VzZWRDYXJkID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblt0aGlzLmZvY3VzZWRDYXJkSW5kZXhdIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuY2FyZENvbnRhaW5lci5nZXRGaWxlRnJvbUNhcmQoZm9jdXNlZENhcmQpO1xuXHRcdFx0aWYgKGZpbGUpIHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoZmlsZSk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIG9wZW5pbmcgdGhlIGNhcmQ6JywgZXJyb3IpO1xuXHRcdH1cblx0fVxuXG4gICAgLy8gT3BlbiB0aGUgY29udGV4dCBtZW51IGZvciB0aGUgZm9jdXNlZCBjYXJkXG5cdHB1YmxpYyBvcGVuQ29udGV4dE1lbnUoKSB7XG5cdFx0aWYgKHRoaXMuZm9jdXNlZENhcmRJbmRleCA9PT0gbnVsbCkgcmV0dXJuO1xuXHRcblx0XHRjb25zdCBmb2N1c2VkQ2FyZCA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bdGhpcy5mb2N1c2VkQ2FyZEluZGV4XSBhcyBIVE1MRWxlbWVudDtcblx0XHRjb25zdCBmaWxlID0gdGhpcy5jYXJkQ29udGFpbmVyLmdldEZpbGVGcm9tQ2FyZChmb2N1c2VkQ2FyZCk7XG5cdFx0aWYgKGZpbGUpIHtcblx0XHRcdGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdmaWxlLW1lbnUnLCBtZW51LCBmaWxlLCAnbW9yZS1vcHRpb25zJyk7XG5cdFxuXHRcdFx0bWVudS5hZGRJdGVtKChpdGVtOiBNZW51SXRlbSkgPT4ge1xuXHRcdFx0XHRpdGVtXG5cdFx0XHRcdFx0LnNldFRpdGxlKHQoJ0NPUFlfQVNfTElOSycpKVxuXHRcdFx0XHRcdC5zZXRJY29uKCdsaW5rJylcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNhcmRDb250YWluZXIuY29weUxpbmsoZmlsZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XG5cdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PiB7XG5cdFx0XHRcdGl0ZW1cblx0XHRcdFx0XHQuc2V0VGl0bGUodCgnQ09QWV9DQVJEX0NPTlRFTlQnKSlcblx0XHRcdFx0XHQuc2V0SWNvbignZmlsZS10ZXh0Jylcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNhcmRDb250YWluZXIuY29weUNhcmRDb250ZW50KGZpbGUpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFxuXHRcdFx0Y29uc3QgcmVjdCA9IGZvY3VzZWRDYXJkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0bWVudS5zaG93QXRQb3NpdGlvbih7IHg6IHJlY3QubGVmdCwgeTogcmVjdC5ib3R0b20gfSk7XG5cdFx0fVxuXHR9XG5cbiAgICAvLyBGaW5kIHRoZSBpbmRleCBvZiB0aGUgYWN0aXZlIGNhcmRcbiAgICBwcml2YXRlIGZpbmRBY3RpdmVDYXJkSW5kZXgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jb250YWluZXJFbC5jaGlsZHJlbikuZmluZEluZGV4KFxuICAgICAgICAgICAgY2hpbGQgPT4gY2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJkLW5hdmlnYXRvci1hY3RpdmUnKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCB2aXNpYmxlIGNhcmRcbiAgICBwcml2YXRlIGZpbmRGaXJzdFZpc2libGVDYXJkSW5kZXgoKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lclJlY3QgPSB0aGlzLmNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNhcmRSZWN0ID0gKHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5baV0gYXMgSFRNTEVsZW1lbnQpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDYXJkVmlzaWJsZShjYXJkUmVjdCwgY29udGFpbmVyUmVjdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBhIGNhcmQgaXMgdmlzaWJsZSB3aXRoaW4gdGhlIGNvbnRhaW5lclxuICAgIHByaXZhdGUgaXNDYXJkVmlzaWJsZShjYXJkUmVjdDogRE9NUmVjdCwgY29udGFpbmVyUmVjdDogRE9NUmVjdCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgY2FyZFJlY3QudG9wID49IGNvbnRhaW5lclJlY3QudG9wICYmXG4gICAgICAgICAgICBjYXJkUmVjdC5ib3R0b20gPD0gY29udGFpbmVyUmVjdC5ib3R0b20gJiZcbiAgICAgICAgICAgIGNhcmRSZWN0LmxlZnQgPj0gY29udGFpbmVyUmVjdC5sZWZ0ICYmXG4gICAgICAgICAgICBjYXJkUmVjdC5yaWdodCA8PSBjb250YWluZXJSZWN0LnJpZ2h0XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRoZSBsYXlvdXQgc3RyYXRlZ3kgKGN1cnJlbnRseSBlbXB0eSwgY2FuIGJlIGltcGxlbWVudGVkIGlmIG5lZWRlZClcblx0cHVibGljIHVwZGF0ZUxheW91dChfbGF5b3V0U3RyYXRlZ3k6IExheW91dFN0cmF0ZWd5KSB7XG4gICAgLy8gVE9ETzogSW1wbGVtZW50IGxheW91dCB1cGRhdGUgbG9naWNcbn1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgQ2FyZE5hdmlnYXRvclBsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcbmltcG9ydCB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4vc2V0dGluZ3NNYW5hZ2VyJztcbmltcG9ydCB7IGFkZFByZXNldFNldHRpbmdzIH0gZnJvbSAnLi9wcmVzZXRTZXR0aW5ncyc7XG5pbXBvcnQgeyBhZGRMYXlvdXRTZXR0aW5ncyB9IGZyb20gJy4vbGF5b3V0U2V0dGluZ3MnO1xuaW1wb3J0IHsgYWRkQ29udGFpbmVyU2V0dGluZ3MgfSBmcm9tICcuL2NvbnRhaW5lclNldHRpbmdzJztcbmltcG9ydCB7IGFkZENhcmRTdHlsaW5nU2V0dGluZ3MgfSBmcm9tICcuL2NhcmRTdHlsZVNldHRpbmdzJztcbmltcG9ydCB7IGFkZENhcmRDb250ZW50U2V0dGluZ3MgfSBmcm9tICcuL2NhcmRDb250ZW50U2V0dGluZ3MnO1xuaW1wb3J0IHsgYWRkS2V5Ym9hcmRTaG9ydGN1dHNJbmZvIH0gZnJvbSAnLi9rZXlib2FyZFNob3J0Y3V0c0luZm8nO1xuaW1wb3J0IHsgQ2FyZE5hdmlnYXRvclNldHRpbmdzLCBOdW1iZXJTZXR0aW5nS2V5LCBTb3J0Q3JpdGVyaW9uLCBTb3J0T3JkZXIsIHNvcnRPcHRpb25zIH0gZnJvbSAnLi4vLi4vY29tbW9uL3R5cGVzJztcbmltcG9ydCB7IHQgfSBmcm9tICdpMThuZXh0JztcblxuZXhwb3J0IGNsYXNzIFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwcml2YXRlIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyO1xuICAgIHByaXZhdGUgc2VjdGlvbnM6IFJlY29yZDxzdHJpbmcsIEhUTUxFbGVtZW50PiA9IHt9O1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHByaXZhdGUgcGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5zZXR0aW5nc01hbmFnZXIgPSBwbHVnaW4uc2V0dGluZ3NNYW5hZ2VyO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgdGhpcy5zZWN0aW9ucyA9IHtcbiAgICAgICAgICAgIHByZXNldDogY29udGFpbmVyRWwuY3JlYXRlRGl2KCdwcmVzZXQtc2VjdGlvbicpLFxuICAgICAgICAgICAgY29udGFpbmVyOiBjb250YWluZXJFbC5jcmVhdGVEaXYoJ2NvbnRhaW5lci1zZWN0aW9uJyksXG4gICAgICAgICAgICBsYXlvdXQ6IGNvbnRhaW5lckVsLmNyZWF0ZURpdignbGF5b3V0LXNlY3Rpb24nKSxcbiAgICAgICAgICAgIGNhcmRDb250ZW50OiBjb250YWluZXJFbC5jcmVhdGVEaXYoJ2NhcmQtY29udGVudC1zZWN0aW9uJyksXG4gICAgICAgICAgICBjYXJkU3R5bGluZzogY29udGFpbmVyRWwuY3JlYXRlRGl2KCdjYXJkLXN0eWxpbmctc2VjdGlvbicpLFxuICAgICAgICAgICAga2V5Ym9hcmRTaG9ydGN1dHM6IGNvbnRhaW5lckVsLmNyZWF0ZURpdigna2V5Ym9hcmQtc2hvcnRjdXRzLXNlY3Rpb24nKVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMudXBkYXRlQWxsU2VjdGlvbnMoKTtcbiAgICB9XG5cbiAgICB1cGRhdGVBbGxTZWN0aW9ucygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy51cGRhdGVQcmVzZXRTZXR0aW5ncygpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lclNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlTGF5b3V0U2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy51cGRhdGVDYXJkQ29udGVudFNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlQ2FyZFN0eWxpbmdTZXR0aW5ncygpO1xuICAgICAgICB0aGlzLnVwZGF0ZUtleWJvYXJkU2hvcnRjdXRzSW5mbygpO1xuICAgIH1cblxuXHR1cGRhdGVQcmVzZXRTZXR0aW5ncygpOiB2b2lkIHtcblx0XHR0aGlzLnNlY3Rpb25zLnByZXNldC5lbXB0eSgpO1xuXHRcdGFkZFByZXNldFNldHRpbmdzKHRoaXMuc2VjdGlvbnMucHJlc2V0LCB0aGlzLnBsdWdpbiwgdGhpcy5zZXR0aW5nc01hbmFnZXIsIHRoaXMpO1xuXHR9XG5cbiAgICB1cGRhdGVDb250YWluZXJTZXR0aW5ncygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZWN0aW9ucy5jb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgYWRkQ29udGFpbmVyU2V0dGluZ3ModGhpcy5zZWN0aW9ucy5jb250YWluZXIsIHRoaXMucGx1Z2luLCB0aGlzLnNldHRpbmdzTWFuYWdlciwgdGhpcyk7XG4gICAgfVxuXG4gICAgdXBkYXRlTGF5b3V0U2V0dGluZ3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2VjdGlvbnMubGF5b3V0LmVtcHR5KCk7XG4gICAgICAgIGFkZExheW91dFNldHRpbmdzKHRoaXMuc2VjdGlvbnMubGF5b3V0LCB0aGlzLnBsdWdpbiwgdGhpcy5zZXR0aW5nc01hbmFnZXIsIHRoaXMpO1xuICAgIH1cblxuICAgIHVwZGF0ZUNhcmRDb250ZW50U2V0dGluZ3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2VjdGlvbnMuY2FyZENvbnRlbnQuZW1wdHkoKTtcbiAgICAgICAgYWRkQ2FyZENvbnRlbnRTZXR0aW5ncyh0aGlzLnNlY3Rpb25zLmNhcmRDb250ZW50LCB0aGlzLnBsdWdpbiwgdGhpcy5zZXR0aW5nc01hbmFnZXIsIHRoaXMpO1xuICAgIH1cblxuICAgIHVwZGF0ZUNhcmRTdHlsaW5nU2V0dGluZ3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2VjdGlvbnMuY2FyZFN0eWxpbmcuZW1wdHkoKTtcbiAgICAgICAgYWRkQ2FyZFN0eWxpbmdTZXR0aW5ncyh0aGlzLnNlY3Rpb25zLmNhcmRTdHlsaW5nLCB0aGlzLnBsdWdpbiwgdGhpcy5zZXR0aW5nc01hbmFnZXIsIHRoaXMpO1xuICAgIH1cblxuICAgIHVwZGF0ZUtleWJvYXJkU2hvcnRjdXRzSW5mbygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZWN0aW9ucy5rZXlib2FyZFNob3J0Y3V0cy5lbXB0eSgpO1xuICAgICAgICBhZGRLZXlib2FyZFNob3J0Y3V0c0luZm8odGhpcy5zZWN0aW9ucy5rZXlib2FyZFNob3J0Y3V0cyk7XG4gICAgfVxuXG4gICAgcmVmcmVzaFNldHRpbmdzVUkoY2hhbmdlZFNldHRpbmc6IGtleW9mIENhcmROYXZpZ2F0b3JTZXR0aW5ncyk6IHZvaWQge1xuICAgICAgICBzd2l0Y2ggKGNoYW5nZWRTZXR0aW5nKSB7XG4gICAgICAgICAgICBjYXNlICdsYXN0QWN0aXZlUHJlc2V0JzpcbiAgICAgICAgICAgIGNhc2UgJ2ZvbGRlclByZXNldHMnOlxuICAgICAgICAgICAgY2FzZSAnYWN0aXZlRm9sZGVyUHJlc2V0cyc6XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcmVzZXRTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndXNlU2VsZWN0ZWRGb2xkZXInOlxuICAgICAgICAgICAgY2FzZSAnc2VsZWN0ZWRGb2xkZXInOlxuICAgICAgICAgICAgY2FzZSAnc29ydENyaXRlcmlvbic6XG4gICAgICAgICAgICBjYXNlICdzb3J0T3JkZXInOlxuICAgICAgICAgICAgY2FzZSAnY2VudGVyQWN0aXZlQ2FyZE9uT3Blbic6XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250YWluZXJTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZGVmYXVsdExheW91dCc6XG4gICAgICAgICAgICBjYXNlICdjYXJkV2lkdGhUaHJlc2hvbGQnOlxuICAgICAgICAgICAgY2FzZSAnYWxpZ25DYXJkSGVpZ2h0JzpcbiAgICAgICAgICAgIGNhc2UgJ2NhcmRzUGVyVmlldyc6XG4gICAgICAgICAgICBjYXNlICdncmlkQ29sdW1ucyc6XG4gICAgICAgICAgICBjYXNlICdncmlkQ2FyZEhlaWdodCc6XG4gICAgICAgICAgICBjYXNlICdtYXNvbnJ5Q29sdW1ucyc6XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMYXlvdXRTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncmVuZGVyQ29udGVudEFzSHRtbCc6XG4gICAgICAgICAgICBjYXNlICdkcmFnRHJvcENvbnRlbnQnOlxuICAgICAgICAgICAgY2FzZSAnc2hvd0ZpbGVOYW1lJzpcbiAgICAgICAgICAgIGNhc2UgJ3Nob3dGaXJzdEhlYWRlcic6XG4gICAgICAgICAgICBjYXNlICdzaG93Qm9keSc6XG4gICAgICAgICAgICBjYXNlICdib2R5TGVuZ3RoTGltaXQnOlxuICAgICAgICAgICAgY2FzZSAnYm9keUxlbmd0aCc6XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDYXJkQ29udGVudFNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdmaWxlTmFtZUZvbnRTaXplJzpcbiAgICAgICAgICAgIGNhc2UgJ2ZpcnN0SGVhZGVyRm9udFNpemUnOlxuICAgICAgICAgICAgY2FzZSAnYm9keUZvbnRTaXplJzpcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNhcmRTdHlsaW5nU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBbGxTZWN0aW9ucygpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIGFkZFRvZ2dsZVNldHRpbmcoXG4gICAgICAgIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcbiAgICAgICAga2V5OiBrZXlvZiBDYXJkTmF2aWdhdG9yU2V0dGluZ3MsXG4gICAgICAgIG5hbWU6IHN0cmluZyxcbiAgICAgICAgZGVzYzogc3RyaW5nXG4gICAgKTogU2V0dGluZyB7XG4gICAgICAgIHJldHVybiBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKG5hbWUpXG4gICAgICAgICAgICAuc2V0RGVzYyhkZXNjKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzW2tleV0gYXMgYm9vbGVhbilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnVwZGF0ZUJvb2xlYW5TZXR0aW5nKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIGFkZFNsaWRlclNldHRpbmcoXG4gICAgICAgIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcbiAgICAgICAga2V5OiBOdW1iZXJTZXR0aW5nS2V5LFxuICAgICAgICBuYW1lOiBzdHJpbmcsXG4gICAgICAgIGRlc2M6IHN0cmluZ1xuICAgICk6IFNldHRpbmcge1xuICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLnNldHRpbmdzTWFuYWdlci5nZXROdW1iZXJTZXR0aW5nQ29uZmlnKGtleSk7XG4gICAgICAgIHJldHVybiBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKG5hbWUpXG4gICAgICAgICAgICAuc2V0RGVzYyhkZXNjKVxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cyhjb25maWcubWluLCBjb25maWcubWF4LCBjb25maWcuc3RlcClcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Nba2V5XSBhcyBudW1iZXIpXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIudXBkYXRlU2V0dGluZyhrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICBhZGREcm9wZG93blNldHRpbmcoXG4gICAgICAgIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcbiAgICAgICAga2V5OiAnc29ydE1ldGhvZCcsXG4gICAgICAgIG5hbWU6IHN0cmluZyxcbiAgICAgICAgZGVzYzogc3RyaW5nXG4gICAgKTogU2V0dGluZyB7XG4gICAgICAgIHJldHVybiBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKHQobmFtZSkpXG4gICAgICAgICAgICAuc2V0RGVzYyh0KGRlc2MpKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgICAgICAgICBzb3J0T3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihvcHRpb24udmFsdWUsIHQob3B0aW9uLmxhYmVsKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKGAke3RoaXMucGx1Z2luLnNldHRpbmdzLnNvcnRDcml0ZXJpb259XyR7dGhpcy5wbHVnaW4uc2V0dGluZ3Muc29ydE9yZGVyfWApXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW2NyaXRlcmlvbiwgb3JkZXJdID0gdmFsdWUuc3BsaXQoJ18nKSBhcyBbU29ydENyaXRlcmlvbiwgU29ydE9yZGVyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnVwZGF0ZVNldHRpbmcoJ3NvcnRDcml0ZXJpb24nLCBjcml0ZXJpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIudXBkYXRlU2V0dGluZygnc29ydE9yZGVyJywgb3JkZXIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn1cblxuIiwgImltcG9ydCB7IFNldHRpbmcsIEJ1dHRvbkNvbXBvbmVudCwgVG9nZ2xlQ29tcG9uZW50LCBOb3RpY2UsIGRlYm91bmNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IENhcmROYXZpZ2F0b3JQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XG5pbXBvcnQgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tICcuL3NldHRpbmdzTWFuYWdlcic7XG5pbXBvcnQgeyBQcmVzZXRTdWdnZXN0LCBGaWxlU3VnZ2VzdE1vZGUgfSBmcm9tICcuL2NvbXBvbmVudHMvUHJlc2V0U3VnZ2VzdCc7XG5pbXBvcnQgeyBQcmVzZXRFZGl0TW9kYWwgfSBmcm9tICcuLi9zZXR0aW5ncy9tb2RhbHMvUHJlc2V0RWRpdE1vZGFsJztcbmltcG9ydCB7IFByZXNldEltcG9ydEV4cG9ydE1vZGFsIH0gZnJvbSAnLi4vc2V0dGluZ3MvbW9kYWxzL1ByZXNldEltcG9ydEV4cG9ydE1vZGFsJztcbmltcG9ydCB7IEZvbGRlclN1Z2dlc3QgfSBmcm9tICcuL2NvbXBvbmVudHMvRm9sZGVyU3VnZ2VzdCc7XG5pbXBvcnQgeyBTZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5nc1RhYic7XG5pbXBvcnQgeyB0IH0gZnJvbSAnaTE4bmV4dCc7XG5cbmxldCBwcmVzZXRMaXN0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFByZXNldFNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luLCBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlciwgc2V0dGluZ1RhYjogU2V0dGluZ1RhYik6IHZvaWQge1xuXHRjb25zdCBkZWJvdW5jZWRSZWZyZXNoQWxsU2V0dGluZ3MgPSBkZWJvdW5jZSgoKSA9PiByZWZyZXNoQWxsU2V0dGluZ3MoKSwgMjAwKTtcbiAgICBjb25zdCByZWZyZXNoQWxsU2V0dGluZ3MgPSAoKSA9PiB7XG4gICAgICAgIHNldHRpbmdUYWIudXBkYXRlQWxsU2VjdGlvbnMoKTtcbiAgICB9O1xuXG4gICAgYWRkQXV0b0FwcGx5UHJlc2V0c1NlY3Rpb24oY29udGFpbmVyRWwsIHBsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyLCBkZWJvdW5jZWRSZWZyZXNoQWxsU2V0dGluZ3MpO1xuXG4gICAgLy8gYXV0b0FwcGx5UHJlc2V0c1x1QUMwMCB0cnVlXHVDNzdDIFx1QjU0Q1x1QjlDQyBcdUIyRTRcdUI5NzggXHVENTA0XHVCOUFDXHVDMTRCIFx1QUQwMFx1QjgyOCBcdUMxMzlcdUMxNThcdUI0RTRcdUM3NDQgXHVENDVDXHVDMkRDXG4gICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5hdXRvQXBwbHlQcmVzZXRzKSB7XG4gICAgICAgIGFkZEdsb2JhbFByZXNldFNlY3Rpb24oY29udGFpbmVyRWwsIHBsdWdpbiwgZGVib3VuY2VkUmVmcmVzaEFsbFNldHRpbmdzKTtcbiAgICAgICAgYWRkRm9sZGVyUHJlc2V0U2VjdGlvbihjb250YWluZXJFbCwgcGx1Z2luLCBzZXR0aW5nc01hbmFnZXIsIGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5ncyk7XG4gICAgICAgIGFkZFByZXNldE1hbmFnZW1lbnRTZWN0aW9uKGNvbnRhaW5lckVsLCBwbHVnaW4sIHNldHRpbmdzTWFuYWdlciwgZGVib3VuY2VkUmVmcmVzaEFsbFNldHRpbmdzKTtcbiAgICBcbiAgICAgICAgLy8gXHVENTA0XHVCOUFDXHVDMTRCIFx1QkFBOVx1Qjg1RFx1Qzc0NCBcdUM3MDRcdUQ1NUMgXHVDRUU4XHVEMTRDXHVDNzc0XHVCMTA4IFx1QzBERFx1QzEzMVxuICAgICAgICBwcmVzZXRMaXN0Q29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdwcmVzZXQtbGlzdC1jb250YWluZXInKTtcbiAgICAgICAgcmVmcmVzaFByZXNldExpc3QocGx1Z2luLCBzZXR0aW5nc01hbmFnZXIsIGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5ncyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRBdXRvQXBwbHlQcmVzZXRzU2VjdGlvbihjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIsIGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5nczogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSh0KCdBVVRPX0FQUExZX1BSRVNFVFMnKSlcbiAgICAgICAgLnNldERlc2ModCgnQVVUT19BUFBMWV9QUkVTRVRTX0RFU0MnKSlcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiBcbiAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuYXV0b0FwcGx5UHJlc2V0cylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5hdXRvQXBwbHlQcmVzZXRzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVib3VuY2VkUmVmcmVzaEFsbFNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVmcmVzaFByZXNldExpc3QocGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luLCBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlciwgZGVib3VuY2VkUmVmcmVzaEFsbFNldHRpbmdzOiAoKSA9PiB2b2lkKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCFwcmVzZXRMaXN0Q29udGFpbmVyKSByZXR1cm47XG5cbiAgICBwcmVzZXRMaXN0Q29udGFpbmVyLmVtcHR5KCk7XG4gICAgYXdhaXQgYWRkUHJlc2V0TGlzdFNlY3Rpb24ocHJlc2V0TGlzdENvbnRhaW5lciwgcGx1Z2luLCBzZXR0aW5nc01hbmFnZXIsIGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5ncyk7XG59XG5cbmZ1bmN0aW9uIGFkZEdsb2JhbFByZXNldFNlY3Rpb24oY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4sIGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5nczogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSh0KCdQUkVTRVRfRk9MREVSJykpXG4gICAgICAgIC5zZXREZXNjKHQoJ1NFTEVDVF9QUkVTRVRfRk9MREVSJykpXG4gICAgICAgIC5hZGRTZWFyY2goY2IgPT4ge1xuICAgICAgICAgICAgbmV3IEZvbGRlclN1Z2dlc3QocGx1Z2luLmFwcCwgY2IuaW5wdXRFbCwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0ZvbGRlciA9IGNiLmlucHV0RWwudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0ZvbGRlciAhPT0gcGx1Z2luLnNldHRpbmdzLnByZXNldEZvbGRlclBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnByZXNldEZvbGRlclBhdGggPSBuZXdGb2xkZXI7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnByZXNldE1hbmFnZXIudXBkYXRlUHJlc2V0Rm9sZGVyKG5ld0ZvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgIGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYi5zZXRQbGFjZWhvbGRlcih0KCdQUkVTRVRfRk9MREVSX1BMQUNFSE9MREVSJykpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5wcmVzZXRGb2xkZXJQYXRoKTtcblxuICAgICAgICAgICAgY29uc3QgcGFyZW50RWwgPSBjYi5pbnB1dEVsLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAocGFyZW50RWwpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRFbC5jbGFzc0xpc3QuYWRkKCd3aWRlLWlucHV0LWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgfVxuXHRcdFxuXHRcdGNiLmlucHV0RWwucmVtb3ZlQXR0cmlidXRlKCdhdXRvZm9jdXMnKTtcblx0XHRcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdGNiLmlucHV0RWwuYmx1cigpO1xuXHRcdH0sIDApO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gYWRkRm9sZGVyUHJlc2V0U2VjdGlvbihjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIsIGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5nczogKCkgPT4gdm9pZCk6IHZvaWQge1xuXHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHQuc2V0TmFtZSh0KCdBVVRPX0FQUExZX0ZPTERFUl9QUkVTRVQnKSlcblx0XHQuc2V0RGVzYyh0KCdBVVRPX0FQUExZX0ZPTERFUl9QUkVTRVRfREVTQycpKVxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4gXG5cdFx0XHR0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5hdXRvQXBwbHlGb2xkZXJQcmVzZXRzKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0YXdhaXQgc2V0dGluZ3NNYW5hZ2VyLnRvZ2dsZUF1dG9BcHBseVByZXNldHModmFsdWUpO1xuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRGaWxlID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0XHRcdGlmIChjdXJyZW50RmlsZSkge1xuXHRcdFx0XHRcdFx0YXdhaXQgcGx1Z2luLnNlbGVjdEFuZEFwcGx5UHJlc2V0Rm9yQ3VycmVudEZpbGUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSh0KCdBRERfTkVXX0ZPTERFUl9QUkVTRVQnKSlcbiAgICAgICAgLnNldERlc2ModCgnQUREX05FV19GT0xERVJfUFJFU0VUX0RFU0MnKSlcbiAgICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uOiBCdXR0b25Db21wb25lbnQpID0+IFxuICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAodCgnQUREX05FV19GT0xERVJfUFJFU0VUJykpXG4gICAgICAgICAgICAgICAgLnNldEljb24oJ3BsdXMnKVxuICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Rm9sZGVyUGF0aCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHMgPSBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyUHJlc2V0cyB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmFjdGl2ZUZvbGRlclByZXNldHMgPSBwbHVnaW4uc2V0dGluZ3MuYWN0aXZlRm9sZGVyUHJlc2V0cyB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHNbbmV3Rm9sZGVyUGF0aF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzW25ld0ZvbGRlclBhdGhdID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYWN0aXZlRm9sZGVyUHJlc2V0c1tuZXdGb2xkZXJQYXRoXSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NNYW5hZ2VyLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVib3VuY2VkUmVmcmVzaEFsbFNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHQoJ1BSRVNFVF9BTFJFQURZX0VYSVNUUycpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cblx0cGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHMgPSBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyUHJlc2V0cyB8fCB7fTtcblx0cGx1Z2luLnNldHRpbmdzLmFjdGl2ZUZvbGRlclByZXNldHMgPSBwbHVnaW4uc2V0dGluZ3MuYWN0aXZlRm9sZGVyUHJlc2V0cyB8fCB7fTtcblxuICAgIGZvciAoY29uc3QgW2ZvbGRlclBhdGgsIHByZXNldHNdIG9mIE9iamVjdC5lbnRyaWVzKHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzKSkge1xuXHRcdGNvbnN0IHMgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5hZGRTZWFyY2goKGNiKSA9PiB7XG5cdFx0XHRcdG5ldyBGb2xkZXJTdWdnZXN0KHBsdWdpbi5hcHAsIGNiLmlucHV0RWwpO1xuXHRcdFx0XHRjYi5zZXRQbGFjZWhvbGRlcih0KCdGT0xERVInKSlcblx0XHRcdFx0XHQuc2V0VmFsdWUoZm9sZGVyUGF0aClcblx0XHRcdFx0XHQub25DaGFuZ2UoKF9uZXdGb2xkZXIpID0+IHtcblx0XHRcdFx0XHRcdC8vIFx1QkNDMFx1QUNCRCBcdUMwQUNcdUQ1NkRcdUM3NDQgXHVDQzk4XHVCOUFDXHVENTU4XHVCMjk0IFx1Qjg1Q1x1QzlDMVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRjYi5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgbmV3Rm9sZGVyID0gY2IuaW5wdXRFbC52YWx1ZTtcblx0XHRcdFx0XHRpZiAobmV3Rm9sZGVyICYmIHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzPy5bbmV3Rm9sZGVyXSkge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZSh0KCdQUkVTRVRfQUxSRUFEWV9FWElTVFNfRk9SX0ZPTERFUicpKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzKSB7XG5cdFx0XHRcdFx0XHRkZWxldGUgcGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF07XG5cdFx0XHRcdFx0XHRwbHVnaW4uc2V0dGluZ3MuZm9sZGVyUHJlc2V0c1tuZXdGb2xkZXJdID0gcHJlc2V0cztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHBsdWdpbi5zZXR0aW5ncy5hY3RpdmVGb2xkZXJQcmVzZXRzPy5bZm9sZGVyUGF0aF0pIHtcblx0XHRcdFx0XHRcdHBsdWdpbi5zZXR0aW5ncy5hY3RpdmVGb2xkZXJQcmVzZXRzW25ld0ZvbGRlcl0gPSBwbHVnaW4uc2V0dGluZ3MuYWN0aXZlRm9sZGVyUHJlc2V0c1tmb2xkZXJQYXRoXTtcblx0XHRcdFx0XHRcdGRlbGV0ZSBwbHVnaW4uc2V0dGluZ3MuYWN0aXZlRm9sZGVyUHJlc2V0c1tmb2xkZXJQYXRoXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c2V0dGluZ3NNYW5hZ2VyLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5ncygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0Y29uc3QgcHJlc2V0SW5wdXQgPSBzLmNvbnRyb2xFbC5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdGNsczogXCJwcmVzZXQtc3VnZ2VzdC1pbnB1dFwiLFxuXHRcdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0XHR2YWx1ZTogcGx1Z2luLnNldHRpbmdzLmFjdGl2ZUZvbGRlclByZXNldHM/Lltmb2xkZXJQYXRoXSB8fCAnJyxcblx0XHRcdHBsYWNlaG9sZGVyOiB0KCdQUkVTRVQnKVxuXHRcdH0pO1xuXHRcdFxuICAgICAgICBuZXcgUHJlc2V0U3VnZ2VzdChcbiAgICAgICAgICAgIHBsdWdpbi5hcHAsXG4gICAgICAgICAgICBwcmVzZXRJbnB1dCxcbiAgICAgICAgICAgIHBsdWdpbixcbiAgICAgICAgICAgIEZpbGVTdWdnZXN0TW9kZS5QcmVzZXRzRmlsZXNcbiAgICAgICAgKTtcblx0XHRcblx0XHRwcmVzZXRJbnB1dC5vbmJsdXIgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBuZXdWYWx1ZSA9IHByZXNldElucHV0LnZhbHVlO1xuXHRcdFx0cGx1Z2luLnNldHRpbmdzLmFjdGl2ZUZvbGRlclByZXNldHMgPSBwbHVnaW4uc2V0dGluZ3MuYWN0aXZlRm9sZGVyUHJlc2V0cyB8fCB7fTtcblx0XHRcdHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzID0gcGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHMgfHwge307XG5cdFx0XG5cdFx0XHRpZiAobmV3VmFsdWUgIT09IHBsdWdpbi5zZXR0aW5ncy5hY3RpdmVGb2xkZXJQcmVzZXRzW2ZvbGRlclBhdGhdKSB7XG5cdFx0XHRcdHBsdWdpbi5zZXR0aW5ncy5hY3RpdmVGb2xkZXJQcmVzZXRzW2ZvbGRlclBhdGhdID0gbmV3VmFsdWU7XG5cdFx0XHRcdHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzW2ZvbGRlclBhdGhdID0gW25ld1ZhbHVlXTtcblx0XHRcdFx0YXdhaXQgc2V0dGluZ3NNYW5hZ2VyLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRkZWJvdW5jZWRSZWZyZXNoQWxsU2V0dGluZ3MoKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0cy5hZGRFeHRyYUJ1dHRvbigoY2IpID0+IHtcblx0XHRcdGNiLnNldEljb24oJ2Rvd24tY2hldnJvbi1nbHlwaCcpXG5cdFx0XHRcdC5zZXRUb29sdGlwKHQoJ01PVkVfRE9XTicpKVxuXHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzIHx8IHt9KTtcblx0XHRcdFx0XHRjb25zdCBpbmRleCA9IGVudHJpZXMuZmluZEluZGV4KChbcGF0aF0pID0+IHBhdGggPT09IGZvbGRlclBhdGgpO1xuXHRcdFx0XHRcdGlmIChpbmRleCA8IGVudHJpZXMubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdFx0W2VudHJpZXNbaW5kZXhdLCBlbnRyaWVzW2luZGV4ICsgMV1dID0gW2VudHJpZXNbaW5kZXggKyAxXSwgZW50cmllc1tpbmRleF1dO1xuXHRcdFx0XHRcdFx0cGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHMgPSBPYmplY3QuZnJvbUVudHJpZXMoZW50cmllcyk7XG5cdFx0XHRcdFx0XHRzZXR0aW5nc01hbmFnZXIuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRkZWJvdW5jZWRSZWZyZXNoQWxsU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdH0pXG5cdFx0LmFkZEV4dHJhQnV0dG9uKChjYikgPT4ge1xuXHRcdFx0Y2Iuc2V0SWNvbignY3Jvc3MnKVxuXHRcdFx0XHQuc2V0VG9vbHRpcCh0KCdERUxFVEUnKSlcblx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdGlmIChwbHVnaW4uc2V0dGluZ3MuZm9sZGVyUHJlc2V0cykge1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzW2ZvbGRlclBhdGhdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAocGx1Z2luLnNldHRpbmdzLmFjdGl2ZUZvbGRlclByZXNldHMpIHtcblx0XHRcdFx0XHRcdGRlbGV0ZSBwbHVnaW4uc2V0dGluZ3MuYWN0aXZlRm9sZGVyUHJlc2V0c1tmb2xkZXJQYXRoXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c2V0dGluZ3NNYW5hZ2VyLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5ncygpO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblx0XHRzLmluZm9FbC5yZW1vdmUoKTtcblx0fVxufVxuXG5mdW5jdGlvbiBhZGRQcmVzZXRNYW5hZ2VtZW50U2VjdGlvbihjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIsIGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5nczogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGFkZFByZXNldE1hbmFnZW1lbnRTZWN0aW9uQ29udGVudChjb250YWluZXJFbCwgcGx1Z2luLCBzZXR0aW5nc01hbmFnZXIsIGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5ncyk7XG59XG5cbmZ1bmN0aW9uIGFkZFByZXNldE1hbmFnZW1lbnRTZWN0aW9uQ29udGVudChjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIsIGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5nczogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSh0KCdQUkVTRVRfTUFOQUdFTUVOVF9BTkRfR0xPQkFMX1NFVFRJTkdTJykpXG4gICAgICAgIC5zZXREZXNjKHQoJ1BSRVNFVF9NQU5BR0VNRU5UX0RFU0MnKSlcbiAgICAgICAgLmFkZEJ1dHRvbigoYnV0dG9uOiBCdXR0b25Db21wb25lbnQpID0+IFxuICAgICAgICAgICAgYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAodCgnQ1JFQVRFX05FV19QUkVTRVQnKSlcbiAgICAgICAgICAgICAgICAuc2V0SWNvbigncGx1cycpXG5cdFx0XHRcdC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgUHJlc2V0RWRpdE1vZGFsKFxuICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luLmFwcCwgXG4gICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4sIFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NNYW5hZ2VyLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICdjcmVhdGUnLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcblx0XHRcdFx0XHRcdGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5nc1xuXHRcdFx0XHRcdCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIC5hZGRCdXR0b24oKGJ1dHRvbjogQnV0dG9uQ29tcG9uZW50KSA9PiBcbiAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKHQoJ0lNUE9SVF9QUkVTRVQnKSlcbiAgICAgICAgICAgICAgICAuc2V0SWNvbigndXBsb2FkJylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IFByZXNldEltcG9ydEV4cG9ydE1vZGFsKFxuICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luLmFwcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzTWFuYWdlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICdpbXBvcnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4gcmVmcmVzaFByZXNldExpc3QocGx1Z2luLCBzZXR0aW5nc01hbmFnZXIsIGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5ncykgXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICApO1xufVxuXG5hc3luYyBmdW5jdGlvbiBhZGRQcmVzZXRMaXN0U2VjdGlvbihjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIsIGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5nczogKCkgPT4gdm9pZCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHByZXNldE5hbWVzID0gYXdhaXQgcGx1Z2luLnByZXNldE1hbmFnZXIuZ2V0UHJlc2V0TmFtZXMoKTtcbiAgICBjb25zdCBwcmVzZXRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJlc2V0TmFtZXMubWFwKG5hbWUgPT4gcGx1Z2luLnByZXNldE1hbmFnZXIuZ2V0UHJlc2V0KG5hbWUpKSk7XG4gICAgXG4gICAgcHJlc2V0cy5mb3JFYWNoKChwcmVzZXQsIGluZGV4KSA9PiB7XG4gICAgICAgIGlmICghcHJlc2V0KSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwcmVzZXROYW1lID0gcHJlc2V0TmFtZXNbaW5kZXhdO1xuICAgICAgICBjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZShwcmVzZXROYW1lKVxuICAgICAgICAgICAgLnNldERlc2MocHJlc2V0LmRlc2NyaXB0aW9uIHx8IHQoJ05PX0RFU0NSSVBUSU9OJykpO1xuXHRcdFxuXHRcdGlmIChwcmVzZXROYW1lICE9PSAnZGVmYXVsdCcpIHtcblx0XHRcdHNldHRpbmcuYWRkQnV0dG9uKChidXR0b246IEJ1dHRvbkNvbXBvbmVudCkgPT4gXG5cdFx0XHRcdGJ1dHRvblxuXHRcdFx0XHRcdC5zZXRUb29sdGlwKHQoJ0VESVQnKSlcblx0XHRcdFx0XHQuc2V0SWNvbigncGVuY2lsJylcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRuZXcgUHJlc2V0RWRpdE1vZGFsKFxuXHRcdFx0XHRcdFx0XHRwbHVnaW4uYXBwLCBcblx0XHRcdFx0XHRcdFx0cGx1Z2luLCBcblx0XHRcdFx0XHRcdFx0c2V0dGluZ3NNYW5hZ2VyLCBcblx0XHRcdFx0XHRcdFx0J2VkaXQnLCBcblx0XHRcdFx0XHRcdFx0cHJlc2V0TmFtZSxcblx0XHRcdFx0XHRcdFx0ZGVib3VuY2VkUmVmcmVzaEFsbFNldHRpbmdzXG5cdFx0XHRcdFx0XHQpLm9wZW4oKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdFx0c2V0dGluZy5hZGRCdXR0b24oKGJ1dHRvbjogQnV0dG9uQ29tcG9uZW50KSA9PiBcblx0XHRcdFx0YnV0dG9uXG5cdFx0XHRcdFx0LnNldFRvb2x0aXAodCgnQ0xPTkUnKSlcblx0XHRcdFx0XHQuc2V0SWNvbignY29weScpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0bmV3IFByZXNldEVkaXRNb2RhbChcblx0XHRcdFx0XHRcdFx0cGx1Z2luLmFwcCwgXG5cdFx0XHRcdFx0XHRcdHBsdWdpbiwgXG5cdFx0XHRcdFx0XHRcdHNldHRpbmdzTWFuYWdlciwgXG5cdFx0XHRcdFx0XHRcdCdjbG9uZScsIFxuXHRcdFx0XHRcdFx0XHRwcmVzZXROYW1lLFxuXHRcdFx0XHRcdFx0XHRkZWJvdW5jZWRSZWZyZXNoQWxsU2V0dGluZ3Ncblx0XHRcdFx0XHRcdCkub3BlbigpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG4gICAgICAgICAgICBzZXR0aW5nLmFkZEJ1dHRvbigoYnV0dG9uOiBCdXR0b25Db21wb25lbnQpID0+IFxuICAgICAgICAgICAgICAgIGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCh0KCdERUxFVEUnKSlcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ3RyYXNoJylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF3YWl0IHNldHRpbmdzTWFuYWdlci5jb25maXJtRGVsZXRlKHQoJ1BSRVNFVF9OQU1FJywge25hbWU6IHByZXNldE5hbWV9KSkpIHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgcGx1Z2luLnByZXNldE1hbmFnZXIuZGVsZXRlUHJlc2V0KHByZXNldE5hbWUpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gXHVCQUE4XHVCNEUwIFx1RDNGNFx1QjM1NCBcdUQ1MDRcdUI5QUNcdUMxNEIgXHVCQUE5XHVCODVEXHVDNUQwXHVDMTFDIFx1QzBBRFx1QzgxQ1x1QjQxQyBcdUQ1MDRcdUI5QUNcdUMxNEIgXHVDODFDXHVBQzcwXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHBsdWdpbi5wcmVzZXRNYW5hZ2VyLnJlbW92ZVByZXNldEZyb21BbGxGb2xkZXJzKHByZXNldE5hbWUpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0aWYgKHBsdWdpbi5zZXR0aW5ncy5HbG9iYWxQcmVzZXQgPT09IHByZXNldE5hbWUpIHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCBwbHVnaW4ucHJlc2V0TWFuYWdlci5hcHBseUdsb2JhbFByZXNldCgnZGVmYXVsdCcpO1xuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UodCgnUFJFU0VUX0RFTEVURURfTk9USUNFJykpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRzZXR0aW5nc01hbmFnZXIuYXBwbHlDaGFuZ2VzKCk7XG5cdFx0XHRcdFx0XHRcdGRlYm91bmNlZFJlZnJlc2hBbGxTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdHNldHRpbmcuYWRkQnV0dG9uKChidXR0b246IEJ1dHRvbkNvbXBvbmVudCkgPT4gXG5cdFx0XHRidXR0b25cblx0XHRcdFx0LnNldFRvb2x0aXAodCgnRVhQT1JUJykpXG5cdFx0XHRcdC5zZXRJY29uKCdkb3dubG9hZCcpXG5cdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRuZXcgUHJlc2V0SW1wb3J0RXhwb3J0TW9kYWwocGx1Z2luLmFwcCwgcGx1Z2luLCBzZXR0aW5nc01hbmFnZXIsICdleHBvcnQnLCBwcmVzZXROYW1lKS5vcGVuKCk7XG5cdFx0XHRcdH0pXG5cdFx0KVxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGU6IFRvZ2dsZUNvbXBvbmVudCkgPT4ge1xuICAgICAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAodCgnU0VUX0FTX0dMT0JBTF9QUkVTRVQnKSlcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLkdsb2JhbFByZXNldCA9PT0gcHJlc2V0TmFtZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnByZXNldE1hbmFnZXIuYXBwbHlHbG9iYWxQcmVzZXQocHJlc2V0TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJvdW5jZWRSZWZyZXNoQWxsU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwbHVnaW4uc2V0dGluZ3MuR2xvYmFsUHJlc2V0ID09PSBwcmVzZXROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4iLCAiLy8gQ3JlZGl0cyBnbyB0byBMaWFtJ3MgUGVyaW9kaWMgTm90ZXMgUGx1Z2luOiBodHRwczovL2dpdGh1Yi5jb20vbGlhbWNhaW4vb2JzaWRpYW4tcGVyaW9kaWMtbm90ZXNcblxuaW1wb3J0IHsgQXBwLCBUQWJzdHJhY3RGaWxlLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgVGV4dElucHV0U3VnZ2VzdCB9IGZyb20gXCIuL3N1Z2dlc3RcIjtcbmltcG9ydCB7IGdldF90ZmlsZXNfZnJvbV9mb2xkZXIgfSBmcm9tIFwiLi9VdGlsc1wiO1xuaW1wb3J0IENhcmROYXZpZ2F0b3JQbHVnaW4gZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IGVycm9yV3JhcHBlclN5bmMgfSBmcm9tIFwiLi9FcnJvclwiO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxuZXhwb3J0IGVudW0gRmlsZVN1Z2dlc3RNb2RlIHtcbiAgICBQcmVzZXRzRmlsZXMsXG59XG5cbmV4cG9ydCBjbGFzcyBQcmVzZXRTdWdnZXN0IGV4dGVuZHMgVGV4dElucHV0U3VnZ2VzdDxURmlsZT4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcm90ZWN0ZWQgYXBwOiBBcHAsXG4gICAgICAgIHB1YmxpYyBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50LFxuICAgICAgICBwcml2YXRlIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbixcbiAgICAgICAgcHJpdmF0ZSBtb2RlOiBGaWxlU3VnZ2VzdE1vZGVcbiAgICApIHtcbiAgICAgICAgc3VwZXIoYXBwLCBpbnB1dEVsKTtcbiAgICB9XG5cbiAgICBnZXRfZm9sZGVyKG1vZGU6IEZpbGVTdWdnZXN0TW9kZSk6IHN0cmluZyB7XG4gICAgICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgICAgICAgY2FzZSBGaWxlU3VnZ2VzdE1vZGUuUHJlc2V0c0ZpbGVzOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVzZXRGb2xkZXJQYXRoO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0X2Vycm9yX21zZyhtb2RlOiBGaWxlU3VnZ2VzdE1vZGUpOiBzdHJpbmcge1xuICAgICAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgRmlsZVN1Z2dlc3RNb2RlLlByZXNldHNGaWxlczpcbiAgICAgICAgICAgICAgICByZXR1cm4gYFByZXNldHMgZm9sZGVyIGRvZXNuJ3QgZXhpc3RgO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0U3VnZ2VzdGlvbnMoaW5wdXRfc3RyOiBzdHJpbmcpOiBURmlsZVtdIHtcbiAgICAgICAgY29uc3QgYWxsX2ZpbGVzID0gZXJyb3JXcmFwcGVyU3luYyhcbiAgICAgICAgICAgICgpID0+IGdldF90ZmlsZXNfZnJvbV9mb2xkZXIodGhpcy5hcHAsIHRoaXMuZ2V0X2ZvbGRlcih0aGlzLm1vZGUpKSxcbiAgICAgICAgICAgIHRoaXMuZ2V0X2Vycm9yX21zZyh0aGlzLm1vZGUpXG4gICAgICAgICk7XG4gICAgICAgIGlmICghYWxsX2ZpbGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWxlczogVEZpbGVbXSA9IFtdO1xuICAgICAgICBjb25zdCBsb3dlcl9pbnB1dF9zdHIgPSBpbnB1dF9zdHIudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBhbGxfZmlsZXMuZm9yRWFjaCgoZmlsZTogVEFic3RyYWN0RmlsZSkgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJlxuICAgICAgICAgICAgICAgIGZpbGUuZXh0ZW5zaW9uID09PSBcImpzb25cIiAmJlxuICAgICAgICAgICAgICAgIGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyX2lucHV0X3N0cilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGZpbGVzLnB1c2goZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBmaWxlcy5zbGljZSgwLCAxMDAwKTtcbiAgICB9XG5cbiAgICByZW5kZXJTdWdnZXN0aW9uKGZpbGU6IFRGaWxlLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcHJlc2V0TmFtZSA9IHBhdGguYmFzZW5hbWUoZmlsZS5wYXRoLCAnLmpzb24nKTtcbiAgICAgICAgZWwuc2V0VGV4dChwcmVzZXROYW1lKTtcbiAgICB9XG5cbiAgICBzZWxlY3RTdWdnZXN0aW9uKGZpbGU6IFRGaWxlKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHByZXNldE5hbWUgPSBwYXRoLmJhc2VuYW1lKGZpbGUucGF0aCwgJy5qc29uJyk7XG4gICAgICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9IHByZXNldE5hbWU7XG4gICAgICAgIHRoaXMuaW5wdXRFbC50cmlnZ2VyKFwiaW5wdXRcIik7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBDYXJkTmF2aWdhdG9yRXJyb3IgfSBmcm9tIFwiLi9FcnJvclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gbG9nX3VwZGF0ZShtc2c6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoXCJcIiwgMTUwMDApO1xuICAgIC8vIFRPRE86IEZpbmQgYmV0dGVyIHdheSBmb3IgdGhpc1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBub3RpY2Uubm90aWNlRWwuaW5uZXJIVE1MID0gYDxiPkNhcmQgTmF2aWdhdG9yIHVwZGF0ZTwvYj46PGJyLz4ke21zZ31gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nX2Vycm9yKGU6IEVycm9yIHwgQ2FyZE5hdmlnYXRvckVycm9yKTogdm9pZCB7XG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZShcIlwiLCA4MDAwKTtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIENhcmROYXZpZ2F0b3JFcnJvciAmJiBlLmNvbnNvbGVfbXNnKSB7XG4gICAgICAgIC8vIFRPRE86IEZpbmQgYSBiZXR0ZXIgd2F5IGZvciB0aGlzXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgbm90aWNlLm5vdGljZUVsLmlubmVySFRNTCA9IGA8Yj5DYXJkIE5hdmlnYXRvciBFcnJvcjwvYj46PGJyLz4ke2UubWVzc2FnZX08YnIvPkNoZWNrIGNvbnNvbGUgZm9yIG1vcmUgaW5mb3JtYXRpb25gO1xuICAgICAgICBjb25zb2xlLmVycm9yKGBDYXJkIE5hdmlnYXRvciBFcnJvcjpgLCBlLm1lc3NhZ2UsIFwiXFxuXCIsIGUuY29uc29sZV9tc2cpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcblx0XHRub3RpY2Uubm90aWNlRWwuaW5uZXJIVE1MID0gYDxiPkNhcmQgTmF2aWdhdG9yIEVycm9yPC9iPjo8YnIvPiR7ZS5tZXNzYWdlfWA7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IGxvZ19lcnJvciB9IGZyb20gXCIuL0xvZ1wiO1xuXG5leHBvcnQgY2xhc3MgQ2FyZE5hdmlnYXRvckVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1zZzogc3RyaW5nLCBwdWJsaWMgY29uc29sZV9tc2c/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobXNnKTtcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXJyb3JXcmFwcGVyPFQ+KFxuICAgIGZuOiAoKSA9PiBQcm9taXNlPFQ+LFxuICAgIG1zZzogc3RyaW5nXG4pOiBQcm9taXNlPFQ+IHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXdhaXQgZm4oKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gZSBhcyBFcnJvcjsgLy8gXHVEMEMwXHVDNzg1IFx1QkE4NVx1QzJEQ1xuICAgICAgICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIENhcmROYXZpZ2F0b3JFcnJvcikpIHtcbiAgICAgICAgICAgIGxvZ19lcnJvcihuZXcgQ2FyZE5hdmlnYXRvckVycm9yKG1zZywgZXJyb3IubWVzc2FnZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9nX2Vycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbCBhcyBUO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVycm9yV3JhcHBlclN5bmM8VD4oZm46ICgpID0+IFQsIG1zZzogc3RyaW5nKTogVCB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zdCBlcnJvciA9IGUgYXMgRXJyb3I7IC8vIFx1RDBDMFx1Qzc4NSBcdUJBODVcdUMyRENcbiAgICAgICAgbG9nX2Vycm9yKG5ldyBDYXJkTmF2aWdhdG9yRXJyb3IobXNnLCBlcnJvci5tZXNzYWdlKSk7XG4gICAgICAgIHJldHVybiBudWxsIGFzIFQ7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IENhcmROYXZpZ2F0b3JFcnJvciB9IGZyb20gXCIuL0Vycm9yXCI7XG5pbXBvcnQge1xuICAgIEFwcCxcbiAgICBub3JtYWxpemVQYXRoLFxuICAgIFRBYnN0cmFjdEZpbGUsXG4gICAgVEZpbGUsXG4gICAgVEZvbGRlcixcbiAgICBWYXVsdCxcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVfUmVnRXhwKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTsgLy8gJCYgbWVhbnMgdGhlIHdob2xlIG1hdGNoZWQgc3RyaW5nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZV9jb21tYW5kX3JlZ2V4KCk6IFJlZ0V4cCB7XG4gICAgcmV0dXJuIC88JSg/Oi18Xyk/XFxzKlsqfl17MCwxfSgoPzoufFxccykqPykoPzotfF8pPyU+L2c7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZV9keW5hbWljX2NvbW1hbmRfcmVnZXgoKTogUmVnRXhwIHtcbiAgICByZXR1cm4gLyg8JSg/Oi18Xyk/XFxzKlsqfl17MCwxfSlcXCsoKD86LnxcXHMpKj8lPikvZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVfdGZvbGRlcihhcHA6IEFwcCwgZm9sZGVyX3N0cjogc3RyaW5nKTogVEZvbGRlciB7XG4gICAgZm9sZGVyX3N0ciA9IG5vcm1hbGl6ZVBhdGgoZm9sZGVyX3N0cik7XG5cbiAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlcl9zdHIpO1xuICAgIGlmICghZm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBDYXJkTmF2aWdhdG9yRXJyb3IoYEZvbGRlciBcIiR7Zm9sZGVyX3N0cn1cIiBkb2Vzbid0IGV4aXN0YCk7XG4gICAgfVxuICAgIGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBDYXJkTmF2aWdhdG9yRXJyb3IoYCR7Zm9sZGVyX3N0cn0gaXMgYSBmaWxlLCBub3QgYSBmb2xkZXJgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZm9sZGVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZV90ZmlsZShhcHA6IEFwcCwgZmlsZV9zdHI6IHN0cmluZyk6IFRGaWxlIHtcbiAgICBmaWxlX3N0ciA9IG5vcm1hbGl6ZVBhdGgoZmlsZV9zdHIpO1xuXG4gICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZV9zdHIpO1xuICAgIGlmICghZmlsZSkge1xuICAgICAgICB0aHJvdyBuZXcgQ2FyZE5hdmlnYXRvckVycm9yKGBGaWxlIFwiJHtmaWxlX3N0cn1cIiBkb2Vzbid0IGV4aXN0YCk7XG4gICAgfVxuICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IENhcmROYXZpZ2F0b3JFcnJvcihgJHtmaWxlX3N0cn0gaXMgYSBmb2xkZXIsIG5vdCBhIGZpbGVgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmlsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldF90ZmlsZXNfZnJvbV9mb2xkZXIoYXBwOiBBcHAsIGZvbGRlcl9zdHI6IHN0cmluZyk6IEFycmF5PFRGaWxlPiB7XG4gICAgY29uc3QgZm9sZGVyID0gcmVzb2x2ZV90Zm9sZGVyKGFwcCwgZm9sZGVyX3N0cik7XG5cbiAgICBjb25zdCBmaWxlczogQXJyYXk8VEZpbGU+ID0gW107XG4gICAgVmF1bHQucmVjdXJzZUNoaWxkcmVuKGZvbGRlciwgKGZpbGU6IFRBYnN0cmFjdEZpbGUpID0+IHtcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgZmlsZXMucHVzaChmaWxlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZmlsZXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBmaWxlcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5bW92ZTxUPihcbiAgICBhcnI6IFRbXSxcbiAgICBmcm9tSW5kZXg6IG51bWJlcixcbiAgICB0b0luZGV4OiBudW1iZXJcbik6IHZvaWQge1xuICAgIGlmICh0b0luZGV4IDwgMCB8fCB0b0luZGV4ID09PSBhcnIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZWxlbWVudCA9IGFycltmcm9tSW5kZXhdO1xuICAgIGFycltmcm9tSW5kZXhdID0gYXJyW3RvSW5kZXhdO1xuICAgIGFyclt0b0luZGV4XSA9IGVsZW1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRfYWN0aXZlX2ZpbGUoYXBwOiBBcHApIHtcbiAgICByZXR1cm4gYXBwLndvcmtzcGFjZS5hY3RpdmVFZGl0b3I/LmZpbGUgPz8gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHBhdGggTm9ybWFsaXplZCBmaWxlIHBhdGhcbiAqIEByZXR1cm5zIEZvbGRlciBwYXRoXG4gKiBAZXhhbXBsZVxuICogZ2V0X2ZvbGRlcl9wYXRoX2Zyb21fcGF0aChub3JtYWxpemVQYXRoKFwicGF0aC90by9mb2xkZXIvZmlsZVwiLCBcIm1kXCIpKSAvLyBwYXRoL3RvL2ZvbGRlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0X2ZvbGRlcl9wYXRoX2Zyb21fZmlsZV9wYXRoKHBhdGg6IHN0cmluZykge1xuICAgIGNvbnN0IHBhdGhfc2VwYXJhdG9yID0gcGF0aC5sYXN0SW5kZXhPZihcIi9cIik7XG4gICAgaWYgKHBhdGhfc2VwYXJhdG9yICE9PSAtMSkgcmV0dXJuIHBhdGguc2xpY2UoMCwgcGF0aF9zZXBhcmF0b3IpO1xuICAgIHJldHVybiBcIlwiO1xufVxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcsIE5vdGljZSwgVGV4dEFyZWFDb21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgQ2FyZE5hdmlnYXRvclBsdWdpbiBmcm9tICcuLi8uLi8uLi9tYWluJztcbmltcG9ydCB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4uL3NldHRpbmdzTWFuYWdlcic7XG5pbXBvcnQgeyB0IH0gZnJvbSAnaTE4bmV4dCc7XG5cbmV4cG9ydCBjbGFzcyBQcmVzZXRFZGl0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBwcmVzZXROYW1lID0gJyc7XG4gICAgcHJpdmF0ZSBkZXNjcmlwdGlvbiA9ICcnO1xuICAgIHByaXZhdGUgcHJlc2V0RGF0YSA9ICcnO1xuICAgIHByaXZhdGUgZGF0YVRleHRBcmVhOiBUZXh0QXJlYUNvbXBvbmVudCB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGFwcDogQXBwLFxuICAgICAgICBwcml2YXRlIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbixcbiAgICAgICAgcHJpdmF0ZSBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlcixcbiAgICAgICAgcHJpdmF0ZSBtb2RlOiAnY3JlYXRlJyB8ICdlZGl0JyB8ICdjbG9uZScsXG4gICAgICAgIHByaXZhdGUgZXhpc3RpbmdQcmVzZXROYW1lPzogc3RyaW5nLFxuICAgICAgICBwcml2YXRlIHJlZnJlc2hQcmVzZXRMaXN0PzogKCkgPT4gdm9pZFxuICAgICkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuXHRhc3luYyBvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy5nZXRNb2RhbFRpdGxlKCkgfSk7XG5cdFxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKHQoJ1BSRVNFVF9OQU1FJykpXG5cdFx0XHQuc2V0RGVzYyh0KCdFTlRFUl9QUkVTRVRfTkFNRScpKVxuXHRcdFx0LmFkZFRleHRBcmVhKGFzeW5jIHRleHQgPT4ge1xuXHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKHQoJ0VOVEVSX1BSRVNFVF9OQU1FX1BMQUNFSE9MREVSJykpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmdldEluaXRpYWxQcmVzZXROYW1lKCkpXG5cdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB0aGlzLnByZXNldE5hbWUgPSB2YWx1ZSk7XG5cdFx0XHRcdHRleHQuaW5wdXRFbC5yb3dzID0gMTtcblx0XHRcdFx0dGV4dC5pbnB1dEVsLnN0eWxlLndpZHRoID0gJzM1MHB4Jztcblx0XHRcdH0pO1xuXHRcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZSh0KCdERVNDUklQVElPTicpKVxuXHRcdFx0LnNldERlc2ModCgnRU5URVJfUFJFU0VUX0RFU0NSSVBUSU9OJykpXG5cdFx0XHQuYWRkVGV4dEFyZWEoYXN5bmMgdGV4dCA9PiB7XG5cdFx0XHRcdHRleHQuc2V0UGxhY2Vob2xkZXIodCgnRU5URVJfUFJFU0VUX0RFU0NSSVBUSU9OX1BMQUNFSE9MREVSJykpXG5cdFx0XHRcdFx0LnNldFZhbHVlKGF3YWl0IHRoaXMuZ2V0SW5pdGlhbERlc2NyaXB0aW9uKCkpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKHZhbHVlID0+IHRoaXMuZGVzY3JpcHRpb24gPSB2YWx1ZSk7XG5cdFx0XHRcdHRleHQuaW5wdXRFbC5yb3dzID0gNDtcblx0XHRcdFx0dGV4dC5pbnB1dEVsLnN0eWxlLndpZHRoID0gJzM1MHB4Jztcblx0XHRcdH0pO1xuXHRcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0LnNldE5hbWUodCgnUFJFU0VUX0RBVEEnKSlcblx0XHQuc2V0RGVzYyh0KCdFRElUX1BSRVNFVF9EQVRBX0RFU0MnKSlcblx0XHQuYWRkVGV4dEFyZWEoYXN5bmMgdGV4dCA9PiB7XG5cdFx0XHR0aGlzLmRhdGFUZXh0QXJlYSA9IHRleHQ7XG5cdFx0XHRjb25zdCBpbml0aWFsRGF0YSA9IGF3YWl0IHRoaXMuZ2V0SW5pdGlhbFByZXNldERhdGEoKTtcblx0XHRcdHRoaXMucHJlc2V0RGF0YSA9IGluaXRpYWxEYXRhO1xuXHRcdFx0dGV4dC5zZXRQbGFjZWhvbGRlcih0KCdQUkVTRVRfREFUQV9QTEFDRUhPTERFUicpKVxuXHRcdFx0XHQuc2V0VmFsdWUoaW5pdGlhbERhdGEpXG5cdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB0aGlzLnByZXNldERhdGEgPSB2YWx1ZSk7XG5cdFx0XHR0ZXh0LmlucHV0RWwucm93cyA9IDEwO1xuXHRcdFx0dGV4dC5pbnB1dEVsLnN0eWxlLndpZHRoID0gJzM1MHB4Jztcblx0XHR9KTtcblx0XG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LmFkZEJ1dHRvbihidG4gPT4gYnRuXG5cdFx0XHRcdC5zZXRCdXR0b25UZXh0KHQoJ1VQREFURV9XSVRIX0NVUlJFTlRfU0VUVElOR1MnKSlcblx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4gdGhpcy51cGRhdGVQcmVzZXRXaXRoQ3VycmVudFNldHRpbmdzKCkpKTtcblx0XG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LmFkZEJ1dHRvbihidG4gPT4gYnRuXG5cdFx0XHRcdC5zZXRCdXR0b25UZXh0KHQoJ1NBVkUnKSlcblx0XHRcdFx0LnNldEN0YSgpXG5cdFx0XHRcdC5vbkNsaWNrKCgpID0+IHRoaXMuc2F2ZVByZXNldCgpKSk7XG5cdH1cblxuICAgIHByaXZhdGUgZ2V0TW9kYWxUaXRsZSgpOiBzdHJpbmcge1xuICAgICAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgICAgICAgY2FzZSAnY3JlYXRlJzogcmV0dXJuIHQoJ0NSRUFURV9ORVdfUFJFU0VUJyk7XG4gICAgICAgICAgICBjYXNlICdlZGl0JzogcmV0dXJuIHQoJ0VESVRfUFJFU0VUJyk7XG4gICAgICAgICAgICBjYXNlICdjbG9uZSc6IHJldHVybiB0KCdDTE9ORV9QUkVTRVQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SW5pdGlhbFByZXNldE5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2NyZWF0ZSc6IHJldHVybiAnJztcbiAgICAgICAgICAgIGNhc2UgJ2VkaXQnOiByZXR1cm4gdGhpcy5leGlzdGluZ1ByZXNldE5hbWUgfHwgJyc7XG4gICAgICAgICAgICBjYXNlICdjbG9uZSc6IHJldHVybiB0KCdQUkVTRVRfQ09QWScsIHtuYW1lOiB0aGlzLmV4aXN0aW5nUHJlc2V0TmFtZSB8fCAnJ30pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRJbml0aWFsRGVzY3JpcHRpb24oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ2NyZWF0ZScpIHJldHVybiAnJztcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQcmVzZXQgPSBhd2FpdCB0aGlzLnBsdWdpbi5wcmVzZXRNYW5hZ2VyLmdldFByZXNldCh0aGlzLmV4aXN0aW5nUHJlc2V0TmFtZSB8fCAnJyk7XG4gICAgICAgIHJldHVybiBleGlzdGluZ1ByZXNldD8uZGVzY3JpcHRpb24gfHwgJyc7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgYXN5bmMgZ2V0SW5pdGlhbFByZXNldERhdGEoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ2NyZWF0ZScpIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnBsdWdpbi5zZXR0aW5nc01hbmFnZXIuZ2V0Q3VycmVudFNldHRpbmdzKCksIG51bGwsIDIpO1xuICAgICAgICBjb25zdCBleGlzdGluZ1ByZXNldCA9IGF3YWl0IHRoaXMucGx1Z2luLnByZXNldE1hbmFnZXIuZ2V0UHJlc2V0KHRoaXMuZXhpc3RpbmdQcmVzZXROYW1lIHx8ICcnKTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nUHJlc2V0Py5zZXR0aW5ncyB8fCB7fSwgbnVsbCwgMik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyB1cGRhdGVQcmVzZXRXaXRoQ3VycmVudFNldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBjdXJyZW50U2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc01hbmFnZXIuZ2V0Q3VycmVudFNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMucHJlc2V0RGF0YSA9IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRTZXR0aW5ncywgbnVsbCwgMik7XG4gICAgICAgIGlmICh0aGlzLmRhdGFUZXh0QXJlYSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhVGV4dEFyZWEuc2V0VmFsdWUodGhpcy5wcmVzZXREYXRhKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZVByZXNldCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByZXNldE5hbWUgJiYgdGhpcy5tb2RlICE9PSAnZWRpdCcpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UodCgnRU5URVJfUFJFU0VUX05BTUVfTk9USUNFJykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIGlmICghdGhpcy5wcmVzZXREYXRhLnRyaW0oKSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSh0KCdQUkVTRVRfREFUQV9FTVBUWScpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXHRcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgcHJlc2V0U2V0dGluZ3MgPSBKU09OLnBhcnNlKHRoaXMucHJlc2V0RGF0YSk7XG5cdFx0XHRjb25zdCBzYXZlTmFtZSA9IHRoaXMubW9kZSA9PT0gJ2VkaXQnID8gKHRoaXMuZXhpc3RpbmdQcmVzZXROYW1lIHx8IHRoaXMucHJlc2V0TmFtZSkgOiB0aGlzLnByZXNldE5hbWU7XG5cdFxuXHRcdFx0c3dpdGNoICh0aGlzLm1vZGUpIHtcblx0XHRcdFx0Y2FzZSAnY3JlYXRlJzpcblx0XHRcdFx0Y2FzZSAnY2xvbmUnOlxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnByZXNldE1hbmFnZXIuc2F2ZVByZXNldChzYXZlTmFtZSwgdGhpcy5kZXNjcmlwdGlvbiwgcHJlc2V0U2V0dGluZ3MpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnByZXNldE1hbmFnZXIuYXBwbHlHbG9iYWxQcmVzZXQoc2F2ZU5hbWUpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdlZGl0Jzpcblx0XHRcdFx0XHRpZiAodGhpcy5leGlzdGluZ1ByZXNldE5hbWUpIHtcblx0XHRcdFx0XHRcdGlmICh0aGlzLmV4aXN0aW5nUHJlc2V0TmFtZSAhPT0gc2F2ZU5hbWUpIHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4ucHJlc2V0TWFuYWdlci5kZWxldGVQcmVzZXQodGhpcy5leGlzdGluZ1ByZXNldE5hbWUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4ucHJlc2V0TWFuYWdlci5zYXZlUHJlc2V0KHNhdmVOYW1lLCB0aGlzLmRlc2NyaXB0aW9uLCBwcmVzZXRTZXR0aW5ncyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmFwcGx5Q2hhbmdlcygpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSh0KCdQUkVTRVRfU0FWRUQnLCB7bmFtZTogc2F2ZU5hbWV9KSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLnJlZnJlc2hQcmVzZXRMaXN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoUHJlc2V0TGlzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcih0KCdGQUlMRURfVE9fU0FWRV9QUkVTRVQnKSwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSh0KCdQUkVTRVRfU0FWRV9GQUlMRUQnLCB7ZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX0pKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgQ2FyZE5hdmlnYXRvclBsdWdpbiBmcm9tICcuLi8uLi8uLi9tYWluJztcbmltcG9ydCB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4uL3NldHRpbmdzTWFuYWdlcic7XG5pbXBvcnQgeyBQcmVzZXQgfSBmcm9tICcuLi8uLi8uLi9jb21tb24vdHlwZXMnO1xuaW1wb3J0IHsgdCB9IGZyb20gJ2kxOG5leHQnO1xuXG5leHBvcnQgY2xhc3MgUHJlc2V0SW1wb3J0RXhwb3J0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBpbXBvcnRUZXh0ID0gJyc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgYXBwOiBBcHAsXG4gICAgICAgIHByaXZhdGUgcGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luLFxuICAgICAgICBwcml2YXRlIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyLFxuICAgICAgICBwcml2YXRlIG1vZGU6ICdpbXBvcnQnIHwgJ2V4cG9ydCcsXG4gICAgICAgIHByaXZhdGUgcHJlc2V0TmFtZT86IHN0cmluZyxcbiAgICAgICAgcHJpdmF0ZSByZWZyZXNoUHJlc2V0TGlzdD86ICgpID0+IHZvaWRcbiAgICApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSAnaW1wb3J0Jykge1xuICAgICAgICAgICAgdGhpcy5zZXR1cEltcG9ydFVJKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldHVwRXhwb3J0VUkoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2V0dXBJbXBvcnRVSSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHQoJ0lNUE9SVF9QUkVTRVQnKSB9KTtcblxuICAgICAgICBjb25zdCB0ZXh0QXJlYUNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ3ByZXNldC1pbXBvcnQtdGV4dGFyZWEtY29udGFpbmVyJyk7XG4gICAgICAgIGNvbnN0IHRleHRBcmVhID0gdGV4dEFyZWFDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiB0KCdQQVNURV9QUkVTRVRfSlNPTl9IRVJFJyksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGV4dEFyZWEucm93cyA9IDIwO1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgdGV4dEFyZWEuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pbXBvcnRUZXh0ID0gKGUudGFyZ2V0IGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQpLnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgIC5hZGRCdXR0b24oYnRuID0+IGJ0blxuICAgICAgICAgICAgLnNldEJ1dHRvblRleHQodCgnSU1QT1JUJykpXG4gICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmVzZXREYXRhID0gSlNPTi5wYXJzZSh0aGlzLmltcG9ydFRleHQpIGFzIFByZXNldDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmVzZXREYXRhLm5hbWUgfHwgIXByZXNldERhdGEuc2V0dGluZ3MgfHwgdHlwZW9mIHByZXNldERhdGEuZGVzY3JpcHRpb24gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodCgnSU5WQUxJRF9QUkVTRVRfREFUQScpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBcdUQ1MDRcdUI5QUNcdUMxNEIgXHVDODAwXHVDN0E1IFx1QzJEQyBcdUMxMjRcdUM4MTUgXHVBQzEyXHVCM0M0IFx1RDU2OFx1QUVEOCBcdUM4MDBcdUM3QTVcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4ucHJlc2V0TWFuYWdlci5zYXZlUHJlc2V0KHByZXNldERhdGEubmFtZSwgcHJlc2V0RGF0YS5kZXNjcmlwdGlvbiwgcHJlc2V0RGF0YS5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmFwcGx5Q2hhbmdlcygpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHQoJ1BSRVNFVF9JTVBPUlRFRF9TVUNDRVNTRlVMTFknLCB7bmFtZTogcHJlc2V0RGF0YS5uYW1lfSkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1RDUwNFx1QjlBQ1x1QzE0QiBcdUJBQTlcdUI4NUQgXHVDMEM4XHVCODVDXHVBQ0UwXHVDRTY4XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlZnJlc2hQcmVzZXRMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hQcmVzZXRMaXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0fSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcblx0XHRcdFx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZSh0KCdQUkVTRVRfSU1QT1JUX0ZBSUxFRCcsIHtlcnJvcjogZXJyb3IubWVzc2FnZX0pKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZSh0KCdVTktOT1dOX0VSUk9SX0RVUklOR19JTVBPUlQnKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBzZXR1cEV4cG9ydFVJKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdCgnRVhQT1JUX1BSRVNFVCcpIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLnByZXNldE5hbWUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJlc2V0ID0gYXdhaXQgdGhpcy5wbHVnaW4ucHJlc2V0TWFuYWdlci5nZXRQcmVzZXQodGhpcy5wcmVzZXROYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAocHJlc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShwcmVzZXQsIG51bGwsIDIpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dEFyZWFDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdwcmVzZXQtZXhwb3J0LXRleHRhcmVhLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0QXJlYSA9IHRleHRBcmVhQ29udGFpbmVyLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGpzb25TdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZG9ubHk6ICd0cnVlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0QXJlYS5yb3dzID0gMjA7XG4gICAgICAgICAgICAgICAgICAgIHRleHRBcmVhLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oYnRuID0+IGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KHQoJ0NPUFknKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGpzb25TdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHQoJ1BSRVNFVF9KU09OX0NPUElFRCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0KCdQUkVTRVRfTk9UX0ZPVU5EJykgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHQoJ0VSUk9SX0xPQURJTkdfUFJFU0VUJyksIGVycm9yKTtcbiAgICAgICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHQoJ0VSUk9SX0xPQURJTkdfUFJFU0VUJykgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHQoJ05PX1BSRVNFVF9TRUxFQ1RFRCcpIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IENhcmROYXZpZ2F0b3JQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XG5pbXBvcnQgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tICcuL3NldHRpbmdzTWFuYWdlcic7XG5pbXBvcnQgeyBDYXJkTmF2aWdhdG9yU2V0dGluZ3MgfSBmcm9tICcuLi8uLi9jb21tb24vdHlwZXMnO1xuaW1wb3J0IHsgU2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3NUYWInO1xuaW1wb3J0IHsgdCB9IGZyb20gJ2kxOG5leHQnO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkTGF5b3V0U2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4sIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyLCBzZXR0aW5nVGFiOiBTZXR0aW5nVGFiKTogdm9pZCB7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZXR0aW5ncy1zZWN0aW9uLW1hcmdpbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUodCgnTEFZT1VUX1NFVFRJTkdTJykpXG4gICAgICAgIC5zZXRIZWFkaW5nKCk7XG5cbiAgICBjb25zdCBzZXR0aW5nczogUmVjb3JkPHN0cmluZywgU2V0dGluZz4gPSB7fTtcblxuICAgIC8vIERlZmF1bHQgTGF5b3V0XG4gICAgc2V0dGluZ3MuZGVmYXVsdExheW91dCA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSh0KCdERUZBVUxUX0xBWU9VVCcpKVxuICAgICAgICAuc2V0RGVzYyh0KCdERUZBVUxUX0xBWU9VVF9ERVNDJykpXG4gICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2F1dG8nLCB0KCdBVVRPJykpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbGlzdCcsIHQoJ0xJU1QnKSlcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdncmlkJywgdCgnR1JJRCcpKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ21hc29ucnknLCB0KCdNQVNPTlJZJykpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TGF5b3V0KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGF5b3V0ID0gdmFsdWUgYXMgQ2FyZE5hdmlnYXRvclNldHRpbmdzWydkZWZhdWx0TGF5b3V0J107XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNldHRpbmdzTWFuYWdlci51cGRhdGVTZXR0aW5nKCdkZWZhdWx0TGF5b3V0JywgbGF5b3V0KTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2V0dGluZ3NTdGF0ZShsYXlvdXQsIHBsdWdpbi5zZXR0aW5ncy5hbGlnbkNhcmRIZWlnaHQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgIC8vIENhcmQgV2lkdGggVGhyZXNob2xkXG4gICAgc2V0dGluZ3MuY2FyZFdpZHRoVGhyZXNob2xkID0gc2V0dGluZ1RhYi5hZGRTbGlkZXJTZXR0aW5nKFxuICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgJ2NhcmRXaWR0aFRocmVzaG9sZCcsXG4gICAgICAgIHQoJ0NBUkRfV0lEVEhfVEhSRVNIT0xEJyksXG4gICAgICAgIHQoJ0NBUkRfV0lEVEhfVEhSRVNIT0xEX0RFU0MnKVxuICAgICk7XG5cbiAgICAvLyBBbGlnbiBDYXJkIEhlaWdodFxuICAgIHNldHRpbmdzLmFsaWduQ2FyZEhlaWdodCA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKHQoJ0FMSUdOX0NBUkRfSEVJR0hUJykpXG4gICAgLnNldERlc2ModCgnQUxJR05fQ0FSRF9IRUlHSFRfREVTQycpKVxuICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLmFsaWduQ2FyZEhlaWdodClcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgc2V0dGluZ3NNYW5hZ2VyLnVwZGF0ZVNldHRpbmcoJ2FsaWduQ2FyZEhlaWdodCcsIHZhbHVlKTtcbiAgICAgICAgICAgIHVwZGF0ZVNldHRpbmdzU3RhdGUocGx1Z2luLnNldHRpbmdzLmRlZmF1bHRMYXlvdXQsIHZhbHVlKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgLy8gQ2FyZHMgUGVyIFZpZXdcbiAgICBzZXR0aW5ncy5jYXJkc1BlclZpZXcgPSBzZXR0aW5nVGFiLmFkZFNsaWRlclNldHRpbmcoXG4gICAgICAgIGNvbnRhaW5lckVsLFxuICAgICAgICAnY2FyZHNQZXJWaWV3JyxcbiAgICAgICAgdCgnQ0FSRFNfUEVSX1ZJRVcnKSxcbiAgICAgICAgdCgnQ0FSRFNfUEVSX1ZJRVdfREVTQycpXG4gICAgKTtcblxuICAgIC8vIEdyaWQgQ29sdW1uc1xuICAgIHNldHRpbmdzLmdyaWRDb2x1bW5zID0gc2V0dGluZ1RhYi5hZGRTbGlkZXJTZXR0aW5nKFxuICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgJ2dyaWRDb2x1bW5zJyxcbiAgICAgICAgdCgnR1JJRF9DT0xVTU5TJyksXG4gICAgICAgIHQoJ0dSSURfQ09MVU1OU19ERVNDJylcbiAgICApO1xuXG4gICAgLy8gR3JpZCBDYXJkIEhlaWdodFxuICAgIHNldHRpbmdzLmdyaWRDYXJkSGVpZ2h0ID0gc2V0dGluZ1RhYi5hZGRTbGlkZXJTZXR0aW5nKFxuICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgJ2dyaWRDYXJkSGVpZ2h0JyxcbiAgICAgICAgdCgnR1JJRF9DQVJEX0hFSUdIVCcpLFxuICAgICAgICB0KCdHUklEX0NBUkRfSEVJR0hUX0RFU0MnKVxuICAgICk7XG5cbiAgICAvLyBNYXNvbnJ5IENvbHVtbnNcbiAgICBzZXR0aW5ncy5tYXNvbnJ5Q29sdW1ucyA9IHNldHRpbmdUYWIuYWRkU2xpZGVyU2V0dGluZyhcbiAgICAgICAgY29udGFpbmVyRWwsXG4gICAgICAgICdtYXNvbnJ5Q29sdW1ucycsXG4gICAgICAgIHQoJ01BU09OUllfQ09MVU1OUycpLFxuICAgICAgICB0KCdNQVNPTlJZX0NPTFVNTlNfREVTQycpXG4gICAgKTtcblxuXHRmdW5jdGlvbiB1cGRhdGVTZXR0aW5nc1N0YXRlKGxheW91dDogQ2FyZE5hdmlnYXRvclNldHRpbmdzWydkZWZhdWx0TGF5b3V0J10sIGFsaWduQ2FyZEhlaWdodDogYm9vbGVhbikge1xuXHRcdGNvbnN0IHVwZGF0ZVNldHRpbmdTdGF0ZSA9IChzZXR0aW5nOiBTZXR0aW5nLCBpc0VuYWJsZWQ6IGJvb2xlYW4pID0+IHtcblx0XHRcdHNldHRpbmcuc2V0RGlzYWJsZWQoIWlzRW5hYmxlZCk7XG5cdFx0XHRpZiAoaXNFbmFibGVkKSB7XG5cdFx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLnJlbW92ZUNsYXNzKCdzZXR0aW5nLWRpc2FibGVkJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRDbGFzcygnc2V0dGluZy1kaXNhYmxlZCcpO1xuXHRcdFx0fVxuXHRcdH07XG5cbiAgICAgICAgdXBkYXRlU2V0dGluZ1N0YXRlKHNldHRpbmdzLmNhcmRXaWR0aFRocmVzaG9sZCwgbGF5b3V0ID09PSAnYXV0bycpO1xuICAgICAgICB1cGRhdGVTZXR0aW5nU3RhdGUoc2V0dGluZ3MuZ3JpZENvbHVtbnMsIGxheW91dCA9PT0gJ2dyaWQnKTtcbiAgICAgICAgdXBkYXRlU2V0dGluZ1N0YXRlKHNldHRpbmdzLmdyaWRDYXJkSGVpZ2h0LCBsYXlvdXQgPT09ICdhdXRvJyB8fCBsYXlvdXQgPT09ICdncmlkJyk7XG4gICAgICAgIHVwZGF0ZVNldHRpbmdTdGF0ZShzZXR0aW5ncy5tYXNvbnJ5Q29sdW1ucywgbGF5b3V0ID09PSAnbWFzb25yeScpO1xuICAgICAgICB1cGRhdGVTZXR0aW5nU3RhdGUoc2V0dGluZ3MuYWxpZ25DYXJkSGVpZ2h0LCBsYXlvdXQgPT09ICdhdXRvJyB8fCBsYXlvdXQgPT09ICdsaXN0Jyk7XG5cdFx0dXBkYXRlU2V0dGluZ1N0YXRlKHNldHRpbmdzLmNhcmRzUGVyVmlldywgKGxheW91dCA9PT0gJ2F1dG8nIHx8IGxheW91dCA9PT0gJ2xpc3QnKSAmJiBhbGlnbkNhcmRIZWlnaHQpO1xuICAgIH1cblxuICAgIC8vIFNldCBpbml0aWFsIHN0YXRlXG4gICAgdXBkYXRlU2V0dGluZ3NTdGF0ZShwbHVnaW4uc2V0dGluZ3MuZGVmYXVsdExheW91dCwgcGx1Z2luLnNldHRpbmdzLmFsaWduQ2FyZEhlaWdodCk7XG59XG4iLCAiaW1wb3J0IHsgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBDYXJkTmF2aWdhdG9yUGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xuaW1wb3J0IHsgU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSAnLi9zZXR0aW5nc01hbmFnZXInO1xuaW1wb3J0IHsgdCB9IGZyb20gJ2kxOG5leHQnO1xuaW1wb3J0IHsgRm9sZGVyU3VnZ2VzdCB9IGZyb20gJy4vY29tcG9uZW50cy9Gb2xkZXJTdWdnZXN0JztcbmltcG9ydCB7IFNldHRpbmdUYWIgfSBmcm9tICcuL3NldHRpbmdzVGFiJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbnRhaW5lclNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luLCBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlciwgc2V0dGluZ1RhYjogU2V0dGluZ1RhYik6IHZvaWQge1xuICAgIFxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmdzLXNlY3Rpb24tbWFyZ2luJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSh0KCdDT05UQUlORVJfU0VUVElOR1MnKSlcbiAgICAgICAgLnNldEhlYWRpbmcoKTtcblxuICAgIHNldHRpbmdUYWIuYWRkVG9nZ2xlU2V0dGluZyhcbiAgICAgICAgY29udGFpbmVyRWwsXG4gICAgICAgICd1c2VTZWxlY3RlZEZvbGRlcicsXG4gICAgICAgIHQoJ1NPVVJDRV9GT0xERVInKSxcbiAgICAgICAgdCgnU09VUkNFX0ZPTERFUl9ERVNDJylcbiAgICApO1xuICAgIFxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSh0KCdTRUxFQ1RfRk9MREVSJykpXG4gICAgICAgIC5zZXREZXNjKHQoJ1NFTEVDVF9GT0xERVJfREVTQycpKVxuICAgICAgICAuYWRkVGV4dChjYiA9PiB7XG4gICAgICAgICAgICBuZXcgRm9sZGVyU3VnZ2VzdChwbHVnaW4uYXBwLCBjYi5pbnB1dEVsKTtcbiAgICAgICAgICAgIGNiLnNldFBsYWNlaG9sZGVyKHQoJ1NFTEVDVF9GT0xERVJfUExBQ0VIT0xERVInKSlcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnNlbGVjdGVkRm9sZGVyIHx8ICcnKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAobmV3Rm9sZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNldHRpbmdzTWFuYWdlci51cGRhdGVTZXR0aW5nKCdzZWxlY3RlZEZvbGRlcicsIG5ld0ZvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNiLmlucHV0RWwuYWRkQ2xhc3MoXCJjYXJkLW5hdmlnYXRvci1mb2xkZXItc2VhcmNoXCIpO1xuICAgICAgICB9KTtcblxuICAgIHNldHRpbmdUYWIuYWRkRHJvcGRvd25TZXR0aW5nKFxuICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgJ3NvcnRNZXRob2QnLFxuICAgICAgICB0KCdERUZBVUxUX1NPUlRfTUVUSE9EJyksXG4gICAgICAgIHQoJ0RFRkFVTFRfU09SVF9NRVRIT0RfREVTQycpXG4gICAgKTtcblxuICAgIC8vIHNldHRpbmdUYWIuYWRkVG9nZ2xlU2V0dGluZyhcbiAgICAvLyAgICAgY29udGFpbmVyRWwsXG4gICAgLy8gICAgICdjZW50ZXJBY3RpdmVDYXJkT25PcGVuJyxcbiAgICAvLyAgICAgdCgnQ0VOVEVSX0FDVElWRV9DQVJEX09OX09QRU4nKSxcbiAgICAvLyAgICAgdCgnQ0VOVEVSX0FDVElWRV9DQVJEX09OX09QRU5fREVTQycpXG4gICAgLy8gKTtcbn1cbiIsICJpbXBvcnQgeyBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IENhcmROYXZpZ2F0b3JQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XG5pbXBvcnQgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tICcuL3NldHRpbmdzTWFuYWdlcic7XG5pbXBvcnQgeyBmb250U2l6ZVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vY29tbW9uL3R5cGVzJztcbmltcG9ydCB7IFNldHRpbmdUYWIgfSBmcm9tICcuL3NldHRpbmdzVGFiJztcbmltcG9ydCB7IHQgfSBmcm9tICdpMThuZXh0JztcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZENhcmRTdHlsaW5nU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4sIHNldHRpbmdzTWFuYWdlcjogU2V0dGluZ3NNYW5hZ2VyLCBzZXR0aW5nVGFiOiBTZXR0aW5nVGFiKTogdm9pZCB7XG5cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZXR0aW5ncy1zZWN0aW9uLW1hcmdpbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgLnNldE5hbWUodCgnQ0FSRF9TVFlMSU5HX1NFVFRJTkdTJykpXG4gICAgICAgIC5zZXRIZWFkaW5nKCk7XG5cbiAgICBmb250U2l6ZVNldHRpbmdzLmZvckVhY2goKHsga2V5LCBuYW1lLCBkZXNjcmlwdGlvbiB9KSA9PiB7XG4gICAgICAgIGlmIChrZXkgPT09ICdmaWxlTmFtZUZvbnRTaXplJyB8fCBrZXkgPT09ICdmaXJzdEhlYWRlckZvbnRTaXplJyB8fCBrZXkgPT09ICdib2R5Rm9udFNpemUnKSB7XG4gICAgICAgICAgICBzZXR0aW5nVGFiLmFkZFNsaWRlclNldHRpbmcoXG4gICAgICAgICAgICAgICAgY29udGFpbmVyRWwsXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHQobmFtZSksXG4gICAgICAgICAgICAgICAgdChkZXNjcmlwdGlvbilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiIsICJpbXBvcnQgeyBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IENhcmROYXZpZ2F0b3JQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XG5pbXBvcnQgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tICcuL3NldHRpbmdzTWFuYWdlcic7XG5pbXBvcnQgeyBjb250ZW50U2V0dGluZ3MgfSBmcm9tICcuLi8uLi9jb21tb24vdHlwZXMnO1xuaW1wb3J0IHsgU2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3NUYWInO1xuaW1wb3J0IHsgdCB9IGZyb20gJ2kxOG5leHQnO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2FyZENvbnRlbnRTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbiwgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXIsIHNldHRpbmdUYWI6IFNldHRpbmdUYWIpOiB2b2lkIHtcblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmdzLXNlY3Rpb24tbWFyZ2luJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSh0KCdDQVJEX0NPTlRFTlRfU0VUVElOR1MnKSlcbiAgICAgICAgLnNldEhlYWRpbmcoKTtcblxuICAgIHNldHRpbmdUYWIuYWRkVG9nZ2xlU2V0dGluZyhcbiAgICAgICAgY29udGFpbmVyRWwsXG4gICAgICAgICdyZW5kZXJDb250ZW50QXNIdG1sJyxcbiAgICAgICAgdCgnUkVOREVSX0NPTlRFTlRfQVNfSFRNTCcpLFxuICAgICAgICB0KCdSRU5ERVJfQ09OVEVOVF9BU19IVE1MX0RFU0MnKVxuICAgICk7XG5cbiAgICBzZXR0aW5nVGFiLmFkZFRvZ2dsZVNldHRpbmcoXG4gICAgICAgIGNvbnRhaW5lckVsLFxuICAgICAgICAnZHJhZ0Ryb3BDb250ZW50JyxcbiAgICAgICAgdCgnRFJBR19BTkRfRFJPUF9DT05URU5UJyksXG4gICAgICAgIHQoJ0RSQUdfQU5EX0RST1BfQ09OVEVOVF9ERVNDJylcbiAgICApO1xuXG4gICAgY29udGVudFNldHRpbmdzLmZvckVhY2goKHsga2V5LCBuYW1lLCBkZXNjcmlwdGlvbiB9KSA9PiB7XG4gICAgICAgIHNldHRpbmdUYWIuYWRkVG9nZ2xlU2V0dGluZyhcbiAgICAgICAgICAgIGNvbnRhaW5lckVsLFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgdChuYW1lKSxcbiAgICAgICAgICAgIHQoZGVzY3JpcHRpb24pXG4gICAgICAgICk7XG4gICAgfSk7XG5cbiAgICBzZXR0aW5nVGFiLmFkZFRvZ2dsZVNldHRpbmcoXG4gICAgICAgIGNvbnRhaW5lckVsLFxuICAgICAgICAnYm9keUxlbmd0aExpbWl0JyxcbiAgICAgICAgdCgnQk9EWV9MRU5HVEhfTElNSVQnKSxcbiAgICAgICAgdCgnQk9EWV9MRU5HVEhfTElNSVRfREVTQycpXG4gICAgKTtcblxuICAgIGNvbnN0IGJvZHlMZW5ndGhTZXR0aW5nID0gc2V0dGluZ1RhYi5hZGRTbGlkZXJTZXR0aW5nKFxuICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgJ2JvZHlMZW5ndGgnLFxuICAgICAgICB0KCdCT0RZX0xFTkdUSCcpLFxuICAgICAgICB0KCdCT0RZX0xFTkdUSF9ERVNDJylcbiAgICApO1xuXG4gICAgLy8gVXBkYXRlIEJvZHkgTGVuZ3RoIHNldHRpbmcgc3RhdGVcbiAgICBjb25zdCB1cGRhdGVCb2R5TGVuZ3RoU3RhdGUgPSAoaXNMaW1pdGVkOiBib29sZWFuKSA9PiB7XG4gICAgICAgIGJvZHlMZW5ndGhTZXR0aW5nLnNldERpc2FibGVkKCFpc0xpbWl0ZWQpO1xuICAgICAgICBpZiAoaXNMaW1pdGVkKSB7XG4gICAgICAgICAgICBib2R5TGVuZ3RoU2V0dGluZy5zZXR0aW5nRWwucmVtb3ZlQ2xhc3MoJ3NldHRpbmctZGlzYWJsZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJvZHlMZW5ndGhTZXR0aW5nLnNldHRpbmdFbC5hZGRDbGFzcygnc2V0dGluZy1kaXNhYmxlZCcpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIFNldCBpbml0aWFsIHN0YXRlIG9mIEJvZHkgTGVuZ3RoIHNldHRpbmdcbiAgICB1cGRhdGVCb2R5TGVuZ3RoU3RhdGUocGx1Z2luLnNldHRpbmdzLmJvZHlMZW5ndGhMaW1pdCk7XG59XG4iLCAiaW1wb3J0IHsgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IGtleWJvYXJkU2hvcnRjdXRzIH0gZnJvbSAnLi4vLi4vY29tbW9uL3R5cGVzJztcbmltcG9ydCB7IHQgfSBmcm9tICdpMThuZXh0JztcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEtleWJvYXJkU2hvcnRjdXRzSW5mbyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmdzLXNlY3Rpb24tbWFyZ2luJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSh0KCdLRVlCT0FSRF9TSE9SVENVVFMnKSlcbiAgICAgICAgLnNldEhlYWRpbmcoKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXREZXNjKHQoJ0tFWUJPQVJEX1NIT1JUQ1VUU19ERVNDJykpXG5cbiAgICBjb25zdCB0YWJsZUNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2tleWJvYXJkLXNob3J0Y3V0cy10YWJsZS1jb250YWluZXInIH0pO1xuICAgIGNvbnN0IHRhYmxlID0gdGFibGVDb250YWluZXIuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICdrZXlib2FyZC1zaG9ydGN1dHMtdGFibGUnIH0pO1xuICAgIFxuICAgIGNvbnN0IHRoZWFkID0gdGFibGUuY3JlYXRlRWwoJ3RoZWFkJyk7XG4gICAgY29uc3QgaGVhZGVyUm93ID0gdGhlYWQuY3JlYXRlRWwoJ3RyJyk7XG4gICAgaGVhZGVyUm93LmNyZWF0ZUVsKCd0aCcsIHsgdGV4dDogdCgnQ09NTUFORCcpIH0pO1xuICAgIGhlYWRlclJvdy5jcmVhdGVFbCgndGgnLCB7IHRleHQ6IHQoJ0RFU0NSSVBUSU9OJykgfSk7XG5cbiAgICBjb25zdCB0Ym9keSA9IHRhYmxlLmNyZWF0ZUVsKCd0Ym9keScpO1xuICAgIGtleWJvYXJkU2hvcnRjdXRzLmZvckVhY2goKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkgPT4ge1xuICAgICAgICBjb25zdCByb3cgPSB0Ym9keS5jcmVhdGVFbCgndHInKTtcbiAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogdChuYW1lKSwgY2xzOiAna2V5Ym9hcmQtc2hvcnRjdXQtbmFtZScgfSk7XG4gICAgICAgIHJvdy5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IHQoZGVzY3JpcHRpb24pLCBjbHM6ICdrZXlib2FyZC1zaG9ydGN1dC1kZXNjcmlwdGlvbicgfSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBjdXN0b21pemVOb3RlID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IGNsczogJ2tleWJvYXJkLXNob3J0Y3V0cy1ub3RlJyB9KTtcbiAgICBjdXN0b21pemVOb3RlLnNldFRleHQodCgnS0VZQk9BUkRfU0hPUlRDVVRTX0NVU1RPTUlaRV9OT1RFJykpO1xuXG4gICAgY29uc3QgYWRkaXRpb25hbE5vdGUgPSBjb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHsgY2xzOiAna2V5Ym9hcmQtc2hvcnRjdXRzLW5vdGUnIH0pO1xuICAgIGFkZGl0aW9uYWxOb3RlLnNldFRleHQodCgnS0VZQk9BUkRfU0hPUlRDVVRTX0FERElUSU9OQUxfTk9URScpKTtcbn1cbiIsICJpbXBvcnQgeyBURm9sZGVyLCBURmlsZSwgZGVib3VuY2UsIE1vZGFsLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgQ2FyZE5hdmlnYXRvclBsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcbmltcG9ydCB7IENhcmROYXZpZ2F0b3JTZXR0aW5ncywgTnVtYmVyU2V0dGluZ0tleSwgUmFuZ2VTZXR0aW5nQ29uZmlnLCByYW5nZVNldHRpbmdDb25maWdzLCBGb2xkZXJQcmVzZXRzLCBERUZBVUxUX1NFVFRJTkdTLCBnbG9iYWxTZXR0aW5nc0tleXMgfSBmcm9tICcuLi8uLi9jb21tb24vdHlwZXMnO1xuaW1wb3J0IHsgSVNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4uLy4uL2NvbW1vbi9JU2V0dGluZ3NNYW5hZ2VyJztcbmltcG9ydCB7IElQcmVzZXRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vY29tbW9uL0lQcmVzZXRNYW5hZ2VyJztcbmltcG9ydCB7IHQgfSBmcm9tICdpMThuZXh0JztcblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzTWFuYWdlciBpbXBsZW1lbnRzIElTZXR0aW5nc01hbmFnZXIge1xuICAgIHByaXZhdGUgc2F2ZVNldHRpbmdzRGVib3VuY2VkID0gZGVib3VuY2UoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgc2V0dGluZ3M6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSwgNTAwKTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luLCBwcml2YXRlIHByZXNldE1hbmFnZXI6IElQcmVzZXRNYW5hZ2VyKSB7fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IodCgnRVJST1JfU0FWSU5HX1NFVFRJTkdTJyksIGVycm9yKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0Y29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IHRoaXMucGx1Z2luLmxvYWREYXRhKCk7XG5cdFx0XG5cdFx0aWYgKGxvYWRlZERhdGEpIHtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgbG9hZGVkRGF0YSkgYXMgQ2FyZE5hdmlnYXRvclNldHRpbmdzO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncyA9IHsgLi4uREVGQVVMVF9TRVRUSU5HUyB9O1xuXHRcdH1cblx0XG5cdFx0Ly8gXHVCMjA0XHVCNzdEXHVCNDFDIFx1QzEyNFx1QzgxNVx1Qzc0NCBcdUFFMzBcdUJDRjhcdUFDMTJcdUM3M0NcdUI4NUMgXHVDQzQ0XHVDNkMwXG5cdFx0Zm9yIChjb25zdCBrZXkgaW4gREVGQVVMVF9TRVRUSU5HUykge1xuXHRcdFx0aWYgKCEoa2V5IGluIHRoaXMucGx1Z2luLnNldHRpbmdzKSkge1xuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuXHRcdFx0XHQodGhpcy5wbHVnaW4uc2V0dGluZ3MgYXMgYW55KVtrZXldID0gREVGQVVMVF9TRVRUSU5HU1trZXkgYXMga2V5b2YgQ2FyZE5hdmlnYXRvclNldHRpbmdzXTtcblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyUHJlc2V0cykge1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyUHJlc2V0cyA9IHt9O1xuXHRcdH1cblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmFjdGl2ZUZvbGRlclByZXNldHMpIHtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFjdGl2ZUZvbGRlclByZXNldHMgPSB7fTtcblx0XHR9XG5cdFxuXHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGVmYXVsdFByZXNldCgpOyAvLyBcdUFFMzBcdUJDRjggXHVENTA0XHVCOUFDXHVDMTRCIFx1QzgwMFx1QzdBNVxuXHR9XG5cdFxuXHRwcml2YXRlIGFzeW5jIHNhdmVEZWZhdWx0UHJlc2V0KCkge1xuXHRcdGNvbnN0IHByZXNldEZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVzZXRGb2xkZXJQYXRoO1xuXHRcdGNvbnN0IGZpbGVQYXRoID0gYCR7cHJlc2V0Rm9sZGVyUGF0aH0vZGVmYXVsdC5qc29uYDtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KERFRkFVTFRfU0VUVElOR1MsIG51bGwsIDIpKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcih0KCdFUlJPUl9TQVZJTkdfREVGQVVMVF9QUkVTRVQnKSwgZXJyb3IpO1xuXHRcdH1cblx0fVxuXG4gICAgYXN5bmMgdXBkYXRlU2V0dGluZzxLIGV4dGVuZHMga2V5b2YgQ2FyZE5hdmlnYXRvclNldHRpbmdzPihcbiAgICAgICAga2V5OiBLLFxuICAgICAgICB2YWx1ZTogQ2FyZE5hdmlnYXRvclNldHRpbmdzW0tdXG4gICAgKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5zYXZlU2V0dGluZ3NEZWJvdW5jZWQoKTtcbiAgICAgICAgdGhpcy5wbHVnaW4udHJpZ2dlclJlZnJlc2goKTtcbiAgICB9XG5cbiAgICBhc3luYyBjb25maXJtRGVsZXRlKGl0ZW1OYW1lOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBuZXcgQ29uZmlybURlbGV0ZU1vZGFsKHRoaXMucGx1Z2luLmFwcCwgaXRlbU5hbWUsIChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICB9KS5vcGVuKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXHRhcHBseUNoYW5nZXMoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLnRyaWdnZXJSZWZyZXNoKCk7XG4gICAgfVxuXG5cdGdldEN1cnJlbnRTZXR0aW5ncygpOiBQYXJ0aWFsPENhcmROYXZpZ2F0b3JTZXR0aW5ncz4ge1xuXHRcdGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IHsgLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MgfTtcblx0XHRnbG9iYWxTZXR0aW5nc0tleXMuZm9yRWFjaChrZXkgPT4gZGVsZXRlIGN1cnJlbnRTZXR0aW5nc1trZXldKTtcblx0XHRyZXR1cm4gY3VycmVudFNldHRpbmdzO1xuXHR9XG5cbiAgICBnZXRBY3RpdmVGb2xkZXIoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RlZEZvbGRlcjtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVTZWxlY3RlZEZvbGRlcihmb2xkZXI6IFRGb2xkZXIgfCBudWxsKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlU2V0dGluZygnc2VsZWN0ZWRGb2xkZXInLCBmb2xkZXIgPyBmb2xkZXIucGF0aCA6IG51bGwpO1xuICAgIH1cblxuICAgIGdldE51bWJlclNldHRpbmdDb25maWcoa2V5OiBOdW1iZXJTZXR0aW5nS2V5KTogUmFuZ2VTZXR0aW5nQ29uZmlnIHtcbiAgICAgICAgcmV0dXJuIHJhbmdlU2V0dGluZ0NvbmZpZ3Nba2V5XTtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVCb29sZWFuU2V0dGluZyhrZXk6IGtleW9mIENhcmROYXZpZ2F0b3JTZXR0aW5ncywgdmFsdWU6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVTZXR0aW5nKGtleSwgdmFsdWUpO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFByZXNldEZpbGVzKCk6IFByb21pc2U8VEZpbGVbXT4ge1xuICAgICAgICBjb25zdCBwcmVzZXRGb2xkZXJQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlc2V0Rm9sZGVyUGF0aDsgLy8gXHVDNjJDXHVCQzE0XHVCOTc4IFx1RDUwNFx1QjlBQ1x1QzE0QiBcdUQzRjRcdUIzNTQgXHVBQ0JEXHVCODVDIFx1QzBBQ1x1QzZBOVxuICAgICAgICBjb25zdCBwcmVzZXRGb2xkZXIgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHByZXNldEZvbGRlclBhdGgpO1xuICAgICAgICBpZiAocHJlc2V0Rm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICAgICAgcmV0dXJuIHByZXNldEZvbGRlci5jaGlsZHJlbi5maWx0ZXIoKGZpbGUpOiBmaWxlIGlzIFRGaWxlID0+IGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ2pzb24nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG5cdGFzeW5jIGxvYWRQcmVzZXRGcm9tRmlsZShmaWxlTmFtZTogc3RyaW5nKTogUHJvbWlzZTxQYXJ0aWFsPENhcmROYXZpZ2F0b3JTZXR0aW5ncz4gfCBudWxsPiB7XG5cdFx0Y29uc3QgcHJlc2V0Rm9sZGVyUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByZXNldEZvbGRlclBhdGg7XG5cdFx0Y29uc3QgZmlsZVBhdGggPSBgJHtwcmVzZXRGb2xkZXJQYXRofS8ke2ZpbGVOYW1lfWA7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGZpbGVQYXRoKTtcblx0XHRcdHJldHVybiBKU09OLnBhcnNlKGNvbnRlbnQpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKHQoJ0VSUk9SX0xPQURJTkdfUFJFU0VUX0ZST01fRklMRScsIHsgZmlsZU5hbWUgfSksIGVycm9yKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fVxuXHRcblx0YXN5bmMgc2F2ZUFzTmV3UHJlc2V0KHByZXNldE5hbWU6IHN0cmluZywgc2V0dGluZ3M/OiBQYXJ0aWFsPENhcmROYXZpZ2F0b3JTZXR0aW5ncz4pIHtcblx0XHRjb25zdCBwcmVzZXRGb2xkZXJQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlc2V0Rm9sZGVyUGF0aDtcblx0XHRjb25zdCBmaWxlUGF0aCA9IGAke3ByZXNldEZvbGRlclBhdGh9LyR7cHJlc2V0TmFtZX0uanNvbmA7XG5cdFx0Y29uc3QgcHJlc2V0U2V0dGluZ3MgPSBzZXR0aW5ncyB8fCB0aGlzLmdldEN1cnJlbnRTZXR0aW5ncygpO1xuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlUGF0aCwgSlNPTi5zdHJpbmdpZnkocHJlc2V0U2V0dGluZ3MsIG51bGwsIDIpKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKHQoJ0VSUk9SX1NBVklOR19ORVdfUFJFU0VUJywgeyBwcmVzZXROYW1lIH0pLCBlcnJvcik7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cbiAgICBnZXRGb2xkZXJQcmVzZXRzKCk6IEZvbGRlclByZXNldHMge1xuICAgICAgICByZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyUHJlc2V0cyB8fCB7fTtcbiAgICB9XG5cbiAgICBnZXRQcmVzZXRzRm9yRm9sZGVyKGZvbGRlclBhdGg6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHM/Lltmb2xkZXJQYXRoXSB8fCBbXTtcbiAgICB9XG5cbiAgICBhc3luYyBhZGRQcmVzZXRUb0ZvbGRlcihmb2xkZXJQYXRoOiBzdHJpbmcsIHByZXNldE5hbWU6IHN0cmluZykge1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHMpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF0pIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF0uaW5jbHVkZXMocHJlc2V0TmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF0ucHVzaChwcmVzZXROYW1lKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyByZW1vdmVQcmVzZXRGcm9tRm9sZGVyKGZvbGRlclBhdGg6IHN0cmluZywgcHJlc2V0TmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF0pIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzW2ZvbGRlclBhdGhdLmZpbHRlcihuYW1lID0+IG5hbWUgIT09IHByZXNldE5hbWUpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgc2V0RGVmYXVsdFByZXNldEZvckZvbGRlcihmb2xkZXJQYXRoOiBzdHJpbmcsIHByZXNldE5hbWU6IHN0cmluZykge1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHMpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF0pIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzW2ZvbGRlclBhdGhdID0gW1xuICAgICAgICAgICAgcHJlc2V0TmFtZSxcbiAgICAgICAgICAgIC4uLnRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF0uZmlsdGVyKG5hbWUgPT4gbmFtZSAhPT0gcHJlc2V0TmFtZSlcbiAgICAgICAgXTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICB9XG5cblx0YXN5bmMgdG9nZ2xlQXV0b0FwcGx5UHJlc2V0cyh2YWx1ZTogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMudXBkYXRlU2V0dGluZygnYXV0b0FwcGx5Rm9sZGVyUHJlc2V0cycsIHZhbHVlKTtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZUxhc3RBY3RpdmVQcmVzZXQocHJlc2V0TmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlU2V0dGluZygnbGFzdEFjdGl2ZVByZXNldCcsIHByZXNldE5hbWUpO1xuICAgIH1cblxuXHRhc3luYyB1cGRhdGVHbG9iYWxQcmVzZXQocHJlc2V0TmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlU2V0dGluZygnR2xvYmFsUHJlc2V0JywgcHJlc2V0TmFtZSk7XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlQXV0b0FwcGx5Rm9sZGVyUHJlc2V0cyh2YWx1ZTogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVNldHRpbmcoJ2F1dG9BcHBseUZvbGRlclByZXNldHMnLCB2YWx1ZSk7XG4gICAgfVxufVxuXG5jbGFzcyBDb25maXJtRGVsZXRlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHByaXZhdGUgaXRlbU5hbWU6IHN0cmluZywgcHJpdmF0ZSBvbkNob2ljZTogKHJlc3VsdDogYm9vbGVhbikgPT4gdm9pZCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiB0KCdDT05GSVJNX0RFTEVURScpfSk7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHt0ZXh0OiB0KCdDT05GSVJNX0RFTEVURV9JVEVNJyl9KTtcblxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdidXR0b24tY29udGFpbmVyJyk7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnZmxleC1lbmQnO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzIwcHgnO1xuXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge3RleHQ6IHQoJ0NBTkNFTCcpfSk7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5zdHlsZS5tYXJnaW5SaWdodCA9ICcxMHB4JztcbiAgICAgICAgY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLm9uQ2hvaWNlKGZhbHNlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHt0ZXh0OiB0KCdERUxFVEUnKX0pO1xuICAgICAgICBkZWxldGVCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMub25DaG9pY2UodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQ2FyZE5hdmlnYXRvclNldHRpbmdzLCBQcmVzZXQsIGdsb2JhbFNldHRpbmdzS2V5cywgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4uLy4uL2NvbW1vbi90eXBlcyc7XG5pbXBvcnQgeyBJUHJlc2V0TWFuYWdlciB9IGZyb20gJy4uLy4uL2NvbW1vbi9JUHJlc2V0TWFuYWdlcic7XG5pbXBvcnQgQ2FyZE5hdmlnYXRvclBsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyB0IH0gZnJvbSAnaTE4bmV4dCc7XG5cbmV4cG9ydCBjbGFzcyBQcmVzZXRNYW5hZ2VyIGltcGxlbWVudHMgSVByZXNldE1hbmFnZXIge1xuICAgIHByaXZhdGUgcHJlc2V0Rm9sZGVyOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwcmVzZXRDYWNoZTogTWFwPHN0cmluZywgUHJlc2V0PiA9IG5ldyBNYXAoKTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHAsIHByaXZhdGUgcGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luLCBwcml2YXRlIHNldHRpbmdzOiBDYXJkTmF2aWdhdG9yU2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5wcmVzZXRGb2xkZXIgPSB0aGlzLnNldHRpbmdzLnByZXNldEZvbGRlclBhdGggfHwgJ0NhcmROYXZpZ2F0b3JQcmVzZXRzJztcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmZvbGRlclByZXNldHMpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZm9sZGVyUHJlc2V0cyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5hY3RpdmVGb2xkZXJQcmVzZXRzKSB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmFjdGl2ZUZvbGRlclByZXNldHMgPSB7fTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZVByZXNldEZvbGRlcihuZXdGb2xkZXI6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLnByZXNldEZvbGRlciA9IG5ld0ZvbGRlcjtcbiAgICAgICAgdGhpcy5wcmVzZXRDYWNoZS5jbGVhcigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZW5zdXJlUHJlc2V0Rm9sZGVyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIWF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHRoaXMucHJlc2V0Rm9sZGVyKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKHRoaXMucHJlc2V0Rm9sZGVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXHRhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMuZW5zdXJlUHJlc2V0Rm9sZGVyKCk7XG5cdFx0YXdhaXQgdGhpcy5sb2FkUHJlc2V0c0Zyb21GaWxlcygpO1xuXHRcblx0XHQvLyBcdUFFMzBcdUJDRjggXHVENTA0XHVCOUFDXHVDMTRCXHVDNzc0IFx1QzVDNlx1QzczQ1x1QkE3NCBcdUMwRERcdUMxMzFcblx0XHRpZiAoIWF3YWl0IHRoaXMucHJlc2V0RXhpc3RzKCdkZWZhdWx0JykpIHtcblx0XHRcdC8vIFx1QUUzMFx1QkNGOCBcdUQ1MDRcdUI5QUNcdUMxNEIgXHVDMEREXHVDMTMxIFx1QzJEQyBnbG9iYWxTZXR0aW5nc0tleXMgXHVDODFDXHVDNjc4XG5cdFx0XHRjb25zdCBkZWZhdWx0UHJlc2V0U2V0dGluZ3MgPSBPYmplY3QuZnJvbUVudHJpZXMoXG5cdFx0XHRcdE9iamVjdC5lbnRyaWVzKERFRkFVTFRfU0VUVElOR1MpLmZpbHRlcigoW2tleV0pID0+ICFnbG9iYWxTZXR0aW5nc0tleXMuaW5jbHVkZXMoa2V5IGFzIGtleW9mIENhcmROYXZpZ2F0b3JTZXR0aW5ncykpXG5cdFx0XHQpO1xuXHRcdFx0Y29uc3QgZGVmYXVsdFByZXNldDogUHJlc2V0ID0ge1xuXHRcdFx0XHRuYW1lOiAnZGVmYXVsdCcsXG5cdFx0XHRcdHNldHRpbmdzOiBkZWZhdWx0UHJlc2V0U2V0dGluZ3MsXG5cdFx0XHRcdGlzRGVmYXVsdDogdHJ1ZSxcblx0XHRcdFx0ZGVzY3JpcHRpb246ICdEZWZhdWx0IHByZXNldCdcblx0XHRcdH07XG5cdFx0XHRhd2FpdCB0aGlzLnNhdmVQcmVzZXRUb0ZpbGUoJ2RlZmF1bHQnLCBkZWZhdWx0UHJlc2V0KTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBsb2FkUHJlc2V0KG5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHByZXNldCA9IGF3YWl0IHRoaXMuZ2V0UHJlc2V0KG5hbWUpO1xuXHRcdGlmICghcHJlc2V0KSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IodCgnUFJFU0VUX05PVF9GT1VORCcsIHtuYW1lOiBuYW1lfSkpO1xuXHRcdH1cbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuc2V0dGluZ3MsXG4gICAgICAgICAgICAuLi5wcmVzZXQuc2V0dGluZ3MsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0dGluZ3MubGFzdEFjdGl2ZVByZXNldCA9IG5hbWU7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB0aGlzLnBsdWdpbi5yZWZyZXNoQ2FyZE5hdmlnYXRvcigpO1xuICAgIH1cblxuXHRwdWJsaWMgYXN5bmMgc2F2ZVByZXNldChuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uPzogc3RyaW5nLCBzZXR0aW5ncz86IFBhcnRpYWw8Q2FyZE5hdmlnYXRvclNldHRpbmdzPik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IHNldHRpbmdzIHx8IHRoaXMuZ2V0Q3VycmVudFNldHRpbmdzKCk7XG5cdFx0Y29uc3QgcHJlc2V0OiBQcmVzZXQgPSB7XG5cdFx0XHRuYW1lOiBuYW1lLFxuXHRcdFx0c2V0dGluZ3M6IGN1cnJlbnRTZXR0aW5ncyxcblx0XHRcdGlzRGVmYXVsdDogZmFsc2UsXG5cdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb25cblx0XHR9O1xuXHRcdGF3YWl0IHRoaXMuc2F2ZVByZXNldFRvRmlsZShuYW1lLCBwcmVzZXQpO1xuXHRcdHRoaXMucHJlc2V0Q2FjaGUuc2V0KG5hbWUsIHByZXNldCk7XG5cdH1cblx0XG5cdHByaXZhdGUgZ2V0Q3VycmVudFNldHRpbmdzKCk6IFBhcnRpYWw8Q2FyZE5hdmlnYXRvclNldHRpbmdzPiB7XG5cdFx0Y29uc3QgY3VycmVudFNldHRpbmdzID0geyAuLi50aGlzLnBsdWdpbi5zZXR0aW5ncyB9O1xuXHRcdGdsb2JhbFNldHRpbmdzS2V5cy5mb3JFYWNoKGtleSA9PiBkZWxldGUgY3VycmVudFNldHRpbmdzW2tleV0pO1xuXHRcdHJldHVybiBjdXJyZW50U2V0dGluZ3M7XG5cdH1cblxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFByZXNldEZyb21GaWxlKG5hbWU6IHN0cmluZyk6IFByb21pc2U8UHJlc2V0IHwgbnVsbD4ge1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAke3RoaXMucHJlc2V0Rm9sZGVyfS8ke25hbWV9Lmpzb25gO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlUGF0aCk7XG4gICAgICAgICAgICBjb25zdCBwcmVzZXQgPSBKU09OLnBhcnNlKGNvbnRlbnQpIGFzIFByZXNldDtcbiAgICAgICAgICAgIHRoaXMucHJlc2V0Q2FjaGUuc2V0KG5hbWUsIHByZXNldCk7XG4gICAgICAgICAgICByZXR1cm4gcHJlc2V0O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgbG9hZGluZyBwcmVzZXQgJHtuYW1lfTpgLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZVByZXNldFRvRmlsZShuYW1lOiBzdHJpbmcsIHByZXNldDogUHJlc2V0KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYCR7dGhpcy5wcmVzZXRGb2xkZXJ9LyR7bmFtZX0uanNvbmA7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KHByZXNldCwgbnVsbCwgMikpO1xuICAgICAgICB0aGlzLnByZXNldENhY2hlLnNldChuYW1lLCBwcmVzZXQpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlbGV0ZVByZXNldChuYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt0aGlzLnByZXNldEZvbGRlcn0vJHtuYW1lfS5qc29uYDtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZW1vdmUoZmlsZVBhdGgpO1xuICAgICAgICB0aGlzLnByZXNldENhY2hlLmRlbGV0ZShuYW1lKTtcbiAgICB9XG5cblx0YXN5bmMgcmVuYW1lUHJlc2V0KG9sZE5hbWU6IHN0cmluZywgbmV3TmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgcHJlc2V0ID0gYXdhaXQgdGhpcy5nZXRQcmVzZXQob2xkTmFtZSk7XG5cdFx0aWYgKCFwcmVzZXQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcih0KCdQUkVTRVRfTk9UX0ZPVU5EJywge25hbWU6IG9sZE5hbWV9KSk7XG5cdFx0fVxuICAgICAgICBwcmVzZXQubmFtZSA9IG5ld05hbWU7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVByZXNldFRvRmlsZShuZXdOYW1lLCBwcmVzZXQpO1xuICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZVByZXNldChvbGROYW1lKTtcbiAgICB9XG5cbiAgICBhc3luYyBleHBvcnRQcmVzZXRzKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHByZXNldHMgPSBhd2FpdCB0aGlzLmdldFByZXNldHMoKTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHByZXNldHMsIG51bGwsIDIpO1xuICAgIH1cblxuICAgIGFzeW5jIGltcG9ydFByZXNldHMoanNvblN0cmluZzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGltcG9ydGVkUHJlc2V0cyA9IEpTT04ucGFyc2UoanNvblN0cmluZykgYXMgUmVjb3JkPHN0cmluZywgUHJlc2V0PjtcbiAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgcHJlc2V0XSBvZiBPYmplY3QuZW50cmllcyhpbXBvcnRlZFByZXNldHMpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVQcmVzZXRUb0ZpbGUobmFtZSwgcHJlc2V0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldFByZXNldHMoKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBQcmVzZXQ+PiB7XG4gICAgICAgIGNvbnN0IHByZXNldE5hbWVzID0gYXdhaXQgdGhpcy5nZXRQcmVzZXROYW1lcygpO1xuICAgICAgICBjb25zdCBwcmVzZXRzOiBSZWNvcmQ8c3RyaW5nLCBQcmVzZXQ+ID0ge307XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBvZiBwcmVzZXROYW1lcykge1xuICAgICAgICAgICAgY29uc3QgcHJlc2V0ID0gYXdhaXQgdGhpcy5nZXRQcmVzZXQobmFtZSk7XG4gICAgICAgICAgICBpZiAocHJlc2V0KSB7XG4gICAgICAgICAgICAgICAgcHJlc2V0c1tuYW1lXSA9IHByZXNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJlc2V0cztcbiAgICB9XG5cbiAgICBhc3luYyByZW1vdmVGb2xkZXJQcmVzZXQoZm9sZGVyUGF0aDogc3RyaW5nLCBwcmVzZXROYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZm9sZGVyUHJlc2V0cyAmJiB0aGlzLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF0pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZm9sZGVyUHJlc2V0c1tmb2xkZXJQYXRoXSA9IHRoaXMuc2V0dGluZ3MuZm9sZGVyUHJlc2V0c1tmb2xkZXJQYXRoXS5maWx0ZXIobmFtZSA9PiBuYW1lICE9PSBwcmVzZXROYW1lKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuc2V0dGluZ3MuZm9sZGVyUHJlc2V0c1tmb2xkZXJQYXRoXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9XG4gICAgfVxuXG5cdGFzeW5jIGdldFByZXNldE5hbWVzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgY29uc3QgcHJlc2V0RmlsZXMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmxpc3QodGhpcy5wcmVzZXRGb2xkZXIpO1xuICAgICAgICByZXR1cm4gcHJlc2V0RmlsZXMuZmlsZXNcbiAgICAgICAgICAgIC5maWx0ZXIoZmlsZSA9PiBmaWxlLmVuZHNXaXRoKCcuanNvbicpKVxuICAgICAgICAgICAgLm1hcChmaWxlID0+IHBhdGguYmFzZW5hbWUoZmlsZSwgJy5qc29uJykpO1xuICAgIH1cblxuXHRhc3luYyBjbG9uZVByZXNldChzb3VyY2VOYW1lOiBzdHJpbmcsIG5ld05hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHNvdXJjZVByZXNldCA9IGF3YWl0IHRoaXMuZ2V0UHJlc2V0KHNvdXJjZU5hbWUpO1xuXHRcdGlmICghc291cmNlUHJlc2V0KSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IodCgnU09VUkNFX1BSRVNFVF9OT1RfRk9VTkQnLCB7bmFtZTogc291cmNlTmFtZX0pKTtcblx0XHR9XG5cdFx0aWYgKGF3YWl0IHRoaXMucHJlc2V0RXhpc3RzKG5ld05hbWUpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IodCgnUFJFU0VUX0FMUkVBRFlfRVhJU1RTX1dJVEhfTkFNRScsIHtuYW1lOiBuZXdOYW1lfSkpO1xuXHRcdH1cbiAgICAgICAgY29uc3QgY2xvbmVkUHJlc2V0OiBQcmVzZXQgPSB7IC4uLnNvdXJjZVByZXNldCwgbmFtZTogbmV3TmFtZSwgaXNEZWZhdWx0OiBmYWxzZSB9O1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVQcmVzZXRUb0ZpbGUobmV3TmFtZSwgY2xvbmVkUHJlc2V0KTtcbiAgICB9XG5cblx0YXN5bmMgZXhwb3J0UHJlc2V0KG5hbWU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0Y29uc3QgcHJlc2V0ID0gYXdhaXQgdGhpcy5nZXRQcmVzZXQobmFtZSk7XG5cdFx0aWYgKCFwcmVzZXQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcih0KCdQUkVTRVRfTk9UX0ZPVU5EJywge25hbWU6IG5hbWV9KSk7XG5cdFx0fVxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocHJlc2V0LCBudWxsLCAyKTtcbiAgICB9XG5cblx0YXN5bmMgaW1wb3J0UHJlc2V0KGpzb25TdHJpbmc6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBpbXBvcnRlZFByZXNldDogUHJlc2V0ID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcblx0XHRcdGlmICghaW1wb3J0ZWRQcmVzZXQubmFtZSB8fCAhaW1wb3J0ZWRQcmVzZXQuc2V0dGluZ3MpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKHQoJ0lOVkFMSURfUFJFU0VUX0ZPUk1BVCcpKTtcblx0XHRcdH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVByZXNldFRvRmlsZShpbXBvcnRlZFByZXNldC5uYW1lLCBpbXBvcnRlZFByZXNldCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcih0KCdQUkVTRVRfSU1QT1JUX0ZBSUxFRCcsIHtlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfSkpO1xuXHRcdH1cbiAgICB9XG5cblx0YXN5bmMgZ2V0UHJlc2V0KHByZXNldE5hbWU6IHN0cmluZyk6IFByb21pc2U8UHJlc2V0IHwgdW5kZWZpbmVkPiB7XG5cdFx0aWYgKHRoaXMucHJlc2V0Q2FjaGUuaGFzKHByZXNldE5hbWUpKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wcmVzZXRDYWNoZS5nZXQocHJlc2V0TmFtZSk7XG5cdFx0fVxuXHRcdGNvbnN0IHByZXNldCA9IGF3YWl0IHRoaXMubG9hZFByZXNldEZyb21GaWxlKHByZXNldE5hbWUpO1xuXHRcdHJldHVybiBwcmVzZXQgfHwgdW5kZWZpbmVkO1xuXHR9XG5cbiAgICBnZXRGb2xkZXJQcmVzZXRzKCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLmZvbGRlclByZXNldHMgfHwge307XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlQWxsUHJlc2V0cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgcHJlc2V0TmFtZXMgPSBhd2FpdCB0aGlzLmdldFByZXNldE5hbWVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBvZiBwcmVzZXROYW1lcykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVQcmVzZXQobmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG5cblx0YXN5bmMgcmVtb3ZlUHJlc2V0RnJvbUFsbEZvbGRlcnMocHJlc2V0TmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZvbGRlclBhdGggaW4gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyUHJlc2V0cykge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclByZXNldHNbZm9sZGVyUGF0aF0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzW2ZvbGRlclBhdGhdLmZpbHRlcihuYW1lID0+IG5hbWUgIT09IHByZXNldE5hbWUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzW2ZvbGRlclBhdGhdLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyUHJlc2V0c1tmb2xkZXJQYXRoXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHJlc2V0VG9EZWZhdWx0UHJlc2V0cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVBbGxQcmVzZXRzKCk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRQcmVzZXQ6IFByZXNldCA9IHtcbiAgICAgICAgICAgIG5hbWU6ICdkZWZhdWx0JyxcbiAgICAgICAgICAgIHNldHRpbmdzOiBERUZBVUxUX1NFVFRJTkdTLFxuICAgICAgICAgICAgaXNEZWZhdWx0OiB0cnVlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdEZWZhdWx0IHByZXNldCdcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlUHJlc2V0VG9GaWxlKCdkZWZhdWx0JywgZGVmYXVsdFByZXNldCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBwcmVzZXRFeGlzdHMobmFtZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYCR7dGhpcy5wcmVzZXRGb2xkZXJ9LyR7bmFtZX0uanNvbmA7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZFByZXNldHNGcm9tRmlsZXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHByZXNldEZpbGVzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5saXN0KHRoaXMucHJlc2V0Rm9sZGVyKTtcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIHByZXNldEZpbGVzLmZpbGVzKSB7XG4gICAgICAgICAgICBpZiAoZmlsZS5lbmRzV2l0aCgnLmpzb24nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXNldE5hbWUgPSBwYXRoLmJhc2VuYW1lKGZpbGUsICcuanNvbicpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFByZXNldEZyb21GaWxlKHByZXNldE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cdGFzeW5jIGFwcGx5R2xvYmFsUHJlc2V0KHByZXNldE5hbWU/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBnbG9iYWxQcmVzZXROYW1lID0gcHJlc2V0TmFtZSB8fCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5HbG9iYWxQcmVzZXQ7XG5cdFx0aWYgKCFnbG9iYWxQcmVzZXROYW1lKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKHQoJ0dMT0JBTF9QUkVTRVRfTk9UX1NFVCcpKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XG5cdFx0YXdhaXQgdGhpcy5hcHBseVByZXNldChnbG9iYWxQcmVzZXROYW1lKTtcblx0XHRcblx0XHQvLyBHbG9iYWxQcmVzZXQgXHVDMTI0XHVDODE1IFx1QzVDNVx1QjM3MFx1Qzc3NFx1RDJCOFxuXHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkdsb2JhbFByZXNldCA9IGdsb2JhbFByZXNldE5hbWU7XG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XG5cdH1cblx0XG5cdGFzeW5jIGFwcGx5Rm9sZGVyUHJlc2V0KGZvbGRlclBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGxldCBjdXJyZW50UGF0aDogc3RyaW5nIHwgbnVsbCA9IGZvbGRlclBhdGg7XG5cdFx0bGV0IHByZXNldEFwcGxpZWQgPSBmYWxzZTtcblx0XG5cdFx0d2hpbGUgKGN1cnJlbnRQYXRoICYmICFwcmVzZXRBcHBsaWVkKSB7XG5cdFx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmFjdGl2ZUZvbGRlclByZXNldHMpIHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYWN0aXZlRm9sZGVyUHJlc2V0cyA9IHt9O1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgcHJlc2V0TmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmFjdGl2ZUZvbGRlclByZXNldHNbY3VycmVudFBhdGhdO1xuXHRcdFx0aWYgKHByZXNldE5hbWUpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5hcHBseVByZXNldChwcmVzZXROYW1lKTtcblx0XHRcdFx0cHJlc2V0QXBwbGllZCA9IHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjdXJyZW50UGF0aCA9IGN1cnJlbnRQYXRoLmluY2x1ZGVzKCcvJykgXG5cdFx0XHRcdFx0PyBjdXJyZW50UGF0aC5zdWJzdHJpbmcoMCwgY3VycmVudFBhdGgubGFzdEluZGV4T2YoJy8nKSkgXG5cdFx0XHRcdFx0OiBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblx0XG5cdFx0aWYgKCFwcmVzZXRBcHBsaWVkKSB7XG5cdFx0XHRhd2FpdCB0aGlzLmFwcGx5R2xvYmFsUHJlc2V0KCk7XG5cdFx0fVxuXHR9XG5cdFxuXHRhc3luYyBhcHBseVByZXNldChwcmVzZXROYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBwcmVzZXQgPSBhd2FpdCB0aGlzLmdldFByZXNldChwcmVzZXROYW1lKTtcblx0XHRpZiAocHJlc2V0KSB7XG5cdFx0XHRcblx0XHRcdC8vIFx1QUUwMFx1Qjg1Q1x1QkM4QyBcdUMxMjRcdUM4MTVcdUFDMTIgXHVCQ0Y0XHVDODc0XG5cdFx0XHRjb25zdCBnbG9iYWxTZXR0aW5ncyA9IGdsb2JhbFNldHRpbmdzS2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XG5cdFx0XHRcdGlmIChrZXkgaW4gdGhpcy5wbHVnaW4uc2V0dGluZ3MgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3Nba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcblx0XHRcdFx0XHRhY2Nba2V5XSA9IHRoaXMucGx1Z2luLnNldHRpbmdzW2tleV0gYXMgYW55O1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBhY2M7XG5cdFx0XHR9LCB7fSBhcyBQYXJ0aWFsPFBpY2s8Q2FyZE5hdmlnYXRvclNldHRpbmdzLCB0eXBlb2YgZ2xvYmFsU2V0dGluZ3NLZXlzW251bWJlcl0+Pik7XG5cdFx0XHRcblx0XHRcdC8vIFx1RDUwNFx1QjlBQ1x1QzE0QiBcdUMxMjRcdUM4MTUgXHVDODAxXHVDNkE5XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncyA9IHtcblx0XHRcdFx0Li4uREVGQVVMVF9TRVRUSU5HUywgIC8vIFx1QUUzMFx1QkNGOCBcdUMxMjRcdUM4MTVcdUM3M0NcdUI4NUMgXHVDMkRDXHVDNzkxXG5cdFx0XHRcdC4uLnByZXNldC5zZXR0aW5ncywgICAvLyBcdUQ1MDRcdUI5QUNcdUMxNEIgXHVDMTI0XHVDODE1IFx1QzgwMVx1QzZBOVxuXHRcdFx0XHQuLi5nbG9iYWxTZXR0aW5ncywgICAgLy8gXHVBRTAwXHVCODVDXHVCQzhDIFx1QzEyNFx1QzgxNVx1QUMxMiBcdUJDRjVcdUM2RDBcblx0XHRcdFx0bGFzdEFjdGl2ZVByZXNldDogcHJlc2V0TmFtZVxuXHRcdFx0fTtcblx0XHRcdFxuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoQ2FyZE5hdmlnYXRvcigpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKHQoJ1BSRVNFVF9OT1RfRk9VTkQnLCB7bmFtZTogcHJlc2V0TmFtZX0pKTtcblx0XHR9XG5cdH1cblxuICAgIGFzeW5jIHNldEZvbGRlclByZXNldChmb2xkZXJQYXRoOiBzdHJpbmcsIHByZXNldE5hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZm9sZGVyUHJlc2V0cykge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXR0aW5ncy5mb2xkZXJQcmVzZXRzW2ZvbGRlclBhdGhdID0gW3ByZXNldE5hbWVdO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICB9XG5cbiAgICBhc3luYyB0b2dnbGVBdXRvQXBwbHlGb2xkZXJQcmVzZXRzKHZhbHVlOiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuYXV0b0FwcGx5Rm9sZGVyUHJlc2V0cyA9IHZhbHVlO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUEsaUNBQUFBLFNBQUE7QUFBQSxJQUFBQSxRQUFBO0FBQUEsTUFDSSxxQkFBdUI7QUFBQSxNQUV2QixnQkFBa0I7QUFBQSxNQUNsQixjQUFnQjtBQUFBLE1BQ2hCLG1CQUFxQjtBQUFBLE1BRXhCLDBCQUE0QjtBQUFBLE1BQ3pCLHFCQUF1QjtBQUFBLE1BQ3ZCLGtDQUFvQztBQUFBLE1BQ3BDLDZCQUErQjtBQUFBLE1BRWxDLG9CQUFzQjtBQUFBLE1BQ25CLFlBQWM7QUFBQSxNQUNkLFVBQVk7QUFBQSxNQUVmLGlCQUFtQjtBQUFBLE1BQ2hCLGVBQWlCO0FBQUEsTUFFakIsb0JBQXNCO0FBQUEsTUFDdEIscUJBQXVCO0FBQUEsTUFDdkIseUJBQTJCO0FBQUEsTUFDM0Isd0JBQTBCO0FBQUEsTUFDMUIsbUJBQXFCO0FBQUEsTUFDckIsa0JBQW9CO0FBQUEsTUFDcEIsZ0JBQWtCO0FBQUEsTUFDbEIs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LENBQUMsSUFBSTtBQUFBLEVBQ1gsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLEVBQUU7QUFBQSxFQUNoQixJQUFJO0FBQ04sR0FBRztBQUFBLEVBQ0QsTUFBTSxDQUFDLElBQUk7QUFBQSxFQUNYLElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxFQUNULElBQUk7QUFDTixHQUFHO0FBQUEsRUFDRCxNQUFNLENBQUMsSUFBSTtBQUFBLEVBQ1gsSUFBSSxDQUFDLEdBQUcsQ0FBQztBQUFBLEVBQ1QsSUFBSTtBQUNOLEdBQUc7QUFBQSxFQUNELE1BQU0sQ0FBQyxJQUFJO0FBQUEsRUFDWCxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUFBLEVBQ2YsSUFBSTtBQUNOLEdBQUc7QUFBQSxFQUNELE1BQU0sQ0FBQyxJQUFJO0FBQUEsRUFDWCxJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUU7QUFBQSxFQUNiLElBQUk7QUFDTixHQUFHO0FBQUEsRUFDRCxNQUFNLENBQUMsSUFBSTtBQUFBLEVBQ1gsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQUEsRUFDWixJQUFJO0FBQ04sR0FBRztBQUFBLEVBQ0QsTUFBTSxDQUFDLElBQUk7QUFBQSxFQUNYLElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxFQUNULElBQUk7QUFDTixHQUFHO0FBQUEsRUFDRCxNQUFNLENBQUMsS0FBSztBQUFBLEVBQ1osSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQUEsRUFDWixJQUFJO0FBQ04sR0FBRztBQUFBLEVBQ0QsTUFBTSxDQUFDLElBQUk7QUFBQSxFQUNYLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxFQUFFO0FBQUEsRUFDakIsSUFBSTtBQUNOLEdBQUc7QUFBQSxFQUNELE1BQU0sQ0FBQyxJQUFJO0FBQUEsRUFDWCxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQUEsRUFDVCxJQUFJO0FBQ04sR0FBRztBQUFBLEVBQ0QsTUFBTSxDQUFDLElBQUk7QUFBQSxFQUNYLElBQUksQ0FBQyxHQUFHLEdBQUcsRUFBRTtBQUFBLEVBQ2IsSUFBSTtBQUNOLEdBQUc7QUFBQSxFQUNELE1BQU0sQ0FBQyxJQUFJO0FBQUEsRUFDWCxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUFBLEVBQ2YsSUFBSTtBQUNOLEdBQUc7QUFBQSxFQUNELE1BQU0sQ0FBQyxNQUFNLElBQUk7QUFBQSxFQUNqQixJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksRUFBRTtBQUFBLEVBQ2pCLElBQUk7QUFDTixDQUFDO0FBQ0QsSUFBSSxxQkFBcUI7QUFBQSxFQUN2QixHQUFHLE9BQUssT0FBTyxJQUFJLENBQUM7QUFBQSxFQUNwQixHQUFHLE9BQUssT0FBTyxLQUFLLENBQUM7QUFBQSxFQUNyQixHQUFHLE9BQUs7QUFBQSxFQUNSLEdBQUcsT0FBSyxPQUFPLElBQUksTUFBTSxLQUFLLElBQUksT0FBTyxLQUFLLElBQUksSUFBSSxNQUFNLEtBQUssSUFBSSxNQUFNLE1BQU0sSUFBSSxNQUFNLE1BQU0sSUFBSSxPQUFPLE1BQU0sSUFBSSxDQUFDO0FBQUEsRUFDdkgsR0FBRyxPQUFLLE9BQU8sS0FBSyxJQUFJLElBQUksS0FBSyxJQUFJLElBQUksS0FBSyxJQUFJLElBQUksSUFBSSxPQUFPLEtBQUssSUFBSSxPQUFPLEtBQUssSUFBSSxJQUFJLE9BQU8sS0FBSyxJQUFJLENBQUM7QUFBQSxFQUMvRyxHQUFHLE9BQUssT0FBTyxLQUFLLElBQUksSUFBSSxLQUFLLEtBQUssS0FBSyxJQUFJLElBQUksQ0FBQztBQUFBLEVBQ3BELEdBQUcsT0FBSyxPQUFPLEtBQUssSUFBSSxJQUFJLElBQUksTUFBTSxLQUFLLElBQUksTUFBTSxNQUFNLElBQUksTUFBTSxNQUFNLElBQUksT0FBTyxNQUFNLElBQUksQ0FBQztBQUFBLEVBQ2pHLEdBQUcsT0FBSyxPQUFPLEtBQUssSUFBSSxJQUFJLEtBQUssSUFBSSxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssSUFBSSxDQUFDO0FBQUEsRUFDbEUsR0FBRyxPQUFLLE9BQU8sS0FBSyxDQUFDO0FBQUEsRUFDckIsSUFBSSxPQUFLLE9BQU8sS0FBSyxJQUFJLElBQUksS0FBSyxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxLQUFLLElBQUksQ0FBQztBQUFBLEVBQ3BFLElBQUksT0FBSyxPQUFPLEtBQUssS0FBSyxLQUFLLEtBQUssSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLElBQUksSUFBSSxLQUFLLElBQUksS0FBSyxJQUFJLENBQUM7QUFBQSxFQUN2RixJQUFJLE9BQUssT0FBTyxJQUFJLE1BQU0sS0FBSyxJQUFJLE9BQU8sRUFBRTtBQUFBLEVBQzVDLElBQUksT0FBSyxPQUFPLE1BQU0sQ0FBQztBQUFBLEVBQ3ZCLElBQUksT0FBSyxPQUFPLEtBQUssSUFBSSxJQUFJLEtBQUssSUFBSSxJQUFJLEtBQUssSUFBSSxJQUFJLENBQUM7QUFBQSxFQUN4RCxJQUFJLE9BQUssT0FBTyxJQUFJLE1BQU0sS0FBSyxJQUFJLE9BQU8sS0FBSyxJQUFJLElBQUksTUFBTSxNQUFNLElBQUksTUFBTSxNQUFNLElBQUksT0FBTyxNQUFNLElBQUksQ0FBQztBQUFBLEVBQ3pHLElBQUksT0FBSyxPQUFPLElBQUksTUFBTSxLQUFLLElBQUksT0FBTyxLQUFLLElBQUksTUFBTSxJQUFJLElBQUksQ0FBQztBQUFBLEVBQ2xFLElBQUksT0FBSyxPQUFPLEtBQUssS0FBSyxJQUFJLE1BQU0sS0FBSyxJQUFJLE9BQU8sS0FBSyxJQUFJLENBQUM7QUFBQSxFQUM5RCxJQUFJLE9BQUssT0FBTyxLQUFLLElBQUksSUFBSSxLQUFLLElBQUksSUFBSSxDQUFDO0FBQUEsRUFDM0MsSUFBSSxPQUFLLE9BQU8sS0FBSyxJQUFJLElBQUksS0FBSyxLQUFLLElBQUksTUFBTSxLQUFLLElBQUksTUFBTSxLQUFLLElBQUksSUFBSSxNQUFNLE1BQU0sSUFBSSxNQUFNLEtBQUssSUFBSSxDQUFDO0FBQUEsRUFDN0csSUFBSSxPQUFLLE9BQU8sS0FBSyxJQUFJLElBQUksS0FBSyxLQUFLLElBQUksTUFBTSxLQUFLLElBQUksTUFBTSxLQUFLLElBQUksQ0FBQztBQUFB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Q0w7QUFBQSxFQUNKO0FBQUE7QUFBQSxFQUdILGlCQUFpQjtBQUNoQixTQUFLLGlCQUFpQjtBQUN0QixTQUFLLElBQUksVUFBVSxRQUFRLGVBQWU7QUFBQSxFQUMzQztBQUNEOyIsCiAgIm5hbWVzIjogWyJtb2R1bGUiLCAibW9kdWxlIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAibmFtZSIsICJzdHlsZSIsICJnZXRDb21wdXRlZFN0eWxlIiwgImdldENvbXB1dGVkU3R5bGUiLCAid2luZG93IiwgIm1pbiIsICJtYXgiLCAidG9QYWRkaW5nT2JqZWN0IiwgInBvcHBlck9mZnNldHMiLCAibWluIiwgIm1heCIsICJvZmZzZXQiLCAiZWZmZWN0IiwgInBvcHBlciIsICJnZXRDb21wdXRlZFN0eWxlIiwgImVmZmVjdCIsICJpbnN0YW5jZSIsICJ3aW5kb3ciLCAiaGFzaCIsICJnZXRDb21wdXRlZFN0eWxlIiwgImdldENvbXB1dGVkU3R5bGUiLCAiY2xpcHBpbmdQYXJlbnRzIiwgImdldENvbXB1dGVkU3R5bGUiLCAicmVmZXJlbmNlIiwgInBvcHBlck9mZnNldHMiLCAib2Zmc2V0IiwgInBsYWNlbWVudHMiLCAicGxhY2VtZW50IiwgInBsYWNlbWVudHMiLCAicGxhY2VtZW50IiwgIl9sb29wIiwgIl9pIiwgImNoZWNrcyIsICJvZmZzZXQiLCAicG9wcGVyT2Zmc2V0cyIsICJvZmZzZXQiLCAibWluIiwgIm1heCIsICJmbiIsICJtZXJnZWQiLCAiZGVmYXVsdE1vZGlmaWVycyIsICJjcmVhdGVQb3BwZXIiLCAicmVmZXJlbmNlIiwgInBvcHBlciIsICJpbnN0YW5jZSIsICJvcHRpb25zIiwgImZuIiwgInN0YXRlIiwgImVmZmVjdCIsICJub29wRm4iLCAiaW5zdGFuY2UiLCAidCIsICJwYXRoIiwgIm1vZHVsZSIsICJjb3B5IiwgImZuIiwgInNvcnRPcHRpb25zIiwgIm9yZGVyIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAib3JkZXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgInBvc2l0aW9uIiwgIm9mZnNldCIsICJvcmRlciIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZm4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJyZWZyZXNoUHJlc2V0TGlzdCIsICJpbXBvcnRfb2JzaWRpYW4iLCAicmVmcmVzaFByZXNldExpc3QiLCAiX2EiLCAicGF0aCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIm9yZGVyIiwgImltcG9ydF9vYnNpZGlhbiIsICJwYXRoIiwgIm9yZGVyIl0KfQo=
